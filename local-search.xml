<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>My forth day started learning Kubernetes</title>
    <link href="/2025/11/09/My-forth-day-started-learning-Kubernetes/"/>
    <url>/2025/11/09/My-forth-day-started-learning-Kubernetes/</url>
    
    <content type="html"><![CDATA[<h3 id="Job"><a href="#Job" class="headerlink" title="Job"></a>Job</h3><ul><li>Short lived tasks</li><li>å»ºç«‹ä¸€å€‹æˆ–å¤šå€‹Podä¸¦ç¢ºä¿ä»–å€‘æˆåŠŸçµæŸ</li><li>Jobæ˜¯ä¸€å€‹ä¸€å€‹å»ºç«‹çš„ï¼Œæƒ³è¦åŒæ™‚å»ºç«‹å¤šå€‹Jobï¼ŒåŠ å…¥å¹³è¡ŒåŒ–åŠŸèƒ½ã€‚</li></ul><h4 id="Job-yaml"><a href="#Job-yaml" class="headerlink" title="Job yaml"></a>Job yaml</h4><p><img src="/image.png" alt="alt text"></p><h3 id="CronJob"><a href="#CronJob" class="headerlink" title="CronJob"></a>CronJob</h3><ul><li>An extension of the Job</li><li>Provides a method of executing jobs on a cron-like schedule</li><li>UTC only</li></ul><h4 id="CronJob-yaml"><a href="#CronJob-yaml" class="headerlink" title="CronJob yaml"></a>CronJob yaml</h4><p><img src="/image-1.png" alt="alt text"></p><h4 id="ç¢ºèªCrobJobæ˜¯å¦æˆåŠŸ"><a href="#ç¢ºèªCrobJobæ˜¯å¦æˆåŠŸ" class="headerlink" title="ç¢ºèªCrobJobæ˜¯å¦æˆåŠŸ"></a>ç¢ºèªCrobJobæ˜¯å¦æˆåŠŸ</h4><ul><li>æŸ¥çœ‹History<ul><li>æœ€å¾Œä¸‰å€‹æˆåŠŸçš„Jobæœƒè¢«ç•™å­˜</li><li>æœ€å¾Œä¸€å€‹å¤±æ•—çš„Jobæœƒè¢«ä¿ç•™</li><li><code>sucessfultJobsHistoryLimit</code>å¯ä»¥è®“ä½ ä¸ä¿ç•™æˆåŠŸçš„History (set to zero)</li></ul></li></ul><h3 id="Rolling-Updates"><a href="#Rolling-Updates" class="headerlink" title="Rolling Updates"></a>Rolling Updates</h3><ul><li>maxSurge åœ¨æ›´æ–°é€”ä¸­ï¼Œå¯ä»¥å¤šå»ºç«‹å¹¾å€‹Podç”¨ä¾†æ›´æ–°ã€‚</li><li>maxUnavailable åœ¨æ›´æ–°é€”ä¸­ï¼Œå¯ä»¥å…è¨±å¹¾å€‹Podæ˜¯ä¸å¯ç”¨çš„ã€‚</li></ul><h4 id="Blue-Green-Deployment"><a href="#Blue-Green-Deployment" class="headerlink" title="Blue-Green Deployment"></a>Blue-Green Deployment</h4><p><img src="/image-2.png" alt="alt text"></p><p>Challenge</p><ul><li>Does not solve thenew database schema problem entirely</li><li>You have  to over provision the cluster size</li></ul><h3 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h3><ul><li>IPæ˜¯éš¨æ©Ÿçš„ï¼Œç•¶Podè¢«Replaceä¹‹å¾Œé‚„èƒ½æ­£å¸¸é€£æ¥å…¶ä»–Podï¼Œéœ€è¦ä¾è³´Service</li><li>ä½¿ç”¨static IP, static DNS name, [servicename].[namespace].svc.cluster.local</li></ul><p>Service ç”¨ Selector é…å°Pod<br><img src="/image-3.png" alt="alt text"></p><p>é€éServiceè¨ªå•æŒ‡ä»¤Podï¼ŒServiceé‚„æä¾›äº†Load Balanceçš„åŠŸèƒ½ã€‚<br><img src="/image-4.png" alt="alt text"></p><p>Serviceåˆ†ç‚ºä¸‰ç¨®é¡å‹: ClusterIP(Default), NodePort, LoadBalancer</p><h4 id="ClusterIP"><a href="#ClusterIP" class="headerlink" title="ClusterIP"></a>ClusterIP</h4><ul><li>Default service that with Cluster internal visibility.</li><li><strong>port</strong> æ˜¯Serviceå¯ä»¥è¢«å¤–éƒ¨é€£ç·šçš„è·¯å¾‘ï¼Œ<strong>TargetPort</strong>æ˜¯Podå…§éƒ¨å¯ä»¥è¢«é€£ç·šçš„è·¯å¾‘ã€‚</li><li>ä½¿ç”¨Round Robinæ¼”ç®—æ³•åšLoad Balanced ï¼Œå¯ä»¥è¨­å®šSession affinity(é»æ€§å°è©±)ã€‚</li><li>ç”¨é€”æ˜¯æä¾›ä¸€å€‹æŒä¹…åŒ–çš„æ–¹æ³•çµ¦åŒClusterå…§çš„å…¶ä»–Podå‘¼å«ä½¿ç”¨ã€‚</li></ul><p><strong>ClusterIP yaml</strong><br><img src="/image-5.png" alt="alt text"></p><h4 id="NodePort"><a href="#NodePort" class="headerlink" title="NodePort"></a>NodePort</h4><ul><li>extend the ClusterIP service with internal and external visibility.</li><li>å¦‚æœä¸æŒ‡å®šå°å¤–port(30000~32767), k8sæœƒè‡ªå·±å¹«ä½ æŒ‡å®šä¸€å€‹ã€‚</li><li>Nodeå¿…é ˆè¦æœ‰å…¬é–‹çš„IP addressï¼Œä½¿ç”¨Node IP + nodePort é€£æ¥åˆ°ä½ çš„ service</li></ul><p><strong>åœ–ç¤º</strong><br><img src="/image-6.png" alt="alt text"></p><h4 id="LoadBalancer-L4-Ingress-L7"><a href="#LoadBalancer-L4-Ingress-L7" class="headerlink" title="LoadBalancer L4 &amp; Ingress L7"></a>LoadBalancer L4 &amp; Ingress L7</h4><ul><li>Make you expose your applications outside of the cluster</li><li>LoadlBalanceræ˜¯çµ¦Cloud Providerï¼ŒCloud Provideræœƒæä¾›ä¸€çµ„IPï¼Œé€£æ¥åˆ°ä½ çš„<code>port</code></li></ul><p>ğŸ§± Docker Desktop çš„ç‰¹ä¾‹<br>Docker Desktop æ²’æœ‰çœŸå¯¦çš„ Load Balancerï¼Œä¹Ÿæ²’æœ‰å¤–éƒ¨ Node IPã€‚ç‚ºäº†è®“é–‹ç™¼é«”é©—ç°¡åŒ–ï¼Œå®ƒæ¨¡æ“¬ LoadBalancer è¡Œç‚ºï¼š<br>ç•¶ä½ å»ºç«‹ä¸€å€‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span><br><span class="hljs-attr">ports:</span><br><span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br>  <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>Docker Desktop æª¢æ¸¬åˆ°å¾Œï¼Œæœƒå»ºç«‹ä¸€å€‹è½‰ç™¼è¦å‰‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">localhost:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span> â†’ ClusterIP:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯èªªï¼š<br>åœ¨ Docker Desktop ç’°å¢ƒè£¡ï¼Œã€ŒCluster å…§éƒ¨çš„ portï¼ˆ8080ï¼‰ã€è¢«ç¶å®šåˆ°äº†æœ¬æ©Ÿ localhost:8080ã€‚<br>æ‰€ä»¥ä½ æ‰“ localhost:8080ï¼Œå…¶å¯¦ç­‰æ–¼å¾å¤–éƒ¨ç›´æ¥é€£é€² ClusterIP:8080ã€‚</p><h3 id="Storage-Persistence"><a href="#Storage-Persistence" class="headerlink" title="Storage &amp; Persistence"></a>Storage &amp; Persistence</h3><ul><li>Persistent Volume(PV) <ul><li>Cluster wide &amp; managed by administrator</li></ul></li><li>Persistent Volume Claims(PVC)<ul><li>One to one mapping to a persistent volume</li><li>PVC can mount one or more pod on it.</li><li>All conctainers within the pod share the same value.</li></ul></li></ul><p><img src="/image-7.png" alt="alt text"></p><p>Persistent Volume &amp; Persistent Volume Claims<br><img src="/image-8.png" alt="alt text"></p><p>Recliam Policy</p><ul><li>Delete the data upon pod deleton.</li><li>You can set the retain policy to keep your data.</li></ul><p>Access Mode</p><ul><li><code>ReadWriteMany</code> The volume can be mounted as read-write by many pods</li><li><code>ReadOnlyMany</code> The volume can be mounted read-only by many pods</li><li><code>ReadWriteOnce</code> The volume can be mounted as read-write by a single pod, and the other pods are in read-only mode. The first one have the authoriy to implement write.</li></ul><p>åœ–ç¤º<br><img src="/image-9.png" alt="alt text"><br><img src="/image-10.png" alt="alt text"><br><img src="/image-11.png" alt="alt text"></p><p>Persistent Volume state</p><ul><li><code>Available</code> A free resource that is not yet bound to a claim.</li><li><code>Bound</code> The volume is bound to a claim</li><li><code>Released</code> The claim has been deleted, but the resource is not yet reclaimed by the cluster.</li><li><code>Failed</code> The volume has failed it automatic reclamation.</li></ul><h4 id="StorageClass"><a href="#StorageClass" class="headerlink" title="StorageClass"></a>StorageClass</h4><ul><li>represent a <strong>class storage</strong> <strong>offered by the admin</strong></li><li>A <em>abstraction</em> on top of an external storage resource.</li><li>No need to set a capacity</li><li>Eliminates the need for the admin to pre-provision a persistent volume.</li></ul><p><img src="/image-12.png" alt="alt text"></p><h4 id="StorageClass-yaml"><a href="#StorageClass-yaml" class="headerlink" title="StorageClass yaml"></a>StorageClass yaml</h4><p><img src="/image-13.png" alt="alt text"></p><p><img src="/image-14.png" alt="alt text"></p><h3 id="Application-Settings"><a href="#Application-Settings" class="headerlink" title="Application Settings"></a>Application Settings</h3><h4 id="ConfigMap"><a href="#ConfigMap" class="headerlink" title="ConfigMap"></a>ConfigMap</h4><ul><li>Decouple and externalize configuration.</li><li>static meaning that if you change values, the container will have to be restarted to get them.<br><img src="/image-15.png" alt="alt text"></li></ul><p>To solve the static problem, using Volume instead<br><img src="/image-16.png" alt="alt text"><br><img src="/image-17.png" alt="alt text"></p><h4 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h4><ul><li>Stored as base64 encoded string</li><li>Not secure</li><li>To upgrade security, you should try to implement RBAC authorization Policy. or store secrets elsewhere</li></ul><p><img src="/image-18.png" alt="alt text"></p><p><img src="/image-19.png" alt="alt text"></p><h3 id="Observalibilty"><a href="#Observalibilty" class="headerlink" title="Observalibilty"></a>Observalibilty</h3><ul><li>K8sæœƒåœ¨<code>Pod</code>ç•°å¸¸æ™‚é‡æ–°å»ºç«‹ä¸€å€‹<code>Pod</code>ã€ä½†æ˜¯å¦‚æœæ˜¯<code>Container</code>å¤±æ•—ä»–å°±ä¸æœƒåšä»»ä½•äº‹ã€‚</li><li><code>Readiness Probes</code>å¯ä»¥çŸ¥é“containerå•Ÿå‹•çš„æ™‚é–“ï¼Œå¯ä»¥å‘Šè¨´<code>Kubernetes</code>å…ˆç­‰å¾…ï¼Œæ‰æ¥å—æµé‡ã€‚</li><li><code>Liveness Probes</code> å¯ä»¥çŸ¥é“codeæ˜¯å¦æ­£åœ¨é‹è¡Œï¼Œä¹Ÿå¯ä»¥é‡å•Ÿcontainer</li></ul><ol><li>StartupProbe è«‹ k8s ç­‰å¾… 10så¾Œæ‰å°&#x2F;health ç™¼å‡º HTTP calls.ä¸¦æœ€å¤šå˜—è©¦ä¸‰æ¬¡ã€‚</li><li>ReadinessProbe è«‹ k8s åœ¨ 5 ç§’å¾Œé–‹å§‹æª¢æŸ¥æ˜¯å¦æº–å‚™å¥½ï¼Œæ¯åç§’ä½¿ç”¨ TCP socket é€£ç·šæ¸¬è©¦ã€‚å¤±æ•—æœƒåœæ­¢æ¥å— pod traffic</li><li>LivenessProbe è«‹k8såœ¨ 15 ç§’å¾Œé–‹å§‹æª¢æŸ¥æ˜¯å¦æ´»è‘—ï¼Œæ¯äºŒåç§’ä½¿ç”¨ TCP socket é€£ç·šæ¸¬è©¦ã€‚ å¤±æ•—æœƒé‡å•Ÿpod</li></ol><p><img src="/image-20.png" alt="alt text"></p><p><img src="/image-21.png" alt="alt text"><br><img src="/image-22.png" alt="alt text"><br><img src="/image-23.png" alt="alt text"><br><img src="/image-24.png" alt="alt text"></p><h3 id="Dashboards"><a href="#Dashboards" class="headerlink" title="Dashboards"></a>Dashboards</h3><ul><li>Lens</li><li>K9s</li></ul><h3 id="Scaling"><a href="#Scaling" class="headerlink" title="Scaling"></a>Scaling</h3><ul><li><code>Horizontal Pod AutoScaling</code> use the <strong>K8s Metrics Server</strong></li><li>Pods must have requests and limits defined</li><li>The HPA checks the Metrics Server every 30s.</li><li>Scale according to the min and max number or replicas defined</li><li>Cooldown &#x2F; Delay<ul><li>Prevent racing condition</li><li>Once a change has been made, HPA waits</li><li>By default, the delay on scale up events is 3 minutes, and the delay on scale down event is 5 minutes.</li></ul></li></ul><h4 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h4><p><img src="/image-25.png" alt="alt text"></p><h3 id="å¸¸è¦‹Kubernetes-æŒ‡ä»¤"><a href="#å¸¸è¦‹Kubernetes-æŒ‡ä»¤" class="headerlink" title="å¸¸è¦‹Kubernetes æŒ‡ä»¤"></a>å¸¸è¦‹Kubernetes æŒ‡ä»¤</h3><table><thead><tr><th></th><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td><code>kubectl create job [jobName] --image=[imageName]</code></td><td>The imperative way</td></tr><tr><td>2</td><td><code>kubectl get job</code></td><td>List jobs</td></tr><tr><td>3</td><td><code>kubectl describe job [jobName]</code></td><td>Get info</td></tr><tr><td>4</td><td><code>kubectl delete job [jobName]</code></td><td>Delete a job</td></tr><tr><td>5</td><td><code>kubectl create cronjob [jobName] --imgage=[imageName] --schedule=&quot;*/ * * * *&quot; -- bin/sh -c &quot;date;&quot;</code></td><td>The imperative way</td></tr><tr><td>6</td><td><code>kubectl get cf</code></td><td>List CrobJobs</td></tr><tr><td>7</td><td><code>kubectl describe cf [jobName]</code></td><td>Get info</td></tr><tr><td>7</td><td><code>kubectl delete cf [jobName]</code></td><td>Delete a cronJob</td></tr><tr><td></td><td><strong>Rolling Update</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl rollout status</code></td><td>Get the progress of the update</td></tr><tr><td>2</td><td><code>kubectl rollout history deployment [deployment]</code></td><td>Get the history of the deployment</td></tr><tr><td>3</td><td><code>kubectl rollout undo [deploymentName]</code></td><td>Rollback a deployment</td></tr><tr><td>4</td><td><code>kubectl rollout undo [deploymeny] --to-revision=[revision#]</code></td><td>Rollback to a revision number</td></tr><tr><td></td><td><strong>Service</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl expose po [podname] --port=80 --target-port=8080 --name=frontend</code></td><td>Create a service to expose a pod</td></tr><tr><td>2</td><td><code>kubectl expose deploy [deployName]</code></td><td>Create a service to expose a deployment</td></tr><tr><td>3</td><td><code>kubectl get svc</code></td><td>Get the service list</td></tr><tr><td>4</td><td><code>kubectl get svc -o wide</code></td><td>Get extra info</td></tr><tr><td>5</td><td><code>kubectl describe svc [servicename]</code></td><td>Describe the service</td></tr><tr><td>6</td><td><code>kubectl delete svc [servicename]</code></td><td>Delete the service using itâ€™s name</td></tr><tr><td></td><td><strong>NodePort cheatsheet</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl expose po [podname] --port=80 --targetPort=8080 --type=NodePort</code></td><td>Create a service to expose a pod(You can not set nodePort!!!)</td></tr><tr><td>2</td><td><code>kubectl expose deploy [deplyName] --port=80 --targetPort=8080 --type=NodePort --name=frontend</code></td><td>Create a service to expose a deployment</td></tr><tr><td></td><td><strong>PV&amp;PVC cheatsheet</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl get pv </code></td><td>Get the PV list</td></tr><tr><td>2</td><td><code>kubectl get pvc </code></td><td>Get the PVC list</td></tr><tr><td>3</td><td><code>kubectl describe pv [pvname]</code></td><td>Describe the PV</td></tr><tr><td>4</td><td><code>kubectl describe pvc [pvcname]</code></td><td>Describe the PVC</td></tr><tr><td>5</td><td><code>kubectl delete pv [pvname]</code></td><td>Delete the PV</td></tr><tr><td>6</td><td><code>kubectl delete pvc [pvcname]</code></td><td>Delete the PVC</td></tr><tr><td>7</td><td><code>kubectl get sc </code></td><td>List the StorageClass</td></tr><tr><td>8</td><td><code>kubectl describe sc [className]</code></td><td>Describe the StorageClass</td></tr><tr><td></td><td><strong>ApplicationSetting</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl create cm [name] --from-file=config.txt</code></td><td>Create configMap from file</td></tr><tr><td>2</td><td><code>kubectl create cm [name] --from-file=config/</code></td><td>Create configMap from folder</td></tr><tr><td>3</td><td><code>kubectl get cm</code></td><td>List the ConfigMaps</td></tr><tr><td>4</td><td><code>kubectl get cm [name] -o YAML</code></td><td>Save a ConfigMap in a YAML file</td></tr><tr><td>5</td><td><code>kubectl create secret generic [secretName] --from-literal=STATE=Michigan</code></td><td>The imperative way</td></tr><tr><td>6</td><td><code>kubectl get secrets </code></td><td>List the secrets</td></tr><tr><td></td><td><strong>HPA</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl autoscale deploy [name] --cpu-percent=50 --min=3 --max=10</code></td><td>The imperative way</td></tr><tr><td>2</td><td><code>kubectl get hpa</code></td><td>Get the auto scaler status</td></tr><tr><td>1</td><td><code>kubectl delete hpa [name]</code></td><td>Delete the HPA</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My third day started learning Kubernetes</title>
    <link href="/2025/11/08/My-third-day-started-learning-Kubernetes/"/>
    <url>/2025/11/08/My-third-day-started-learning-Kubernetes/</url>
    
    <content type="html"><![CDATA[<h3 id="Selector"><a href="#Selector" class="headerlink" title="Selector"></a>Selector</h3><ul><li>Use <code>labels</code> to identify, describe and gorup related sets of obejcts or resources. Itâ€™s key-value pair</li></ul><p>Service æœƒæ ¹æ“š selector æ‰¾å°‹åˆ°å°æ‡‰çš„ Podï¼Œåˆ©ç”¨<code>kubectl get ep [serviceName]</code>æŸ¥çœ‹serviceæ˜¯å¦æœ‰é€£æ¥åˆ°æŒ‡ä»¤çš„podã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span><br><span class="hljs-attr">metadata:</span><br> <span class="hljs-attr">name:</span> <span class="hljs-string">myservice</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">ports:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br>    <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span><br>  <span class="hljs-attr">selector:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">myapp</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">front-end</span><br><br><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">myapp-pod</span><br>  <span class="hljs-attr">labels:</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">myapp</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">front-end</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">containers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-container</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">resources:</span><br>      <span class="hljs-attr">requests:</span><br>        <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span><br>        <span class="hljs-attr">memory:</span> <span class="hljs-string">128Mi</span><br>      <span class="hljs-attr">limits:</span><br>        <span class="hljs-attr">cpu:</span> <span class="hljs-string">250m</span><br>        <span class="hljs-attr">memory:</span> <span class="hljs-string">256Mi</span>    <br>    <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></table></figure><p>æˆ‘åŸå…ˆä»¥ç‚ºport80å¯ä»¥ç›´æ¥é€£ç·šï¼Œä½†æ˜¯å¯¦éš›ä¸Šå‡ºéŒ¯äº†ã€‚å› ç‚ºtypeæ²’æœ‰è¨­å®šï¼Œé è¨­çš„ClusterIPæ˜¯æ²’æœ‰è¾¦æ³•å°å¤–é€£ç·šçš„ã€‚è§£æ±ºæ–¹æ³•æœ‰æ˜ç¢ºå®šç¾©typeï¼Œä»¥åŠä½¿ç”¨port forwardingæŠŠæœ¬åœ°çš„8080forwardåˆ°80ä¹‹ä¸­ã€‚<br>å¦‚: <code>kubectl port-forward service/myservice 8080:80</code></p><p>! &gt;&gt; ClusterIP é¡å‹ï¼Œå®ƒåªåœ¨ Kubernetes Cluster å…§éƒ¨å¯ç”¨ã€‚</p><h3 id="Multi-containers-Pods"><a href="#Multi-containers-Pods" class="headerlink" title="Multi-containers Pods"></a>Multi-containers Pods</h3><p>Helper function is separated from application code, which make it super clean.<br><img src="/img/sidecar-pattern.png" alt="main pod&amp;Helper pod"></p><p>Adapter simplify monitoring output for service<br><img src="/img/adapter-pattern.png" alt="main pod&amp;adapter"></p><p>Ambassador show the implementation of how function achieve, make App can more focus on the business thing that matter!<br><img src="/img/ambassador-pattern.png" alt="main pod&amp;ambassador"></p><h3 id="Network-Concept-about-Kubernetes"><a href="#Network-Concept-about-Kubernetes" class="headerlink" title="Network Concept about Kubernetes"></a>Network Concept about Kubernetes</h3><p><img src="/img/network-concept.png" alt="Network Concept"></p><h4 id="Pod-Communication"><a href="#Pod-Communication" class="headerlink" title="Pod Communication"></a>Pod Communication</h4><p><img src="/img/pod-communication.png" alt="Pod Communication"></p><h4 id="Inter-Pod-Communication"><a href="#Inter-Pod-Communication" class="headerlink" title="Inter Pod Communication"></a>Inter Pod Communication</h4><p><img src="/img/inter-pod-communication.png" alt="Inter Pod Communication"></p><h4 id="Pod-Communication-from-outside"><a href="#Pod-Communication-from-outside" class="headerlink" title="Pod Communication from outside"></a>Pod Communication from outside</h4><p>![Pod Communication from outside](&#x2F;img&#x2F;Pod Communication from outside.png)</p><h3 id="Workloads"><a href="#Workloads" class="headerlink" title="Workloads"></a>Workloads</h3><ul><li>A workload is an application running on Kubernetes<ul><li>Pod (Represents a set of running containers)</li><li>ReplicaSet</li><li>Deployment</li><li>DeamonSet (Provide node-local facilities, such as a storage driver or network plugin)</li><li>Tasks that run to completion<ul><li>Job</li><li>CronJob</li></ul></li></ul></li></ul><h4 id="ReplicaSet"><a href="#ReplicaSet" class="headerlink" title="ReplicaSet"></a>ReplicaSet</h4><ul><li>ç®¡ç†Pod Replicaèˆ‡ç”Ÿå‘½é€±æœŸï¼Œä»¥æä¾›è‡ªæˆ‘ä¿®å¾©èƒ½åŠ›ã€‚</li><li>ç›®çš„æ˜¯ç‚ºäº†ç¢ºä¿Podæ•¸é‡æ˜¯ç¬¦åˆé æœŸçš„ã€‚</li><li>ç•¶å¯ä»¥å»ºç«‹ReplicaSetæ™‚ï¼Œå»ºè­°å…ˆå»ºç«‹Deployments</li></ul><p><img src="/img/replicaSet.png" alt="replicaSet"></p><ul><li>é›–ç„¶Deploymentæœ‰åŒ…å«ReplicaSetçš„åŠŸèƒ½ï¼Œä½†é€™å…©è€…ä¸æ˜¯å°ç«‹çš„é—œä¿‚ï¼ŒåŸå› æ˜¯å› ç‚ºå»ºç«‹Deploymentæ™‚ï¼Œä¹Ÿæœƒéš±å«å»ºç«‹ReplicaSetã€‚</li></ul><h4 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h4><ul><li>A Deployment can <code>Self-heal</code>ã€<code>Scale</code>ã€<code>Update</code>ã€<code>Rollback</code>.</li><li>You create a deployment for each microservice</li></ul><h4 id="é€éReplicaSetèˆ‡Deploymentç®¡ç†Pods"><a href="#é€éReplicaSetèˆ‡Deploymentç®¡ç†Pods" class="headerlink" title="é€éReplicaSetèˆ‡Deploymentç®¡ç†Pods"></a>é€éReplicaSetèˆ‡Deploymentç®¡ç†Pods</h4><p><img src="/img/replicaSet-betweens.png" alt="alt text"></p><h4 id="Deployment-é‡è¦æ¬„ä½è§£èªª"><a href="#Deployment-é‡è¦æ¬„ä½è§£èªª" class="headerlink" title="Deployment é‡è¦æ¬„ä½è§£èªª"></a>Deployment é‡è¦æ¬„ä½è§£èªª</h4><p>![alt text](&#x2F;img&#x2F;additional deployment.png)</p><h4 id="Deployments-yaml"><a href="#Deployments-yaml" class="headerlink" title="Deployments yaml"></a>Deployments yaml</h4><p><img src="/img/deployment-yaml.png" alt="alt text"></p><h4 id="DaemonSet"><a href="#DaemonSet" class="headerlink" title="DaemonSet"></a>DaemonSet</h4><ul><li>ç¢ºä¿æ‰€æœ‰Nodeséƒ½æœƒé‹è¡Œä¸€å€‹ç‰¹å®šçš„Pod Replica</li><li>å—Scheduler controllerèª¿é…ï¼Œç”±daemon controlleråŸ·è¡Œ</li></ul><h4 id="Toleration-ç¦æ­¢åœ¨master-nodeä¸ŠåŸ·è¡Œ"><a href="#Toleration-ç¦æ­¢åœ¨master-nodeä¸ŠåŸ·è¡Œ" class="headerlink" title="Toleration ç¦æ­¢åœ¨master nodeä¸ŠåŸ·è¡Œ"></a>Toleration ç¦æ­¢åœ¨master nodeä¸ŠåŸ·è¡Œ</h4><p><img src="/img/tolerations.png" alt="alt text"></p><h4 id="StatefulSet"><a href="#StatefulSet" class="headerlink" title="StatefulSet"></a>StatefulSet</h4><ul><li>ç”¨æ–¼é‚£äº›å¿…é ˆè¦æŒä¹…åŒ–æˆ–ä¿å­˜çš„ç‹€æ…‹</li><li>èˆ‡Deploymentä¸åŒï¼ŒStatefultSetç¶­æŒè®“æ¯ä¸€å€‹Podséƒ½æœ‰ä¸€å€‹å›ºå®šçš„è¾¨èªèº«åˆ†ã€‚</li><li>æ¯ä¸€å€‹Podséƒ½æœ‰æŒä¹…åŒ–çš„ï¼Œå›ºå®šçš„è¾¨èªèº«åˆ†ã€‚</li><li>å¦‚æœPodæ›äº†ï¼Œä»–æœƒä½¿ç”¨åŒæ¨£çš„è¾¨èªèº«åˆ†æ›ä¸€å€‹æ–°çš„Podå‡ºä¾†ã€‚</li><li>ä»¥ 0<del>X çš„é †åºå»ºç«‹Podsï¼Œ ä»¥ X</del>0çš„é †åºåˆªé™¤Podsã€‚</li><li>Containersæœ¬èº«ä»¥Statelessè¨­è¨ˆçš„ã€‚æœ€å¥½æ˜¯ä½¿ç”¨Cloud provider database servicesä¾†å–ä»£StatefulSetåŠŸèƒ½</li><li>åˆªé™¤StatefulSetä¸æœƒåˆªé™¤PVCsï¼Œä½ å¿…é ˆæ‰‹å‹•åˆªé™¤ã€‚</li></ul><h4 id="æ€éº¼å»ºç«‹ä¸€å€‹StatefulSet-in-yaml"><a href="#æ€éº¼å»ºç«‹ä¸€å€‹StatefulSet-in-yaml" class="headerlink" title="æ€éº¼å»ºç«‹ä¸€å€‹StatefulSet in yaml"></a>æ€éº¼å»ºç«‹ä¸€å€‹StatefulSet in yaml</h4><p><img src="/img/how-to-create-statefulset.png" alt="alt text"></p><h4 id="åªåœ¨Masteré€²è¡Œå¯«å…¥çš„å¯¦ç¾æ–¹å¼ã€‚"><a href="#åªåœ¨Masteré€²è¡Œå¯«å…¥çš„å¯¦ç¾æ–¹å¼ã€‚" class="headerlink" title="åªåœ¨Masteré€²è¡Œå¯«å…¥çš„å¯¦ç¾æ–¹å¼ã€‚"></a>åªåœ¨Masteré€²è¡Œå¯«å…¥çš„å¯¦ç¾æ–¹å¼ã€‚</h4><p><img src="/img/statefulset-mechanism.png" alt="alt text"></p><h3 id="å¸¸è¦‹Kubernetes-æŒ‡ä»¤"><a href="#å¸¸è¦‹Kubernetes-æŒ‡ä»¤" class="headerlink" title="å¸¸è¦‹Kubernetes æŒ‡ä»¤"></a>å¸¸è¦‹Kubernetes æŒ‡ä»¤</h3><table><thead><tr><th></th><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td><code>kubectl create -f [yml file]</code></td><td>Create a pod</td></tr><tr><td>2</td><td><code>kubectl exec -it [podName] -c [containerName] -- /bin/sh</code></td><td>Exec into a container</td></tr><tr><td>3</td><td><code>kubectl logs [podname] -c [containerName]</code></td><td>Get the logs for a container</td></tr><tr><td>4</td><td><code>kubectl delete [yaml file] --force --grace-period=0</code></td><td>Clean up</td></tr><tr><td>5</td><td><code>kubectl apply -f [definition.yml]</code></td><td>Create a ReplicaSet</td></tr><tr><td>6</td><td><code>kubectl get rs</code></td><td>List all ReplicaSet</td></tr><tr><td>7</td><td><code>kubectl describe rs [rsName]</code></td><td>Get Info</td></tr><tr><td>8</td><td><code>kubectl delete -f [yml file]</code></td><td>Delete a ReplicaSet</td></tr><tr><td>9</td><td><code>kubectl delete rs [rsName]</code></td><td>Delete a ReplicaSet</td></tr><tr><td></td><td><strong>Deployment cheatsheet</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl create deploy [deploymentName] --image=[imageName] --replicas=X --port=80</code></td><td>The imperative way</td></tr><tr><td>2</td><td><code>kubectl get deploy</code></td><td>List deployments</td></tr><tr><td>3</td><td><code>kubectl describe deploy [deploymentName]</code></td><td>Get Info</td></tr><tr><td>4</td><td><code>kubectl get rs</code></td><td>List Replica</td></tr><tr><td>5</td><td><code>kubectl delete deploy [deploymentName]</code></td><td>Delete a deployment</td></tr><tr><td>6</td><td><code>kubectl get ds</code></td><td>List DaemonSets</td></tr><tr><td>7</td><td><code>kubectl describe ds [rsName]</code></td><td>Get info</td></tr><tr><td></td><td><strong>StatefulSet</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl get sts </code></td><td>List StatefulSets</td></tr><tr><td>2</td><td><code>kubectl describe sts [rsName]</code></td><td>Get info</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K8så¿«é€Ÿå¯¦æˆ°ï¼ˆäºŒï¼‰</title>
    <link href="/2025/11/07/My-second-day-started-learning-Kubernetes/"/>
    <url>/2025/11/07/My-second-day-started-learning-Kubernetes/</url>
    
    <content type="html"><![CDATA[<h3 id="Kubernetes-ä»‹ç´¹"><a href="#Kubernetes-ä»‹ç´¹" class="headerlink" title="Kubernetes ä»‹ç´¹"></a>Kubernetes ä»‹ç´¹</h3><p><code>Kubernetes</code>åˆç¨±<code>k8s</code>ç”±<code>Google</code>å»ºç«‹ï¼Œç™¼è¡¨æ–¼2015å¹´ï¼Œå¾ŒçºŒè¢«æç»çµ¦äº†Cloud Native Computing Foundation(CNCF)ã€‚ K8sæ˜¯å®¹å™¨èª¿åº¦å·¥å…·(Container Orchestration Tool)ï¼Œè¢«è¨­è¨ˆæˆä¸€å€‹é¬†è€¦åˆçš„å…ƒä»¶é›†åˆï¼Œæä¾›äº†åŒ…å«éƒ¨ç½²ã€ç¶­è­·ã€æ“´å±•çš„å·¥ä½œè² è¼‰åŠŸèƒ½ã€‚</p><h3 id="What-K8s-can-do"><a href="#What-K8s-can-do" class="headerlink" title="What K8s can do"></a>What K8s can do</h3><ul><li><strong>Service discovery</strong> and <strong>load balancing</strong></li><li>Storage orchestration (Local&amp;Cloud based)</li><li><em>Automated</em> <strong>rollouts</strong> and <strong>rollbacks</strong></li><li>Self-healing</li><li>Secret and configuration management</li><li>Use the same API across on-premise and every cloud providers.</li></ul><p>é¦–å…ˆæˆ‘å€‘ä¾†çœ‹Kubernetesçš„æ¶æ§‹åœ–ã€‚<br><img src="/img/kubernetes-architecture.png" alt="Architecture from Official Website"></p><h4 id="Kubernetes-Master"><a href="#Kubernetes-Master" class="headerlink" title="Kubernetes Master"></a>Kubernetes Master</h4><p>è² è²¬ç®¡ç†ã€èª¿åº¦ã€ç›£æ§èˆ‡å”èª¿æ‰€æœ‰Nodeçš„é‹ä½œã€‚<br>ä¸»è¦å…ƒä»¶å¦‚ä¸‹ï¼š</p><p>1ï¸âƒ£ <code>kube-apiserver</code> æ˜¯æ‰€æœ‰çµ„ä»¶ä¹‹é–“çš„ä¸­æ¨æºé€šä¸­å¿ƒã€‚<br>æ‰€æœ‰è«‹æ±‚ï¼ˆCLIã€UIã€æˆ–æ§åˆ¶å™¨ï¼‰éƒ½è¦é€éå®ƒã€‚<br>å®ƒè² è²¬é©—è­‰ã€æˆæ¬Šã€æ›´æ–° <strong>etcd</strong> ä¸­çš„ç‹€æ…‹è³‡æ–™ã€‚<br>å°±åƒ Kubernetes çš„ã€Œå…¥å£ API Gatewayã€ã€‚</p><p>2ï¸âƒ£ <code>etcd</code> æ˜¯ä¸€å€‹åˆ†æ•£å¼ <strong>Key-Value</strong> è³‡æ–™åº«ã€‚<br>å„²å­˜æ•´å€‹å¢é›†çš„ç‹€æ…‹ï¼ˆä¾‹å¦‚ <strong>Pod</strong>ã€<strong>Service</strong>ã€<strong>ConfigMap</strong> ç­‰è³‡è¨Šï¼‰ã€‚<strong>kube-apiserver</strong> èˆ‡å®ƒåŒæ­¥è³‡æ–™ï¼Œç¢ºä¿ç‹€æ…‹ä¸€è‡´æ€§ã€‚</p><p>3ï¸âƒ£ <code>kube-scheduler</code> æ±ºå®šã€Œ<strong>Pod æ‡‰è©²è·‘åœ¨å“ªå€‹ Node ä¸Š</strong>ã€ã€‚æ ¹æ“šè³‡æºå¯ç”¨æ€§ï¼ˆCPUã€Memoryã€Affinityã€Taints&#x2F;Tolerations ç­‰ï¼‰åˆ†é… Podã€‚</p><p>4ï¸âƒ£ <code>kube-controller-manager</code>å…§å«å¤šç¨®æ§åˆ¶å™¨ï¼ˆå¦‚ ReplicaSetControllerã€NodeControllerã€EndpointControllerï¼‰ã€‚<br>æ¯å€‹æ§åˆ¶å™¨éƒ½è² è²¬ç¶­æŒæŸå€‹ã€ŒæœŸæœ›ç‹€æ…‹ã€ï¼ˆä¾‹å¦‚ Pod æ•¸é‡ã€ç¯€é»å¥åº·ç‹€æ…‹ï¼‰ã€‚</p><p>5ï¸âƒ£ <code>cloud-controller-manager</code><br>é€™æ˜¯é‡å°é›²ç«¯å¹³å°ï¼ˆAWSã€GCPã€Azureï¼‰è¨­è¨ˆçš„æ§åˆ¶å™¨ã€‚<br>å®ƒæœƒå’Œé›²æœå‹™ API æºé€šï¼ˆå¦‚å»ºç«‹ Load Balancerã€æ›è¼‰é›²ç«¯ç£ç¢Ÿã€æ›´æ–° Node ç‹€æ…‹ï¼‰ã€‚</p><p>åœ–ä¸Šç´…è‰²ç®­é ­æŒ‡çš„éƒ¨åˆ†ï¼Œå°±æ˜¯å®ƒèˆ‡ã€ŒCloud Providerã€äº’å‹•çš„è·¯å¾‘ã€‚</p><h4 id="Kubernetes-Nodesï¼ˆå·¥ä½œç¯€é»ï¼‰"><a href="#Kubernetes-Nodesï¼ˆå·¥ä½œç¯€é»ï¼‰" class="headerlink" title="Kubernetes Nodesï¼ˆå·¥ä½œç¯€é»ï¼‰"></a>Kubernetes Nodesï¼ˆå·¥ä½œç¯€é»ï¼‰</h4><p>æ¯å€‹ Node éƒ½æ˜¯å¯¦éš›åŸ·è¡Œæ‡‰ç”¨å®¹å™¨ï¼ˆPodsï¼‰çš„ä¸»æ©Ÿã€‚</p><p>ä¸»è¦å…ƒä»¶å¦‚ä¸‹ï¼š</p><p>1ï¸âƒ£ <code>kubelet</code>Node ä¸Šçš„ä»£ç†ç¨‹å¼ã€‚<br>è² è²¬æ¥æ”¶ API Server ä¸‹ç™¼çš„ Pod Specï¼Œä¸¦ç¢ºä¿å®¹å™¨ä¾ç…§å®šç¾©åŸ·è¡Œã€‚<br>æŒçºŒä¸Šå ± Node ç‹€æ…‹ï¼ˆä¾‹å¦‚è³‡æºä½¿ç”¨é‡ã€å¥åº·ç‹€æ³ï¼‰ã€‚</p><p>2ï¸âƒ£ <code>kube-proxy</code>ç®¡ç† Node ä¸Šçš„ç¶²è·¯ã€‚<br>è² è²¬ Service çš„è™›æ“¬ IPï¼ˆClusterIPï¼‰èˆ‡ Pod ä¹‹é–“çš„æµé‡è½‰é€ã€‚<br>è®“ä¸åŒ Node ä¸Šçš„ Pod èƒ½äº’ç›¸é€šè¨Šã€‚</p><p>3ï¸âƒ£ <code>Container Runtime</code>é›–ç„¶åœ–ä¸Šæ²’ç•«ï¼Œä½†å¯¦éš›ä¸Šæ¯å€‹ Node éƒ½éœ€è¦ä¸€å€‹å®¹å™¨é‹è¡Œç’°å¢ƒï¼ˆä¾‹å¦‚ containerdã€CRI-Oï¼‰ã€‚<br>kubelet æœƒå‘¼å« runtime ä¾†å»ºç«‹ã€åœæ­¢å®¹å™¨ã€‚</p><h3 id="åè©è§£é‡‹"><a href="#åè©è§£é‡‹" class="headerlink" title="åè©è§£é‡‹"></a>åè©è§£é‡‹</h3><ul><li><code>Container</code>åœ¨<code>Pod</code>ä¸­è¢«é‹è¡Œï¼Œ<code>Pod</code>åœ¨<code>Node</code>ä¸­è¢«é‹è¡Œï¼Œæ‰€æœ‰<code>Node</code>ä¾†è‡ªä¸€å€‹<code>Cluster</code>ã€‚</li><li><code>K8s Context</code>æ˜¯ä¸€çµ„è¨­å®šï¼ŒåŒ…å«<strong>è¦é€£ç·šçš„Kubernetes Cluster</strong>ã€<strong>ä½¿ç”¨è€…èº«ä»½èˆ‡æ†‘è­‰</strong>ã€<strong>é è¨­å‘½åç©ºé–“</strong>ã€‚</li></ul><h3 id="Namespaces"><a href="#Namespaces" class="headerlink" title="Namespaces"></a>Namespaces</h3><p>Namespace æ˜¯ Kubernetes ç”¨ä¾†é‚è¼¯åˆ†éš”è³‡æºçš„æ©Ÿåˆ¶ã€‚å®ƒçš„ä¸»è¦ç”¨é€”æ˜¯ï¼š</p><ul><li><strong>è³‡æºéš”é›¢</strong>ï¼šä¸åŒåœ˜éšŠã€å°ˆæ¡ˆæˆ–ç’°å¢ƒï¼ˆå¦‚ devã€stagingã€prodï¼‰å¯ä»¥ä½¿ç”¨ä¸åŒçš„ Namespaceï¼Œäº’ä¸å¹²æ“¾ã€‚</li><li><strong>æ¬Šé™æ§åˆ¶</strong>ï¼šæ­é… RBACï¼ˆRole-Based Access Controlï¼‰å¯ä»¥è¨­å®šèª°èƒ½æ“ä½œå“ªäº› Namespaceã€‚</li><li><strong>è³‡æºé…é¡</strong>ï¼šå¯ä»¥å°æ¯å€‹ Namespace è¨­å®š CPUã€è¨˜æ†¶é«”ç­‰ä½¿ç”¨ä¸Šé™ã€‚</li><li><strong>çµ„ç¹”ç®¡ç†</strong>ï¼šè®“é›†ç¾¤ä¸­çš„è³‡æºï¼ˆPodã€Serviceã€Deployment ç­‰ï¼‰æ›´æœ‰çµæ§‹åœ°åˆ†é¡ã€‚</li></ul><h3 id="Nodes"><a href="#Nodes" class="headerlink" title="Nodes"></a>Nodes</h3><ul><li>A node pool is a group virtual machines, all with the same size.</li><li>A cluster can have multple node pools<ul><li>These pools can host different sizes of VMs</li><li>Each pool can be autoscaled independently from the other pools</li></ul></li></ul><p><img src="/img/k8s-architecure-node.png" alt="k8s-architecure-node"></p><h3 id="Pods"><a href="#Pods" class="headerlink" title="Pods"></a>Pods</h3><ul><li>K8sä¸­æœ€å°çš„éƒ¨ç½²å–®ä½</li><li>å°è£äº†æ‡‰ç”¨ç¨‹å¼å®¹å™¨ï¼Œä¸€å€‹<em>Pod</em>å¯åŒ…å«ä¸€å€‹æˆ–å¤šå€‹<em>container</em></li><li><em>Pod</em>ä¸­çš„<em>Container</em>å…±äº«<strong>ip address</strong>, <strong>mounted volumes</strong></li><li><em>Pod</em>ä¸­çš„<em>Container</em>ä½¿ç”¨localhostæºé€š</li></ul><p><img src="/img/k8s-architecture-pods.png" alt="K8s Architecture Pods"></p><p>ä¸€å€‹K8sçš„åŸ·è¡Œé€±æœŸæœƒåƒæ˜¯é€™æ¨£ã€‚<br><img src="/img/pod-creation.png" alt="K8s pod creation"></p><p>æˆ–æ˜¯é€™æ¨£<br><img src="/img/pod-deletion.png" alt="K8s pod deletion"></p><h4 id="Pod-state"><a href="#Pod-state" class="headerlink" title="Pod state"></a>Pod state</h4><ul><li><strong>Pending</strong> - Accepted but not yet created</li><li><strong>Running</strong> - Bound to a node</li><li><strong>Succeeded</strong> - Exited with status 0</li><li><strong>Failed</strong> - All containers exit and at least one exited with nono-zero status.</li><li><strong>Unknown</strong> - Communication issues with the pod</li><li><strong>CrashLoopBackOff</strong> - Started, crashed, started again, and then crashed again.</li></ul><h4 id="Define-and-run-a-pod"><a href="#Define-and-run-a-pod" class="headerlink" title="Define and run a pod"></a>Define and run a pod</h4><p>See yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span><br><span class="hljs-attr">kind:</span> <span class="hljs-string">Pod</span> <span class="hljs-comment"># Specify the type of resource you want to create</span><br><span class="hljs-attr">metadata:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">myapp-pod</span><br>  <span class="hljs-attr">labels:</span> <span class="hljs-comment"># Used to identify, describe and group related sets of objects or resources.</span><br>    <span class="hljs-attr">app:</span> <span class="hljs-string">myapp</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">front-end</span><br><span class="hljs-attr">spec:</span><br>  <span class="hljs-attr">containers:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-container</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span> <span class="hljs-comment"># image (pull from docker Hub)</span><br>    <span class="hljs-attr">resources:</span><br>      <span class="hljs-attr">requests:</span><br>        <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span><br>        <span class="hljs-attr">memory:</span> <span class="hljs-string">128Mi</span><br>      <span class="hljs-attr">limits:</span><br>        <span class="hljs-attr">cpu:</span> <span class="hljs-string">250m</span><br>        <span class="hljs-attr">memory:</span> <span class="hljs-string">256Mi</span>    <br>    <span class="hljs-attr">ports:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span> <span class="hljs-comment"># port listening</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">http</span><br>      <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span><br>    <span class="hljs-attr">env:</span> <span class="hljs-comment"># Environment variables</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">DBCON</span><br>      <span class="hljs-attr">value:</span> <span class="hljs-string">myconnectionstring</span><br></code></pre></td></tr></table></figure><h4 id="æœ‰æ™‚æˆ‘å€‘æƒ³è¦åœ¨Podå•Ÿå‹•ä¹‹å‰å…ˆåˆå§‹åŒ–å¦å¤–ä¸€äº›Pod"><a href="#æœ‰æ™‚æˆ‘å€‘æƒ³è¦åœ¨Podå•Ÿå‹•ä¹‹å‰å…ˆåˆå§‹åŒ–å¦å¤–ä¸€äº›Pod" class="headerlink" title="æœ‰æ™‚æˆ‘å€‘æƒ³è¦åœ¨Podå•Ÿå‹•ä¹‹å‰å…ˆåˆå§‹åŒ–å¦å¤–ä¸€äº›Pod"></a>æœ‰æ™‚æˆ‘å€‘æƒ³è¦åœ¨Podå•Ÿå‹•ä¹‹å‰å…ˆåˆå§‹åŒ–å¦å¤–ä¸€äº›Pod</h4><ul><li>ä½¿ç”¨<strong>init Container</strong>ï¼Œ<strong>Init Container</strong>å¯åŒ…å«å¤šå€‹ï¼Œä»»ä¸€å¤±æ•—å°±ä¸æœƒé‹è¡Œä¸‹ä¸€å€‹ã€‚</li><li>å¦‚æœ<strong>Init Container</strong>å¤±æ•—ï¼Œ<strong>kubelet</strong>æœƒé‡å•Ÿå®ƒç›´åˆ°æˆåŠŸç‚ºæ­¢ã€‚æˆ–è€…ä½¿ç”¨<strong>restartPolicy</strong>è¨­å®šèª¿æ•´æˆ<em>Never</em></li></ul><h3 id="å¸¸è¦‹Kubernetes-æŒ‡ä»¤"><a href="#å¸¸è¦‹Kubernetes-æŒ‡ä»¤" class="headerlink" title="å¸¸è¦‹Kubernetes æŒ‡ä»¤"></a>å¸¸è¦‹Kubernetes æŒ‡ä»¤</h3><hr><table><thead><tr><th></th><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td><code>kubectl config current-context</code></td><td>Get the current context</td></tr><tr><td>2</td><td><code>kubectl config get-contexts</code></td><td>List all context</td></tr><tr><td>3</td><td><code>kubectl config use-context [contextName]</code></td><td>Set the current context</td></tr><tr><td>4</td><td><code>kubectl ctx [contextName]</code></td><td>shortcut</td></tr><tr><td>5</td><td><code>kubectl config delete-context [contextName]</code></td><td>Delete a context from the config file</td></tr><tr><td>6</td><td><code>kubectl create -f deploy.yaml</code></td><td>Create deployment with yaml</td></tr><tr><td>7</td><td><code>kubectl delete deployment [deploymentName]</code></td><td>Delete the deployment</td></tr><tr><td>8</td><td><code>kubectl get deployment</code></td><td>List all deployments</td></tr><tr><td></td><td><strong>NameSpace</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl get namespace</code></td><td>List all namespaces</td></tr><tr><td>2</td><td><code>kubectl get ns</code></td><td>shortcut</td></tr><tr><td>3</td><td><code>kubectl config set-context --current --namespace=[namespaceName]</code></td><td>Set the current context to tuse a namespace</td></tr><tr><td>4</td><td><code>kubectl create ns [namespaceName]</code></td><td>Create a namespaces</td></tr><tr><td>5</td><td><code>kubectl delete ns [namespaceName]</code></td><td>Delete a namespaces</td></tr><tr><td>6</td><td><code>kubectl get pods --all-namespace</code></td><td>List all pods in all namespaces</td></tr><tr><td>7</td><td><code>kubectl config set-context --current --namespace=[namespaceName]</code></td><td>Change the namespaces to the docker one and get the pods list</td></tr><tr><td></td><td><strong>Nodes</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl get nodes</code></td><td>list all nodes</td></tr><tr><td>2</td><td><code>kubectl describe node</code></td><td>Get info about the node</td></tr><tr><td></td><td><strong>Pods</strong></td><td></td></tr><tr><td>1</td><td><code>kubectl create -f [*.yml]</code></td><td>Create a pod</td></tr><tr><td>2</td><td><code>kubectl run [podName] --image=[imageName] -- /bin/sh -c &quot;sleep 3600&quot;</code></td><td>Run a pod</td></tr><tr><td>3</td><td><code>kubectl get pods</code></td><td>list all running pods</td></tr><tr><td>4</td><td><code>kubectl get pods -o wide</code></td><td>same but with more info</td></tr><tr><td>5</td><td><code>kubectl describe pod [podName]</code></td><td>show pod info</td></tr><tr><td>6</td><td><code>kubectl get pods [podName] -o yaml </code></td><td>Extract the pod definition in YAML and save it to a file</td></tr><tr><td>7</td><td><code>kubectl exec -it [podName] -- sh</code></td><td>Enter into interactive mode</td></tr><tr><td>8</td><td><code>kubectl delete -f [pod-definition.yml]</code></td><td>Delete a pod</td></tr><tr><td>9</td><td><code>kubectl delete pod [podName]</code></td><td>Delete a pod</td></tr></tbody></table><h3 id="å­¸ç¿’è³‡æº"><a href="#å­¸ç¿’è³‡æº" class="headerlink" title="å­¸ç¿’è³‡æº"></a>å­¸ç¿’è³‡æº</h3><ol><li>(<a href="https://www.youtube.com/watch?v=kTp5xUtcalw">https://www.youtube.com/watch?v=kTp5xUtcalw</a>)</li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K8så¿«é€Ÿå¯¦æˆ°ï¼ˆä¸€ï¼‰</title>
    <link href="/2025/11/06/My-first-day-started-learning-Kubernetes/"/>
    <url>/2025/11/06/My-first-day-started-learning-Kubernetes/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯æˆ‘é–‹å§‹å­¸ç¿’Kubernetesçš„ç¬¬ä¸€å¤©ï¼Kubernetes(åˆç¨±K8s)åœ¨ç¾ä»£çš„é–‹ç™¼ç’°å¢ƒä¸­ï¼Œå·²ç¶“å¹¾ä¹è®Šæˆäº†å¿…å‚™æŠ€èƒ½äº†ã€‚ä¹Ÿå› æ­¤å¿«é€ŸæŒæ¡Kubernetesçš„åŠŸèƒ½èˆ‡ç‰¹æ€§ä¹Ÿè®Šå¾—æ›´åŠ é‡è¦ï¼Œé‚£éº¼äº‹ä¸å®œé²ï¼Œæˆ‘å€‘å°±é–‹å§‹ä¾†å­¸ç¿’K8så§ï¼</p><hr><p>â€¦æˆ‘æœ¬ä¾†æ˜¯æƒ³é€™éº¼èªªçš„ï¼Œä½†æ˜¯åœ¨æåˆ°K8sä¹‹å‰ï¼Œæˆ‘å¸Œæœ›å¯ä»¥å…ˆè§£é‡‹ç‚ºç”šéº¼K8sæœƒè®Šå¾—æ›´åŠ é‡è¦ï¼Œè¦è«‡è«‡K8sçš„å´›èµ·ï¼Œæˆ‘æƒ³å…ä¸äº†æåˆ°ç¾ä»£ç³»çµ±æ¶æ§‹ã€‚K8såœ¨<strong>å¾®æœå‹™</strong>èˆˆèµ·ä¹‹å¾Œï¼Œè®Šå¾—ç›¸ç•¶çŸ¥åï¼ŒåŸå› æ˜¯å› ç‚ºå¾®æœå‹™çš„è¦æ±‚æœ‰ä¸€å€‹ç‰¹é»â”€â”€â€æœå‹™éœ€è¦å¯ä»¥ç¨ç«‹éƒ¨ç½²â€ã€‚</p><p><strong>å¾®æœå‹™</strong>ç°¡å–®ä¾†èªªï¼Œå°±æ˜¯å°‡å„å€‹ç³»çµ±çš„åŠŸèƒ½ä¾ç…§æ¥­å‹™é‚Šç•Œåˆ‡å‰²ä¾†é”åˆ°è·è²¬åˆ†æ˜ï¼Œä¸¦ä¸”éœ€è¦ç¬¦åˆä¸å°‘ç‰¹æ€§ï¼Œå°±å¯ä»¥è¢«ç¨±ç‚ºå¾®æœå‹™ã€‚</p><p>åœ¨å¤§å‹ç³»çµ±ä¸­å¦‚æœæ¡ç”¨å¾®æœå‹™è¨­è¨ˆçš„è©±ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œå°‡æœƒå› åŠŸèƒ½åˆ‡åˆ†ï¼Œç”¢ç”Ÿå¯èƒ½æ•¸ä»¥ç™¾è¨ˆçš„æœå‹™ï¼Œè€Œé€™äº›æœå‹™è‹¥æ˜¯ä¸€å€‹å€‹æ‰‹å‹•ç®¡ç†çš„è©±ï¼Œç¶­é‹å·¥ç¨‹å¸«æ‡‰è©²æœƒæŠ“ç‹‚ï¼Œæ–¼æ˜¯Kubernetesä¾¿æ˜¯ç”¨ä¾†ç°¡åŒ–è¤‡é›œçš„å®¹å™¨éƒ¨ç½²åŠŸèƒ½ï¼Œæä¾›ä¸€é€£ä¸²ç°¡æ˜“çš„è¨­å®šè®“è»Ÿé«”çš„éƒ¨ç½²å¯ä»¥å¿«é€Ÿã€å¯¦ç¾è‡ªå‹•åŒ–ã€‚</p><h2 id="å–®é«”å¼æ¶æ§‹èˆ‡å¾®æœå‹™"><a href="#å–®é«”å¼æ¶æ§‹èˆ‡å¾®æœå‹™" class="headerlink" title="å–®é«”å¼æ¶æ§‹èˆ‡å¾®æœå‹™"></a>å–®é«”å¼æ¶æ§‹èˆ‡å¾®æœå‹™</h2><p><code>å–®é«”å¼æ¶æ§‹(Monolithic)</code>å®šç¾©æ˜¯â”€â”€åˆ©ç”¨å–®ä¸€å€‹å…ƒä»¶å»ºæ§‹ï¼Œä»¥ä¸€å€‹å–®ä¸€å…ƒä»¶éƒ¨ç½²ï¼Œå› ç‚ºæ‰€æœ‰åŠŸèƒ½éƒ½å¡åœ¨ä¸€èµ·ï¼Œå¸¸å¸¸æœ‰ç‰½ä¸€é«®å‹•å…¨èº«çš„å•é¡Œã€‚</p><p><code>å¾®æœå‹™(Microservice)</code>æ˜¯ä¸€å€‹<strong>æœå‹™å°å‘æ¶æ§‹(Service-Orient architecture)<strong>çš„è®Šå½¢ï¼Œå°‡æœå‹™è§£æ§‹ç‚ºä¸€å€‹å€‹</strong>é¬†è€¦åˆ</strong>çš„æ‡‰ç”¨ç¨‹å¼å…ƒä»¶ã€‚åœ¨å¾®æœå‹™æ¶æ§‹ä¸­ï¼Œæœå‹™æ‡‰è©²æ˜¯<strong>è¼•é‡åŒ–</strong>ä¸”<strong>å¯ç¨ç«‹éƒ¨ç½²</strong>çš„ã€‚<br>æ­¤å¤–é‚„æœ‰ä»¥ä¸‹ç‰¹è‰²:</p><ul><li>å–®å€‹å…ƒä»¶æ“æœ‰å–®ä¸€è·è²¬ï¼Œæ¬Šè²¬åˆ†æ˜</li><li>ç¨ç«‹æ“´å±•ï¼Œä¸éœ€è€¦åˆå…¶ä»–å…ƒä»¶</li><li>å¯ç”±ä¸åŒTeams, é–‹ç™¼èªè¨€, ä¸åŒå¹³å°éƒ¨ç½²ä¾†éƒ¨ç½²ï¼Œéå¸¸è‡ªç”±</li><li>ä¸€å€‹å¾®æœå‹™å¯ä»¥æ“æœ‰è‡ªå·±çš„è³‡æ–™åº«</li></ul><p>Kubernetesæä¾›äº†å®Œæ•´çš„ä»‹é¢å»ç®¡ç†æˆ‘å€‘çš„æœå‹™ï¼Œæˆ‘å€‘çš„ç¨‹å¼ç¢¼é€šå¸¸æœƒç¶“ç”±Dockeræ‰“åŒ…ä¸€å€‹å¯ä»¥åœ¨å„å€‹ç’°å¢ƒéƒ½å¯ä»¥é‹ä½œçš„å®¹å™¨(Container)ã€‚</p><h2 id="ç”šéº¼æ˜¯Docker"><a href="#ç”šéº¼æ˜¯Docker" class="headerlink" title="ç”šéº¼æ˜¯Docker?"></a>ç”šéº¼æ˜¯Docker?</h2><p><code>Docker</code>æ˜¯ä¸€å€‹é–‹æºçš„<code>Container</code>åŸ·è¡Œç’°å¢ƒï¼Œæ”¯æ´Mac, Windowsèˆ‡Linuxï¼Œå¯ä»¥ç”¨Command Line Toolå»æ§åˆ¶ã€‚æ‡‰ç”¨ç¨‹å¼æœƒé€é<code>Dockerfile</code>å»å»ºæ§‹Container Imageï¼Œé€éContainerä½¿ä½ çš„ç¨‹å¼ç¢¼å¯ä»¥è·¨ç’°å¢ƒåœ°åŸ·è¡Œã€‚</p><h2 id="ç”šéº¼æ˜¯Container"><a href="#ç”šéº¼æ˜¯Container" class="headerlink" title="ç”šéº¼æ˜¯Container?"></a>ç”šéº¼æ˜¯Container?</h2><p>Containeræ˜¯ä¸€å€‹è»Ÿé«”å–®å…ƒåŒ…å«äº†ä½ çš„ç¨‹å¼ç¢¼ã€åŸ·è¡Œç’°å¢ƒ(Runtime)ã€System Toolsã€System Libraryã€‚ä½¿ç”¨Dockeréƒ¨ç½²æœ‰è¨±å¤šå¥½è™•ï¼Œé™¤äº†å¹¾ä¹ä¸æœƒé‡åˆ°ç’°å¢ƒå•é¡Œå¤–ï¼Œä¸€å€‹ContaineråŒ…å«è¨±å¤šImage Layerï¼Œé€™ä»£è¡¨å¦‚æœä½ åªæ”¹äº†ä¸€éƒ¨åˆ†çš„åŠŸèƒ½ï¼ŒDockeræœƒåªé‡æ–°ç·¨è­¯ä½ æ›´å‹•çš„é‚£éƒ¨åˆ†ï¼Œä½¿ç”¨Image Layerå¯ä»¥å¤§å¤§æå‡åŸ·è¡Œ&#x2F;éƒ¨ç½²çš„æ•ˆç‡ã€‚</p><p>å¦‚æœæ²’å­¸éæˆ–æ˜¯ä¸çŸ¥é“Dockeræ˜¯ç”šéº¼çš„äººå¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç« (<a href="https://ithelp.ithome.com.tw/articles/10319089" title="Title">What is Docker?</a>)</p><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><p>åœ¨Dockerä¸­ï¼Œæˆ‘å€‘ä¹Ÿç¶“å¸¸ä½¿ç”¨Docker Composeé€™å€‹åŠŸèƒ½ä¾†ç®¡ç†æˆ‘å€‘çš„Containerï¼Œä½ å¯ä»¥æŠŠDockeræƒ³æˆä¸€å€‹è…³æœ¬ï¼Œåªè¦ä¸€é‹è¡Œå°±åŸ·è¡Œå¤šå€‹Containerï¼Œè¨­å®šé€£ç·šã€ç’°å¢ƒåƒæ•¸ç­‰ç­‰ï¼Œå¹«ä½ ä¸€æ¬¡æŠŠæ•´å€‹ç’°å¢ƒåšåˆ°å¥½ï¼Œç°¡å–®ä¾†èªªï¼Œå°±æ˜¯é€™éº¼è¬èƒ½çš„åŠŸèƒ½ã€‚</p><h2 id="Docker-Compose-ç‰¹è‰²"><a href="#Docker-Compose-ç‰¹è‰²" class="headerlink" title="Docker Compose ç‰¹è‰²"></a>Docker Compose ç‰¹è‰²</h2><ul><li>ä½¿ç”¨ <strong>YAML</strong> æ ¼å¼çš„æª”æ¡ˆä¾†å®šç¾©</li><li>å®šç¾©èˆ‡åŸ·è¡Œå¤šå€‹Containerçš„æ‡‰ç”¨ç¨‹å¼</li><li>é€šå¸¸ä½¿ç”¨Docker CLI ä¾†æ§åˆ¶èˆ‡åŸ·è¡Œ</li></ul><p>ä¸€å€‹ç°¡æ˜“çš„Docker Composeæœƒåƒæ˜¯é€™æ¨£ï¼š<br><img src="/img/image-1.png" alt="Docker Compose yaml"></p><p>è€ŒDocker Composeä¹Ÿçµ•éè¬èƒ½ï¼Œé€šå¸¸ä¾†èªªï¼ŒDocker Composeçš„ä½¿ç”¨æƒ…å¢ƒå¦‚ä¸‹ï¼š</p><ol><li>ä¸éœ€è¦åƒæ˜¯<code>K8s</code>é‚£æ¨£é«˜ç´šçš„èª¿åº¦çš„æœå‹™ã€‚</li><li>é–‹ç™¼ç’°å¢ƒèˆ‡æ¸¬è©¦ç’°å¢ƒã€‚</li><li>å¤–éƒ¨æœå‹™æ°å¥½æ”¯æ´Docker Compose åŠŸèƒ½çš„ï¼Œæ¯”æ–¹èªªï¼š<ul><li>Azure App Service</li><li>AWS ECS</li><li>Virtual Machine</li></ul></li></ol><h3 id="è£œå……ï¼šDocker-Composeçš„è³‡æºç®¡ç†"><a href="#è£œå……ï¼šDocker-Composeçš„è³‡æºç®¡ç†" class="headerlink" title="è£œå……ï¼šDocker Composeçš„è³‡æºç®¡ç†"></a>è£œå……ï¼šDocker Composeçš„è³‡æºç®¡ç†</h3><p><img src="/img/image-2.png" alt="redis resource limits"></p><h3 id="è£œå……ï¼šDocker-Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç†-å…§éƒ¨é è¨­å€¼ä¸¦å¯è¢«å¤–éƒ¨æŒ‡ä»¤è¦†è“‹"><a href="#è£œå……ï¼šDocker-Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç†-å…§éƒ¨é è¨­å€¼ä¸¦å¯è¢«å¤–éƒ¨æŒ‡ä»¤è¦†è“‹" class="headerlink" title="è£œå……ï¼šDocker Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç† (å…§éƒ¨é è¨­å€¼ä¸¦å¯è¢«å¤–éƒ¨æŒ‡ä»¤è¦†è“‹)"></a>è£œå……ï¼šDocker Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç† (å…§éƒ¨é è¨­å€¼ä¸¦å¯è¢«å¤–éƒ¨æŒ‡ä»¤è¦†è“‹)</h3><p><img src="/img/image-3.png" alt="env variable"></p><h3 id="è£œå……ï¼šDocker-Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç†-äº¤çµ¦å¤–éƒ¨å®šç¾©"><a href="#è£œå……ï¼šDocker-Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç†-äº¤çµ¦å¤–éƒ¨å®šç¾©" class="headerlink" title="è£œå……ï¼šDocker Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç† (äº¤çµ¦å¤–éƒ¨å®šç¾©)"></a>è£œå……ï¼šDocker Composeçš„ç’°å¢ƒåƒæ•¸ç®¡ç† (äº¤çµ¦å¤–éƒ¨å®šç¾©)</h3><p><img src="/img/image-4.png" alt="env variable2"></p><h3 id="è£œå……ï¼šDocker-Composeçš„ç¶²è·¯"><a href="#è£œå……ï¼šDocker-Composeçš„ç¶²è·¯" class="headerlink" title="è£œå……ï¼šDocker Composeçš„ç¶²è·¯"></a>è£œå……ï¼šDocker Composeçš„ç¶²è·¯</h3><p><img src="/img/image-5.png" alt="Docker Internal&amp;External Networking"></p><p>Appå¯ä»¥è¨­å®šå±¬æ–¼çš„Networkï¼Œé”åˆ°å…¬æœ‰å­ç¶²è·¯ã€ç§æœ‰å­ç¶²è·¯çš„æ•ˆæœã€‚<br><img src="/img/image-6.png" alt="Docker Separate Networking"></p><h3 id="è£œå……ï¼šDocker-Composeçš„åŸ·è¡Œé †åº"><a href="#è£œå……ï¼šDocker-Composeçš„åŸ·è¡Œé †åº" class="headerlink" title="è£œå……ï¼šDocker Composeçš„åŸ·è¡Œé †åº"></a>è£œå……ï¼šDocker Composeçš„åŸ·è¡Œé †åº</h3><p>ä½¿ç”¨ <code>Depends</code> å¯ä»¥ç¢ºä¿ä¸€å€‹æœå‹™æœƒåœ¨å¦ä¸€å€‹æœå‹™å•Ÿå‹•å¾Œæ‰è·Ÿè‘—å•Ÿå‹•ï¼Œé¿å…äº†æœªåˆå§‹åŒ–å®Œæˆé€ æˆçš„éŒ¯èª¤ã€‚<br><img src="/img/image-7.png" alt="Load Process"></p><h3 id="è£œå……ï¼šDocker-Composeçš„å„²å­˜"><a href="#è£œå……ï¼šDocker-Composeçš„å„²å­˜" class="headerlink" title="è£œå……ï¼šDocker Composeçš„å„²å­˜"></a>è£œå……ï¼šDocker Composeçš„å„²å­˜</h3><p>ä½ å¯ä»¥å»ºç«‹ä¸€å€‹<code>Volume</code>ä¸¦æŠŠå®ƒæ›è¼‰åˆ°ä¸€å€‹Containerä¸Šé¢ï¼Œè®“Containeré”åˆ°æŒä¹…åŒ–å„²å­˜ã€‚<br><img src="/img/image-8.png" alt="alt text"></p><h2 id="Docker-Compose-Restart-Policy-é‡å•Ÿç­–ç•¥"><a href="#Docker-Compose-Restart-Policy-é‡å•Ÿç­–ç•¥" class="headerlink" title="Docker Compose Restart Policy é‡å•Ÿç­–ç•¥"></a>Docker Compose Restart Policy é‡å•Ÿç­–ç•¥</h2><p>ğŸ§  è£œå……å»ºè­°</p><ul><li>é–‹ç™¼ç’°å¢ƒï¼šé€šå¸¸ç”¨ no æˆ– on-failureï¼Œé¿å…ç„¡é™é‡å•Ÿé€ æˆæ··äº‚ã€‚</li><li>ç”Ÿç”¢ç’°å¢ƒï¼šå»ºè­°ä½¿ç”¨ always æˆ– unless-stoppedï¼Œç¢ºä¿æœå‹™ç©©å®šé‹è¡Œã€‚</li><li>è‹¥æ­é… å¥åº·æª¢æŸ¥ï¼ˆhealthcheckï¼‰ ä½¿ç”¨ï¼Œå¯ä»¥æ›´ç²¾æº–æ§åˆ¶é‡å•Ÿæ™‚æ©Ÿã€‚</li></ul><p><img src="/img/image-9.png" alt="Restart your container"></p><h2 id="å¸¸è¦‹Docker-æŒ‡ä»¤"><a href="#å¸¸è¦‹Docker-æŒ‡ä»¤" class="headerlink" title="å¸¸è¦‹Docker æŒ‡ä»¤"></a>å¸¸è¦‹Docker æŒ‡ä»¤</h2><table><thead><tr><th></th><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td><code>docker info</code></td><td>Display System Information</td></tr><tr><td>2</td><td><code>docker version</code></td><td>Display the system version</td></tr><tr><td>3</td><td><code>docker login</code></td><td>Log in to a Docker registry</td></tr><tr><td>4</td><td><code>docker pull [image name]</code></td><td>Pull an image from a registry</td></tr><tr><td>5</td><td><code>docker run [image name]</code></td><td>Run container</td></tr><tr><td>6</td><td><code>docker run -d [image name]</code></td><td>Run container in detached mode</td></tr><tr><td>7</td><td><code>docker start [container name]</code></td><td>Start stopped containers</td></tr><tr><td>8</td><td><code>docker ps</code></td><td>List running container</td></tr><tr><td>9</td><td><code>docker ps -a</code></td><td>List running&amp;stopped container</td></tr><tr><td>10</td><td><code>docker stop [container name]</code></td><td>stop container</td></tr><tr><td>11</td><td><code>docker kill [container name]</code></td><td>Kill container</td></tr><tr><td>12</td><td><code>docker image inspect [imageName]</code></td><td>get image info</td></tr><tr><td>13</td><td><code>docker run --memory=&quot;256m&quot; [imageName]</code></td><td>Run container with Max memory</td></tr><tr><td>14</td><td><code>docker run --cpus=&quot;.5&quot; [imageName]</code></td><td>Run container with Max CPU</td></tr><tr><td>15</td><td><code>docker rm [container name]</code></td><td>Delete the container</td></tr><tr><td>16</td><td><code>docker run --publish [outer port]:[inner port] --name [container name] [container image in the docker registry or nginx]</code></td><td>Mostly used pattern</td></tr><tr><td></td><td><strong>Docker cli - Attach shell</strong></td><td></td></tr><tr><td>1</td><td><code>docker run -it [imageName] -- /bin/bash</code></td><td>Attach shell</td></tr><tr><td>2</td><td><code>docker container exec -it [container name] -- bash</code></td><td>Attach to a running container shell</td></tr><tr><td></td><td><strong>Docker cli - Clean up&amp;Build</strong></td><td></td></tr><tr><td>1</td><td><code>docker rm  $(docker ps -a -q)</code></td><td>Remove all stopped container</td></tr><tr><td>2</td><td><code>docker images</code></td><td>List images</td></tr><tr><td>3</td><td><code>docker rmi</code></td><td>Delete image</td></tr><tr><td>4</td><td><code>docker system prune -a</code></td><td>Removes all images not in use by any containers</td></tr><tr><td>5</td><td><code>docker build -t [name:tag] .</code></td><td>Build and image using a Dockerfile localted in the same folder</td></tr><tr><td>6</td><td><code>docker build -t [name:tag] -f [filename]</code></td><td>Build an image using a Dockerfile located in specified folder</td></tr><tr><td></td><td><strong>Docker volume cheatsheet</strong></td><td></td></tr><tr><td>1</td><td><code>docker create volume [volumeName]</code></td><td>Create a new volume</td></tr><tr><td>2</td><td><code>docker volume ls</code></td><td>List all volume</td></tr><tr><td>3</td><td><code>docker volume inspect [volumeName]</code></td><td>Display the volume info</td></tr><tr><td>4</td><td><code>docker volume rm [volumeName]</code></td><td>Remove volume</td></tr><tr><td>5</td><td><code>docker volume prune</code></td><td>Remove all volumes not mounted</td></tr><tr><td>6</td><td><code>docker run -d --name devtest -v myvol:/app nginx:latest</code></td><td>Run docker container with Volume</td></tr><tr><td></td><td><strong>Docker compose cheat sheet</strong></td><td></td></tr><tr><td>1</td><td><code>docker compose build</code></td><td>Build the images</td></tr><tr><td>2</td><td><code>docker compose start</code></td><td>Start the containers</td></tr><tr><td>3</td><td><code>docker compose stop</code></td><td>Stop the containers</td></tr><tr><td>4</td><td><code>docker compose up -d</code></td><td>Build and start</td></tr><tr><td>5</td><td><code>docker compose ps</code></td><td>List whatâ€™s running</td></tr><tr><td>6</td><td><code>docker compose rm</code></td><td>Remove from memory</td></tr><tr><td>7</td><td><code>docker compose down</code></td><td>Stop and remove</td></tr><tr><td>8</td><td><code>docker compose logs</code></td><td>Get the logs</td></tr><tr><td>9</td><td><code>docker compose exec [container] bash</code></td><td>Run a command in a container</td></tr><tr><td>10</td><td><code>docker compose --project-name [projectName] up -d</code></td><td>Run an instance as a project</td></tr><tr><td>11</td><td><code>docker compose -p [projectName] up -d</code></td><td>Shortcut</td></tr><tr><td>12</td><td><code>docker compose ls</code></td><td>List running projects</td></tr><tr><td>13</td><td><code>docker compose cp [containerID]:[src_path] [dest_path]</code></td><td>Copy files from the container</td></tr><tr><td>14</td><td><code>docker compose exec [src_path] [containerID]:[dest_path]</code></td><td>Copy files to the container</td></tr></tbody></table><h3 id="Docker-Compose-â†’-K8s-å°ç…§è¡¨"><a href="#Docker-Compose-â†’-K8s-å°ç…§è¡¨" class="headerlink" title="Docker Compose â†’ K8s å°ç…§è¡¨"></a>Docker Compose â†’ K8s å°ç…§è¡¨</h3><table><thead><tr><th>åŠŸèƒ½é¢å‘</th><th>Docker Compose</th><th>Kubernetes å°æ‡‰ç‰©ä»¶</th></tr></thead><tbody><tr><td>æœå‹™ç®¡ç†</td><td>service</td><td>Service</td></tr><tr><td>å®¹å™¨å®šç¾©</td><td>container</td><td>Pod</td></tr><tr><td>çµ„æ…‹ç®¡ç†</td><td>env file</td><td>ConfigMap &#x2F; Secret</td></tr><tr><td>è³‡æ–™æŒä¹…åŒ–</td><td>volume</td><td>PersistentVolume &#x2F; PVC</td></tr></tbody></table><h3 id="Finally"><a href="#Finally" class="headerlink" title="Finally"></a>Finally</h3><p>æœ¬æ–‡æ„åœ¨å¿«é€Ÿå¸¶éDockerçš„æ¦‚å¿µï¼Œæƒ³è¦å®Œæ•´å­¸ç¿’Dockerçš„äººå»ºè­°é‚„æ˜¯çœ‹éç›¸é—œæ•™å­¸ä¹‹å¾Œå†ç¹¼çºŒå­¸ç¿’ï¼Œæœ¬æ–‡åªå°ˆæ³¨æåˆ°é‚£äº›å°Kubernetesä¾†èªªé‡è¦çš„Dockerç‰¹æ€§ï¼Œä¸‹ä¸€ç¯‡æˆ‘å€‘æ­£å¼é€²å…¥Kubernetesã€‚æˆ‘å€‘ä¸‹æ¬¡è¦‹ã€‚</p><h3 id="å­¸ç¿’è³‡æº"><a href="#å­¸ç¿’è³‡æº" class="headerlink" title="å­¸ç¿’è³‡æº"></a>å­¸ç¿’è³‡æº</h3><ol><li>(<a href="https://www.youtube.com/watch?v=kTp5xUtcalw">https://www.youtube.com/watch?v=kTp5xUtcalw</a>)</li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Kubernetes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‰©ä»¶å°å‘æ‡‰ç”¨-ç‚ºä½•é¸ç”¨çµ„åˆè€Œéç¹¼æ‰¿ï¼Ÿ(OOP Composition or Inheritance?)</title>
    <link href="/2025/11/02/%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E6%87%89%E7%94%A8-%E7%82%BA%E4%BD%95%E9%81%B8%E7%94%A8%E7%B5%84%E5%90%88%E8%80%8C%E9%9D%9E%E7%B9%BC%E6%89%BF%EF%BC%9F-OOP-Composition-or-Inheritance/"/>
    <url>/2025/11/02/%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E6%87%89%E7%94%A8-%E7%82%BA%E4%BD%95%E9%81%B8%E7%94%A8%E7%B5%84%E5%90%88%E8%80%8C%E9%9D%9E%E7%B9%BC%E6%89%BF%EF%BC%9F-OOP-Composition-or-Inheritance/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æ›¾ç¶“è½éä¸€äº›äººåœ¨é‡å°OOPé—œä¿‚ä¾è³´æ™‚ï¼Œå°æ–¼ä½¿ç”¨ç¹¼æ‰¿é —æœ‰å¾®è©ï¼Œé€™ä¸€æ´¾äººæœƒä¸»å¼µæ‡‰è©²ä½¿ç”¨çµ„åˆè€Œéç¹¼æ‰¿ï¼Œä»Šå¤©æˆ‘å°±ä¾†åˆ†äº«çµ„åˆä»¥åŠç¹¼æ‰¿ã€‚</p><h3 id="Composition-Over-Inheritance-çµ„åˆå„ªæ–¼ç¹¼æ‰¿"><a href="#Composition-Over-Inheritance-çµ„åˆå„ªæ–¼ç¹¼æ‰¿" class="headerlink" title="Composition Over Inheritance (çµ„åˆå„ªæ–¼ç¹¼æ‰¿)"></a>Composition Over Inheritance (çµ„åˆå„ªæ–¼ç¹¼æ‰¿)</h3><h3 id="ç‚ºç”šéº¼ä¸æ¨è–¦ä½¿ç”¨ç¹¼æ‰¿ï¼Ÿ"><a href="#ç‚ºç”šéº¼ä¸æ¨è–¦ä½¿ç”¨ç¹¼æ‰¿ï¼Ÿ" class="headerlink" title="ç‚ºç”šéº¼ä¸æ¨è–¦ä½¿ç”¨ç¹¼æ‰¿ï¼Ÿ"></a>ç‚ºç”šéº¼ä¸æ¨è–¦ä½¿ç”¨ç¹¼æ‰¿ï¼Ÿ</h3><ul><li>ç¢ºå¯¦ï¼Œç¹¼æ‰¿è§£æ±ºäº†é‡è¤‡ç¨‹å¼ç¢¼çš„å•é¡Œã€‚ä½†ç¹¼æ‰¿å±¤æ¬¡éæ·±ã€éè¤‡é›œï¼Œä¹Ÿæœƒå½±éŸ¿ç¨‹å¼ç¢¼çš„å¯ç¶­è­·æ€§ã€‚</li></ul><p>å‡è¨­æˆ‘å€‘è¦è¨­è¨ˆä¸€å€‹é—œæ–¼é³¥çš„é¡åˆ¥ï¼Œæˆ‘å€‘çŸ¥é“å¤§å¤šæ•¸çš„é³¥éƒ½æœƒé£›ï¼Œæ‰€ä»¥æˆ‘å€‘ä¸€é–‹å§‹æœƒé€™æ¨£å¯«</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractBird</span> &#123;<br>    public <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params"></span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†é´•é³¥å‘¢ï¼Ÿé´•é³¥å¯ä¸æœƒé£›å•Šï¼Œä½†é´•é³¥ä¹Ÿæ˜¯é³¥ï¼Œé™¤éä½ é€™æ¨£å¯«</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ostrich</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbstractBird</span> &#123;<br>    public <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportMethodException</span>(<span class="hljs-string">&quot;I can not fly&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€™å¯ä»¥è§£æ±ºå•é¡Œï¼Œä½†ä¸å„ªé›…ï¼Œå› ç‚ºä¸æœƒé£›çš„é³¥å…¶å¯¦ä¸å°‘ï¼Œæ¯”å¦‚ä¼éµã€‚å°æ–¼æ‰€æœ‰ä¸æœƒé£›çš„é³¥å»å…¨éƒ¨é‡å¯«<code>fly()</code>æ–¹æ³•æ¯«ç„¡ç–‘å•åœ°å±¬æ–¼<em>é‡è¤‡ç¨‹å¼ç¢¼</em>ã€‚</p><p>ä½ å¯ä»¥æ‹†å‡º<code>AbstractFlyableBirdèˆ‡AbstractUnflyableBird</code>ï¼Œä½†å…¶ä»–è¡Œç‚ºå‘¢ï¼Œç”Ÿæ®–å‘¢ï¼Ÿä¸‹è›‹å‘¢ï¼Ÿä½ æœƒå¯«å‡ºç„¡æ•¸ç”¨ä¾†ç¹¼æ‰¿çš„çˆ¶é¡åˆ¥ï¼Œè€Œé€™äº›ç¨‹å¼ç¢¼å°‡æœƒé›£ä»¥ç¶­è­·ï¼Œé›–ç„¶ä¸é‡è¤‡ï¼Œä½†æ‰€æœ‰å¯¦ç¾çš„ç¨‹å¼ç¢¼éƒ½åˆ†æ•£åœ¨å„å€‹çˆ¶é¡åˆ¥ä¸­ã€‚</p><p><strong>ç¹¼æ‰¿æœ€å¤§çš„å•é¡Œå°±æ˜¯ï¼Œç¹¼æ‰¿å±¤æ¬¡éæ·±ï¼Œå°è‡´å½±éŸ¿äº†ç¨‹å¼ç¢¼çš„å¯è®€æ€§èˆ‡å¯ç¶­è­·æ€§</strong></p><hr><h3 id="çµ„åˆ-Composition"><a href="#çµ„åˆ-Composition" class="headerlink" title="çµ„åˆ(Composition)"></a>çµ„åˆ(Composition)</h3><ul><li>æŠŠåŠŸèƒ½æ‹†é–‹ï¼Œæ”¹ç”¨ä»‹é¢å»å¥—ç”¨ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public interface <span class="hljs-title class_">Flyable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>();<br>&#125;<br>public interface <span class="hljs-title class_">Tweetable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tweet</span>();<br>&#125;<br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ostrich</span> implements <span class="hljs-title class_">Tweetable</span>,<span class="hljs-title class_">Flyable</span> &#123;<br><span class="hljs-comment">//é€éä¸€å€‹å€‹å°ä»‹é¢å»çµ„åˆåŠŸèƒ½ï¼Œå…§å®¹å¯¦ä½œé‚„æ˜¯ç¶­æŒåœ¨æ­¤é¡åˆ¥ä¸­ã€‚</span><br>&#125;<br></code></pre></td></tr></table></figure><p>é€™å€‹åšæ³•ï¼Œç›¸æ¯”ä½¿ç”¨å¤šå€‹çˆ¶é¡åˆ¥ä¾†èªªï¼Œç¨‹å¼ç¢¼å¯ä»¥é›†ä¸­åœ¨åŒä¸€å€‹é¡åˆ¥ä¸­ï¼Œç›¸å½¢ä¹‹ä¸‹æ¯”è¼ƒå¥½ç¶­è­·ã€‚ä½†å…¶ä»–éé´•é³¥çš„é³¥å»é‚„æ˜¯å¿…é ˆå¾—é‡æ–°å¯«ä¸€æ¬¡å¯¦ä½œæ–¹æ³•ï¼Œé€™ä¸æ˜¯<code>interface</code>çš„å•é¡Œï¼Œä»–å·²ç¶“åšå¾—å¾ˆå¥½äº†ã€‚è¿½æ ¹ç©¶åº•ï¼Œå› ç‚ºjavaæ²’æœ‰è¾¦æ³•<em>æ”¯æ´å¤šé‡ç¹¼æ‰¿</em>ï¼Œæ‰€ä»¥å¿…é ˆè¦èŠ±æ›´å¤šå¿ƒåŠ›å»ç¢ºä¿ç¨‹å¼ç¢¼çš„å“è³ªï¼Œç›¡åŠ›ç¢ºä¿æ¶ˆé™¤ç¨‹å¼ç¢¼é‡è¤‡ã€‚</p><hr><h3 id="å§”è¨—-Delegation"><a href="#å§”è¨—-Delegation" class="headerlink" title="å§”è¨—(Delegation)"></a>å§”è¨—(Delegation)</h3><ul><li>å»¶çºŒä¸Šæ–¹çš„çµ„åˆï¼Œä½†æ˜¯å¯¦ä½œæ¯ä¸€å€‹å…ƒä»¶(interface)çš„å…§å®¹ï¼Œä¸¦æ”¾åœ¨è¦ä¸»è¦ä½¿ç”¨çš„é¡åˆ¥ä¸­ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public interface <span class="hljs-title class_">Flyable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>();<br>&#125;<br>public <span class="hljs-title class_">FlyAbility</span> implements <span class="hljs-title class_">Flyable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//çœç•¥å¯¦ä½œ</span><br>    &#125;<br>&#125;<br>public interface <span class="hljs-title class_">Tweetable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tweet</span>();<br>&#125;<br>public <span class="hljs-title class_">TweetAbility</span> implements <span class="hljs-title class_">Tweetable</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">tweet</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//çœç•¥å¯¦ä½œ</span><br>    &#125;<br>&#125;<br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ostrich</span> implements <span class="hljs-title class_">Tweetable</span>,<span class="hljs-title class_">Flyable</span> &#123;<br>private <span class="hljs-title class_">TweetAbility</span> tweetAbility = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TweetAbility</span>();<br>private <span class="hljs-title class_">FlyAbility</span> flyAbility = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlyAbility</span>();<br><br>public <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params"></span>) &#123;<br>    flyAbility.<span class="hljs-title function_">fly</span>();<br>&#125;<br>public <span class="hljs-keyword">void</span> <span class="hljs-title function_">tweet</span>(<span class="hljs-params"></span>) &#123;<br>    tweetAbility.<span class="hljs-title function_">tweet</span>();<br>&#125;<br><br>&#125;<br><br><span class="hljs-comment">// æˆ–æ˜¯ä½¿ç”¨Java 11çš„interface default</span><br>public interface <span class="hljs-title class_">Flyable</span> &#123;<br>  <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//é è¨­å¯¦ç¾æ–¹æ³•</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€éé€™å€‹æ–¹æ³•ï¼Œä½ å°±å¯ä»¥å¯¦ç¾DRYåŸå‰‡ã€‚ç¨‹å¼ç¢¼ä¸é‡è¤‡ä¸”å¾ˆå¥½åˆ©ç”¨ï¼Œå”¯ä¸€çš„ç¼ºé»æ˜¯æ„Ÿè¦ºæœ‰é»é›è‚‹ã€‚é‚£éº¼æœ€å¾Œæˆ‘å€‘ä¾†æä¸€æâ”€â”€</p><h3 id="ä½•æ™‚ä½¿ç”¨ç¹¼æ‰¿ã€ä½•æ™‚ä½¿ç”¨çµ„åˆï¼Ÿ"><a href="#ä½•æ™‚ä½¿ç”¨ç¹¼æ‰¿ã€ä½•æ™‚ä½¿ç”¨çµ„åˆï¼Ÿ" class="headerlink" title="ä½•æ™‚ä½¿ç”¨ç¹¼æ‰¿ã€ä½•æ™‚ä½¿ç”¨çµ„åˆï¼Ÿ"></a>ä½•æ™‚ä½¿ç”¨ç¹¼æ‰¿ã€ä½•æ™‚ä½¿ç”¨çµ„åˆï¼Ÿ</h3><ul><li>å¦‚æœé¡åˆ¥ä¹‹é–“çš„ç¹¼æ‰¿é—œä¿‚çµæ§‹ç©©å®šï¼Œä¸æœƒè¼•æ˜“æ”¹è®Šï¼Œå°±ç”¨ç¹¼æ‰¿å°±å¥½ã€‚</li><li>ç¹¼æ‰¿å±¤ç´šæ¯”è¼ƒæ·ºï¼Œæ¯”å¦‚æœ€å¤šç¹¼æ‰¿å…©å±¤ï¼Œç¹¼æ‰¿é—œä¿‚ä¸è¤‡é›œï¼Œå°±ç”¨ç¹¼æ‰¿å°±å¥½ã€‚</li><li>å¦‚æœç³»çµ±è¶Šä¸ç©©å®šï¼Œç¹¼æ‰¿å±¤æ¬¡å¾ˆæ·±ï¼Œç¹¼æ‰¿é—œä¿‚è¤‡é›œï¼Œå°±å»ºè­°ä½¿ç”¨çµ„åˆã€‚</li></ul><p><strong>ğŸ’¡ç¹¼æ‰¿å¯ä»¥ä½¿ç”¨çš„æ™‚æ©Ÿï¼Œä¾†è‡ªåœ¨åŒä¸€å€‹æµç¨‹ä¸­ï¼Œå°ç¹¼æ‰¿åŒä¸€å€‹çˆ¶é¡åˆ¥çš„ä¸åŒé¡åˆ¥åšä¸€æ¨£çš„äº‹ã€‚(ä½¿ç”¨å¤šæ…‹æ€§)</strong></p><p>ä»¥ä¸Šå°±æ˜¯æˆ‘çš„å­¸ç¿’èˆ‡ä¸€äº›æ•´ç†ï¼Œå¸Œæœ›é€™æ®µå…§å®¹å¯ä»¥å¹«åˆ°èˆ‡æˆ‘æœ‰ç›¸åŒå›°æƒ‘çš„å­¸ç¿’è€…ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>OOP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é€£é©¢å­éƒ½çœ‹å¾—æ‡‚çš„Javaæ•™å­¸-01 ç”šéº¼æ˜¯Java?</title>
    <link href="/2025/11/01/%E9%80%A3%E9%A9%A2%E5%AD%90%E9%83%BD%E7%9C%8B%E5%BE%97%E6%87%82%E7%9A%84Java%E6%95%99%E5%AD%B8-01-%E7%94%9A%E9%BA%BC%E6%98%AFJava/"/>
    <url>/2025/11/01/%E9%80%A3%E9%A9%A2%E5%AD%90%E9%83%BD%E7%9C%8B%E5%BE%97%E6%87%82%E7%9A%84Java%E6%95%99%E5%AD%B8-01-%E7%94%9A%E9%BA%BC%E6%98%AFJava/</url>
    
    <content type="html"><![CDATA[<p>Javaæ˜¯ç¾ä»Šä¼æ¥­å¸¸ç”¨çš„ç¨‹å¼èªè¨€ï¼Œå¯ä»¥è¢«ç”¨ä¾†é–‹ç™¼ç¶²é ã€APPç­‰ç­‰ï¼Œä¸»è¦ç‰¹è‰²åŒ…å«ï¼š</p><ul><li>è·¨å¹³å°â”€â”€ã€Œä¸€æ¬¡ç·¨å¯«ï¼Œåˆ°è™•é‹è¡Œã€</li><li>å¼·å‹åˆ¥èªè¨€â”€â”€å¼·å¤§çš„ç‰©ä»¶å°å‘ï¼ˆOOPï¼‰èˆ‡è¨­è¨ˆæ¨¡å¼æ”¯æ´</li><li>è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†</li><li>ç©©å®šçš„ç”Ÿæ…‹èˆ‡ä¼æ¥­ç´šæ”¯æ´</li><li>æ”¯æ´é«˜æ•ˆèƒ½èˆ‡ä½µç™¼èƒ½åŠ›<br>ç­‰ç­‰â€¦ä¸ä¸€ä¸€åˆ—å‡ºã€‚</li></ul><p>çœ‹ä¸æ‡‚ï¼Ÿæ²’é—œä¿‚ï¼Œæˆ‘ä¸€ä¸€æ…¢æ…¢è¬›çµ¦ä½ è½</p><h3 id="è·¨å¹³å°â”€â”€ã€Œä¸€æ¬¡ç·¨å¯«ï¼Œåˆ°è™•é‹è¡Œã€"><a href="#è·¨å¹³å°â”€â”€ã€Œä¸€æ¬¡ç·¨å¯«ï¼Œåˆ°è™•é‹è¡Œã€" class="headerlink" title="è·¨å¹³å°â”€â”€ã€Œä¸€æ¬¡ç·¨å¯«ï¼Œåˆ°è™•é‹è¡Œã€"></a>è·¨å¹³å°â”€â”€ã€Œä¸€æ¬¡ç·¨å¯«ï¼Œåˆ°è™•é‹è¡Œã€</h3><hr><p>è·¨å¹³å°ï¼Œä½ å¯èƒ½ä»¥ç‚ºæ˜¯æ‰‹æ©Ÿèˆ‡ç¶²ç«™éƒ½å¯ä»¥ç”¨å°±å«åšè·¨å¹³å°ï¼Œä½†Javaçš„è·¨å¹³å°çš„æ„æ€é é ä¸åªå¦‚æ­¤ã€‚ç‚ºäº†æ›´å¥½åœ°èªªæ˜Javaçš„è·¨å¹³å°ç‰¹æ€§ï¼Œæˆ‘æœƒå…ˆä½¿ç”¨C++ä½œç‚ºèˆ‰ä¾‹ï¼Œä¾†è®“ä½ æ›´å¥½åœ°ç†è§£è·¨å¹³å°çš„ç‰¹æ€§ã€‚ä½ ä¸å¿…ç†Ÿæ‚‰C++ï¼Œä½†é‚„æ˜¯éœ€è¦ä½ æœ‰ä¸€é»æƒ³åƒåŠ›ã€‚</p><p>ä¸€å€‹C++çš„ç¨‹å¼ç¢¼åŸ·è¡Œæµç¨‹æ˜¯é€™æ¨£çš„ï¼š</p><p><strong>é è™•ç†(Preprocessing)</strong> &gt;&gt; <strong>ç·¨è­¯(Compilation)</strong> &gt;&gt; <strong>çµ„è­¯(Assembly)</strong> &gt;&gt; <strong>é€£çµ(Linking)</strong> &gt;&gt; <strong>è¼‰å…¥èˆ‡åŸ·è¡Œï¼ˆLoading &amp; Executionï¼‰</strong></p><p>åœ¨ç·¨è­¯éšæ®µï¼ŒC++ç¨‹å¼ç¢¼æœƒè¢«è½‰æ›æˆçµ„åˆèªè¨€(Assembly)ï¼Œæ¥è‘—åœ¨çµ„è­¯éšæ®µè½‰æ›æˆç›®æ¨™ç¢¼(Object Code)ã€‚è€Œæ‰€è¬‚çš„ç›®æ¨™ç¢¼å°±æ˜¯æ ¹æ“šä½ çš„ä½¿ç”¨å¹³å°ä¸åŒ(PCã€APPâ€¦etc)è€Œæœ€ä½³åŒ–çš„ä½éšèªè¨€ç¨‹å¼ç¢¼ï¼Œä»–æ¯”çµ„åˆèªè¨€æ›´æ¥è¿‘æ©Ÿå™¨èªè¨€ï¼Œæ‰€è¬‚çš„å¹³å°å·®åˆ¥ç”±æ­¤èª•ç”Ÿã€‚é€™éº¼åšçš„å¥½è™•æ˜¯ï¼Œæœ€å¾Œçš„åŸ·è¡Œç¨‹å¼æœƒæ˜¯é‡å°åŸç”Ÿå¹³å°ä¾†èªªåŸ·è¡Œæ•ˆç‡æœ€å¥½çš„ç¨‹å¼ç¢¼ã€ç¼ºé»å°±æ˜¯ï¼Œç‚ºç¢ºä¿æœ€ä½³åŒ–ï¼Œæ¯ç•¶ä¸€å€‹å¹³å°ä¸åŒéƒ½è¦é‡æ–°ç·¨è­¯éä¸€æ¬¡ã€‚<br>é‚£Javaä¹Ÿæ˜¯é€™æ¨£é‹ä½œå—ï¼Ÿ ä¸ï¼Œä¸¦æ²’æœ‰ã€‚<br>ä¸€å€‹Javaçš„ç¨‹å¼ç¢¼åŸ·è¡Œæµç¨‹æ˜¯é€™æ¨£çš„ï¼š<br>Javaç¨‹å¼ç¢¼è¢«ç·¨è­¯æˆä½å…ƒæª”(bytecode)ï¼Œç„¶å¾Œé€éJVM(Java Virtual Machine)åœ¨ä¸åŒå¹³å°ä¸ŠåŸ·è¡Œã€‚é€™ä»£è¡¨å³ä½¿æ›åˆ°äº†å¦ä¸€å€‹å¹³å°ï¼Œç¨‹å¼ç¢¼å¯ä»¥ä¸éœ€è¦é‡æ–°ç·¨è­¯ï¼Œå°±èƒ½æ­£å¸¸é‹ä½œã€‚é€™å°±æ˜¯è·¨å¹³å°çš„æ„æ€ã€‚</p><h3 id="å¼·å‹åˆ¥èªè¨€"><a href="#å¼·å‹åˆ¥èªè¨€" class="headerlink" title="å¼·å‹åˆ¥èªè¨€"></a>å¼·å‹åˆ¥èªè¨€</h3><hr><p>é€™å€‹ç‰¹è‰²æˆ‘ä½¿ç”¨JSä¾†èˆ‰ä¾‹ï¼Œé€™æ¨£æ¯”è¼ƒå¥½ç†è§£ã€‚Javascriptæ˜¯ä¸€å€‹å¼±å‹åˆ¥çš„èªè¨€ï¼Œæ¯”æ–¹èªªJSå¯ä»¥åšåˆ°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> num = <span class="hljs-number">95</span>;<br>num = <span class="hljs-number">96</span>;<br>num = <span class="hljs-string">&quot;97&quot;</span>; <span class="hljs-comment">// é€™è£¡è¢«è½‰æˆå­—ä¸²äº†</span><br></code></pre></td></tr></table></figure><p>è€ŒJavaåšä¸åˆ°é€™ä»¶äº‹ï¼Œå»¶ä¼¸ç¬¬ä¸€é»æˆ‘å€‘è¨è«–çš„JavaåŸ·è¡Œæµç¨‹ï¼ŒJavaåœ¨ç·¨è­¯éšæ®µå°±å·²ç¶“å…ˆç¢ºå®šå¥½æ¯ä¸€å€‹è®Šæ•¸çš„å‹åˆ¥ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œå¦‚æœæˆ‘å€‘å¾ŒçºŒæƒ³è¦æŠŠJavaåŸå…ˆå®šç¾©ç‚ºæ•¸å€¼å‹åˆ¥çš„è³‡æ–™å‹æ…‹æ”¹ç‚ºå­—ä¸²å‹æ…‹ï¼Œå°±æœƒç›´æ¥çˆ†å‡ºå‹åˆ¥è½‰æ›éŒ¯èª¤ï¼Œé€™ä¸€æ–¹é¢å¹«åŠ©äº†æˆ‘å€‘ææ—©ç™¼ç¾ç¨‹å¼ç¢¼å¯èƒ½å­˜åœ¨çš„å•é¡Œã€‚æ­¤å¤–ï¼ŒJavaçš„å‹åˆ¥ä¸€é–‹å§‹å°±æœƒå…ˆå®šç¾©å¥½ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ABC&quot;</span>;<br></code></pre></td></tr></table></figure><h3 id="è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†"><a href="#è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†" class="headerlink" title="è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†"></a>è‡ªå‹•è¨˜æ†¶é«”ç®¡ç†</h3><h3 id="æ”¯æ´é«˜æ•ˆèƒ½èˆ‡ä½µç™¼èƒ½åŠ›"><a href="#æ”¯æ´é«˜æ•ˆèƒ½èˆ‡ä½µç™¼èƒ½åŠ›" class="headerlink" title="æ”¯æ´é«˜æ•ˆèƒ½èˆ‡ä½µç™¼èƒ½åŠ›"></a>æ”¯æ´é«˜æ•ˆèƒ½èˆ‡ä½µç™¼èƒ½åŠ›</h3><p>é€™å€‹æˆ‘å€‘ä¹‹å¾Œå†æï¼Œç¬¬ä¸€ç« å°±è¬›é€™å€‹å¤ªéåˆ†äº†ã€‚</p><hr><br><p>æœ€å¾Œæˆ‘å€‘ä¾†é–‹å§‹ä¸€å€‹æˆ‘å€‘çš„æœ€ç°¡å–®çš„Javaç¨‹å¼ç¢¼ä¾†è®“æ–°æ‰‹å…¥é–€ã€‚é¦–å…ˆä½ éœ€è¦çš„å¾ˆç°¡å–®ï¼Œä¸‹è¼‰Intellij[â€œ<a href="https://www.jetbrains.com/idea/%22]">https://www.jetbrains.com/idea/&quot;]</a></p><p>Intellij IDEAæ˜¯Javaé–‹ç™¼æ™‚ç¶“å¸¸æœƒä½¿ç”¨åˆ°çš„å·¥å…·ï¼Œç›¸ç•¶å€¼å¾—å­¸ç¿’ï¼Œä¸”æœ‰æä¾›å¤šç¨®Pluginè®“æ•´é«”æ“ä½œã€ä½¿ç”¨è€…é«”é©—éƒ½æ›´å¥½ã€‚</p><p>æˆ‘é€™é‚Šä¸å±•ç¤ºæ•™å­¸äº†ï¼Œå› ç‚ºå…¶å¯¦ä¸€å€‹å€‹é»é¸å°±æœƒå®‰è£å®Œæˆï¼Œå¹¾ä¹æ²’æœ‰ç”šéº¼ç‰¹åˆ¥éœ€è¦ç•™æ„çš„äº‹ç‰©ã€‚</p><p>æ‰“é–‹ä¹‹å¾Œä½ æœƒçœ‹åˆ°é€™æ¨£çš„ä»‹é¢ï¼Œé»é¸ã€ŒNew Projectã€ä¾†é–‹å•Ÿä½ çš„ä¸€å€‹æ–°å°ˆæ¡ˆã€‚</p><p><img src="/img/java_t1.png" alt="Picture1"></p><p><img src="/img/java_t2.png" alt="Picture2"></p><p>æ¥è‘—åœ¨å·¦å´æ¸…å–®é¸æ“‡Javaåšç‚ºé–‹ç™¼å°ˆæ¡ˆæ¨¡æ¿ï¼Œå³å´çš„Nameä»£è¡¨ä½ çš„å°ˆæ¡ˆåç¨±ã€‚ç„¶å¾Œå€¼å¾—ç•™æ„çš„æ˜¯ä¸‹æ–¹æœ‰Buildå·¥å…·çš„é¸æ“‡ï¼Œä¸»è¦åˆ†ç‚ºMavenèˆ‡Gradleï¼Œç¾åœ¨ä½ åªéœ€è¦çŸ¥é“ä»–æ˜¯å¥—ä»¶ç®¡ç†å·¥å…·å°±å¥½ï¼Œå¯ä»¥å…ˆè·³éã€‚</p><p>å†ä¾†æ˜¯ç›¸ç•¶é‡è¦çš„JDKï¼ŒJDKçš„å…¨åæ˜¯Java Software Development Kit(æœ‰äººç¨± Java SDK)ï¼Œä»–åƒæ˜¯ä¸€å€‹å·¥å…·åŒ…ï¼Œè£¡é¢åŒ…å«äº†å¤šç¨®åŠŸèƒ½ã€‚é‚„è¨˜å¾—å‰é¢æåˆ°çš„Javaç¨‹å¼ç¢¼çš„åŸ·è¡Œéç¨‹å—ï¼Ÿ Javaç¨‹å¼ç¢¼æœƒé€éJavaç·¨è­¯å™¨(javac)ç·¨è­¯æˆbytecodeï¼Œå†äº¤çµ¦JVMå»åŸ·è¡Œï¼Œè€Œé€™å…©å€‹å·¥å…·éƒ½åŒ…å«åœ¨JDKç•¶ä¸­ã€‚</p><p>JDKè£¡é¢åŒ…å«ï¼š</p><ul><li><p>JREï¼ˆJava Runtime Environmentï¼‰ JDK ä¸­åŒ…å« JREï¼Œæ˜¯ Java ç¨‹å¼çš„åŸ·è¡Œç’°å¢ƒï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>JVMï¼ˆJava Virtual Machineï¼‰ï¼šè² è²¬å°‡ .class å­—ç¯€ç¢¼è½‰æ›ç‚ºå¹³å°ç›¸é—œçš„æ©Ÿå™¨æŒ‡ä»¤ã€‚</li><li>æ ¸å¿ƒé¡åº«ï¼ˆCore Librariesï¼‰ï¼šå¦‚ java.langã€java.utilã€java.io ç­‰ï¼Œæä¾›åŸºæœ¬ API æ”¯æ´ã€‚</li></ul></li><li><p>æ”¯æ´æª”æ¡ˆèˆ‡å‹•æ…‹é€£çµåº«ï¼šå¦‚ .jarã€.dll æˆ– .so æª”æ¡ˆã€‚</p></li><li><p>Java ç·¨è­¯å™¨ï¼ˆjavacï¼‰ å°‡ .java åŸå§‹ç¢¼ç·¨è­¯æˆ .class å­—ç¯€ç¢¼ã€‚</p></li><li><p>Java è§£è­¯å™¨ï¼ˆjavaï¼‰ åŸ·è¡Œ .class æª”æ¡ˆï¼Œé€é JVM è§£è­¯æˆæ©Ÿå™¨ç¢¼ã€‚</p></li><li><p>é™¤éŒ¯å·¥å…·ï¼ˆjdbï¼‰ ç”¨æ–¼åµéŒ¯ Java ç¨‹å¼ï¼Œæ”¯æ´æ–·é»ã€è®Šæ•¸è§€å¯Ÿç­‰åŠŸèƒ½ã€‚</p></li><li><p>æ–‡ä»¶ç”¢ç”Ÿå·¥å…·ï¼ˆjavadocï¼‰ æ ¹æ“šåŸå§‹ç¢¼ä¸­çš„è¨»è§£ç”¢ç”Ÿ HTML æ ¼å¼çš„ API æ–‡ä»¶ã€‚</p></li><li><p>æ‰“åŒ…å·¥å…·ï¼ˆjarï¼‰ å°‡å¤šå€‹ .class æª”æ¡ˆèˆ‡è³‡æºæ‰“åŒ…æˆ .jar æª”æ¡ˆï¼Œä¾¿æ–¼éƒ¨ç½²èˆ‡åˆ†ç™¼ã€‚</p></li></ul><p>å…¶ä»–å·¥å…·</p><ul><li><p>javapï¼šåç·¨è­¯ .class æª”æ¡ˆï¼ŒæŸ¥çœ‹ bytecodeã€‚</p></li><li><p>jstatã€jconsoleï¼šç›£æ§ JVM åŸ·è¡Œç‹€æ³ã€‚</p></li><li><p>jshellï¼šäº’å‹•å¼ Java Shellï¼Œæ”¯æ´å³æ™‚åŸ·è¡Œ Java ç¨‹å¼ç¢¼ã€‚</p></li></ul><p>é€™äº›ä½ ä¸å¿…éƒ½çŸ¥é“ï¼Œä½ åªè¦å…ˆçŸ¥é“java JDKè£¡é¢åŒ…å«å¾ˆå¤šåŠŸèƒ½ï¼Œè€Œä½ åªéœ€è¦JDKå°±å¯ä»¥é‹è¡Œç¨‹å¼ç¢¼ï¼Œå…ˆçŸ¥é“é€™æ¨£å°±å¥½äº†ã€‚</p><p>ä¸€é–‹å§‹ä½ å¯èƒ½æœƒæ²’æœ‰JDKï¼Œä½†åˆ¥ç·Šå¼µï¼Œä¸‹æ‹‰é¸å–®å¯ä»¥é¸æ“‡Download JDKä¾†ä¸‹è¼‰JDKï¼Œè‡³æ–¼ç‰ˆæœ¬æˆ‘å»ºè­°ç›´æ¥å…ˆç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå„ç‰ˆæœ¬æœƒæœ‰äº›å·®ç•°ï¼Œä½†æ˜¯å­¸ç¿’æœ€æ–°çš„å°ä½ ä¸æœƒæœ‰å£è™•ã€‚ç„¶å¾Œæˆ‘å€‘æŒ‰ä¸‹ã€ŒCreateã€å»ºç«‹å°ˆæ¡ˆã€‚</p><p><img src="/img/java_t3.png" alt="Picture3"></p><p>ä½ å®Œæˆäº†ï¼Œé€™å°±æ˜¯ä¸€å€‹åŸºæœ¬çš„Javaç¨‹å¼ç¢¼ã€‚ä¸»è¦Main.javaæª”æ¡ˆä¸­åŒ…å«äº†ã€‚</p><ul><li>åç‚ºMainçš„é¡åˆ¥ï¼Œé›–ç„¶é€™å€‹åç¨±å¯ä»¥è‡ªå®šç¾©ï¼Œä½†ä»–åªæ˜¯è¦å‘Šè¨´ä½ é€™æ˜¯ä¸»ç¨‹å¼æ‰€ä»¥å«åšMain</li><li>åç‚ºmain()çš„æ–¹æ³•ï¼Œé€™éƒ¨åˆ†æ˜¯å¯«æ­»çš„ã€‚</li></ul><p>é—œæ–¼é¡åˆ¥èˆ‡æ–¹æ³•ä¹‹å¾Œæœƒåœ¨æè¿°ï¼Œç¾åœ¨æˆ‘åªå°ˆæ³¨æ–¼å‘Šè¨´ä½ é€™å¹¾è¡Œåšäº†ä»€éº¼äº‹ã€‚</p><p>System.out.printfã€System.out.println ä»£è¡¨èªªä½¿ç”¨äº†Systemå¥—ä»¶çš„printfæ–¹æ³•ï¼ŒåŠŸèƒ½æ˜¯å°å…¥ä½ è¼¸å…¥çš„é€™äº›å­—ä¸²ã€‚<br>for (int i &#x3D; 1; i &lt;&#x3D; 5; i++) å‰‡æ˜¯è·‘äº†ä¸€å€‹è¿´åœˆ(loop)ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯æŠŠå¤§æ‹¬è™Ÿè£¡é¢çš„ç¨‹å¼ç¢¼åŸ·è¡Œäº”æ¬¡ï¼Œæ¯ä¸€æ¬¡iå°±æœƒåŠ 1ï¼Œæ‰€ä»¥åº•ä¸‹æœƒå°å‡º i&#x3D;1 i&#x3D;2 i&#x3D;3 i&#x3D;4 i&#x3D;5</p><p>åˆ°æ­¤ç¬¬ä¸€å€‹æ•™å­¸çµæŸï¼Œåœ¨é€™å€‹æ•™å­¸ä¸­ä½ ç†è§£äº†</p><ul><li>Javaæ˜¯ä»€éº¼ã€ä»–æœ‰ä»€éº¼ç‰¹è‰²ã€‚</li><li>æ€éº¼ä¸‹è¼‰ï¼Œå®‰è£Java</li><li>JDKæ˜¯ä»€éº¼ã€åŒ…å«äº†å“ªäº›åŠŸèƒ½ã€‚</li><li>æ€éº¼å»ºç«‹ä¸€å€‹å°ˆæ¡ˆã€‚</li><li>æ€éº¼é‹è¡Œä¸€å€‹å°ˆæ¡ˆã€‚</li></ul><p>ç›¸ä¿¡å…§å®¹æ˜¯å¾ˆè±å¯Œçš„ï¼Œé‚£éº¼ä¹‹å¾Œæˆ‘æœƒä¸å®šæœŸæ›´æ–°ï¼Œæˆ‘å€‘ä¸‹æ¬¡é¢å§</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JavaTutorial</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‰¾å·¥ä½œè©²ä¸è©²ç”¨çµé ­</title>
    <link href="/2025/11/01/%E6%89%BE%E5%B7%A5%E4%BD%9C%E8%A9%B2%E4%B8%8D%E8%A9%B2%E7%94%A8%E7%8D%B5%E9%A0%AD/"/>
    <url>/2025/11/01/%E6%89%BE%E5%B7%A5%E4%BD%9C%E8%A9%B2%E4%B8%8D%E8%A9%B2%E7%94%A8%E7%8D%B5%E9%A0%AD/</url>
    
    <content type="html"><![CDATA[<p>ã€æ‰¾å·¥ä½œï¼Œç”¨ä¸ç”¨çµé ­ï¼Ÿã€‘<br>é€™æ˜¯å€‹å¥½å•é¡Œï¼Œç‰¹åˆ¥å°æ–¼ä½ æˆ‘æœ‰åœ¨ä½¿ç”¨Linkedinçš„äººä¾†èªªï¼Œæˆ‘å€‘è·³è„«äº†å‚³çµ±çš„104è€Œä¾†åˆ°Linkedinï¼Œèˆ‡çµé ­çš„æ¥è§¸ä¹Ÿæ›´åŠ é »ç¹ã€‚ä½†å¦‚ä½•è·Ÿçµé ­æ‰“äº¤é“ã€æˆ–æ˜¯å¦‚ä½•åˆ¤æ–·çµé ­å“è³ªï¼Œé€™é¡æ–‡ç« å»é®®å°‘æœ‰äººæåŠã€‚<br>ç„¶è€Œï¼Œå¾ˆéºæ†¾åœ°ï¼Œæˆ‘ä¸¦æ²’æœ‰ç¶“é©—è±å¯Œåˆ°å¯ä»¥è·Ÿä½ å€‘åˆ†äº«é€™äº›ï¼Œä½†æˆ‘å¯ä»¥ä»¥æˆ‘é€™é™£å­èˆ‡çµé ­æ‰“äº¤é“å¾—åˆ°çš„å¯¦éš›ç¶“é©—ï¼Œèˆ‡ä½ å€‘åšä¸€äº›åˆ†äº«ï¼Œä¸»è¦é—œæ–¼ä¸€äº›å¯èƒ½ä½ å°çµé ­çš„èª¤è§£ã€‚</p><p>çµé ­åœ¨è·Ÿä½ è¯ç¹«å¾Œï¼Œæœƒå¹«ä½ æ‰¾åˆ°åˆé©ä½ çš„è·ç¼ºï¼Ÿ<br>ç­”ï¼šä¸ä¸€å®šï¼Œè‹¥ä½ æ˜¯å°æ–¹æƒ³è¦ç¶“ç‡Ÿçš„äººè„ˆçš„è©±ï¼Œä»–å¯èƒ½æœƒç‚ºäº†ä½ é€™éº¼åšï¼Œä½†é™Œç”Ÿäººå¿½ç„¶å°±ç™¼ä¸€å€‹å·¥ä½œæ©Ÿæœƒè¨Šæ¯çµ¦ä½ çš„ï¼Œä½ çœŸçš„ç›¸ä¿¡ä»–æœƒä»”ç´°çœ‹è‘—ä½ çš„å±¥æ­·ï¼Œæ‰¾åˆ°ä½ åˆé©çš„è·ç¼ºï¼Ÿ</p><p>#æˆ‘å¦ç™½èªªå¾ˆå¤šäººé€£è‡ªå·±è¦ä»€éº¼éƒ½ä¸çŸ¥é“</p><p>çµé ­å—åƒ±æ–¼çµé ­å…¬å¸èˆ‡å§”è¨—ä¼æ¥­ï¼Œä½ ä¸æ€è€ƒè‡ªå·±æƒ³è¦ä»€éº¼ï¼Œå°±è®“ä»–çš„å®¢æˆ¶èˆ‡ä»–è‡ªå·±çš„æ¥­ç¸¾çé‡‘å¹«ä½ æ±ºå®šã€‚</p><p>#è«‹çµé ­å¹«å¿™ä¸ä»£è¡¨ä½ å¯ä»¥ä¸æ€è€ƒè‡ªå·±çš„è·æ¶¯</p><p>èˆ‡çµé ­æ‰“äº¤é“å¯ä»¥ç¯€çœä½ çš„æ™‚é–“ï¼Œæ›´å¿«æ‰¾åˆ°ç†æƒ³è·ç¼ºï¼Ÿ<br>åŒç†å¦‚ä¸Šï¼Œç•¶çµé ­ä¸¦æ²’æœ‰æ‰“ç®—ç«™åœ¨ä½ çš„è§’åº¦æ€è€ƒæ™‚ï¼Œä»–åªæœƒåŸºæ–¼è‡ªå·±çš„åˆ©ç›Šé¸å‡ºè·ç¼ºç„¶å¾Œä¸Ÿçµ¦ä½ ï¼Œè€Œä½ â€”â€”æˆ‘çš„æœ‹å‹ï¼Œå¯èƒ½å¾—è«‹å€‹å‡é™ªä»–ç©é€™ç¨®å…’æˆ²ã€‚</p><p>#çµé ­ä¸ç”¨æ‰¿æ“”è·Ÿè€é—†è«‹å‡çš„å£“åŠ›ä½†ä½ å¿…é ˆè¦</p><p>çµé ­å› ç‚ºèˆ‡å°æ–¹å…¬å¸è«‡éï¼Œæ¯”åªé€éJDçœ‹æ›´æ¸…æ¥šå…¬å¸è¦ä»€éº¼æ¨£çš„äººï¼Ÿ<br>å¯èƒ½æ˜¯ï¼Œä½†ä¸ä¸€å®šã€‚èˆ‰æˆ‘ç›®å‰ä¸€é™£å­çš„ç¶“æ­·ä¾†èªªï¼Œæˆ‘åœ¨è·Ÿçµé ­è«‡å®Œï¼Œå±¥æ­·è¡¨éƒ½å¯„å‡ºå»äº†ï¼Œå°æ–¹æ‰èªªå…¬å¸éœ€è¦æ‰¾äº”å¹´ç¶“é©—çš„å·¥ç¨‹å¸«ï¼Œè€Œæˆ‘â€”â€”å¾å±¥æ­·ä¸Šä¾†ï¼Œå¾ˆæ˜é¡¯å°±çŸ¥é“ä¸åˆé©ã€‚</p><p>#è·Ÿä½ è«‡çš„çµé ­æœªå¿…æ˜¯èˆ‡åˆä½œå…¬å¸è«‡çš„é‚£ä¸€ä½</p><p>èˆ‡çµé ­èŠå¤©ï¼Œäº†è§£è‡ªå·±çš„å¸‚å ´è¡Œæƒ…ï¼Ÿ<br>é€™æ‡‰è©²æ˜¯æ­£ç¢ºçš„ï¼Œä½†ä½ å¯èƒ½å¯ä»¥å†æƒ³ä¸€æƒ³ï¼Œåªèƒ½å¤ é€éçµé ­çš„æ–¹å¼è©•ä¼°å—ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥ä¸Ÿä½ çš„ç†æƒ³è·ç¼ºçœ‹çœ‹ï¼Ÿ</p><p>#ä½¿ç”¨çµé ­ä¸è©²æ˜¯ä½ ç–æ–¼åšåŠŸèª²çš„è—‰å£</p><p>çµé ­æœƒå¹«ä½ çˆ­å–æ›´å¥½çš„è–ªè³‡æ¢ä»¶ï¼Ÿ<br>é¡æˆ‘æ²’é‡éï¼Œå€’æ˜¯æœ‰é‡åˆ°å¹«å°é¢å…¬å¸çœé ç®—ä¾†å£“æˆ‘è–ªæ°´çš„ï¼Œå¯èƒ½æˆ‘ä¸æ˜¯è‡ºå¤§è³‡å·¥ç¢©å§ï¼Œå‘µå‘µ</p><p>çµé ­æœƒå¹«ä½ åšè·æ¶¯è¦åŠƒçš„åƒè€ƒï¼Ÿ</p><p>é€™ä¸€é»è¦ç‰¹åˆ¥æ³¨æ„ï¼Œå› ç‚ºæˆ‘ææ··éã€‚<br>ç¹¼çºŒé‡ç”³æˆ‘ä¹‹å‰çš„è«–é»ï¼Œä¸è¦æŠŠçµé ­ç•¶æˆä½ æ‡¶æƒ°ä¸åšåŠŸèª²çš„è—‰å£ï¼Œå¦‚æœä½ æ²’æƒ³æ³•ï¼Œå°±è®“ä»–çš„æ¥­ç¸¾çé‡‘ä¾†æ±ºå®šä½ çš„è·æ¶¯ã€‚<br>æ­£ç¢ºçš„äº¤æµå§¿æ…‹æ˜¯ï¼Œå·²ç¶“åšå¥½çš„å……è¶³çš„æº–å‚™å¾Œï¼Œæœ€å¾Œè·Ÿçµé ­ç¢ºèªä¸€æ¬¡æœ‰æ²’æœ‰å°‘æ³¨æ„åˆ°çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯é‚£ç¨®ã€Œæ¬¸ä½ è¦ºå¾—å·¥ç¨‹å¸«å¥½ä¸å¥½ï¼Œå°ç©é›»æ˜¯ä¸æ˜¯éƒ½å¹´è–ª200è¬å•Šã€é‚£æ¨£çš„éš¨ä¾¿æ…‹åº¦ã€‚<br>è·æ¶¯è¦åŠƒå¸«ä¸¦ä¸æ˜¯åœ¨ä»–çš„å·¥ä½œç¯„åœå…§ï¼Œæ‰€ä»¥å°±ç®—ä»–æ²’æœ‰ç‚ºäº†è‡ªå·±æ¥­ç¸¾çé‡‘æ¬ºé¨™ä½ ï¼Œä¹Ÿä¸æ„å‘³è‘—ä»–èƒ½ç‚ºä½ åšå‡ºæ­£ç¢ºçš„è·æ¶¯è¦åŠƒã€‚ä»–å³ä½¿æƒ³ä¹Ÿæœªå¿…åšå¾—åˆ°ï¼Œè«‹å°Šé‡è·æ¶¯è¦åŠƒå¸«çš„å°ˆæ¥­ã€‚ç„¶å¾Œâ€”â€”</p><p>#è‡ªå·±çš„æœªä¾†æ–¹å‘è«‹è‡ªå·±æƒ³è¬è¬</p><p>è¨»ï¼šæœ¬æ–‡æ²’æœ‰ä»»ä½•ä¸€ä½å°ç£çµé ­å—åˆ°å‚·å®³ï¼Œç›®å‰é›·åˆ°æˆ‘çš„éƒ½èµ´æ—¥çµé ­</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>è±è¶£å¾…ä¸€å¹´å¤šçš„æ„Ÿæƒ³</title>
    <link href="/2025/10/27/%E8%B1%90%E8%B6%A3%E5%BE%85%E4%B8%80%E5%B9%B4%E5%A4%9A%E7%9A%84%E6%84%9F%E6%83%B3/"/>
    <url>/2025/10/27/%E8%B1%90%E8%B6%A3%E5%BE%85%E4%B8%80%E5%B9%B4%E5%A4%9A%E7%9A%84%E6%84%9F%E6%83%B3/</url>
    
    <content type="html"><![CDATA[<p>å¾…äº†ä¸€å¹´ä¸‰å€‹å¤šæœˆè‡ªè«‹é›¢è·ï¼Œæˆ‘è¦ºå¾—æˆ‘æ‡‰è©²æ¯”é¢è©¦éæˆ–æ˜¯åªçŸ­çŸ­å¾…éä¸€é™£å­çš„äººè¦å¤šä¸€é»è³‡æ ¼è©•è«–é€™é–“å…¬å¸ã€‚<br>å…ˆèªªçµè«–ï¼Œæˆ‘ä¸å»ºè­°ä»»ä½•çš„æŠ€è¡“è€…â€”â€”ä¸è«–ä½ æ˜¯æ“æœ‰æŠ€è¡“çš„æŠ€è¡“è€…ï¼Œæˆ–æ˜¯è‡ªè©¡æœ‰æŠ€è¡“çš„æŠ€è¡“è€…ï¼Œå‰ä¾†é€™é–“å…¬å¸ä»»è·ã€‚<br>ä½œç‚ºä¸€å€‹å¾Œç«¯å·¥ç¨‹å¸«ï¼Œä¸è«–ä½ çš„ç¶“é©—å¦‚ä½•ã€æŠ€èƒ½å¦‚ä½•ï¼Œè€é—†éƒ½å‚¾å‘ç›´æ¥é–‹çµ¦ä½ çµ±ä¸€è–ªè³‡ï¼Œé€™é»å°±æœƒé€ æˆè¨±å¤šäººçš„ä¸æ»¿ï¼Œå¦å¤–å…¬å¸æœ€å–œæ­¡æ‹›è½‰è·ç­å‡ºä¾†çš„å°æœ‹å‹ï¼Œé–‹çµ¦ä»–å€‘é‚„å¯ä»¥éä¸‹å»çš„éŒ¢ï¼Œç”¨å¿«æ¨‚è·å ´çš„æ°£æ°›æŠŠäººç•™åœ¨å…¬å¸ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼Œå·¥ç¨‹å¸«çš„ç®¡ç†åˆ¶åº¦ä¹Ÿæ˜¯ä¸€å¤§å•é¡Œï¼Œæ‰€æœ‰å·¥ç¨‹å¸«èˆ‡PMéƒ½ç›´å±¬æ–¼æŠ€è¡“é•·åº•ä¸‹ï¼Œç„¶è€ŒæŠ€è¡“é•·é²é²ä¸æƒ³è¦å»åƒ±ç”¨äººå»åˆ†æ“”ç®¡ç†é€™ä¸€å¡Šï¼Œé€™å°±å°è‡´ä¸»ç®¡å°å°ˆæ¡ˆçš„é›†ä¸­åŠ›ä¸è¶³çš„å‰æä¸‹ï¼Œåˆæ¡æœ‰æ‰€æœ‰äº‹ç‰©çš„ç®¡ç†æ¬Šï¼Œå¤§å¤§å°å°çš„äº‹æƒ…éƒ½è¦è¨è«–ï¼Œä½ æƒ³æƒ³æ‰€æœ‰å·¥ç¨‹å¸«èˆ‡PMéƒ½è¦æ¶é€™å€‹äººçš„æ™‚é–“å»è¨è«–æœƒæœ‰å¤šå¿™ç¢Œã€‚<br>é™¤äº†æ¥­å‹™ç„¡æ³•å¿«é€Ÿè¿­ä»£é€™å€‹ç¼ºé»å¤–ï¼Œåœ¨è€ƒç¸¾ä¸Šä¹ŸåŒæ­¥å½±éŸ¿è€ƒæ ¸ï¼Œä¸æ™‚æ™‚è·³å‡ºä¾†è¡¨ç¾è€é—†å°±ç•¶ä½ ä»€éº¼éƒ½æ²’æœ‰åšï¼Œå¹´çµ‚ä½ å°±çŸ¥é“æ˜¯ä»€éº¼æƒ…æ³ã€‚<br>å¦å¤–ä¸€å€‹å¤§å•é¡Œæ˜¯å…¬å¸ä½¿ç”¨æŠ€è¡“è€èˆŠï¼Œæ¯”æ–¹èªªå¾Œç«¯å®£ç¨±ä½¿ç”¨çš„æ˜¯Javaï¼Œä½†é€²å»æ‰çŸ¥é“ç”¨çš„æ˜¯Groovyï¼Œä½ ä»¥ç‚ºæ˜¯SpringBootçµæœæ˜¯æ—©å·²ç¶“è¢«æ™‚ä»£æ·˜æ±°çš„Grailsï¼Œè€Œä¸”æ¥­å‹™æ¨¡å¼å¤ªéè¤‡é›œï¼Œæ²’æœ‰æ ¸å¿ƒäººå“¡æ”¯æŒé‡æ§‹æ ¹æœ¬å‹•ä¸äº†ï¼Œæ­¤å¤–ç¶œåˆå‰é¢æè¿°çš„ä½ æ‡‰è©²å¯ä»¥çŸ¥é“é€™ä¸æ˜¯ä»¶åœ¨äººåŠ›ä¸Šå¥½æ¨å‹•çš„æƒ…å¢ƒã€‚</p><p>èªªå®Œäº†å£è™•ï¼Œé‚£ç‚ºäº†å¹³è¡¡ä¸€ä¸‹è§€æ„Ÿï¼Œæˆ‘é‚„æ˜¯å¯ä»¥èªªä¸€ä¸‹ä»–çš„å¥½è™•ï¼š<br>å¥³å‹æ¯”ä¾‹è¼ƒé«˜ï¼Œå…¨å…¬å¸äººè¶…éä¸€åŠæ˜¯å¥³æ€§ï¼Œå°æ–¼æƒ³è¦åœ¨æœ‰å¦¹å­æ”¯æŒä½ å·¥ä½œçš„ç’°å¢ƒçš„è©±æ˜¯å¯ä»¥çš„ã€‚<br>æ•´é«”æ¥­å‹™é£½å’Œï¼Œç°¡å–®åŠŸèƒ½å¾®èª¿ã€æ”¹æ”¹æ¨£å¼ï¼Œå·¥ä½œå…§å®¹æ˜¯è¼•é¬†ä¸”æ²’æœ‰å¤ªå¤šå£“åŠ›çš„ï¼Œæœ‰äº›åŒäº‹æ˜¯å®¶è£¡æœ‰ç¤¦ï¼Œä¸‹å‡¡ä¾†èˆ‡ä¿—äººå€‘é«”é©—å·¥ç¨‹å¸«æ–‡åŒ–çš„å¤§ä»™ã€‚<br>æœ‰é›¶é£Ÿæœ‰å’–å•¡ï¼Œä½†æ˜¯å’–å•¡è¦éŒ¢ä¸€æ¯å…«å¡Š<br>å¹´çµ‚2å€‹æœˆï¼Œä¸‰ç¯€æ‹‹å°„å…¨è¯ç¦®åˆ¸ï¼Œä¸æ™‚æœƒæœ‰å®¢æˆ¶é€çš„ä¸€äº›æ±è¥¿ï¼Œä»€éº¼ç¿ ç‰ç™½èœæ¯å­ä¹‹é¡çš„ã€‚</p><p>å¤§æ¦‚å°±åˆ†äº«åˆ°é€™é‚Šï¼Œæœ‰èˆˆè¶£çš„åœ¨å•æˆ‘ï¼Œå°±é†¬ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¿ƒå¾— å·¥ä½œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Review Python fundmentals after 3 years</title>
    <link href="/2025/09/11/Review-Python-fundmentals-after-3-years/"/>
    <url>/2025/09/11/Review-Python-fundmentals-after-3-years/</url>
    
    <content type="html"><![CDATA[<p>Hi, after many years I still find Python an attractive programming language even after I have worked as a Java engineer for pass three years.<br>It has plenty of modern features compared to Java language, and most importantly, many startups use Python or Go for their systems. So Iâ€™ve decided that itâ€™s time for me to learn Python again.</p><h3 id="Data-Structure"><a href="#Data-Structure" class="headerlink" title="Data Structure"></a>Data Structure</h3><h4 id="int-string"><a href="#int-string" class="headerlink" title="int&amp;string"></a>int&amp;string</h4><ul><li>Immutable data type.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">i = <span class="hljs-number">0</span><br>s = <span class="hljs-string">&quot;123&quot;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><ul><li>Mutable data type. Use index to search element <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">party = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br></code></pre></td></tr></table></figure></li></ul><h4 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h4><ul><li>Immutable data type. often used in *args</li><li>unchange list<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">party = (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure></li></ul><h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><ul><li>distinct element.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>])<br></code></pre></td></tr></table></figure></li></ul><h4 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h4><ul><li>map structured data type.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">member_score = &#123;<span class="hljs-string">&quot;John&quot;</span>:<span class="hljs-number">98</span>,<span class="hljs-string">&quot;Helen&quot;</span>:<span class="hljs-number">78</span>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="using-Function"><a href="#using-Function" class="headerlink" title="using Function"></a>using Function</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">standard_arg</span>(<span class="hljs-params">arg</span>):<br>    <span class="hljs-built_in">print</span>(arg)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pos_only_arg</span>(<span class="hljs-params">arg, /</span>): <span class="hljs-comment"># only allow position</span><br>    <span class="hljs-built_in">print</span>(arg)<br>pos_only_arg(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">kwd_only_arg</span>(<span class="hljs-params">*, arg</span>): <span class="hljs-comment"># only allow argument</span><br>    <span class="hljs-built_in">print</span>(arg)<br>kwd_only_arg(arg=<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">combined_example</span>(<span class="hljs-params">pos_only, /, standard, *, kwd_only</span>):<br>    <span class="hljs-built_in">print</span>(pos_only, standard, kwd_only)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">error_foo</span>(<span class="hljs-params">name, **kwds</span>): <span class="hljs-comment"># kwds will collect argument into dict. may conflict with name&amp;kwds </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;name&#x27;</span> <span class="hljs-keyword">in</span> kwds<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">name, /, **kwds</span>): <span class="hljs-comment"># best practice. Avoid conflict between name&amp;&amp;kwds # kwds will collect argument into dict</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;name&#x27;</span> <span class="hljs-keyword">in</span> kwds<br>foo(<span class="hljs-number">1</span>, **&#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-number">2</span>&#125;)<br><br><span class="hljs-comment"># import argument as tuple</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">boo</span>(<span class="hljs-params">*args</span>): <br>    <span class="hljs-built_in">print</span>(args)<br>boo(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">ham: <span class="hljs-built_in">str</span>, eggs: <span class="hljs-built_in">str</span> = <span class="hljs-string">&#x27;eggs&#x27;</span></span>) -&gt; <span class="hljs-built_in">str</span>: <span class="hljs-comment"># Comment in Function</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Annotations:&quot;</span>, f.__annotations__)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Arguments:&quot;</span>, ham, eggs)<br>    <span class="hljs-keyword">return</span> ham + <span class="hljs-string">&#x27; and &#x27;</span> + eggs<br></code></pre></td></tr></table></figure><h3 id="Python-lambda"><a href="#Python-lambda" class="headerlink" title="Python lambda"></a>Python lambda</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">make_incre</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> x: x + n<br>f = make_incre(<span class="hljs-number">1</span>)<br>g = make_incre(<span class="hljs-number">2</span>)<br>h = make_incre(<span class="hljs-number">3</span>)<br><br><span class="hljs-comment"># using Function Composition</span><br>result = f(g(h(<span class="hljs-number">0</span>)))  <span class="hljs-comment"># 0 + 3 + 2 + 1</span><br><br>comb = [(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>] <span class="hljs-keyword">if</span> x != y]<br>combs = []<br><span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]:<br>    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-number">4</span>]:<br>        <span class="hljs-keyword">if</span> x != y:<br>            combs.append((x, y))<br><br></code></pre></td></tr></table></figure><h3 id="Deque"><a href="#Deque" class="headerlink" title="Deque"></a>Deque</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque<br>queue = deque([<span class="hljs-string">&quot;Eric&quot;</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;Michael&quot;</span>])<br>queue.append(<span class="hljs-string">&quot;Terry&quot;</span>)           <span class="hljs-comment"># ([&quot;Eric&quot;, &quot;John&quot;, &quot;Michael&quot;,&quot;Terry&quot;]</span><br>queue.append(<span class="hljs-string">&quot;Graham&quot;</span>)          <span class="hljs-comment"># ([&quot;Eric&quot;, &quot;John&quot;, &quot;Michael&quot;,&quot;Terry&quot;,&quot;Graham&quot;]</span><br>queue.popleft() <span class="hljs-comment"># ([&quot;John&quot;, &quot;Michael&quot;,&quot;Terry&quot;,&quot;Graham&quot;]</span><br>queue.pop() <span class="hljs-comment"># ([&quot;John&quot;, &quot;Michael&quot;,&quot;Terry&quot;]</span><br></code></pre></td></tr></table></figure><h3 id="Matrix-transpose-in-Python"><a href="#Matrix-transpose-in-Python" class="headerlink" title="Matrix transpose in Python"></a>Matrix transpose in Python</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">matrix = [<br>    [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],<br>    [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>],<br>    [<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>],<br>]<br><span class="hljs-comment"># 1.</span><br><span class="hljs-built_in">print</span>([[row[i] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> matrix] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)])<br><span class="hljs-comment"># 2.</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(*matrix))) <br></code></pre></td></tr></table></figure><h3 id="Techique-of-for-loop"><a href="#Techique-of-for-loop" class="headerlink" title="Techique of for loop"></a>Techique of for loop</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">knights = &#123;<span class="hljs-string">&#x27;gallahad&#x27;</span>: <span class="hljs-string">&#x27;the pure&#x27;</span>, <span class="hljs-string">&#x27;robin&#x27;</span>: <span class="hljs-string">&#x27;the brave&#x27;</span>&#125;<br><span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> knights.items(): <span class="hljs-comment"># key &amp; value</span><br>    <span class="hljs-built_in">print</span>(k, v)<br>    <br><span class="hljs-keyword">for</span> i, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>([<span class="hljs-string">&#x27;tic&#x27;</span>, <span class="hljs-string">&#x27;tac&#x27;</span>, <span class="hljs-string">&#x27;toe&#x27;</span>]): <span class="hljs-comment"># value with index</span><br>    <span class="hljs-built_in">print</span>(i, v)<br>    <br>questions = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;quest&#x27;</span>, <span class="hljs-string">&#x27;favorite color&#x27;</span>]<br>answers = [<span class="hljs-string">&#x27;lancelot&#x27;</span>, <span class="hljs-string">&#x27;the holy grail&#x27;</span>, <span class="hljs-string">&#x27;blue&#x27;</span>]<br><span class="hljs-keyword">for</span> q, a <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(questions, answers): <span class="hljs-comment"># composition</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;What is your &#123;0&#125;?  It is &#123;1&#125;.&#x27;</span>.<span class="hljs-built_in">format</span>(q, a))<br></code></pre></td></tr></table></figure><h3 id="Other-concept"><a href="#Other-concept" class="headerlink" title="Other concept"></a>Other concept</h3><ul><li>Use <code>json.dumps(x)</code> to serialize the object into json string</li><li>Use <code>json.loads(x)</code> to deserialize the jsonstring into specific object</li><li>When python interpreter boots, namespace will be created an never be deleted</li><li><code>namespace</code> is a space that python can store the variable, so even variable which has same name may stored in many space based on their scope.</li><li>python is no <code>private</code>, convently we use <code>__argument</code> as a private attribute and avoid accidently override by subclass or something else.<br><code>_age</code> use int protect attribute.</li><li>To increase the loading speed of the python module, python store their compile version into <code>ï¼¿_pycache__</code> and named <code>module.version.pyc</code></li></ul><h3 id="Use-inerator"><a href="#Use-inerator" class="headerlink" title="Use inerator"></a>Use inerator</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">s = <span class="hljs-string">&#x27;abc&#x27;</span><br>it = <span class="hljs-built_in">iter</span>(s)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(it)) <span class="hljs-comment">#a</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(it)) <span class="hljs-comment">#b</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(it)) <span class="hljs-comment">#c</span><br></code></pre></td></tr></table></figure><h3 id="Use-generator"><a href="#Use-generator" class="headerlink" title="Use generator"></a>Use generator</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse</span>(<span class="hljs-params">data</span>):<br>    <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(data)-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">yield</span> data[index] <span class="hljs-comment"># return part of element, to aviod resource over-occupied</span><br><span class="hljs-comment"># usage1</span><br>g = reverse(<span class="hljs-string">&#x27;abc&#x27;</span>)<br><span class="hljs-built_in">next</span>(g)<br><br><span class="hljs-comment"># usage2</span><br><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> reverse(<span class="hljs-string">&#x27;golf&#x27;</span>):<br>    <span class="hljs-built_in">print</span>(char)<br></code></pre></td></tr></table></figure><h3 id="Unit-Test"><a href="#Unit-Test" class="headerlink" title="Unit Test"></a>Unit Test</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">average</span>(<span class="hljs-params">numbers</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(numbers, <span class="hljs-built_in">list</span>):<br>        <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">&quot;Input must be a list&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(numbers) / <span class="hljs-built_in">len</span>(numbers)<br><br><span class="hljs-keyword">import</span> unittest<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestStatisticalFunctions</span>(unittest.TestCase):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_average</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>.assertEqual(average([<span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">70</span>]), <span class="hljs-number">40.0</span>)<br>        <span class="hljs-variable language_">self</span>.assertEqual(<span class="hljs-built_in">round</span>(average([<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]), <span class="hljs-number">1</span>), <span class="hljs-number">4.3</span>)<br>        <span class="hljs-keyword">with</span> <span class="hljs-variable language_">self</span>.assertRaises(ZeroDivisionError):<br>            average([])<br>        <span class="hljs-keyword">with</span> <span class="hljs-variable language_">self</span>.assertRaises(TypeError):<br>            average(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">70</span>)<br></code></pre></td></tr></table></figure><h3 id="Multi-thread"><a href="#Multi-thread" class="headerlink" title="Multi-thread"></a>Multi-thread</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-comment"># Build up a shared task queue</span><br>task_queue = queue.Queue()<br><br><span class="hljs-comment"># Define worker thread of what they&#x27;re doing</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        task = task_queue.get() <span class="hljs-comment"># Thread will be blocked in task_queue.get()ï¼Œuntil queue exists valueã€‚</span><br>        <span class="hljs-keyword">if</span> task <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> æ”¶åˆ°çµæŸè¨Šè™Ÿï¼Œåœæ­¢å·¥ä½œ&quot;</span>)<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;name&#125;</span> æ­£åœ¨è™•ç†ä»»å‹™ï¼š<span class="hljs-subst">&#123;task&#125;</span>&quot;</span>)<br>        time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># simulate the execution</span><br>        task_queue.task_done()<br><br><span class="hljs-comment"># Create the worker thread</span><br>threads = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):<br>    t = threading.Thread(target=worker, args=(<span class="hljs-string">f&quot;å·¥ä½œè€…-<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>,))<br>    t.start() <span class="hljs-comment"># Let it execute worker function. These thread will waiting for the task in the background</span><br>    threads.append(t)<br><br><span class="hljs-comment"># Put task into main thread</span><br><span class="hljs-keyword">for</span> task_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    task_queue.put(<span class="hljs-string">f&quot;ä»»å‹™-<span class="hljs-subst">&#123;task_num&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># wait until all task complete </span><br>task_queue.join()<br><br><span class="hljs-comment"># Notify end message to the worker</span><br><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> threads:<br>    task_queue.put(<span class="hljs-literal">None</span>)<br><br><span class="hljs-comment"># Wait all worker complete</span><br><span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:<br>    t.join()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;All Task Complete!!!&quot;</span>)<br></code></pre></td></tr></table></figure><h3 id="Python-GIL"><a href="#Python-GIL" class="headerlink" title="Python GIL"></a>Python GIL</h3><p>&#x2F;&#x2F;TODO</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Remark Page</title>
    <link href="/2025/09/11/hello-world/"/>
    <url>/2025/09/11/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Hexo æ¨¡æ¿ è³‡è¨Šåƒè€ƒï¼š<a href="https://hexo.fluid-dev.com/docs/guide/#%E9%85%8D%E7%BD%AE">https://hexo.fluid-dev.com/docs/guide/#%E9%85%8D%E7%BD%AE</a><br>å¦‚ä½•æ›´æ›Hexoä¸»é¡Œ åƒè€ƒæ–‡ä»¶ï¼š<a href="https://s81679.github.io/2020/02/09/change-themes/">https://s81679.github.io/2020/02/09/change-themes/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>memo</tag>
      
      <tag>usage</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>èªªæ˜Java @Functionalinterface çš„åŠŸç”¨</title>
    <link href="/2025/02/02/%E8%AA%AA%E6%98%8EJava-Functionalinterface-%E7%9A%84%E5%8A%9F%E7%94%A8/"/>
    <url>/2025/02/02/%E8%AA%AA%E6%98%8EJava-Functionalinterface-%E7%9A%84%E5%8A%9F%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>Javaâ”€â”€çœ¾æ‰€çš†çŸ¥ï¼Œé€™æ˜¯ä¸€å€‹éå¸¸OOPçš„èªè¨€ï¼ŒJavaçš„è¬ç‰©çš†ç‰©ä»¶çš„æ¦‚å¿µä½¿å¾—Javaç„¡æ³•åƒPythonä¸€æ¨£å¯«å‡ºä¸ä¾è³´ç‰©ä»¶çš„æ–¹æ³•ï¼Œç°¡è¨€ä¹‹ï¼ŒPythonå¯ä»¥å¯«å‡ºé€™æ¨£çš„ç¨‹å¼ç¢¼è€ŒJavaä¸è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">printHello</span>():<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello&quot;</span><br><span class="hljs-built_in">print</span>(printHello() + <span class="hljs-string">&quot;Clark)</span><br></code></pre></td></tr></table></figure><p>å› æ­¤ï¼Œ<code>Functional Programming</code>è¢«ä¸å°‘äººè©•åƒ¹ä½¿ç”¨Javaæ’°å¯«ç¸½æ˜¯æœ‰é»å½†æ‰­ï¼Œä¹Ÿæœ‰ä¸€éƒ¨åˆ†æ˜¯é€™å€‹åŸå› ã€‚é‚£åœ¨æåˆ°@Functionalinterfaceé€™å€‹è¨»è§£å‰ï¼Œæˆ‘å€‘å…ˆä¾†æä¸€æJavaçš„FPå¯¦ä½œï¼Œä¹Ÿå°±æ˜¯å¤§å®¶å¸¸ç”¨çš„Lambdaå§ã€‚<br>Lambdaå¯ä»¥å°‡Functionä»¥åƒæ•¸çš„å½¢å¼å‚³éï¼Œæ°å¥½ç¬¦åˆFPå°‡Functionä½œç‚ºä¸€ç­‰å…¬æ°‘çš„æ¦‚å¿µï¼Œåœ¨Java 8 å¼•å…¥Lambdaä¹‹å¾Œï¼Œå°±å¯ä»¥åœ¨ä¸ä½¿ç”¨ç‰©ä»¶çš„æƒ…å½¢ä¸‹ä½¿ç”¨æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯åŒ¿åå‡½å¼(anonymous function)ã€‚æˆ‘å€‘ä¾†çœ‹çœ‹å¹¾å€‹ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Map&lt;String, Integer&gt; nameMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>nameMap.put(<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> nameMap.computeIfAbsent(<span class="hljs-string">&quot;John&quot;</span>, s -&gt; s.length());<br></code></pre></td></tr></table></figure><p>è¡Œ3çš„ä½œç”¨æ˜¯ï¼Œå‡è¨­nameMapä¸­æ²’æœ‰åç‚ºJohnçš„Keyçš„è©±ï¼Œå°±åŸ·è¡Œæ–¹æ³•ä¸­çš„åŒ¿åå‡½å¼ï¼Œä¹Ÿå°±æ˜¯èªªå°‡æœƒå›å‚³4é€™å€‹å€¼ã€‚å¯«æ³•ä¹Ÿå¯ä»¥æ”¹æˆæ–¹æ³•åƒç…§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> nameMap.computeIfAbsent(<span class="hljs-string">&quot;John&quot;</span>, String::length);<br></code></pre></td></tr></table></figure><p>æˆ–æ˜¯å°‡æ–¹æ³•æå–å‡ºä¾†ï¼Œä¹Ÿå°±æ˜¯èªªä¸Šé¢çš„æ–¹æ³•å¯ä»¥æ”¹å¯«æˆä»¥ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Map&lt;String, Integer&gt; nameMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>nameMap.put(<span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-number">100</span>);<br>Function&lt;String,Integer&gt; compute = String::length;<br><span class="hljs-type">Integer</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> nameMap.computeIfAbsent(<span class="hljs-string">&quot;John&quot;</span>, compute); <span class="hljs-comment">// Functionä»‹é¢ æ¥æ”¶ä¸€å€‹è¼¸å…¥èˆ‡è¼¸å‡ºåƒæ•¸</span><br></code></pre></td></tr></table></figure><p>å¦å¤–Functionä¹Ÿæ¥å—çµ„åˆ(Composition)ï¼Œä¹Ÿå°±æ˜¯èªªFunctionæ¥çºŒåŸ·è¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">Function&lt;String, String&gt; firstExecute = s -&gt; s + <span class="hljs-string">&quot;å°±åªæœƒ&quot;</span>;<br>Function&lt;String, String&gt; secondExecute = s -&gt;  s + <span class="hljs-string">&quot;é¨™äºº&quot;</span>;<br>Function&lt;String, String&gt; quoteIntToString = secondExecute.compose(firstExecute);<br>assertEquals(<span class="hljs-string">&quot;åˆè¯å°±åªæœƒé¨™äºº&quot;</span>, quoteIntToString.apply(<span class="hljs-string">&quot;åˆè¯&quot;</span>));<br></code></pre></td></tr></table></figure><p>é€éä»¥ä¸Šç¨‹å¼ç¢¼ï¼Œå‚³å…¥åƒæ•¸æœƒå…ˆåŸ·è¡ŒfirstExecuteï¼Œå†åŸ·è¡ŒsecondExecuteï¼Œæœ€å¾Œæˆ‘å€‘ä½¿ç”¨æ–·è¨€å¾—å‡ºä¸€å€‹çµè«–ï¼Œé‚£å°±æ˜¯ï¼šåˆè¯å°±åªæœƒé¨™äººã€‚Q.E.D. è­‰æ˜å®Œç•¢</p><p>Functioné€™å€‹ä»‹é¢ç›®å‰å·²ç¶“æœ‰ä¸å°‘Javaå¾—å¯¦ä½œï¼Œä»¥ä¸‹ä»‹ç´¹éƒ¨åˆ†ï¼š</p><ol><li>Suppliers</li><li>Consumers</li><li>Predicates</li><li>Operators</li></ol><h4 id="Suppliers"><a href="#Suppliers" class="headerlink" title="Suppliers"></a>Suppliers</h4><p>ä¸æ¥å—å‚³å…¥ï¼Œåªæœƒå‚³å‡ºä¸€å€‹å€¼ï¼Œé€šå¸¸ç”¨ä¾†å»¶é²ç”¢ç”ŸæŸå€‹é‹ç®—å€¼ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œç›´åˆ°å‘¼å«.get()ä¹‹å‰Lambdaéƒ½ä¸æœƒè¢«åŸ·è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">squareLazy</span><span class="hljs-params">(Supplier&lt;String&gt; lazyValue)</span> &#123;<br>    <span class="hljs-keyword">return</span> lazyValue.get();<br>&#125;<br><br>Supplier&lt;String&gt; soyoriinWord = () -&gt; <span class="hljs-string">&quot;å°±ç”±æˆ‘ä¾†å°‡å®ƒçµæŸ&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">valueSquared</span> <span class="hljs-operator">=</span> squareLazy(soyoriinWord);<br></code></pre></td></tr></table></figure><h4 id="Consumers"><a href="#Consumers" class="headerlink" title="Consumers"></a>Consumers</h4><p>èˆ‡Supplierç›¸åï¼Œæ¥å—ä¸€å€‹æˆ–å¤šå€‹å‚³å…¥ï¼Œä½†ä¸å›å‚³ä»»ä½•æ•¸ï¼Œä¸‹æ–¹æ¡ˆä¾‹æˆ‘å€‘å¯ä»¥å°å‡º<br><strong><code>å¾ä¾†ä¸è¦ºå¾—, ç©æ¨‚åœ˜, é–‹å¿ƒé,</code></strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Consumer&lt;String&gt; template = name -&gt; System.out.println(name + <span class="hljs-string">&quot;,&quot;</span>);<br>List&lt;String&gt; sentenceList = Arrays.asList(<span class="hljs-string">&quot;å¾ä¾†ä¸è¦ºå¾—&quot;</span>, <span class="hljs-string">&quot;ç©æ¨‚åœ˜&quot;</span>, <span class="hljs-string">&quot;é–‹å¿ƒé&quot;</span>);<br>sentenceList.forEach(template);<br></code></pre></td></tr></table></figure><h4 id="Predicates"><a href="#Predicates" class="headerlink" title="Predicates"></a>Predicates</h4><p>Predicateçš„ç‰¹æ€§æ˜¯æ¥æ”¶å€¼ï¼Œä½†åªå›å‚³booleanï¼Œå¸¸ç”¨æ–¼ .stream()çš„ filter()ç•¶ä¸­ã€‚ä»¥ä¸‹æ¡ˆä¾‹æˆ‘å€‘å¯ä»¥æ‰¾å‡ºåˆè¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Predicate&lt;String&gt; findLiar = name -&gt; name.equals(<span class="hljs-string">&quot;åˆè¯&quot;</span>);<br>List&lt;String&gt; aveMujicaList = Arrays.asList(<span class="hljs-string">&quot;ç¦&quot;</span>, <span class="hljs-string">&quot;æµ·éˆ´&quot;</span>, <span class="hljs-string">&quot;åˆè¯&quot;</span>, <span class="hljs-string">&quot;å°ç¥¥&quot;</span>, <span class="hljs-string">&quot;ç ´è²“&quot;</span>);<br>List&lt;String&gt; liarMemberList = aveMujicaList.stream()<br>        .filter(findLiar)<br>        .toList();<br>System.out.println(liarMemberList);<br></code></pre></td></tr></table></figure><h4 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h4><p>Operatoræ˜¯ç”¨ä¾†è™•ç†å€¼çš„è®ŠåŒ–ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ç¢¼æœƒå°‡æ¯ä¸€å€‹Arrayä¸­çš„å€¼è½‰ç‚ºå¤§å¯«ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">UnaryOperator&lt;String&gt; changeUppercase = String::toUpperCase;<br>List&lt;String&gt; names = Arrays.asList(<span class="hljs-string">&quot;soyorin&quot;</span>, <span class="hljs-string">&quot;tomorin&quot;</span>, <span class="hljs-string">&quot;rikki&quot;</span>);<br>names.replaceAll(changeUppercase);<br></code></pre></td></tr></table></figure><p>æœ€å¾Œ@Functionalintefaceé€™å€‹è¨»è§£æ˜¯ç”¨ä¾†æ¨™ç¤ºFunctionçš„ï¼Œå‡è¨­æˆ‘å€‘æœ‰å¤šå€‹lambdaéƒ½éœ€è¦å¯¦ä½œä¸€å€‹åŠŸèƒ½ï¼Œè€Œä½ å¯ä»¥ä½¿ç”¨ä»‹é¢å»æŒæ§å®ƒï¼Œä½†é€™å€‹ä»‹é¢åªæ˜¯å–®ç´”ç”¨ä¾†åšFunctionalçš„å®šç¾©çš„ï¼Œæ‰€ä»¥ç‚ºäº†æŠŠä»–èˆ‡ä¸€èˆ¬çš„é¡åˆ¥ä½œå€éš”ï¼Œæ–¼æ˜¯å°±å¯ä»¥åŠ å…¥@Functionalinterfaceåšç‚ºå€éš”ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯è§£é‡‹äº†ï¼Œä¸çŸ¥é“çœ‹çš„äººäº†ä¸äº†è§£ï¼Œå¸Œæœ›å„ä½é™¤äº†çŸ¥é“åˆè¯å°±åªæœƒé¨™äººä¹‹å¤–ï¼Œé‚„å¯ä»¥å­¸åˆ°æ›´å¤šJavaçš„ç›¸é—œçŸ¥è­˜ï¼Œé€£åƒ¹æœ€å¾Œä¸€å¤©ï¼Œæˆ‘è¦å»ç¹¼çºŒè£œAve Mujicaäº†ï¼Œå°±é€™æ¨£ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Functional Programming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HATEOAS æ˜¯ä»€éº¼ï¼Ÿ</title>
    <link href="/2025/01/25/HATEOAS-%E6%98%AF%E4%BB%80%E9%BA%BC%EF%BC%9F/"/>
    <url>/2025/01/25/HATEOAS-%E6%98%AF%E4%BB%80%E9%BA%BC%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p><code>Spring HATEOAS</code> æ˜¯é–‹ç™¼ <code>REST</code> æ‡‰ç”¨ç¨‹å¼ä¸­å¸¸å‡ºç¾çš„æ¦‚å¿µï¼Œé€™å€‹åè©åœ¨æˆ‘å·¥ä½œä¸­ä¸¦æ²’æœ‰å‡ºç¾éï¼Œä½†å¾€å¾€è‡ªå­¸å°±æ˜¯è¦æ¥è§¸è‡ªå·±å¹³æ™‚ä¸ç†Ÿæ‚‰çš„äº‹ç‰©ã€‚åœ¨å“­å®Œ â€œæˆ‘å·²ç¶“å­¸ä¸å‹•å•¦ï¼â€ä¹‹å¾Œï¼Œå°±è®“æˆ‘å€‘ä¸€èµ·ä¾†çœ‹çœ‹ <code>Spring HATEOAS</code>å§ã€‚</p><p><code>HATEOAS</code>æ˜¯ç¨®è¦ç¯„ï¼Œèˆ‡æˆ‘å€‘å¸¸ç”¨çš„<code>JSON</code>æ¦‚å¿µç›¸è¿‘ï¼Œ <code>HATEOAS</code> çš„ç›®çš„æ˜¯ï¼Œé™¤äº†å·²ç°¡æ½”çš„JSONæ ¼å¼å›æ‡‰å®¢æˆ¶ç«¯è«‹æ±‚å¤–ï¼Œå¦å¤–å‘ŠçŸ¥å®¢æˆ¶ç«¯å¦‚ä½•å–å¾—ä¸‹ä¸€æ­¥çš„è³‡æºï¼Œèˆ‡ <code>JSON</code> ç›¸ä¼¼ä½†ä¸å®Œå…¨ä¸€è‡´ã€‚ç‚ºäº†å¥½å¥½çš„èªªæ˜å®ƒï¼Œæˆ‘å€‘å…ˆä»‹ç´¹å…©ç¨®http header çš„ Content-Type</p><ul><li>application&#x2F;json</li><li>application&#x2F;hal+json</li></ul><p>ç¬¬ä¸€ç¨®æ˜¯å‚³çµ±çš„ <code>JSON</code>æ ¼å¼ï¼Œå¦ä¸€ç¨®å‰‡æ˜¯å‚³çµ±çš„ <code>JSON</code>åŠ ä¸Š <strong><code>HAL</code></strong> çš„æ”¯æ´ã€‚ <code>HAL</code> å°±æ˜¯å¯¦ä½œ <code>HATEOAS</code> çš„æ–¹æ³•ï¼Œä¸å¤šèªªï¼Œç›´æ¥SHOW YOU THE CODEã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é€™æ˜¯åŸºæœ¬çš„JSONçµæ§‹</span><br>&#123;<br>  <span class="hljs-string">&quot;transactionNumber&quot;</span>: <span class="hljs-string">&quot;Fool001&quot;</span>,<br>  <span class="hljs-string">&quot;transactionResult&quot;</span>: <span class="hljs-string">&quot;SUCCESS&quot;</span><br>&#125;<br><br><span class="hljs-comment">// é€™æ˜¯HATEOASçš„çµæ§‹</span><br>&#123;<br>  <span class="hljs-string">&quot;transactionConfigId&quot;</span>: <span class="hljs-string">&quot;013&quot;</span>,<br>  <span class="hljs-string">&quot;transactionNumber&quot;</span>: <span class="hljs-string">&quot;Fool001&quot;</span>,<br>  <span class="hljs-string">&quot;transactionId&quot;</span>: <span class="hljs-string">&quot;12673&quot;</span>,<br>  <span class="hljs-string">&quot;transactionResult&quot;</span>: <span class="hljs-string">&quot;SUCCESS&quot;</span>,<br>  <span class="hljs-string">&quot;_links&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;self&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/transaction/12673&quot;</span><br>    &#125;,<br>    <span class="hljs-string">&quot;transactionConfig&quot;</span>: &#123;<br>      <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/transactionConfig/013&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å·²ä¸Šæ–¹çš„ä¾‹å­ä¾†èªªï¼Œ <code>JSON</code>åªæœƒå›æ‡‰äº¤æ˜“å–®è™Ÿèˆ‡äº¤æ˜“çµæœï¼Œä½†ä½¿ç”¨ <code>HATEOAS</code> ä¸åƒ…å¯ä»¥å¾—åˆ°çµæœï¼Œé‚„å¯ä»¥å¾—çŸ¥ä¸‹ä¸€æ­¥æƒ³è¦å–å¾—è³‡æºçš„æ–¹å¼ï¼Œé€™æ¨£çš„åšæ³•æœ‰ä¸å°‘å¥½è™•ã€‚</p><ul><li>å¹«åŠ©å®¢æˆ¶ç«¯å‹•æ…‹ç™¼ç¾è³‡æºï¼Œè‹¥æ˜¯ <code>JSON</code>å®¢æˆ¶ç«¯å¿…é ˆè¦é€éå…¶ä»–æ–¹å¼(æ¯”å¦‚èªªæ–‡ä»¶)ï¼Œæ‰èƒ½äº†è§£æ›´å¤šå›æ‡‰çš„è³‡è¨Šã€‚</li><li>é™¤äº†é€£çµä»¥å¤–ï¼Œä¹Ÿå¯ä»¥åŒ…å«ä¸€äº›æ“ä½œï¼Œæ¯”æ–¹èªªæ›´æ–°ã€åˆªé™¤ç­‰ç­‰ã€‚</li><li>å¯«åœ¨responseè£¡é¢ï¼Œæ¸›å°‘äº†APIæ›´æ–°å¿…é ˆåŒæ­¥å¤–éƒ¨çš„å›°æ“¾ã€‚</li></ul><p>å¦‚æœæ˜¯ <code>Spring</code> ï¼Œæœƒä½¿ç”¨ <code>Spring HATEOAS</code> é€™å€‹å¥—ä»¶ä¾†å¯¦ç¾ï¼Œæƒ³è¦ä½¿ç”¨é¦–å…ˆé ˆå¼•å…¥å¥—ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;<br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>å¼•å…¥ä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä½¿ç”¨ï¼Œä»¥ä¸‹æ˜¯ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/payment&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;query/&#123;transactionId&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Transaction <span class="hljs-title function_">getTransaction</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String transactionId)</span> &#123;<br>        <span class="hljs-comment">// å‰µå»º Transaction ç‰©ä»¶</span><br>        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>();<br>        transaction.setTransactionConfigId(<span class="hljs-string">&quot;013&quot;</span>);<br>        transaction.setTransactionNumber(<span class="hljs-string">&quot;Fool001&quot;</span>);<br>        transaction.setTransactionId(transactionId);<br>        transaction.setTransactionResult(<span class="hljs-string">&quot;SUCCESS&quot;</span>);<br><br>        <span class="hljs-comment">// æ·»åŠ  self éˆæ¥</span><br>        transaction.add(linkTo(methodOn(TransactionController.class).getTransaction(transactionId))<br>                .withSelfRel());<br><br>        <span class="hljs-comment">// æ·»åŠ  éˆæ¥</span><br>        transaction.add(Link.of(<span class="hljs-string">&quot;http://localhost:8080/payment/pay/&quot;</span> + transactionId)<br>                .withRel(<span class="hljs-string">&quot;pay&quot;</span>));<br><br>        transaction.add(Link.of(<span class="hljs-string">&quot;http://localhost:8080/payment/refund/&quot;</span> + transactionId)<br>                .withRel(<span class="hljs-string">&quot;refund&quot;</span>));<br><br>        transaction.add(Link.of(<span class="hljs-string">&quot;http://localhost:8080/payment/reverse/&quot;</span> + transactionId)<br>                .withRel(<span class="hljs-string">&quot;reverse&quot;</span>));<br><br>        transaction.add(Link.of(<span class="hljs-string">&quot;http://localhost:8080/payment/settle/&quot;</span> + transactionId)<br>                .withRel(<span class="hljs-string">&quot;settle&quot;</span>));<br><br>        <span class="hljs-keyword">return</span> transaction;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Transaction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RepresentationModel</span>&lt;Transaction&gt; &#123;<br>    <span class="hljs-keyword">private</span> String transactionConfigId;<br>    <span class="hljs-keyword">private</span> String transactionNumber;<br>    <span class="hljs-keyword">private</span> String transactionId;<br>    <span class="hljs-keyword">private</span> String transactionResult;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTransactionConfigId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> transactionConfigId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTransactionConfigId</span><span class="hljs-params">(String transactionConfigId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.transactionConfigId = transactionConfigId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTransactionNumber</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> transactionNumber;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTransactionNumber</span><span class="hljs-params">(String transactionNumber)</span> &#123;<br>        <span class="hljs-built_in">this</span>.transactionNumber = transactionNumber;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTransactionId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> transactionId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTransactionId</span><span class="hljs-params">(String transactionId)</span> &#123;<br>        <span class="hljs-built_in">this</span>.transactionId = transactionId;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTransactionResult</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> transactionResult;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTransactionResult</span><span class="hljs-params">(String transactionResult)</span> &#123;<br>        <span class="hljs-built_in">this</span>.transactionResult = transactionResult;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Transactionæ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œæˆ‘å»ºç«‹äº†ä¸€å€‹æŸ¥è©¢äº¤æ˜“çš„APIï¼Œç•¶å®¢æˆ¶ç«¯æŸ¥è©¢æˆ–æ˜¯å·¥ç¨‹å¸«å€‘ä½¿ç”¨Postmané€²è¡Œæ¸¬è©¦æ™‚ï¼Œæœƒæ”¶åˆ°ä»¥ä¸‹å›æ‡‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java">GET http:<span class="hljs-comment">//localhost:8080/payment/query/Test001</span><br><br>&#123;<br>    <span class="hljs-string">&quot;transactionConfigId&quot;</span>: <span class="hljs-string">&quot;013&quot;</span>,<br>    <span class="hljs-string">&quot;transactionNumber&quot;</span>: <span class="hljs-string">&quot;Fool001&quot;</span>,<br>    <span class="hljs-string">&quot;transactionId&quot;</span>: $&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;,<br>    <span class="hljs-string">&quot;transactionResult&quot;</span>: <span class="hljs-string">&quot;SUCCESS&quot;</span>,<br>    <span class="hljs-string">&quot;_links&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;self&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/payment/query/$&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;pay&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/payment/pay/$&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;refund&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/payment/refund/$&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;reverse&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/payment/reverse/$&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;settle&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;href&quot;</span>: <span class="hljs-string">&quot;http://localhost:8080/payment/settle/$&#123;ä½ è¼¸å…¥çš„è¨‚å–®ç·¨è™Ÿ&#125;&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨æˆ¶ä½¿ç”¨è¨‚å–®æŸ¥è©¢å¾Œå¯ä»¥é †ä¾¿å¸¶å…¥ä»–çš„ä¸‹ä¸€æ­¥å¯é€²è¡Œçš„å‹•ä½œï¼Œé€™éº¼åšæœ‰ä»¥ä¸‹å¥½è™•ï¼š</p><ol><li>éˆæ´»åº¦ å®¢æˆ¶ç«¯çš„APIä¸å¿…å¯«æ­»ï¼Œä¹Ÿå¯ä»¥ä¸å¿…è¦äº‹å…ˆçŸ¥é“æœ‰å“ªäº›APIè·¯å¾‘ã€‚</li><li>ç•¶APIæœ‰æ¨™è¨»ç‰ˆæœ¬æ™‚ï¼Œé‚„å¯ä»¥é€²è¡Œéˆæ´»çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œæ¯”æ–¹èªªåŸæœ¬æ˜¯1.0ç‰ˆæ¨å‡ºäº†1.1ç‰ˆã€‚</li><li>æ›´å¥½çš„æè¿°æ€§ï¼Œå®¢æˆ¶ç«¯å¯ä»¥å¾ˆæ˜ç¢ºåœ°çŸ¥é“è‡ªå·±çš„ä¸‹ä¸€éƒ¨å¯ä»¥æ€éº¼åšã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>HATEOAS</tag>
      
      <tag>REST</tag>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Diary 2025/01/19</title>
    <link href="/2025/01/19/Diary-2025-01-19/"/>
    <url>/2025/01/19/Diary-2025-01-19/</url>
    
    <content type="html"><![CDATA[<p>æœ¬é€±è¿½äº†å»å¹´çš„æ–°ç•ªï¼Œé‚„ä¸éŒ¯ï¼Œå¯ä»¥åŠ å…¥<br>ã€åœ°ä¸‹åŸçš„äººå€‘ã€‘<br>ç‰¹è‰²ï¼š</p><ul><li>éä½œç‚ºé—–é—œåœ°ä¸‹åŸçš„è¦–è§’ï¼Œè€Œæ˜¯åšç‚ºç¶“ç‡Ÿæ–¹çœ‹å¾…åœ°ä¸‹åŸ</li><li>ç•«é¢¨å¯æ„›ï¼Œè§’è‰²ä¹Ÿå¯æ„›ã€‚</li><li>ç™¾åˆå¥½é¦™å¥½é¦™å¥½é¦™</li><li>OP ED éƒ½å¥½è½</li><li>æˆ°é¬¥ç•«é¢ã€ä¸–ç•Œè§€éƒ½åšå¾—ä¸éŒ¯ï¼Œæœ‰è¶£</li></ul><p>ç¸½è©•åˆ†ï¼š78&#x2F;100</p><p>ã€é›–ç„¶æ˜¯å…¬æœƒçš„æ«ƒæª¯å°å§ï¼Œä½†å› ç‚ºä¸æƒ³åŠ ç­æ‰€ä»¥æ‰“ç®—ç¨è‡ªè¨ä¼è¿·å®®é ­ç›®ã€‘<br>ç‰¹è‰²ï¼š</p><ul><li>é«˜æ©‹æä¾</li><li>åŠ‡æƒ…ä¸ç®—æœ‰è¶£ï¼Œå¾ˆå¤šæ©‹æ®µç¼ºä¹åˆç†æ€§</li><li>ED ä¸åˆæˆ‘èƒƒå£ï¼ŒOPé¢¨æ ¼èˆ‡EDçš„å”èª¿æ€§ä¸ä½³ï¼Œåƒæ˜¯å¤–åŒ…çµ¦å…©å€‹Teamåœ¨åš</li><li>æ£„å‘<br>ç¸½è©•åˆ†ï¼š42&#x2F;100</li></ul>]]></content>
    
    
    <categories>
      
      <category>Diary</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ–°æ‰‹è»Ÿé«”å·¥ç¨‹å¸«çš„ä¸€äº›æ€è€ƒ</title>
    <link href="/2025/01/18/%E6%96%B0%E6%89%8B%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/"/>
    <url>/2025/01/18/%E6%96%B0%E6%89%8B%E8%BB%9F%E9%AB%94%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%9D%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯éµäººè³½çš„æœ€å¾Œä¸€ç¯‡äº†ï¼Œé€™ä¸€ç¯‡æˆ‘ä¸æ‰“ç®—è¦è¬›æŠ€è¡“äº†ï¼Œæ¯”è¼ƒåƒæ˜¯è¦åˆ†äº«æˆ‘çš„å®Œè³½æ„Ÿè¨€ï¼Œæˆ–è€…æ˜¯ä½œç‚ºä¸€åä½œç‚ºä¸€å¹´çš„è»Ÿé«”å·¥ç¨‹å¸«èª•ç”Ÿå‡ºçš„ä¸€äº›æƒ³æ³•ï¼Œå¦‚æœæ²’èˆˆè¶£çœ‹çš„å¯ä»¥ä¸Šä¸€é äº†ã€‚</p><p>ä½œç‚ºä¸€ååˆå‡ºèŒ…å»¬çš„è»Ÿé«”å·¥ç¨‹å¸«ï¼Œæƒ³å¿…å¾ˆå¤šäººéƒ½æ»¿æ‡·ç†±æƒ…åœ°å»å­¸ç¿’å„ç¨®è»Ÿé«”çŸ¥è­˜ï¼Œå‰ç«¯ã€å¾Œç«¯ã€è³‡æ–™åº«ã€Devopsç­‰ç­‰ï¼Œæˆ‘åˆæœŸæ™‚ä¹Ÿæ˜¯åŒæ¨£çš„ç‹€æ…‹ï¼Œå·´æœ›è‘—æ¯å¤©éƒ½è¦è®“è‡ªå·±å¤šæ‡‚ä¸€äº›ã€‚ä½†å¾Œä¾†å°±ç™¼ç¾ï¼Œè»Ÿé«”å·¥ç¨‹å¸«çš„ä¸–ç•ŒçœŸçš„å¤ªå¤§äº†ã€‚æˆ‘æ›¾ç¶“åœ¨å¯¦ç¿’æ™‚æ“”ä»»éå…¶ä»–è·ä½ï¼Œæˆ‘çš„æ„Ÿæƒ³æ˜¯è»Ÿé«”å·¥ç¨‹å¸«çœŸçš„æ˜¯ä¸€å€‹ä¸æ–·å»å­¸ç¿’çš„è·æ¥­ã€‚</p><p>æœ‰äº›äººå¯èƒ½æœƒèªªï¼Œå•Šå…¶ä»–è¡Œæ¥­å°±ä¸ç”¨å­¸æ˜¯ä¸æ˜¯ï¼Ÿä½†æˆ‘ä¸æ˜¯é‚£å€‹æ„æ€ï¼Œæˆ‘çš„æ„æ€æ˜¯è»Ÿé«”å·¥ç¨‹å¸«æœƒéœ€è¦ä½ åœ¨ä¸‹ç­å¾Œé‚„å»å­¸ç¿’æ–°çš„æŠ€è¡“ï¼Œåœ¨é€™å¾ˆæ²çš„æ¥­ç•Œä¸­ï¼Œåœ¨è·‘å·²ç¶“æ˜¯åŸºæœ¬äº†ï¼Œå½¼æ­¤é‚„åœ¨å…¢çˆ­è·‘å¾—å¤ ä¸å¤ å¿«ã€æ–¹å‘æ˜¯ä¸æ˜¯è¶¨å‹¢ç­‰ç­‰ã€‚æˆ‘èªç‚ºæœƒé€™æ¨£çš„è·æ¥­æ‡‰è©²ä¸å¤šï¼Œç•¶ç„¶å¦‚æœæˆ‘éŒ¯äº†å°±æŒ‡æ­£æˆ‘å§ã€‚</p><p>æœ‰äº›äººå¯èƒ½æœƒèªªï¼Œå•Šè»Ÿé«”å·¥ç¨‹å¸«è–ªæ°´å¾ˆé«˜å•Šï¼Œé€™æ¨£é‚„å¥½å§ã€‚ä½†æˆ‘ä¹Ÿä¸æ˜¯é‚£å€‹æ„æ€ï¼Œå€’ä¸å¦‚èªªæŠŠè¾›å‹èˆ‡è–ªæ°´ç›¸æä¸¦è«–æœ¬èº«å°±æ˜¯ä¸€å€‹è¬¬è«–ã€‚</p><p>åŠªåŠ›æœ¬èº«ä¸ä»£è¡¨è–ªæ°´åƒ¹å€¼ï¼Œä½ éš¨è™•å¯è¦‹ä¸€åå·¥ç¨‹å¸«ç‚ºäº†å°ˆæ¡ˆåŠ ç­è¶•å·¥ï¼Œè€Œéš”å£è€å±è‚¡å·¥ç¨‹å¸«æ‰“é«˜çˆ¾å¤«é–ƒåˆ°è…°è¦è«‹å‡ä¸€å€‹ç¦®æ‹œï¼Œè€Œä»–çš„è–ªæ°´é«˜å¾—ä¸å¾—äº† (æˆ‘å€‘å…ˆå‡è¨­ä¸æ˜¯æœ‰é å±±)ã€‚</p><p>å€˜è‹¥è–ªæ°´çš„æ±ºå®šä¾æ“šèˆ‡ä½ å€‹äººçš„åŠªåŠ›ç„¡é—œï¼Œé‚£å®ƒç©¶ç«Ÿè¢«ç”šéº¼æ±ºå®šå‘¢ï¼Ÿç­”æ¡ˆæ˜¯åƒ¹å€¼ï¼Œæ›´ç²¾æº–åœ°ä¾†èªªæ˜¯è·å ´åƒ¹å€¼ã€æˆ–æ˜¯ä¼æ¥­åƒ¹å€¼ã€‚è€Œå€‹äººåƒ¹å€¼é€šå¸¸æœƒè¢«å¿½ç•¥ã€‚</p><p>è·å ´åƒ¹å€¼æ˜¯ä½ ä½œç‚ºä¸€åè»Ÿé«”å·¥ç¨‹å¸«ä¸­ï¼Œåœ¨è·å ´ä¸­æœ‰å¤šå°‘åƒ¹å€¼ï¼Ÿ</p><p>ä¼æ¥­åƒ¹å€¼æ˜¯ä½ ä½œç‚ºä¸€åä¼æ¥­çš„è»Ÿé«”å·¥ç¨‹å¸«ä¸­ï¼Œåœ¨ä¼æ¥­ä¸­æœ‰å¤šå°‘åƒ¹å€¼ï¼Ÿ</p><p>é€™ä¹Ÿå› æ­¤è­‰æ˜äº†ç‚ºç”šéº¼åŠªåŠ›ä¸è¢«è­‰æ˜ï¼ŒåŠ ç­è¶•å·¥å¿™å°ˆæ¡ˆï¼Œä½†é‚„æ˜¯æ¯”ä¸ä¸Šè€å±è‚¡é–ƒåˆ°è…°çš„åŸå› ã€‚ä¼æ¥­åƒ¹å€¼å¾ˆé›£ä¸è¢«å¹´è³‡å½±éŸ¿ï¼Œç¸±ä½¿å€‹äººèƒ½åŠ›å‡ºçœ¾ï¼Œä½ ä¹Ÿå¿…é ˆè¦èªªæœæ‰€æœ‰ä¸Šé¢çš„é•·å®˜ä½ ç‚ºä½•å‡ºçœ¾ã€‚è€Œå¹´è³‡ä¸ç”¨é‚£éº¼éº»ç…©ï¼Œåªè¦ä¸è¢«è¶•èµ°å°±è¡Œã€‚</p><p>è·å ´åƒ¹å€¼æ˜¯æŒ‡è»Ÿé«”å·¥ç¨‹å¸«åœ¨è·å ´ä¸­çš„åƒ¹å€¼ï¼Œé€™é»ä¸»è¦å—åˆ°å…©å€‹ä¸»è¦å› ç´ å½±éŸ¿ï¼Œä¸€å€‹æ˜¯å¤–éƒ¨å› ç´ â”€â”€ä¹Ÿå°±æ˜¯å›åˆ°å»£æ³›çš„å¸‚å ´ä¾›éœ€ï¼Œå‡è¨­ä½ åœ¨çš„ç”¢æ¥­å°±æ˜¯ä¸€å€‹å¤•é™½ç”¢æ¥­(å‡è¨­æ›¸ç±å‡ºç‰ˆæ¥­)ï¼Œç¸±ä½¿ä½ èƒ½åŠ›å¤šéº¼å‡ºçœ¾ï¼Œè»Ÿé«”çŸ¥è­˜å¦‚ä½•å¼·å¦‚ä½•é€å¾¹ï¼Œä½ ä¹Ÿç„¡æ³•ç²å¾—åƒå…¶ä»–ç”¢æ¥­ä¸€æ¨£é«˜çš„è–ªæ°´ã€‚ç¸±ä½¿ä½ ç…§ä¸‰é¤å‘è€é—†é é‚€è€Œè€é—†ä¹ŸåŒæ„ä½ ä¹Ÿä¸€æ¨£ï¼Œæœ¬èº«çš„è¡Œæ¥­å°±æ²’æœ‰è¶³å¤ çš„è³‡é‡‘æµå‹•ï¼Œèˆ‡ä½ å€‹äººçš„åŠªåŠ›èˆ‡ç¨‹åº¦æ²’æœ‰ä»»ä½•é—œä¿‚ã€‚å¦ä¸€å€‹ä¾‹å­æ˜¯å‡è¨­ä½ åœ¨åšäº¦ç”¢æ¥­ï¼Œç„¶å¾Œâ€¦(æˆ‘ä¸èªªä½ å€‘ä¹ŸçŸ¥é“æˆ‘è¦èªªå•¥)</p><p>å¦ä¸€å€‹å› ç´ å°±æ˜¯å…§éƒ¨å› ç´ ï¼Œä¹Ÿå°±æ˜¯å›åˆ°ä½ è‡ªèº«ï¼Œç›¸æ¯”åœ¨è·å ´ä¸Šæ´»èºçš„è»Ÿé«”å·¥ç¨‹å¸«ï¼Œä½ æ¯”å…¶ä»–äººè¦å‚‘å‡ºå¤šå°‘ï¼Œæˆ‘å€‘å¤§å¤šæ•¸äººçš„åŠªåŠ›éƒ½æ˜¯æœŸæœ›åœ¨é€™å€‹å€é–“è®Šå¾—å‚‘å‡ºã€‚å°ï¼Œæˆ‘å€‘å¯ä»¥ï¼Œä½†è«‹åˆ¥å¿˜è¨˜ï¼Œå°ä¼æ¥­ä¾†èªªï¼Œé€™ä¸éåªæ˜¯æ¨™æº–ä¹‹ä¸€ã€‚</p><p>èªªäº†é€™éº¼å¤šï¼Œæˆ‘åªæ˜¯æƒ³è¦é—¡è¿°ä¸€å€‹é‡é»â”€â”€æ±ºå®šè–ªè³‡çš„ï¼Œä¸å…¨æ˜¯è·æ¥­ï¼Œæ›´é‡è¦å½±éŸ¿çš„æ˜¯ã€Œç”¢æ¥­é¡åˆ¥ã€èˆ‡ã€Œä¼æ¥­ã€ã€‚è¬›ç™½å°±æ˜¯ä½ è¦ï¼Œä¹Ÿå¾—è¦åˆ¥äººçµ¦å¾—èµ·ã€‚</p><p>æˆ‘èªç‚ºæ‰€æœ‰çš„è·æ¥­éƒ½ä¸€æ¨£éµç…§ä¾›éœ€æ³•å‰‡ï¼Œä¾›çµ¦ç¼ºä¹ä¸”éœ€æ±‚é«˜æ¼²çš„åƒ¹å€¼æ‰æœƒé«˜ï¼Œèˆ‡åŠªåŠ›ä»€éº¼çš„æ„Ÿæ€§è¨€è«–ç„¡é—œï¼Œè€Œé©é€¢AIè¿‘å¹´å´›èµ·ï¼Œå°è»Ÿé«”å·¥ç¨‹å¸«çš„æœªä¾†ä¹Ÿå‹¢å¿…æˆç‚ºä¸€å¤§æŒ‘æˆ°ã€‚æœ‰äº›äººå¯èƒ½æœƒèªªç”šéº¼AIå–ä»£ä¸äº†è»Ÿé«”å·¥ç¨‹å¸«ï¼Œæˆ‘å°é€™å€‹çœ‹æ³•é«˜åº¦å­˜ç–‘ã€‚ç¸±ä½¿OpenAIåŸ·è¡Œé•·å¥§ç‰¹æ›¼åº•ä¸‹çš„ç ”ç™¼éƒ½è·‘å…‰å…‰ï¼ŒåŸ·è¡Œé•·å¤©é¦¬è¡Œç©ºä¹Ÿä¸€æ¨£ã€‚æˆ‘å€‘å°±è¬›ä¸€ä»¶äº‹ï¼ŒChatGPTæ”¹è®Šäº†ä¸–ç•Œç”¨äº†åƒ…åƒ…ä¸åˆ°ä¸‰å¹´ï¼Œè€Œä½ â”€â”€å‡è¨­ä¸é‚£éº¼è‹¦å‘½çš„è©±ï¼Œè‡³å°‘ä¹Ÿå¾—å·¥ä½œ20å¹´ï¼Œå¦‚æœä½ å¯ä»¥é æ¸¬åˆ°AI 20å¹´çš„ç™¼å±•çš„è©±æˆ‘èªç‚ºä½ å¤§å¯ä»¥é€™éº¼è²å¼µï¼Œä½†è‹¥ä½ ä¸è¡Œï¼Œé‚£æˆ‘èªç‚ºé€™æ¨£çš„è²æ˜æ˜¯ç¼ºä¹å…¬ä¿¡åŠ›çš„ã€‚</p><p>è¬›äº†é‚£éº¼å¤šï¼Œæˆ‘æƒ³è¦è¬›ä»€éº¼ï¼Ÿ</p><p>æˆ‘çš„å›ç­”å¦‚ä¸‹ï¼šå°±è·Ÿè€é»ƒè¬›å¾—ä¸€æ¨£ï¼Œè·‘å°±å°äº†ï¼Œä½ å„ä½é‚„ä¸å¿«æ»¾å»æƒ³æ˜å¹´éµäººè³½è¦å¯«ä»€éº¼å•Šï¼Œ88888ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‡ªæˆ‘æ€è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mircoservice çš„ç‰¹è‰²</title>
    <link href="/2025/01/18/Mircoservice-%E7%9A%84%E7%89%B9%E8%89%B2/"/>
    <url>/2025/01/18/Mircoservice-%E7%9A%84%E7%89%B9%E8%89%B2/</url>
    
    <content type="html"><![CDATA[<p><strong>3å±¤æ¶æ§‹ï¼ˆ3-Tier Architectureï¼‰</strong></p><ul><li>é€šå¸¸ä¾†èªªï¼Œä¸‰å±¤æ¶æ§‹åŒ…æ‹¬è¡¨ç¤ºå±¤ã€æ¥­å‹™é‚è¼¯å±¤ã€æ•¸æ“šè¨ªå•å±¤ã€‚</li></ul><p><strong>å¤šå±¤æ¶æ§‹ï¼ˆN-Tier Architectureï¼‰</strong></p><ul><li>åŸºæ–¼ 3 å±¤æ¶æ§‹ï¼Œé€²ä¸€æ­¥ç´°åŒ–å±¤æ¬¡ï¼ˆå¦‚å¢åŠ  API å±¤ã€å®‰å…¨å±¤ã€ç·©å­˜å±¤ç­‰ï¼‰ã€‚</li></ul><p>åœ¨åˆ†æ•£å¼ç³»çµ±ä¸­ï¼ŒNå±¤æ¶æ§‹çš„å±¤æ¬¡å¯èƒ½åˆ†ä½ˆæ–¼ä¸åŒçš„æœå‹™å™¨æˆ–å¾®æœå‹™ä¸­ï¼Œä¾‹å¦‚ï¼š</p><ul><li>è¡¨ç¤ºå±¤é‹è¡Œåœ¨ç”¨æˆ¶çš„è¨­å‚™æˆ–å‰ç«¯æœå‹™å™¨ã€‚</li><li>æ¥­å‹™é‚è¼¯å±¤é‹è¡Œåœ¨å¾Œç«¯æœå‹™å™¨ã€‚</li><li>æ•¸æ“šå±¤å¯èƒ½æ˜¯é›²ç«¯æ•¸æ“šåº«æˆ–åˆ†å¸ƒå¼å­˜å„²ã€‚</li></ul><h3 id="Nå±¤å¼æ¶æ§‹çš„ç¼ºé»"><a href="#Nå±¤å¼æ¶æ§‹çš„ç¼ºé»" class="headerlink" title="Nå±¤å¼æ¶æ§‹çš„ç¼ºé»"></a>Nå±¤å¼æ¶æ§‹çš„ç¼ºé»</h3><p>â›”  é€²è¡Œç‰¹å®šå±¤çš„è®Šæ›´æ™‚ï¼Œå¿…é ˆè¦é‡å•Ÿæ‡‰ç”¨ç¨‹å¼ (å¤šå€‹å°ˆæ¡ˆ)ã€‚<br>â›”  éœ€è¦é€éå¤šå€‹å°ˆæ¡ˆï¼Œç„¡æ³•ç›´æ¥é‹ä½œã€‚</p><h3 id="å¾®æœå‹™ç‰¹è‰²"><a href="#å¾®æœå‹™ç‰¹è‰²" class="headerlink" title="å¾®æœå‹™ç‰¹è‰²"></a>å¾®æœå‹™ç‰¹è‰²</h3><ul><li>å„æœå‹™è·è²¬åˆ†æ˜ã€ä¸¦å”åŒåˆä½œå®Œæˆç›®æ¨™</li><li>ç¨ç«‹éƒ¨ç½²</li><li>ä½¿ç”¨JSONã€HTTP è¼•é‡ç´šé€šè¨Šå”å®š</li><li>é–‹ç™¼èªè¨€ä¸æ‹˜ï¼Œåªè¦ä»¥JSONæ ¼å¼äº’ç›¸æºé€šéƒ½è¡Œ</li></ul><h3 id="ç°¡å–®çš„å¾®æœå‹™æ¦‚å¿µ"><a href="#ç°¡å–®çš„å¾®æœå‹™æ¦‚å¿µ" class="headerlink" title="ç°¡å–®çš„å¾®æœå‹™æ¦‚å¿µ"></a>ç°¡å–®çš„å¾®æœå‹™æ¦‚å¿µ</h3><p><img src="/img/microservice.png" alt="â–² å¾®æœå‹™åœ–ç¤º"></p><h3 id="äººå€‘å¸Œæœ›å¾®æœå‹™è§£æ±ºçš„å•é¡Œ"><a href="#äººå€‘å¸Œæœ›å¾®æœå‹™è§£æ±ºçš„å•é¡Œ" class="headerlink" title="äººå€‘å¸Œæœ›å¾®æœå‹™è§£æ±ºçš„å•é¡Œ"></a>äººå€‘å¸Œæœ›å¾®æœå‹™è§£æ±ºçš„å•é¡Œ</h3><ul><li>Continuous Delivery å¿«é€Ÿäº¤ä»˜</li><li>Scalability æ“´å±•æ€§</li><li>High Availability é«˜å¯ç”¨æ€§</li><li>Flexible &amp; Decoupled éˆæ´»ã€è§£è€¦</li><li>Resilient å½ˆæ€§</li></ul><h3 id="å¾®æœå‹™çš„é–‹ç™¼æ¨¡å¼æ‡‰æ€è€ƒ"><a href="#å¾®æœå‹™çš„é–‹ç™¼æ¨¡å¼æ‡‰æ€è€ƒ" class="headerlink" title="å¾®æœå‹™çš„é–‹ç™¼æ¨¡å¼æ‡‰æ€è€ƒ"></a>å¾®æœå‹™çš„é–‹ç™¼æ¨¡å¼æ‡‰æ€è€ƒ</h3><ul><li>æ€è€ƒæœå‹™ç²’åº¦ï¼Œæ­£ç¢ºè²¬ä»»ç´šåˆ¥ç‚ºä½•ï¼Ÿ</li><li>é€šè¨Šå”å®šï¼Œæœå‹™å¯å¦æ¥å—éåŒæ­¥å‚³è¼¸ (HTTP or AMQP) &lt;&lt; å…¶å¯¦å°±ç®—ä¸å¾®æœå‹™ä¹Ÿè©²æ€è€ƒ</li><li>è¨­å®šç®¡ç†ï¼Œå¦‚ä½•ç®¡ç†å¾®æœå‹™è¨­å®šï¼Ÿ</li><li>å¦‚ä½•ä½¿ç”¨äº‹ä»¶ä¾†è§£è€¦å¾®æœå‹™ï¼Ÿ</li></ul><h3 id="å¾®æœå‹™è·¯ç”±æ¨¡å¼"><a href="#å¾®æœå‹™è·¯ç”±æ¨¡å¼" class="headerlink" title="å¾®æœå‹™è·¯ç”±æ¨¡å¼"></a>å¾®æœå‹™è·¯ç”±æ¨¡å¼</h3><ol><li><strong>Service Routingæ¨¡å¼</strong>ï¼šç‚ºæ‰€æœ‰æœå‹™æä¾›ä¸€å€‹å–®ä¸€å…¥å£é»(URL)ï¼Œä»¥ä¾¿çµ±ä¸€å®‰å…¨ç­–ç•¥èˆ‡è·¯ç”±è¦å‰‡ï¼Œå¯ä½œç‚ºæ“ä½œèº«åˆ†ã€å…§å®¹é©—è­‰çš„å…¥å£é»ã€‚</li><li><strong>Service Discoveryæ¨¡å¼</strong>ï¼šå¯ä»¥ä¸å¯«æ­»IPä½å€å°±å¯ä»¥è®“Clientæ‰¾åˆ°æ­£ç¢ºçš„æœå‹™ï¼ŒæŠ½è±¡åŒ–å¾Œå¯ä»¥ä¸€ä½µæ§åˆ¶æœå‹™çš„æ–°å¢èˆ‡åˆªé™¤ï¼ŒAuto-Scalingçš„æ¦‚å¿µã€‚</li></ol><h3 id="å¾®æœå‹™Clientç«¯å½ˆæ€§æ¨¡å¼"><a href="#å¾®æœå‹™Clientç«¯å½ˆæ€§æ¨¡å¼" class="headerlink" title="å¾®æœå‹™Clientç«¯å½ˆæ€§æ¨¡å¼"></a>å¾®æœå‹™Clientç«¯å½ˆæ€§æ¨¡å¼</h3><ol><li><strong>Client Load Balancingæ¨¡å¼</strong>ï¼šå¿«å–å¾®æœå‹™çš„æœå‹™å¯¦ä¾‹ä»¥ä¾¿å°å–®ä¸€å¾®æœå‹™çš„å‘¼å«å¯ä»¥Load Balanceåˆ°æ‰€æœ‰å¥åº·çš„å¯¦ä¾‹ä¸Šã€‚</li><li><strong>Circuit Breakeræ¨¡å¼</strong>ï¼šç”¨æ–¼é˜²æ­¢Clientä¸æ–·å‘¼å«å¤±æ•—æˆ–æœ‰å•é¡Œçš„æœå‹™ï¼Œä½¿é€™äº›è«‹æ±‚å¿«é€Ÿå¤±æ•—ã€‚</li><li><strong>Fallbackæ¨¡å¼</strong>ï¼šç•¶å‘¼å«æœå‹™å¤±æ•—æ™‚ï¼Œç”¨æ–¼æä¾›ä¸€ç¨®å¤–æ›æ©Ÿåˆ¶ï¼Œå…è¨±Clientæ”¹å‘¼å«å…¶ä»–æœå‹™ä»¥å®Œæˆå·¥ä½œã€‚</li><li><strong>Bulkheadæ¨¡å¼</strong>ï¼šç•¶å¾®æœå‹™æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨å¤šå€‹åˆ†æ•£å¼è³‡æºåŸ·è¡Œå·¥ä½œæ™‚ï¼Œå€éš”é€™äº›å‘¼å«ï¼Œé¿å…å–®ä¸€æœå‹™å£…å¡å°è‡´å…¶ä»–æœå‹™ä¹Ÿè·Ÿè‘—ç„¡æ³•æ­£å¸¸é‹ä½œã€‚</li></ol><h3 id="å¾®æœå‹™Securityæ¨¡å¼"><a href="#å¾®æœå‹™Securityæ¨¡å¼" class="headerlink" title="å¾®æœå‹™Securityæ¨¡å¼"></a>å¾®æœå‹™Securityæ¨¡å¼</h3><ol><li>èº«åˆ†é©—è­‰ï¼Œç¢ºä¿Clientèˆ‡æä¾›èº«åˆ†ç¬¦åˆ</li><li>æˆæ¬Šï¼Œç¢ºä¿ä»¥èƒ½é€²è¡Œè¢«æˆæ¬Šçš„æ“ä½œ</li><li>æ†‘è­‰ç®¡ç†èˆ‡å‚³æ’­ï¼Œé¿å…ä¸æ–·å°Clientç´¢å–æ†‘è­‰ï¼ŒTokenè¦å¯ä»¥å‚³éæ–¼å„æœå‹™é–“ã€‚</li></ol><h3 id="å¾®æœå‹™Log-Trackingæ¨¡å¼"><a href="#å¾®æœå‹™Log-Trackingæ¨¡å¼" class="headerlink" title="å¾®æœå‹™Log Trackingæ¨¡å¼"></a>å¾®æœå‹™Log Trackingæ¨¡å¼</h3><ol><li><strong>Log Correlation</strong>ï¼šå¯¦ä½œé—œè¯IDï¼Œå°‡æ‰€æœ‰å–®ä¸€äº¤æ˜“æˆ–æ“ä½œè€Œå‘¼å«çš„æ‰€æœ‰æœå‹™æ‰€ç”Ÿæˆçš„Logç´€éŒ„é—œè¯åœ¨ä¸€èµ·ã€‚</li><li><strong>Log Aggregation</strong>ï¼šé€éé€™ç¨®æ¨¡å¼å¯ä»¥å°‡å¾®æœå‹™åŠå„å€‹å¯¦ä¾‹ç”¢ç”Ÿçš„æ‰€æœ‰æ—¥èªŒç´€éŒ„å½™æ•´åˆ°ä¸€å€‹è·¨æœå‹™çš„å¯æŸ¥è©¢è³‡æ–™åº«ä¸­ï¼Œè—‰ç”±å„æ—¥èªŒç´€éŒ„çš„æ™‚é–“æˆ³è¨˜å¯ä»¥äº†è§£å„æœå‹™æ•ˆèƒ½ç‹€æ³ã€‚</li><li><strong>Microservice tracing</strong>ï¼šè¦–è¦ºåŒ–æµç¨‹</li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MicroService</tag>
      
      <tag>å¾®æœå‹™</tag>
      
      <tag>Concept</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éš”é›¢å±¤ç´šæ¸¬è©¦ç´€éŒ„-ä½¿ç”¨Grails</title>
    <link href="/2025/01/11/%E9%9A%94%E9%9B%A2%E5%B1%A4%E7%B4%9A%E6%B8%AC%E8%A9%A6%E7%B4%80%E9%8C%84-%E4%BD%BF%E7%94%A8Grails/"/>
    <url>/2025/01/11/%E9%9A%94%E9%9B%A2%E5%B1%A4%E7%B4%9A%E6%B8%AC%E8%A9%A6%E7%B4%80%E9%8C%84-%E4%BD%BF%E7%94%A8Grails/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘æœ¬ä¾†çš„æƒ³æ³•æ˜¯ READ_COMMITTED åªè¦commit()å¾Œçš„è³‡æ–™å°±æ‡‰è©²è¦è¢«è®€å–åˆ°ï¼Œä½†å¯¦éš›ä¸Šå»å‡ºç¾é‚„æ˜¯è®€å–åˆ°èˆŠè³‡æ–™çš„å•é¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java">def <span class="hljs-title function_">testRepeatableRead</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(&#123;<br>        testService.readData(<span class="hljs-number">2106</span>)<br>    &#125;)<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(&#123;<br>        Thread.sleep(<span class="hljs-number">5000</span>) <span class="hljs-comment">// Delay to ensure the first read in t1 has completed</span><br>        modifyDataService.modifyData(<span class="hljs-number">2106</span>)<br>    &#125;)<br>    t1.start()<br>    t2.start()<br>    t1.join()<br>    t2.join()<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Success&quot;</span><br>&#125;<br><br><span class="hljs-meta">@Transactional(isolation=Isolation.READ_COMMITTED)</span><br>def <span class="hljs-title function_">repeatReadData</span><span class="hljs-params">(Long id)</span> &#123;<br>    <span class="hljs-type">MeetingRoomBooking</span> <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br>    <span class="hljs-comment">// Simulate some processing time</span><br>    Thread.sleep(<span class="hljs-number">10000</span>)<br>    <span class="hljs-comment">// Read the same data again</span><br>    booking = MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;Second read: $&#123;booking?.content&#125;&quot;</span><br>&#125;<br><br><span class="hljs-meta">@Transactional</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModifyDataService</span> &#123;<br>    def <span class="hljs-title function_">modifyData</span><span class="hljs-params">(Long id)</span> &#123;<br>        <span class="hljs-type">MeetingRoomBooking</span> <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>        booking.content = <span class="hljs-string">&quot;2&quot;</span><br>        booking.save(flush: <span class="hljs-literal">true</span>)<br>        println <span class="hljs-string">&quot;Data updated to: $&#123;booking.content&#125;&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/// First read: 1</span><br><span class="hljs-comment">/// Data updated to: 2</span><br><span class="hljs-comment">/// Second updated: 1</span><br></code></pre></td></tr></table></figure><h2 id="ç™¼ç”ŸåŸå› "><a href="#ç™¼ç”ŸåŸå› " class="headerlink" title="ç™¼ç”ŸåŸå› "></a>ç™¼ç”ŸåŸå› </h2><p>å‡ºç°è¿™ç§æƒ…å†µçš„åŸå› æ˜¯ Grails çš„ä¸€çº§ç¼“å­˜ï¼ˆSession çº§åˆ«ç¼“å­˜ï¼‰å¯¼è‡´çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGrails ä½¿ç”¨ Hibernate ä½œä¸º ORM æ¡†æ¶ï¼Œå¹¶ä¸” Hibernate ä¼šç»´æŠ¤ä¸€ä¸ªä¸€çº§ç¼“å­˜ï¼Œè¿™ä¸ªç¼“å­˜ä¼šå­˜å‚¨å½“å‰ Session ä¸­åŠ è½½çš„æ‰€æœ‰å¯¹è±¡ã€‚åœ¨ä½ çš„ <code>readData</code> æ–¹æ³•ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ <code>MeetingRoomBooking.get(id)</code> æ—¶ï¼Œä¼šä»æ•°æ®åº“åŠ è½½å¯¹è±¡å¹¶ç¼“å­˜åˆ°å½“å‰ Session ä¸­ã€‚åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨ <code>MeetingRoomBooking.get(id)</code> æ—¶ï¼ŒHibernate ä¼šç›´æ¥ä»ä¸€çº§ç¼“å­˜ä¸­è·å–å¯¹è±¡ï¼Œè€Œä¸ä¼šå†å»æŸ¥è¯¢æ•°æ®åº“</p><p>ä¸ºäº†ç¡®ä¿ä½ åœ¨ç¬¬äºŒæ¬¡è¯»å–æ—¶èƒ½è¯»å–åˆ°æœ€æ–°çš„æ•°æ®ï¼Œä½ å¯ä»¥æ¸…ç†ä¸€çº§ç¼“å­˜ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>withNewSession</code> æ–¹æ³•æˆ–è€… <code>clear()</code> æ–¹æ³•æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p><h2 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h2><ol><li>withNewSession</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Read the same data again in a new session</span><br>MeetingRoomBooking.withNewSession &#123;<br>    booking = MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;Second read: $&#123;booking?.content&#125;&quot;</span><br><br></code></pre></td></tr></table></figure><ol><li>clear()</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>    sessionFactory.currentSession.clear()<br>&#125;<br><br></code></pre></td></tr></table></figure><p>Q: é‚£å‡è¨­REPEATABLE_READéš”é›¢å±¤ç´šä¸‹ï¼Œå¯è®€å–åˆ°åœ¨å…¶ä»–åœ°æ–¹è¢«commitä¹‹å¾Œçš„è³‡æ–™å—ï¼Ÿ</p><p>A:  clear Sessionç„¡æ•ˆï¼Œåªèƒ½å»ºç«‹æ–°çš„Sessionã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span><br>def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>    <span class="hljs-type">MeetingRoomBooking</span> <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br>    modifyData(id)<br>    Thread.sleep(<span class="hljs-number">5000</span>)<br><br>    MeetingRoomBooking.withNewSession &#123;<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;Second Read:$&#123;booking?.content&#125;&quot;</span><br>    &#125;<br>    booking = MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;Third read: $&#123;booking?.content&#125;&quot;</span><br>&#125;<br><br><span class="hljs-comment">//First read: 1</span><br><span class="hljs-comment">//Update to 2</span><br><span class="hljs-comment">//Second Read:1 (å› ç‚ºäº¤æ˜“çµæŸå¾Œæ‰æœƒcommit(),withNewTransactionæœƒè®€åˆ°è³‡æ–™åº«çš„èˆŠè³‡æ–™</span><br><span class="hljs-comment">//Third Read:2 (ç›´æ¥è®€å–æœƒè®€å–Hibernateçš„ä¸€ç´šç·©å­˜ï¼Œæ‰€ä»¥æ˜¯ä¿®æ”¹å¾Œçš„å€¼</span><br><br></code></pre></td></tr></table></figure><p>Q: æœ‰è¾¦æ³•åœ¨äº¤æ˜“è£¡é¢å¼·è¿«commit()å—ï¼Ÿ</p><p>A:å¯ä»¥ï¼Œä½¿ç”¨Hibernate Session</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java">def sessionFactory<br><br><span class="hljs-meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span><br>def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>    MeetingRoomBooking <span class="hljs-type">booking</span><br>    <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br><br>    <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession()<br>    <span class="hljs-type">Transaction</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        tx = session.beginTransaction()<br>        modifyData(id)<br>        Thread.sleep(<span class="hljs-number">5000</span>)<br>        <span class="hljs-comment">// Manually commit the transaction</span><br>        tx.commit()<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        <span class="hljs-keyword">if</span> (tx != <span class="hljs-literal">null</span>) tx.rollback()<br>        <span class="hljs-keyword">throw</span> e<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        session.close()<br>    &#125;<br><br>    MeetingRoomBooking.withNewSession &#123;<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;new Transaction Read:$&#123;booking?.content&#125;&quot;</span><br>    &#125;<br>    booking = MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;Direct read: $&#123;booking?.content&#125;&quot;</span><br>&#125;<br><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">// Update to 2</span><br><span class="hljs-comment">// 2 (æ­¤æ™‚å·²ç¶“commitï¼Œè³‡æ–™å·²ç¶“å¯«åˆ°è³‡æ–™åº«äº†)</span><br><span class="hljs-comment">// 2</span><br><br></code></pre></td></tr></table></figure><p>Q: é‚£å¦‚æœæˆ‘æé«˜éš”é›¢å±¤ç´šå‘¢</p><p>A:  ä¾ç„¶è®€å–çš„æ˜¯Hibernateå¿«å–ï¼Œä¸ç¬¦åˆå¯é‡è¤‡è®€ç‰¹æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional</span><br>def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br><br>    <span class="hljs-type">MeetingRoomBooking</span> <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br><br>    <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession()<br>    <span class="hljs-type">Transaction</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        tx = session.beginTransaction()<br>        modifyData(id)<br>        Thread.sleep(<span class="hljs-number">5000</span>)<br>        <span class="hljs-comment">// Manually commit the transaction</span><br>        tx.commit()<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        <span class="hljs-keyword">if</span> (tx != <span class="hljs-literal">null</span>) tx.rollback()<br>        <span class="hljs-keyword">throw</span> e<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        session.close()<br>    &#125;<br><br>    MeetingRoomBooking.withNewSession &#123;<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;new Transaction Read:$&#123;booking?.content&#125;&quot;</span><br>    &#125;<br>    booking = MeetingRoomBooking.get(id)<br>    println <span class="hljs-string">&quot;Direct read: $&#123;booking?.content&#125;&quot;</span><br>&#125;<br><br><span class="hljs-comment">//First read: A</span><br><span class="hljs-comment">//Data updated to: B</span><br><span class="hljs-comment">//new Transaction Read:B</span><br><span class="hljs-comment">//Direct read: B ( ç…§ç†ä¾†èªªæ‡‰è©²æ˜¯A å› ç‚ºå¤šæ¬¡è®€å–éƒ½æ‡‰è©²æ˜¯åŒä¸€å€‹å€¼ã€‚å¯èƒ½æ˜¯Grailsçš„è¡Œç‚ºï¼Ÿ)</span><br><br></code></pre></td></tr></table></figure><p>Q: ç¢ºèªæ˜¯å¦å› ç‚ºåŒä¸€å€‹äº¤æ˜“çš„Transactionå°è‡´Hibernateç·©å­˜æ”¹è®Š</p><p>A: æ‹†é–‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MeetingTestService</span> &#123;<br>    <span class="hljs-meta">@Transactional</span><br>    def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>        <span class="hljs-type">MeetingRoomBooking</span> <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br>        Thread.sleep(<span class="hljs-number">10000</span>)<br>        MeetingRoomBooking.withNewSession &#123;<br>            booking = MeetingRoomBooking.get(id)<br>            println <span class="hljs-string">&quot;new Transaction Read:$&#123;booking?.content&#125;&quot;</span><br>        &#125;<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;Direct read: $&#123;booking?.content&#125;&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 1</span><br><span class="hljs-comment">//Update to 2</span><br><span class="hljs-comment">// 2 (å› ç‚ºå·²ç¶“commitï¼Œå€¼å·²ç¶“æ”¹è®Š)</span><br><span class="hljs-comment">// 1 (ç¢ºèªä¾†è‡ªHibernateå¿«å–ï¼Œç¬¦åˆå¯é‡è¤‡è®€ç‰¹æ€§)</span><br><br></code></pre></td></tr></table></figure><p>å˜—è©¦é™éš”é›¢å±¤ç´š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MeetingTestService</span> &#123;<br>    <span class="hljs-meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span><br>    def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>        MeetingRoomBooking <span class="hljs-type">booking</span><br>        <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br>        Thread.sleep(<span class="hljs-number">10000</span>)<br>        MeetingRoomBooking.withNewSession &#123;<br>            booking = MeetingRoomBooking.get(id)<br>            println <span class="hljs-string">&quot;new Transaction Read:$&#123;booking?.content&#125;&quot;</span><br>        &#125;<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;Direct read: $&#123;booking?.content&#125;&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//1</span><br><span class="hljs-comment">//2</span><br><span class="hljs-comment">//2</span><br><span class="hljs-comment">//1 ä¾ç„¶å—Hibernateç·©å­˜å½±éŸ¿</span><br><br></code></pre></td></tr></table></figure><p>å¦‚æœæ¸…é™¤Hibernateå¿«å–å‘¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java">SessionFactory sessionFactory<br>    <span class="hljs-meta">@Transactional(isolation = Isolation.READ_COMMITTED)</span><br>    def <span class="hljs-title function_">readData</span><span class="hljs-params">(Long id)</span> &#123;<br>        MeetingRoomBooking <span class="hljs-type">booking</span><br>        <span class="hljs-variable">booking</span> <span class="hljs-operator">=</span> MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;First read: $&#123;booking?.content&#125;&quot;</span><br>        Thread.sleep(<span class="hljs-number">10000</span>)<br>        MeetingRoomBooking.withNewSession &#123;<br>            booking = MeetingRoomBooking.get(id)<br>            println <span class="hljs-string">&quot;new Transaction Read:$&#123;booking?.content&#125;&quot;</span><br>        &#125;<br>        sessionFactory.currentSession.clear()<br>        booking = MeetingRoomBooking.get(id)<br>        println <span class="hljs-string">&quot;Direct read: $&#123;booking?.content&#125;&quot;</span><br>  &#125;<br><span class="hljs-comment">// A</span><br><span class="hljs-comment">// Update to B</span><br><span class="hljs-comment">// B</span><br><span class="hljs-comment">// B (æ­£ç¢ºï¼Œå¦‚æœæœ‰æ”¹è®Šï¼Œå°±ä½¿ç”¨æ”¹è®Šå¾Œçš„å€¼)</span><br></code></pre></td></tr></table></figure><p>å¤§æ¦‚æ¸¬è©¦æ˜¯é€™æ¨£</p><h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><ol><li>Hibernate çš„ä¸€ç´šç·©å­˜æ©Ÿåˆ¶æœƒå½±éŸ¿è³‡æ–™è®€å–çš„è¡Œç‚º</li><li>è¦è®€å–æœ€æ–°è³‡æ–™ï¼Œå¯ä»¥ï¼š<ul><li>ä½¿ç”¨ withNewSession</li><li>æ¸…é™¤ç•¶å‰ Session ç·©å­˜</li></ul></li><li>åœ¨ä½¿ç”¨ READ_COMMITTED éš”é›¢å±¤ç´šæ™‚ï¼Œéœ€è¦ç‰¹åˆ¥æ³¨æ„ç·©å­˜çš„å½±éŸ¿</li><li>ä½¿ç”¨ç¨ç«‹ Session é€²è¡Œä¿®æ”¹å¯ä»¥ç¢ºä¿è³‡æ–™ç«‹å³æäº¤</li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hibernate</tag>
      
      <tag>Grails</tag>
      
      <tag>Isolation Level</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBoot Test</title>
    <link href="/2025/01/08/SpringBoot-Test/"/>
    <url>/2025/01/08/SpringBoot-Test/</url>
    
    <content type="html"><![CDATA[<p>åœ¨é–‹ç™¼å®Œä½ çš„æ‡‰ç”¨ç¨‹å¼å¾Œï¼Œå„˜ç®¡éå¿…è¦ï¼Œä½†è¨±å¤šäººéƒ½å»ºè­°è¦æ’°å¯«æ¸¬è©¦å»ç¢ºä¿åŠŸèƒ½æ˜¯å¯ä»¥æ­£å¸¸é‹ä½œçš„ã€‚ ( TDD ç”šè‡³ä¸»å¼µ æ¸¬è©¦æ’°å¯«è¦åœ¨ é–‹ç™¼ä¹‹å‰ )ï¼Œä¸è«–ä½ æ˜¯åœ¨é–‹ç™¼å‰æ’°å¯«æ¸¬è©¦æˆ–æ˜¯åœ¨é–‹ç™¼å¾Œæ‰å¯«æ¸¬è©¦ï¼Œæˆ‘éƒ½èªç‚ºæ¸¬è©¦æ˜¯é‡è¦ä¸”ä¸å¯å°‘çš„ã€‚</p><p>å°æˆ‘ä¾†èªªï¼Œæ’°å¯«æ¸¬è©¦çš„ä¸»è¦å¥½è™•æ˜¯å»ºç«‹ä¿¡å¿ƒï¼Œä¸€å€‹è¦†è“‹ç‡é«˜çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œå¯ä»¥è®“æˆ‘æ›´å¤§è†½åœ°é‡å°ç¨‹å¼ç¢¼é€²è¡Œé‡æ§‹ï¼Œæ”¹å®Œå¾Œä¹Ÿä¸éœ€è¦é‡æ–°æ’°å¯«æ¸¬è©¦(æˆ–è€…æ’°å¯«å°‘é‡)ã€‚ä»–å¯ä»¥å¸¶ä¾†çš„å¥½è™•æ˜¯éç•¶ä¸‹çš„ï¼Œä¹Ÿå°±æ˜¯èªªç•¶ä¸‹æ’°å¯«æœ¬èº«æ²’æœ‰è¾¦æ³•ç”¢ç”Ÿæ•ˆç›Šï¼Œä¹Ÿæœ‰äº›å…¬å¸è¦ºå¾—ç„¡æ³•ç”¢ç”Ÿæ•ˆç›Šè€Œä¸åšã€‚ä½†ç„¡è«–å¦‚ä½•ï¼Œäº†è§£æ¦‚å¿µéƒ½æ˜¯é‡è¦çš„ã€‚</p><p>æœ¬å›æœƒä½¿ç”¨SpringBootTestæ’°å¯«æ¸¬è©¦ã€‚ä¸»è¦è¦ä»‹ç´¹çš„æ¸¬è©¦æœ‰ä¸‰ç¨®ï¼š</p><ol><li>å–®å…ƒæ¸¬è©¦ UNIT TEST</li><li>æ•´åˆæ¸¬è©¦ INTEGER TEST</li><li>ç«¯å°ç«¯æ¸¬è©¦ END TO END TEST</li></ol><p>å–®å…ƒæ¸¬è©¦ ä¸­çš„ å–®å…ƒ ï¼Œæ„å‘³è‘—ç¨‹å¼ä¸­æœ€å°çš„ä¸€å€‹å–®ä½ï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•ï¼Œå–®å…ƒæ¸¬è©¦ä¸»è¦ç”¨ä¾†ç¢ºä¿ä¸€å€‹è¢«æ’°å¯«å¥½çš„æ–¹æ³•ï¼Œæ˜¯å¦æ­£å¸¸é‹ä½œã€‚èˆ‰ä¾‹ä¾†èªªä»¥ä¸‹æœ‰ä¸€å€‹Memberçš„é©—è­‰æ–¹æ³•ï¼Œæˆ‘æ’°å¯«äº†ä¸€å€‹å‡è³‡æ–™ä¾†ç¢ºä¿é€™æ¨£çš„è³‡æ–™çµæ§‹æ˜¯å¦è¶³å¤ é€šéé©—è­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AioApiApplicationTests</span> &#123;<br><br><span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnitsTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> Member.builder()<br>                .name(<span class="hljs-string">&quot;Clark&quot;</span>)<br>                .account(<span class="hljs-string">&quot;clark1232&quot;</span>)<br>                .password(<span class="hljs-string">&quot;cclark23123&quot;</span>)<br>                .email(<span class="hljs-string">&quot;test@gmail.con&quot;</span>)<br>                .address(<span class="hljs-string">&quot;å°åŒ—&quot;</span>).build();<br>        assertTrue(Member.registerValidate(member));<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•´åˆæ¸¬è©¦çš„å±¤ç´šæ¯”å–®å…ƒæ¸¬è©¦é«˜ï¼Œæ•´åˆæ¸¬è©¦ä¸»è¦è‘—é‡çš„æ˜¯åœ¨ç¢ºä¿ç•¶ä¸‹å…ƒä»¶æ­£å¸¸ä¹‹å¤–ï¼Œèˆ‡å¤–éƒ¨æœå‹™ä¹‹é–“çš„äº’å‹•ä¹Ÿå¿…é ˆè¦ç¬¦åˆé æœŸçµæœï¼Œæ’°å¯«é›£åº¦ä¹Ÿå› æ­¤æ¯”å–®å…ƒæ¸¬è©¦é«˜ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘æƒ³è¦å»å–å¾—æœƒå“¡çš„è³‡æ–™ä¸¦é€²è¡Œé©—è­‰ï¼Œä½†MemberServiceåŒæ™‚ä¾è³´MemberRepositoryï¼Œæ‰€ä»¥å¦‚æœæˆ‘æƒ³æ¸¬è©¦ä»–çš„è©±ï¼Œæˆ‘ä¸åªè¦åˆå§‹åŒ–MemberServiceä¹Ÿè¦åˆå§‹åŒ–MemberRepositoryã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MemberRepository memberRepository;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MemberService</span><span class="hljs-params">(MemberRepository repo)</span> &#123;<br>    <span class="hljs-built_in">this</span>.repository = repo;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> Optional&lt;MemberPO&gt; <span class="hljs-title function_">findAccountById</span><span class="hljs-params">(Long id)</span> &#123;<br>        <span class="hljs-keyword">return</span> memberRepository.findById(id);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¸¬è©¦æ™‚ï¼Œç‚ºäº†åŠ›æ±‚æ¸¬è©¦çš„æº–ç¢ºåº¦ï¼Œæˆ‘å€‘å¸Œæœ›æœƒé€ æˆå½±éŸ¿çš„è®Šå› è¶Šå°è¶Šå¥½ï¼Œç„¶å¾Œå¯¦éš›ä¸Šï¼Œä¸€å€‹æ•´åˆæ¸¬è©¦ä¸­ç¶“å¸¸æ€§çš„ä¾è³´å¤šå€‹æœå‹™ï¼Œé‡å°å¤šå€‹æœå‹™éƒ½ç›´æ¥ä½¿ç”¨çš„è©±ï¼Œé–‹éŠ·å°‡æœƒéå¸¸é«˜ã€‚å› æ­¤ç¾åœ¨å¸¸è¦‹çš„åšæ³•æ˜¯é‡å°å¤–éƒ¨ä¾è³´æ¡ç”¨å‡é€ (Mock)çš„å½¢å¼å®Œæˆã€‚</p><p>é‚£æ€éº¼å‡é€ å‘¢ï¼Ÿé€™æ™‚å°±å¯ä»¥ä½¿ç”¨SpringBootæä¾›çš„Mockitoå»å®Œæˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-meta">@MockBean</span><br>    MemberRepository memberRepository;<br>    <span class="hljs-meta">@Autowired</span><br>    MemberService memberService;<br><br><span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">optionalTest2</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">MemberPO</span> <span class="hljs-variable">memberPOTest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemberPO</span>();<br>        memberPOTest.setStatus(<span class="hljs-string">&quot;INACTIVE&quot;</span>);<br>        Mockito.<span class="hljs-keyword">when</span>(memberRepository.findByAccount(Mockito.isNull())).thenReturn(memberPOTest);<br>        Optional&lt;MemberPO&gt; memberPO1 = memberService.findActiveAccount(<span class="hljs-literal">null</span>);<br>        <span class="hljs-keyword">assert</span> !memberPO1.isPresent();<br>    &#125;<br></code></pre></td></tr></table></figure><p>å› ç‚ºMemberPositoryæ˜¯ä¸€å€‹Beanï¼Œæ‰€ä»¥æˆ‘å¼•å…¥äº†MockBeanå»å‡é€ å®ƒã€‚æ­¤å¤–ï¼Œæˆ‘ä½¿ç”¨äº†Mockitoé€™å€‹æ¸¬è©¦æ¡†æ¶å»æ¨¡æ“¬memberPositoryçš„è¡Œç‚ºï¼Œåªè¦findByAccountæ–¹æ³•ä¸­å‚³å‡ºäº†Nullï¼Œå°±å›å‚³ä¸€å€‹æˆ‘æ˜¯å…ˆå»ºç«‹å¥½çš„ä¸€å€‹æ¨¡æ“¬ç‰©ä»¶(memberPOTest)</p><p>åŸºæœ¬ä¸ŠMockitoçš„å¯«æ³•æ˜¯ Mockito.when(è¦è¢«æ¸¬è©¦çš„æ–¹æ³•).thenReturn(ä½ é è¨ˆçš„å›å‚³å…§å®¹)ï¼Œé€éé€™æ¨£çš„æ–¹æ³•å¯ä»¥åœ¨æ¸¬è©¦çš„@Testä¸­è¦†è“‹åŸå…ˆmemberPosiory.findByAccount()çš„æ–¹æ³• ( æ‡‰è©²ä¹Ÿæ˜¯å›å‚³Nullï¼ŒSpringBootTest ä¸æœƒçœŸçš„å¼•å…¥Bean )</p><p>æœ€å¾Œï¼Œæˆ‘å€‘ä½¿ç”¨ assert æ–·è¨€å»åˆ¤æ–·memberPO æ˜¯å¦å­˜åœ¨</p><p>æœ€å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹ç«¯å°ç«¯æ¸¬è©¦å§ã€‚ç«¯å°ç«¯æ¸¬è©¦æˆ‘ç†è§£çš„å°±æ˜¯APIå±¤ç´šçš„æ¸¬è©¦ï¼Œå®ƒåŒ…å«äº†æ›´å¤šè²¼è¿‘å•†æ¥­æƒ…å¢ƒçš„æ¸¬è©¦ï¼Œä¹Ÿæ˜¯æ¸¬è©¦ä¸Šä¸å¥½æ¸¬è©¦ï¼Œç¶“å¸¸æœƒé€éäººå·¥åŸ·è¡Œçš„æ¸¬è©¦ã€‚SpringBootæˆ‘ç¶“å¸¸ä½¿ç”¨Mockmvcä¾†é€²è¡Œæ•´åˆæ¸¬è©¦ï¼Œèˆ‰ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RunWith(SpringRunner.class)</span><br><span class="hljs-meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span><br><span class="hljs-meta">@AutoConfigureMockMvc</span> <span class="hljs-comment">// æ³¨æ„è¦é¡å¤–å®šç¾©@AutoConfigureMockMvcï¼Œå¦å‰‡ç„¡æ³•ä½¿ç”¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AioApiApplicationTests</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> MockMvc mockMvc;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetMember</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">MemberPO</span> <span class="hljs-variable">memberPO</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemberPO</span>();<br>    memberPO.setStatus(<span class="hljs-string">&quot;ACTIVE&quot;</span>);<br>    memberPO.setName(<span class="hljs-string">&quot;Clark&quot;</span>);<br>    Mockito.<span class="hljs-keyword">when</span>(memberRepository.findById(<span class="hljs-number">1L</span>)).thenReturn(Optional.ofNullable(memberPO));<br><br>    mockMvc.perform(get(<span class="hljs-string">&quot;/api/1.0/member&quot;</span>)<br>                    .param(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;1&quot;</span>)<br>                    .accept(MediaType.APPLICATION_JSON))<br>            .andExpect(status().isOk())<br>            .andExpect(content().contentType(MediaType.APPLICATION_JSON))<br>            .andExpect(jsonPath(<span class="hljs-string">&quot;$.info.name&quot;</span>).value(<span class="hljs-string">&quot;Clark&quot;</span>));<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>é€™ä¸‰ç¨®æ¸¬è©¦æ˜¯æˆ‘åœ¨åˆå­¸éšæ®µæ™‚ç¶“å¸¸æä¸æ¸…æ¥šçš„ï¼Œé€™æ¬¡ä¹Ÿè¶è‘—éµäººè³½çš„æ©Ÿæœƒä¸€å£æ°£æŠŠå®ƒå€‘é‡æ¸…ï¼Œå¸Œæœ›ä»¥ä¸Šå…§å®¹èƒ½å¹«åŠ©åˆ°ä»€éº¼äººã€‚é‚£ä»Šå¤©çš„åˆ†äº«å°±åˆ°æ­¤ç‚ºæ­¢äº†ï¼Œæˆ‘å€‘æ˜å¤©è¦‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>Test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBoot Spring Validationä»‹ç´¹</title>
    <link href="/2025/01/07/SpringBoot-Spring-Validation%E4%BB%8B%E7%B4%B9/"/>
    <url>/2025/01/07/SpringBoot-Spring-Validation%E4%BB%8B%E7%B4%B9/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©è¦ä»‹ç´¹çš„æ˜¯ä¸€å€‹ç°¡å–®å»å¯¦ç”¨çš„å°å·¥å…·â”€â”€SpringBoot Validatorï¼Œå®ƒå¯ä»¥å”åŠ©æˆ‘å€‘åšç‰©ä»¶çš„é©—è­‰ï¼Œæ¸›å°‘ç‰©ä»¶å»ºç«‹å¾Œç¹ç‘£çš„é©—è­‰é‚è¼¯ï¼Œä»¥ä¸‹æœƒä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚é¦–å…ˆè¦ä½¿ç”¨çš„è©±æˆ‘å€‘è¦å…ˆå¼•å…¥ä¾è³´ï¼Œå¦‚æœæ˜¯ä½¿ç”¨Mavençš„è©±å¯ä»¥åƒè€ƒä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dependency&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>å‡è¨­æˆ‘å€‘ä»Šå¤©æœ‰ä¸€å€‹äº¤æ˜“çš„Objectï¼Œæˆ‘å€‘å¸Œæœ›åœ¨å¯¦éš›é€²å…¥Controllerå‰å…ˆé©—è­‰å‚³å…¥å€¼æ˜¯å¦æ­£ç¢ºçš„è©±ï¼Œå¯ä»¥çœ‹çœ‹ä»¥ä¸‹èˆ‰ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionObject</span> &#123;<br>    <span class="hljs-meta">@Size(min = 10, max = 28, message = &quot;é•·åº¦å¿…é ˆä»‹æ–¼10~28ä¹‹é–“&quot;)</span><br>    <span class="hljs-keyword">private</span> String transactionId;<br>    <span class="hljs-meta">@Email(regexp = &quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]&#123;2,&#125;$&quot;, message = &quot;Emailæ ¼å¼ä¸ç¬¦åˆ&quot;)</span><br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-meta">@NotBlank(message = &quot;Type is not exist&quot;)</span><br>    <span class="hljs-keyword">private</span> String transactionType;<br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-meta">@PositiveOrZero</span><br>    <span class="hljs-keyword">private</span> BigDecimal amount; <span class="hljs-comment">// äº¤æ˜“é‡‘é¢</span><br>    <span class="hljs-meta">@PastOrPresent</span><br>    <span class="hljs-keyword">private</span> LocalDateTime transactionDate;<br><br><span class="hljs-comment">// ... getter setter constructor</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨TransactionObjectä¸­ï¼Œ<br>@Sizeæœƒåœ¨ç‰©ä»¶å»ºç«‹æ™‚åˆ¤æ–·transactionIdæ˜¯å¦åœ¨é•·åº¦10<del>28ä¹‹é–“ï¼Œè‹¥ä¸ç¬¦åˆæœƒå ±Excpetionï¼Œè¨Šæ¯ç‚º é•·åº¦å¿…é ˆä»‹æ–¼10</del>28ä¹‹é–“ã€‚<br>@Email åˆ©ç”¨æ­£è¦è¡¨é”å¼é©—è­‰å‚³å…¥emailæ ¼å¼æ˜¯å¦ç¬¦åˆï¼Œè‹¥ä¸ç¬¦åˆå°±è·³å‡ºéŒ¯èª¤è¨Šæ¯ã€‚</p><p>@NotBlank é¡ä¼¼æ–¼æ’°å¯«StringUtils.isNotBlank()ï¼Œ@NotNullå‰‡ç”¨ä¾†åˆ¤æ–·æ˜¯å¦ä¸ç‚ºNull</p><p>@PositiveOrZero å®£å‘Šäº†æ•¸å€¼å¿…é ˆæ˜¯æ­£æ•¸æˆ–è€…0</p><p>@PastOrPresent å®£å‘Šäº†äº¤æ˜“æ™‚é–“ï¼Œå¿…é ˆæ˜¯ç¾åœ¨æˆ–è€…ç¾åœ¨ä»¥å‰ï¼Œå› ç‚ºä¸æœƒæœ‰æœªä¾†çš„äº¤æ˜“ã€‚</p><p>ä»¥ä¸Šï¼Œé€éç‰©ä»¶åœ¨å»ºç«‹çš„åŒæ™‚ä¾¿å®Œæˆé©—è­‰å°±æ˜¯Spring Validatorçš„ç‰¹è‰²ã€‚</p><p>é€šå¸¸ä»–æœƒåœ¨API Controllerå°±è¢«ä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionController</span> &#123;<br><br>    <span class="hljs-keyword">private</span> TransactionService transactionService;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TransactionController</span><span class="hljs-params">(TransactionService transactionService)</span> &#123;<br>        <span class="hljs-built_in">this</span>.transactionService = transactionService;<br>    &#125;<br>    <span class="hljs-meta">@PostMapping(&quot;/payment&quot;)</span><br>    <span class="hljs-keyword">public</span> TransactionObject <span class="hljs-title function_">payment</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> <span class="hljs-meta">@Valid</span> TransactionObject transactionObject)</span> &#123;<br><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> transactionService.payment(transactionObject);<br>        <span class="hljs-keyword">return</span> success ? transactionObject : <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­@Valid ä»£è¡¨äº†å•Ÿå‹•ç‰©ä»¶é©—è­‰çš„æ–¹æ³•ï¼Œå¦‚æœä¸ç¬¦åˆå°±æœƒç›´æ¥æ‹‹å‡ºorg.springframework.web.bind.MethodArgumentNotValidExceptionï¼Œé¿å…è®“ä¸åˆæ³•çš„ç‰©ä»¶é€²å…¥ç¨‹å¼å…§éƒ¨ã€‚</p><p>ç„¶è€Œï¼Œåœ¨Controllerä½œç‰©ä»¶é©—è­‰æœ‰ä¸€å€‹ç¼ºé»ï¼Œå°±æ˜¯ç„¡æ³•æ’°å¯«try catchï¼Œé€™éƒ¨åˆ†è¦æ€éº¼è§£æ±ºå‘¢ï¼Œæˆ‘å€‘æ˜å¤©åœ¨èªªæ˜å§ï¼Œæ„Ÿæ©æ„Ÿè¬ã€‚</p><p>åƒè€ƒè³‡æºï¼š</p><p><a href="https://blog.csdn.net/Hello_World_QWP/article/details/116129788">Spring Bootä¸­validation-apiå’Œhibernate-validatorè¯¦è§£åŠå¿«é€Ÿåº”ç”¨å®è·µï¼Œ@Valid BindingResultå®ç°æ¥å£å…¥å‚è‡ªåŠ¨æ£€éªŒï¼ŒJavaå®ä½“å­—æ®µæ ¡éªŒ-CSDNåšå®¢</a></p><p><a href="https://www.baeldung.com/spring-boot-bean-validation">https://www.baeldung.com/spring-boot-bean-validation</a></p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Hibernate</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Securityæ¢ç§˜</title>
    <link href="/2025/01/05/Spring-Security%E6%8E%A2%E7%A7%98/"/>
    <url>/2025/01/05/Spring-Security%E6%8E%A2%E7%A7%98/</url>
    
    <content type="html"><![CDATA[<h3 id="SpringBootå¼•å…¥Spring-Securityåšäº†ä»€éº¼ï¼Ÿ"><a href="#SpringBootå¼•å…¥Spring-Securityåšäº†ä»€éº¼ï¼Ÿ" class="headerlink" title="SpringBootå¼•å…¥Spring Securityåšäº†ä»€éº¼ï¼Ÿ"></a>SpringBootå¼•å…¥Spring Securityåšäº†ä»€éº¼ï¼Ÿ</h3><p>Spring Boot å¼•å…¥ Spring Security å¾Œçš„é è¨­è¡Œç‚ºï¼š</p><ul><li>è‡ªå‹•ä¿è­·æ‰€æœ‰ endpoint</li><li>æä¾›é è¨­å¸³è™Ÿ (user) èˆ‡éš¨æ©Ÿå¯†ç¢¼</li><li>æä¾›ç™»å…¥&#x2F;ç™»å‡ºè¡¨å–®</li><li>æœªèªè­‰çš„è«‹æ±‚æœƒå°å‘ç™»å…¥é æˆ–å›å‚³ 401</li><li>æä¾›å¤šç¨®å®‰å…¨é˜²è­·æ©Ÿåˆ¶:<ul><li>CSRF é˜²è­·</li><li>Session Fixation é˜²è­·</li><li>å¼·åˆ¶ HTTPS (HSTS)</li><li>é˜²æ­¢å…§å®¹é¡å‹å—…æ¢</li><li>ç·©å­˜æ§åˆ¶</li><li>é»æ“ŠåŠ«æŒé˜²è­· (X-Frame-Options)</li></ul></li><li>ä½¿ç”¨Â <a href="https://docs.spring.io/spring-security/reference/servlet/exploits/headers.html#servlet-headers-hsts">Strict-Transport-Security</a>ç¢ºä¿æ˜¯HTTPSï¼ŒHSTSç”¨æ–¼å¼·åˆ¶ç€è¦½å™¨åƒ…é€šé HTTPSï¼ˆè€Œé HTTPï¼‰è¨ªå•è©²ç¶²ç«™</li><li>ä½¿ç”¨Â <a href="https://docs.spring.io/spring-security/reference/servlet/exploits/headers.html#servlet-headers-content-type-options">X-Content-Type-Options</a>Â ä»¥ç·©è§£Â <a href="https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Headers_Cheat_Sheet.html#x-content-type-options">sniffing attacks</a></li><li>ä½¿ç”¨Â <a href="https://docs.spring.io/spring-security/reference/servlet/exploits/headers.html#servlet-headers-cache-control">Cache Control headers</a>Â that ä¿è­·æˆæ¬Šå¾Œçš„è³‡æºï¼ŒCache-Control å’Œ Pragma æ¨™é ­ç”¨æ–¼æŒ‡ç¤ºç€è¦½å™¨æˆ–ä»£ç†ä¸è¦å¿«å–æˆæ¬Šå¾Œçš„æ•æ„Ÿè³‡æºï¼Œé˜²æ­¢æœªç¶“æˆæ¬Šçš„ç”¨æˆ¶è¨ªå•ç·©å­˜ã€‚</li><li>ä½¿ç”¨Â <a href="https://docs.spring.io/spring-security/reference/servlet/exploits/headers.html#servlet-headers-frame-options">X-Frame-Options</a>Â ç·©è§£Â <a href="https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Headers_Cheat_Sheet.html#x-frame-options">Clickjacking</a>ï¼Œé ­é˜²æ­¢ç¶²é å…§å®¹è¢«åµŒå…¥åˆ° <code>&lt;iframe&gt;</code> ä¸­ï¼Œé¿å… Clickjacking æ”»æ“Š</li><li>èˆ‡<code>HttpServletReqeust</code>çš„èªè­‰æ–¹æ³•æ•´åˆ</li><li>ç™¼å¸ƒæˆåŠŸèªè­‰èˆ‡å¤±æ•—èªè­‰è¨Šæ¯ (<code>AuthenticationSuccessHandler</code> èˆ‡ <code>AuthenticationFailureHandler</code> )</li></ul><h4 id="Session-Fixationæ”»æ“Šæ¨¡å¼ä»‹ç´¹"><a href="#Session-Fixationæ”»æ“Šæ¨¡å¼ä»‹ç´¹" class="headerlink" title="Session Fixationæ”»æ“Šæ¨¡å¼ä»‹ç´¹"></a>Session Fixationæ”»æ“Šæ¨¡å¼ä»‹ç´¹</h4><ol><li><strong>ç›®æ¨™</strong>ï¼š<ul><li>æ”»æ“Šè€…è©¦åœ–å›ºå®šç”¨æˆ¶çš„æœƒè©±IDï¼Œç„¶å¾Œåœ¨ç”¨æˆ¶ç™»éŒ„å¾ŒåŠ«æŒæœƒè©±ã€‚</li></ul></li><li><strong>æ–¹æ³•</strong>ï¼š<ul><li>æ”»æ“Šè€…éœ€è¦äº‹å…ˆå°‡ç‰¹å®šçš„æœƒè©±IDæ³¨å…¥åˆ°ç”¨æˆ¶çš„æœƒè©±ä¸­ã€‚</li></ul></li><li><strong>SpringSecurityé˜²ç¦¦æªæ–½</strong>ï¼š<ul><li>åœ¨ç”¨æˆ¶ç™»éŒ„å¾Œé‡æ–°ç”Ÿæˆæ–°çš„æœƒè©±IDï¼Œä½¿ç”¨å®‰å…¨å±¬æ€§çš„cookieè¨­ç½®ï¼ˆä¾‹å¦‚HttpOnlyã€Secureï¼‰ã€‚</li></ul></li></ol><h4 id="CSRFæ”»æ“Šæ¨¡å¼ä»‹ç´¹"><a href="#CSRFæ”»æ“Šæ¨¡å¼ä»‹ç´¹" class="headerlink" title="CSRFæ”»æ“Šæ¨¡å¼ä»‹ç´¹"></a>CSRFæ”»æ“Šæ¨¡å¼ä»‹ç´¹</h4><ol><li><strong>ç›®æ¨™</strong>ï¼š<ul><li>æ”»æ“Šè€…åˆ©ç”¨ç”¨æˆ¶å·²ç¶“ç™»éŒ„çš„ç‹€æ…‹ï¼Œåœ¨æœªç¶“ç”¨æˆ¶åŒæ„çš„æƒ…æ³ä¸‹åŸ·è¡Œæ“ä½œã€‚</li></ul></li><li><strong>æ–¹æ³•</strong>ï¼š<ul><li>æ”»æ“Šè€…èª˜å°ç”¨æˆ¶è¨ªå•æƒ¡æ„ç¶²ç«™ï¼Œç„¶å¾Œåˆ©ç”¨ç”¨æˆ¶çš„ç€è¦½å™¨ç™¼é€è«‹æ±‚ã€‚</li></ul></li><li><strong>SpringSecurityé˜²ç¦¦æªæ–½</strong>ï¼š<ul><li>ä½¿ç”¨CSRFä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œé©—è­‰è«‹æ±‚ä¾†æºçš„Refereré ­ï¼Œç¢ºä¿é—œéµæ“ä½œéœ€è¦ç”¨æˆ¶ç¢ºèªï¼ˆä¾‹å¦‚å¤šå› ç´ èªè­‰ï¼‰ã€‚</li></ul></li></ol><h3 id="Spring-SecurityåŸºæœ¬è¨­å®šæ­¥é©Ÿï¼š"><a href="#Spring-SecurityåŸºæœ¬è¨­å®šæ­¥é©Ÿï¼š" class="headerlink" title="Spring SecurityåŸºæœ¬è¨­å®šæ­¥é©Ÿï¼š"></a>Spring SecurityåŸºæœ¬è¨­å®šæ­¥é©Ÿï¼š</h3><h4 id="èªè­‰æµç¨‹çš„é‡è¦å…ƒä»¶ï¼š"><a href="#èªè­‰æµç¨‹çš„é‡è¦å…ƒä»¶ï¼š" class="headerlink" title="èªè­‰æµç¨‹çš„é‡è¦å…ƒä»¶ï¼š"></a>èªè­‰æµç¨‹çš„é‡è¦å…ƒä»¶ï¼š</h4><ul><li>AuthenticationManager: è² è²¬èªè­‰æµç¨‹</li><li>UserDetailsService: è¼‰å…¥ä½¿ç”¨è€…è³‡è¨Š</li><li>PasswordEncoder: å¯†ç¢¼ç·¨ç¢¼èˆ‡é©—è­‰</li><li>SecurityContextHolder: å„²å­˜èªè­‰ä¿¡æ¯</li><li>SecurityContext: ä¿å­˜ç•¶å‰ä½¿ç”¨è€…çš„èªè­‰ä¿¡æ¯</li></ul><p>åŸºæœ¬ç¯„ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@EnableWebSecurity</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> &#123;<br>    <span class="hljs-comment">// 1. é…ç½®ä½¿ç”¨è€…è³‡è¨Š</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> InMemoryUserDetailsManager <span class="hljs-title function_">userDetailsManager</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// å»ºç«‹ä½¿ç”¨è€…å¸³è™Ÿã€å¯†ç¢¼ã€æ¬Šé™</span><br>       <span class="hljs-type">UserDetails</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> User<br>               .withUsername(<span class="hljs-string">&quot;user1&quot;</span>)<br>               .password(<span class="hljs-string">&quot;&#123;noop&#125;111&quot;</span>)<br>               .authorities(<span class="hljs-string">&quot;STUDENT&quot;</span>)<br>               .build();<br>       <span class="hljs-type">UserDetails</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> User<br>               .withUsername(<span class="hljs-string">&quot;user2&quot;</span>)<br>               .password(<span class="hljs-string">&quot;&#123;noop&#125;222&quot;</span>)<br>               .authorities(<span class="hljs-string">&quot;TEACHER&quot;</span>)<br>               .build();<br>       <span class="hljs-type">UserDetails</span> <span class="hljs-variable">user3</span> <span class="hljs-operator">=</span> User<br>               .withUsername(<span class="hljs-string">&quot;user3&quot;</span>)<br>               .password(<span class="hljs-string">&quot;&#123;bcrypt&#125;333&quot;</span>)<br>               .authorities(<span class="hljs-string">&quot;ADMIN&quot;</span>, <span class="hljs-string">&quot;TEACHER&quot;</span>)<br>               .build();<br>       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryUserDetailsManager</span>(List.of(user1, user2, user3));<br>    &#125;<br><br>    <span class="hljs-comment">// 2. é…ç½®å®‰å…¨éæ¿¾å™¨éˆ</span><br>    <span class="hljs-meta">@Bean</span> <br>    <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">filterChain</span><span class="hljs-params">(HttpSecurity http)</span> &#123;<br>        <span class="hljs-keyword">return</span> http<br>            .authorizeRequests() <span class="hljs-comment">// è¨­å®šè¨ªå•æ¬Šé™</span><br>            .formLogin()        <span class="hljs-comment">// å•Ÿç”¨è¡¨å–®ç™»å…¥</span><br>            .httpBasic()       <span class="hljs-comment">// å•Ÿç”¨ HTTP Basic èªè­‰</span><br>            .build();<br>    &#125;<br>    <span class="hljs-comment">// OR</span><br>   <span class="hljs-meta">@Bean</span><br>   <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity httpSecurity)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">return</span> httpSecurity<br>              .formLogin(Customizer.withDefaults())<br>              .authorizeHttpRequests(requests -&gt; requests<br>                      .requestMatchers(HttpMethod.GET, <span class="hljs-string">&quot;/register&quot;</span>).permitAll()<br>                      .requestMatchers(HttpMethod.GET, <span class="hljs-string">&quot;/selected-courses&quot;</span>).hasAuthority(<span class="hljs-string">&quot;STUDENT&quot;</span>)<br>                      .requestMatchers(HttpMethod.GET, <span class="hljs-string">&quot;/course-feedback&quot;</span>).hasAnyAuthority(<span class="hljs-string">&quot;TEACHER&quot;</span>, <span class="hljs-string">&quot;ADMIN&quot;</span>)<br>                      .requestMatchers(HttpMethod.GET, <span class="hljs-string">&quot;/members&quot;</span>).hasAuthority(<span class="hljs-string">&quot;ADMIN&quot;</span>)<br>                      .anyRequest().authenticated()<br>              )<br>              .csrf(csrf -&gt; csrf.disable())<br>              .build();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€™è£¡è¨»å†Šäº†ä¸€å€‹SecurityFilterChainï¼Œå®šç¾©å®ƒå€‘è¦é–‹æ”¾çµ¦å…·æœ‰å“ªäº›æ¬Šé™çš„äººå­˜å–ã€‚<br>Spring Security æœƒå°‡ HttpSecurity ç‰©ä»¶æ³¨å…¥åˆ°å»ºç«‹å…ƒä»¶çš„æ–¹æ³•ä¸­ã€‚é€éè©²ç‰©ä»¶çš„ä¸€ç³»åˆ—æ–¹æ³•å‘¼å«ï¼Œæˆ‘å€‘èƒ½ç«™åœ¨å®‰å…¨ç®¡ç†çš„è§’åº¦ï¼Œè‡ªå®šç¾© request åˆ°é”å¾Œç«¯æ™‚çš„æ‡‰å°æ–¹å¼ã€‚<br>ä¸€é–‹å§‹çš„ formLogin æ–¹æ³•ï¼Œæ˜¯å•Ÿç”¨å…ˆå‰çš„ç™»å…¥ç•«é¢ï¼Œä¾¿æ–¼æˆ‘å€‘ç¹¼çºŒé€²è¡Œæ¸¬è©¦ã€‚<br>æ¥ä¸‹ä¾†çš„ authorizeHttpRequests æ–¹æ³•ï¼Œå…¶ç”¨é€”æ˜¯è¨­å®šè¦å¦‚ä½•é€²è¡Œæˆæ¬Šã€‚å®šç¾©æ™‚ï¼Œéœ€æä¾›ã€ŒAPIã€èˆ‡ã€Œæˆæ¬Šè¦å‰‡ã€é€™å…©å€‹éƒ¨ä»½ã€‚<br>å‘¼å« requestMatchers æ–¹æ³•ï¼Œå¯å‚³å…¥ API è·¯å¾‘èˆ‡ HTTP æ–¹æ³•ï¼›å‘¼å« anyRequests æ–¹æ³•ï¼Œä»£è¡¨è¦å°ã€Œå…¶é¤˜ã€çš„ API åšè¨­å®šã€‚é€™æ˜¯æœ‰å…ˆå¾Œé †åºä¹‹åˆ†çš„ï¼Œå°±åƒ Java èªè¨€çš„ã€Œif â†’ else if â†’ elseã€ï¼Œæ˜¯ç”±ä¸Šè€Œä¸‹é€ä¸€åˆ¤æ–·ã€‚<br>æä¾›å®Œ API å¾Œï¼Œæ¥è‘—è¦å®šç¾©æˆæ¬Šè¦å‰‡ã€‚ä»¥ä¸‹èˆ‰ä¾‹å¹¾å€‹å¯ç”¨çš„æ–¹æ³•ï¼š</p><table><thead><tr><th>æ–¹æ³•åç¨±</th><th>æ„ç¾©</th></tr></thead><tbody><tr><td>permitAll</td><td>ä¸å¿…ç™»å…¥å°±èƒ½å­˜å–ã€‚</td></tr><tr><td>hasAuthority</td><td>éœ€å…·å‚™æŸä¸€å€‹æ¬Šé™æ‰èƒ½å­˜å–ã€‚</td></tr><tr><td>hasAnyAuthority</td><td>åªè¦å…·å‚™ä»»ä¸€å€‹æ¬Šé™å°±èƒ½å­˜å–ã€‚</td></tr><tr><td>authenticated</td><td>éœ€ç™»å…¥æ‰èƒ½å­˜å–ã€‚</td></tr></tbody></table><p>çœ‹ <code>InMemoryUserDetailsManager</code> é¡åˆ¥çš„åŸå§‹ç¢¼ï¼Œæœƒç™¼ç¾å®ƒé ‚å±¤å¯¦ä½œäº† <code>UserDetailsService</code> ä»‹é¢ã€‚è©²ä»‹é¢æ˜¯ Spring Security ç”¨ä¾†é€²è¡Œèªè­‰çš„é‡è¦å…ƒä»¶ã€‚å®ƒæä¾›ä¸€å€‹å«åš <code>loadUserByUsername</code> çš„æ–¹æ³•ï¼Œç”¨é€”æ˜¯æ¥æ”¶å¸³è™Ÿçš„å€¼ï¼Œä¸¦å›å‚³å…§å«ä½¿ç”¨è€…è³‡æ–™çš„ <code>UserDetails</code> ä»‹é¢ç‰©ä»¶ã€‚ç¹¼çºŒè¿½è¹¤ <code>InMemoryUserDetailsManager</code> çš„åŸå§‹ç¢¼ï¼Œæœƒç™¼ç¾å®ƒæ˜¯ç”¨ <code>Map</code> è³‡æ–™çµæ§‹ä¾†å„²å­˜ä½¿ç”¨è€…ã€‚<br>å•Ÿå‹•ç¨‹å¼æ™‚ï¼ŒSpring Security æœƒæª¢æŸ¥å°ˆæ¡ˆä¸­æ˜¯å¦æœ‰ <code>UserDetailsService</code> å…ƒä»¶ã€‚è‹¥ç„¡ï¼Œå‰‡è‡ªå‹•å»ºç«‹ä¸€å€‹ <code>InMemoryUserDetailsManager</code> å…ƒä»¶ï¼Œä¸¦åŒ…å«ä¸€å€‹å¸³è™Ÿç‚ºã€Œuserã€ã€å¯†ç¢¼ç‚ºéš¨æ©Ÿï¼ˆå¯åœ¨ console æ‰¾åˆ°ï¼‰çš„ä½¿ç”¨è€…ã€‚<br>æ¬Šé™è³‡æ–™æ˜¯é€é <code>GrantedAuthority</code> ä»‹é¢ä¾†å‚³éã€‚Spring Security å…§å»ºäº†ä¸€å€‹å«åš <code>SimpleGrantedAuthority</code> çš„å¯¦ä½œé¡åˆ¥ã€‚</p><p>èªè­‰æ–¹å¼é‚„æœ‰è¨±å¤šè®Šå½¢ï¼Œä¾‹å¦‚ï¼š</p><h4 id="HTTP-BASIC-Not-Http-Form"><a href="#HTTP-BASIC-Not-Http-Form" class="headerlink" title="HTTP_BASIC (Not Http Form)"></a>HTTP_BASIC (Not Http Form)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// OR</span><br>   <span class="hljs-meta">@Bean</span><br>   <span class="hljs-keyword">public</span> SecurityFilterChain <span class="hljs-title function_">securityFilterChain</span><span class="hljs-params">(HttpSecurity httpSecurity)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">return</span> httpSecurity<br>              .authorizeHttpRequests(requests -&gt; requests<br>                      .requestMatchers(HttpMethod.GET, <span class="hljs-string">&quot;/home&quot;</span>).permitAll()<br>                      .requestMatchers(HttpMethod.POST, <span class="hljs-string">&quot;/select-course&quot;</span>).hasAuthority(<span class="hljs-string">&quot;STUDENT&quot;</span>)<br>                      .requestMatchers(HttpMethod.PUT, <span class="hljs-string">&quot;/courses&quot;</span>).hasAuthority(<span class="hljs-string">&quot;TEACHER&quot;</span>)<br>                      .anyRequest().authenticated()<br>              )<br>              .csrf(csrf -&gt; csrf.disable())<br>              .httpBasic(Customizer.withDefaults())<br>              .build();<br>   &#125;<br></code></pre></td></tr></table></figure><p>Spring Security æ”¯æ´ä¸€ç¨®å«åšã€ŒHTTP Basicã€çš„èªè­‰æ–¹å¼ã€‚å…¶åšæ³•æ˜¯åœ¨ã€ŒAuthorizationã€é€™å€‹ request header æ”œå¸¶å¸³è™Ÿèˆ‡å¯†ç¢¼ï¼Œå°±åƒåœ¨ç™»å…¥ç•«é¢è¼¸å…¥å¸³å¯†ä¸€æ¨£ã€‚è€Œå¾Œç«¯æœƒåœ¨æ¯æ¬¡æ¥æ”¶åˆ° request æ™‚ï¼Œå°±å…ˆé€²è¡Œèªè­‰ã€‚</p><p>é€éä¸Šé¢å…§å®¹ï¼Œæˆ‘å€‘å·²ç¶“çŸ¥é“Spring Securityæä¾›äº†ç”šéº¼å®‰è£é˜²è­·ï¼Œä»¥åŠè¨»å†ŠUserçš„éç¨‹ã€‚é‚£å‡è¨­æˆ‘å€‘æƒ³è¦åœ¨APIå–å¾—æœ‰é—œUserçš„è³‡æ–™çš„è©±ï¼Œå¯ä»¥é€™éº¼åšï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-meta">@GetMapping(&quot;/home&quot;)</span><br>  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-type">SecurityContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext();<br>      <span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> context.getAuthentication();<br>      <span class="hljs-type">Object</span> <span class="hljs-variable">principal</span> <span class="hljs-operator">=</span> auth.getPrincipal(); <span class="hljs-comment">// å–å¾—Spring Security Userï¼Œè‹¥ç„¡é¡¯ç¤ºanonymousUser</span><br><br>      <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;anonymousUser&quot;</span>.equals(principal)) &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ä½ å°šæœªç¶“éèº«ä»½èªè­‰&quot;</span>;<br>      &#125;<br>      <br>      <span class="hljs-type">UserDetails</span> <span class="hljs-variable">userDetails</span> <span class="hljs-operator">=</span> (UserDetails) principal;<br>      <span class="hljs-keyword">return</span> String.format(<br>              <span class="hljs-string">&quot;ä½ å¥½ï¼Œ%sï¼Œä½ çš„æ¬Šé™æ˜¯ï¼š%s&quot;</span>,<br>              userDetails.getUsername(),<br>              userDetails.getAuthorities()<br>      );<br>&#125;<br></code></pre></td></tr></table></figure><p>Spring Security æ˜¯é€é Java Servlet çš„ã€ŒFilterã€ï¼Œæ‰èƒ½åœ¨ request åˆ°é” Controller å‰é€²è¡Œèªè­‰èˆ‡æˆæ¬Šã€‚å…¶ä¸­ <code>BasicAuthenticationFilter</code> æ˜¯å°ˆé–€è™•ç† HTTP Basic èªè­‰çš„ Filterã€‚<br>Filter æ¥æ”¶åˆ° request å¾Œï¼Œé¦–å…ˆ <code>AuthenticationConverter</code> æœƒå¾ <code>HttpServletRequest</code> å–å‡ºã€ŒAuthorizationã€é€™å€‹ header çš„å€¼ï¼Œé€²è¡Œ Base64 è§£ç¢¼ã€‚è§£æå‡ºå¸³å¯†å¾Œï¼Œå°è£æˆ <code>Authentication</code> ç‰©ä»¶ã€‚<br>è€ŒÂ <code>AuthenticationConverter</code>Â ä»‹é¢çš„å¯¦ä½œé¡åˆ¥æ˜¯Â <code>BasicAuthenticationConverter</code>ï¼Œå®ƒæœƒå›å‚³Â <code>Authentication</code>Â ä»‹é¢çš„å¯¦ä½œé¡åˆ¥Â <code>UsernamePasswordAuthenticationToken</code>ã€‚è§£æå‡ºçš„å¸³è™Ÿï¼Œæœƒæ”¾åœ¨ <code>UsernamePasswordAuthenticationToken</code> ç‰©ä»¶çš„ <code>principal</code> æ¬„ä½ï¼Œè€Œå¯†ç¢¼æ”¾åœ¨ <code>credentials</code> æ¬„ä½ã€‚<br><img src="/img/spring_security_1.jpg" alt="AuthenticationConverter"></p><h3 id="AuthenticationManager-é€²è¡Œèªè­‰"><a href="#AuthenticationManager-é€²è¡Œèªè­‰" class="headerlink" title="AuthenticationManager é€²è¡Œèªè­‰"></a>AuthenticationManager é€²è¡Œèªè­‰</h3><p>å°‡å¸³è™Ÿèˆ‡å¯†ç¢¼çš„å€¼å°è£æˆÂ <code>Authentication</code>Â ä»‹é¢çš„ç‰©ä»¶å¾Œï¼Œæ¥ä¸‹ä¾†Â <code>AuthenticationManager</code>Â æœƒé€²è¡Œèº«ä»½èªè­‰ï¼Œä¸¦å›å‚³å¦ä¸€å€‹æ–°çš„Â <code>Authentication</code>Â ç‰©ä»¶ã€‚å…©å€‹ç‰©ä»¶çš„å·®åˆ¥åœ¨æ–¼ï¼Œæ–°ç‰©ä»¶æœƒåŒ…å«èªè­‰å¾Œçš„çµæœï¼Œå³ä½¿ç”¨è€…è³‡æ–™ã€‚<br>å¦å¤–ï¼Œé€™å€‹Â <code>AuthenticationManager</code>Â ä»‹é¢ï¼Œæœ‰å€‹å¯¦ä½œé¡åˆ¥å«åšÂ <code>ProviderManager</code>ï¼Œå®ƒæ“æœ‰å¤šå€‹Â <code>AuthenticationProvider</code>Â ä»‹é¢çš„ç‰©ä»¶ï¼Œè®€è€…å¯ç†è§£æˆã€Œèªè­‰åŠŸèƒ½çš„æä¾›è€…ã€ã€‚<br><img src="/img/spring_security_2.jpg" alt="AuthenticationConverter"><br>åœ¨ HTTP Basic èªè­‰çš„æƒ…æ³ä¸‹ï¼Œæœƒç”±Â <code>DaoAuthenticationProvider</code>Â æä¾›èªè­‰åŠŸèƒ½ã€‚å®ƒæ¥æ”¶Â <code>Authentication</code>Â ç‰©ä»¶å¾Œï¼Œä½¿ç”¨äº†Â <code>UserDetailsService</code>Â èˆ‡Â <code>PasswordEncoder</code>Â é€²è¡Œå¸³è™Ÿèˆ‡å¯†ç¢¼çš„èªè­‰ã€‚</p><p>èªè­‰æˆåŠŸå¾Œï¼Œ<code>DaoAuthenticationProvider</code> æœƒå°‡ <code>UserDetailsService</code> å›å‚³çš„ <code>UserDetails</code> æ”¾å…¥ <code>UsernamePasswordAuthenticationToken</code> ç‰©ä»¶çš„ <code>principal</code> æ¬„ä½ä¸­ï¼Œä¸¦ä»¥ <code>Authentication</code> ä»‹é¢å›å‚³ã€‚</p><h3 id="SecurityContextHolderStrategy-ç®¡ç†èªè­‰è³‡è¨Š"><a href="#SecurityContextHolderStrategy-ç®¡ç†èªè­‰è³‡è¨Š" class="headerlink" title="SecurityContextHolderStrategy ç®¡ç†èªè­‰è³‡è¨Š"></a>SecurityContextHolderStrategy ç®¡ç†èªè­‰è³‡è¨Š</h3><p>Spring Security æœƒå°‡èªè­‰å¾Œçš„ä½¿ç”¨è€…è³‡æ–™å„²å­˜æ–¼è¨˜æ†¶é«”ï¼Œè®“æˆ‘å€‘åœ¨ç¨‹å¼é‚è¼¯ä¸­èƒ½ä½¿ç”¨ã€‚å°±åƒåœ¨ Controller çš„ç¯„ä¾‹ç¨‹å¼å–å‡ºÂ <code>UserDetails</code>Â ç‰©ä»¶é‚£æ¨£ã€‚<br>è² è²¬ç®¡ç†èªè­‰è³‡è¨Šçš„æ˜¯Â <code>SecurityContextHolder</code>Â ä¸­çš„Â <code>SecurityContextHolderStrategy</code>ã€‚å¾Œè€…æ˜¯ä¸€å€‹ä»‹é¢ï¼Œä»£è¡¨ç®¡ç†çš„ã€Œç­–ç•¥ã€ï¼ŒSpring Security å…§å»ºæ•¸ç¨®å¯¦ä½œå¥½çš„ç­–ç•¥ã€‚<br>è€Œå‰è€…æ˜¯ä¸€å€‹é¡åˆ¥ï¼Œæœƒåœ¨å•Ÿå‹•ç¨‹å¼æ™‚é¸æ“‡å…¶ä¸­ä¸€ç¨®ç®¡ç†ç­–ç•¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå°±åªæ˜¯å°å¤–æä¾›å­˜å–èªè­‰è³‡è¨Šçš„æ–¹æ³•ç½·äº†ã€‚<br><img src="/img/spring_security_3.jpg" alt="AuthenticationConverter"><br>é è¨­çš„ç®¡ç†ç­–ç•¥æ˜¯Â <code>ThreadLocalSecurityContextHolderStrategy</code>ï¼Œå®ƒæ¡ç”¨äº†ã€ŒThreadLocalã€çš„æŠ€è¡“ï¼Œè®“æ¯å€‹åŸ·è¡Œç·’åªèƒ½å–å¾—å±¬æ–¼è‡ªå·±çš„è³‡æ–™ã€‚å› æ­¤ï¼Œå³ä¾¿ Spring Boot åŒæ™‚è™•ç†è¨±å¤š requestï¼Œä½†ä¸¦ä¸æœƒæ„å¤–åœ°å–å¾—ä»–äººçš„èªè­‰è³‡è¨Šã€‚<br>å›åˆ° Filter çš„é‚è¼¯ã€‚æ¥ä¸‹ä¾†æœƒç”¢ç”Ÿä¸€å€‹Â <code>SecurityContext</code>Â ä»‹é¢çš„ç‰©ä»¶ï¼Œå°‡èªè­‰å¾Œçš„Â <code>Authentication</code>Â ç‰©ä»¶å°è£èµ·ä¾†ã€‚<br>æœ€å¾Œå°‡Â <code>SecurityContext</code>Â å­˜å›Â <code>SecurityContextHolderStrategy</code>ï¼Œå°±å®Œæˆ HTTP Basic èªè­‰çš„æµç¨‹ã€‚</p><p>èªè­‰æ–¹æ³•æœ‰å¾ˆå¤šç¨®ï¼Œé™¤äº†HTTP_BASICï¼Œä¹Ÿå¯ä»¥è€ƒæ…®å®‰å…¨æ€§æ›´é«˜çš„JWT Token æˆ–æ˜¯ Oauthã€‚ä»¥ä¸‹åƒ…ä»‹ç´¹JWT<br>JWTæ˜¯ä¸€ç¨®ç‰¹æ®Šçš„Tokenæ ¼å¼ï¼Œä¸»è¦ç”±</p><ul><li>Header (é¡å‹ã€æ¼”ç®—æ³•)</li><li>Payload (è²æ˜è³‡è¨Š)</li><li>Signature (ç°½å)<br>ä¸‰å€‹éƒ¨åˆ†å½¢æˆï¼Œå¯¦å‹™ä¸Šå‰‡æœ‰å…©ç¨®å½¢å¼</li><li>Access Token ç”¨æˆ¶å­˜å– API æ™‚æœƒæ”œå¸¶æ–¼ request headerï¼Œè­‰æ˜è‡ªå·±çš„èº«ä»½ã€‚ç‚ºäº†å®‰å…¨æ€§ï¼Œå…¶æœ‰æ•ˆæœŸé™è¼ƒçŸ­ï¼Œä¾‹å¦‚ 1 å°æ™‚ã€‚å› æ­¤è‹¥å¤–æ´©ï¼Œå‰‡ç›œç”¨è€…ä¹Ÿç„¡æ³•ä½¿ç”¨å¤ªä¹…çš„æ™‚é–“</li><li>Refresh Token åœ¨æ›ç™¼æ–°çš„ Access Token æ™‚æä¾›ã€‚æœ‰æ•ˆæœŸé™è¼ƒé•·ï¼Œä¾‹å¦‚ 7 å¤©ã€‚</li></ul><p>é€é Refresh Tokenï¼Œå°±èƒ½åœ¨ä¸é‡æ–°ç™»å…¥çš„æ¢ä»¶ä¸‹ï¼Œå–å¾—æ–°çš„ Access Tokenï¼Œæœ‰åŠ©æ–¼ä½¿ç”¨è€…é«”é©—ã€‚ç­‰åˆ° Refresh Token åˆ°æœŸï¼Œå°±çœŸçš„è¦é‡æ–°ç™»å…¥ï¼Œå–å¾—ä»¥ä¸Š 2 ç¨® Token äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Spring Security</tag>
      
      <tag>JWT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸€äº›é›¶ç¢çš„SpringBootå°çŸ¥è­˜</title>
    <link href="/2025/01/05/%E4%B8%80%E4%BA%9B%E9%9B%B6%E7%A2%8E%E7%9A%84SpringBoot%E5%B0%8F%E7%9F%A5%E8%AD%98/"/>
    <url>/2025/01/05/%E4%B8%80%E4%BA%9B%E9%9B%B6%E7%A2%8E%E7%9A%84SpringBoot%E5%B0%8F%E7%9F%A5%E8%AD%98/</url>
    
    <content type="html"><![CDATA[<p>é€™é‚Šçš„æ˜¯æåˆ°è¨±å¤šä¸€å€‹å€‹SpringBootçš„å°çŸ¥è­˜ï¼Œå…§å®¹æ²’æœ‰å¤šåˆ°å¯ä»¥è®Šæˆä¸€ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥æ•´ç†åœ¨é€™è£¡ï¼š</p><h2 id="Spring-Bean-æ¨¡å¼"><a href="#Spring-Bean-æ¨¡å¼" class="headerlink" title="Spring Bean æ¨¡å¼"></a>Spring Bean æ¨¡å¼</h2><p>Spring Bean æœ‰Singletonã€Prototypeæ¨¡å¼</p><ul><li>Singleton åªæœ‰ä¸€å€‹ï¼Œæ¯æ¬¡ä½œç‚ºBeanè¢«å‘¼å«æ™‚ï¼Œéƒ½æ˜¯ä½¿ç”¨åŒä¸€å€‹Beanã€‚ç”Ÿå‘½é€±æœŸå¾å®¹å™¨å•Ÿå‹•åˆ°ç¬¬ä¸€æ¬¡è¢«è«‹æ±‚è€Œå¯¦é«”åŒ–é–‹å§‹ï¼Œåªè¦å®¹å™¨ä¸éŠ·æ¯€æˆ–çµ‚æ­¢ï¼Œé€™é¡çš„Beanå°±æœƒä¸€ç›´å­˜æ´»ã€‚</li><li>åŸå‹ å¯æœ‰å¤šå€‹ï¼Œæ¯æ¬¡ä½œç‚ºBeanè¢«å‘¼å«æ™‚ï¼Œéƒ½é‡æ–°åˆå§‹åŒ–ï¼Œå®šç¾©å‡ºä¸€å€‹æ–°çš„Beanï¼Œå†è«‹æ±‚å®Œæˆå¾Œä¾¿ç„¡æ³•å¼•ç”¨ï¼Œè«‹æ±‚æ–¹é ˆè¦è‡ªå·±è² è²¬å¾ŒçºŒç”Ÿå‘½é€±æœŸçš„ç®¡ç†å·¥ä½œï¼ŒåŒ…æ‹¬éŠ·æ¯€ç­‰ç­‰ã€‚</li><li>Spring Bean é»˜èªæ˜¯ å–®ä¾‹æ¨¡å¼ã€‚</li></ul><h2 id="Spring-Data-JPA"><a href="#Spring-Data-JPA" class="headerlink" title="Spring Data JPA"></a>Spring Data JPA</h2><ul><li>JPAçš„æŸ¥è©¢èªè¨€æ˜¯ç‰©ä»¶å°å‘è€Œéé¢å‘è³‡æ–™åº«çš„ï¼Œå®ƒä»¥ç‰©ä»¶å°å‘çš„è‡ªç„¶èªæ³•æ§‹é€ æŸ¥è©¢èªå¥ï¼Œå¯ä»¥çœ‹æˆæ˜¯Hibernate HQLçš„ç­‰åƒ¹ç‰©ã€‚</li><li>JPAå®šç¾©äº†ç¨ç‰¹çš„JPQLï¼ˆJava Persistence Query Languageï¼‰ï¼ŒJPQLæ˜¯EJB QLçš„ä¸€ç¨®æ“´å±•ï¼Œå®ƒæ“ä½œå°è±¡æ˜¯å¯¦é«”ï¼Œè€Œä¸æ˜¯é—œè¯è³‡æ–™åº«çš„è¡¨ã€‚</li><li>å®ƒè€Œä¸”èƒ½å¤ æ”¯æŒæ‰¹é‡æ›´æ–°å’Œä¿®æ”¹ã€JOINã€GROUP BYã€HAVING ç­‰é€šå¸¸åªæœ‰ SQL æ‰èƒ½å¤ æä¾›çš„é«˜ç´šæŸ¥è©¢ç‰¹æ€§ï¼Œç”šè‡³é‚„èƒ½å¤ æ”¯æŒå­æŸ¥è©¢ã€‚</li></ul><h2 id="Spring-Bean-æƒæåŠŸèƒ½"><a href="#Spring-Bean-æƒæåŠŸèƒ½" class="headerlink" title="Spring Bean æƒæåŠŸèƒ½"></a>Spring Bean æƒæåŠŸèƒ½</h2><ul><li>ç‚ºäº†èƒ½ Spring èƒ½è‡ªå‹•æƒæ Bean çš„å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨<code>@ComponentScan</code>ï¼Œå¦‚æ­¤ Spring é è¨­æœƒè‡ªå‹•æƒæåŒä¸€å¥—ä»¶ä»¥åŠå…¶å­å¥—ä»¶ä¸‹ï¼Œæ˜¯å¦æœ‰ Bean å…ƒä»¶çš„å­˜åœ¨ã€‚</li></ul><h2 id="RestTemplateçš„å¦™ç”¨"><a href="#RestTemplateçš„å¦™ç”¨" class="headerlink" title="RestTemplateçš„å¦™ç”¨"></a>RestTemplateçš„å¦™ç”¨</h2><p>ä½ å¯ä»¥ä½¿ç”¨RestTemplateç™¼é€requestï¼Œä¸¦å¼·è¡ŒæŠŠå›å‚³çš„stringå…§å®¹è½‰æ›æˆæƒ³è¦çš„Object</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> RespInfo <span class="hljs-title function_">SendRequest</span><span class="hljs-params">(Fundmentals funds, String body)</span> &#123;<br>        <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>(); <span class="hljs-comment">// è«‹æ±‚ Header</span><br>        headers.setContentType(MediaType.APPLICATION_JSON);<br>        headers.setAccept(Arrays.asList(MediaType.TEXT_PLAIN, MediaType.APPLICATION_JSON));<br>        headers.set(<span class="hljs-string">&quot;Ocp-Apim-Subscription-Key&quot;</span>, funds.getApiKey());<br>        HttpEntity&lt;String&gt; httpEntity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(body, headers);<br><br>        <span class="hljs-type">MappingJackson2HttpMessageConverter</span> <span class="hljs-variable">mappingJackson2HttpMessageConverter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MappingJackson2HttpMessageConverter</span>();<br>        mappingJackson2HttpMessageConverter.setSupportedMediaTypes(Collections.singletonList(MediaType.TEXT_PLAIN)); <span class="hljs-comment">// OP Response Header ç‚º text/plain RestTemplate é è¨­ ç‚º application/json (å…è¨±æ¥å—text/plain)</span><br><br>        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplateBuilder</span>()<br>                .setConnectTimeout(<span class="hljs-number">22000</span>)<span class="hljs-comment">// é€£æ¥Timeoutå–®ä½æ¯«ç§’</span><br>                .setReadTimeout(<span class="hljs-number">25000</span>) <span class="hljs-comment">// è®€å–Timeout å–®ä½æ¯«ç§’</span><br>                .build();<br><br>        restTemplate.getMessageConverters().add(mappingJackson2HttpMessageConverter);<span class="hljs-comment">// èª¿æ•´å¯æ¥æ”¶çš„ MediaType ä¸åŠ æœƒçˆ†ç‚¸</span><br><br>        <span class="hljs-keyword">return</span> restTemplate<br>                .exchange(funds.getAccessUrl(), HttpMethod.POST, httpEntity, RespInfo.class)<br>                .getBody();<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="String-ç‰¹æ€§"><a href="#String-ç‰¹æ€§" class="headerlink" title="String ç‰¹æ€§"></a>String ç‰¹æ€§</h2><ul><li>String æ˜¯ä¸å¯è®Šçš„ï¼Œæ¯æ¬¡å°Stringçš„æ“ä½œéƒ½æœƒç”¢ç”Ÿæ–°çš„Stringç‰©ä»¶ï¼Œå»ºè­°ä½¿ç”¨StringBufferæˆ–StringBuilderã€‚</li><li>ç•¶ä¸­StringBufferæ˜¯åŸ·è¡Œç·’å®‰å…¨çš„ï¼ŒStringBuilderæ˜¯éåŸ·è¡Œç·’å®‰å…¨çš„ï¼Œåœ¨å–®ä¸€åŸ·è¡Œç·’ä¸‹ä½¿ç”¨ç‚ºå¥½ã€‚</li></ul><h2 id="Controller-èˆ‡-RestController"><a href="#Controller-èˆ‡-RestController" class="headerlink" title="@Controller èˆ‡ @RestController"></a>@Controller èˆ‡ @RestController</h2><ul><li>å·®åˆ¥å°±åœ¨æ–¼æ˜¯å¦åŒ…å«è¦–åœ–(View)</li></ul><h2 id="IOC-æ§åˆ¶åè½‰ã€‚"><a href="#IOC-æ§åˆ¶åè½‰ã€‚" class="headerlink" title="IOC æ§åˆ¶åè½‰ã€‚"></a>IOC æ§åˆ¶åè½‰ã€‚</h2><ul><li>æŒ‡çš„æ˜¯ä¸€ç¨®Springçš„é–‹ç™¼æ¨¡å¼ï¼Œä¸æ˜¯ç”±ä½ å»æŒæ§æµç¨‹ï¼Œè€Œæ˜¯ç”±æ¡†æ¶å»æŒæ§æµç¨‹ã€‚</li></ul><h2 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h2><p>Targetæ˜¯é‡å°Spring Beançš„å®šç¾©ï¼Œç”¨ä¾†å‘Šè¨´Javaä½ çš„Annotationæ˜¯æƒ³è¦æ¨™è¨˜åœ¨å“ªä¸€äº›å…ƒç´ é¡åˆ¥ä¸Šï¼ŒåŒ…æ‹¬ TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, ANNOTATION_TYPE ç­‰ç­‰â€¦ã€‚åœ¨ä¸€èˆ¬ä¾†èªªï¼Œæˆ‘å€‘æœ€å¸¸ç”¨çš„æ‡‰è©²ä¹Ÿæ˜¯æœ‰åˆ—å‡ºä¾†çš„é€™äº›ï¼Œåƒæ˜¯ TYPE å…¶å¯¦å°±åŒ…æ‹¬äº†æˆ‘å€‘å¸¸ç”¨çš„ Class, Interface, Enum äº†ã€‚</p><h2 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h2><p>Retentionæ˜¯é‡å°Spring Beançš„å®šç¾©ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç¨®ç­–ç•¥ï¼šSOURCE, CLASS (default), RUNTIMEã€‚</p><ul><li>SOURCE çš„æ„æ€å°±æ˜¯ä½ æ‰€ä½¿ç”¨çš„è¨»è§£åœ¨ compile å¾Œæœƒè¢«ä¸Ÿæ‰ï¼Œå¦‚æœè¦ä»¥æœ€ç°¡å–®çš„çœ‹æ³•å»ç†è§£é€™ä»¶äº‹ï¼Œå¯ä»¥çœ‹ IDE åœ¨å¹«ä½  compile å¾Œçš„ target è³‡æ–™å¤¾ï¼Œæœƒç™¼ç¾ <code>@Data</code> çš„æ¨™è¨˜ä¸è¦‹äº†ï¼Œåè€Œå¤šäº†å¾ˆå¤š Getter Setterã€‚</li><li>å¦å¤– CLASS èˆ‡ RUNTIME çš„å·®åˆ¥å°±åœ¨ VM æ˜¯å¦æœƒè¨˜å¾—ä½ æ‰€å¯«çš„ Annotationï¼Œåªæœ‰å¾Œè€…èƒ½å¤ é€éreflection å»å­˜å–èˆ‡ä½¿ç”¨å…ƒä»¶ã€‚æ‰€ä»¥ä¸€èˆ¬ä½ è‹¥æ˜¯éœ€è¦é€²è¡Œä¸€äº›æ¥­å‹™é‚è¼¯çš„è™•ç†æ™‚ï¼Œå‰‡éƒ½æœƒå®£å‘Š<code>ElementType.RUNTIME</code></li></ul><h2 id="interface"><a href="#interface" class="headerlink" title="@interface"></a>@interface</h2><p>å¦‚æœèªª interface æ˜¯ä¸€å€‹çµ¦ implemented class çš„ä»‹é¢ï¼Œé‚£ @interface å°±æ˜¯ä¸€å€‹çµ¦ Annotation äº’å‹•çš„ä»‹é¢ï¼Œå› æ­¤æ‰€æœ‰çš„ Annotation åœ¨å®£å‘Šæ™‚éƒ½éœ€è¦ä½¿ç”¨ @interfaceã€‚ä¸¦ä¸”åœ¨ç¾åœ¨æœƒæœ‰è¶Šä¾†è¶Šå¤šäººä¸æƒ³å¯« Commentï¼Œåè€Œé€éé€™ç¨®æ–¹å¼å¯«è¨»è§£ã€‚</p><h2 id="RepositoryRestResource"><a href="#RepositoryRestResource" class="headerlink" title="@RepositoryRestResource"></a>@RepositoryRestResource</h2><p>æ˜¯ Spring Data REST æä¾›çš„è¨»è§£ï¼Œç”¨æ–¼è‡ªå‹•å°‡ Spring Data Repositories æ›éœ²ç‚º RESTful Web APIã€‚ä¹Ÿå°±æ˜¯èªªæœƒè‡ªå‹•ç”ŸæˆEntityçš„Rest API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RepositoryRestResource(path = &quot;books&quot;, collectionResourceRel = &quot;bookList&quot;, itemResourceRel = &quot;bookItem&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Book, Long&gt; &#123;<br>    <span class="hljs-comment">// å¯ä»¥è‡ªå®šç¾©æŸ¥è©¢æ–¹æ³•</span><br>    List&lt;Book&gt; <span class="hljs-title function_">findByAuthor</span><span class="hljs-params">(String author)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°‡æœƒè‡ªå‹•ç”Ÿæˆ</p><ul><li>GET &#x2F;booksï¼šç²å–æ‰€æœ‰æ›¸ç±çš„é›†åˆã€‚ </li><li>GET &#x2F;books&#x2F;{id}ï¼šæ ¹æ“š ID ç²å–å–®å€‹æ›¸ç±ã€‚ </li><li>POST &#x2F;booksï¼šæ–°å¢ä¸€æœ¬æ›¸ã€‚ </li><li>PUT &#x2F;books&#x2F;{id}ï¼šæ›´æ–°ä¸€æœ¬æ›¸ï¼ˆå®Œæ•´æ›´æ–°ï¼‰ã€‚ </li><li>PATCH &#x2F;books&#x2F;{id}ï¼šéƒ¨åˆ†æ›´æ–°ä¸€æœ¬æ›¸ã€‚ </li><li>DELETE &#x2F;books&#x2F;{id}ï¼šåˆªé™¤ä¸€æœ¬æ›¸ã€‚</li></ul><h2 id="ServerSocket"><a href="#ServerSocket" class="headerlink" title="ServerSocket"></a>ServerSocket</h2><p>ServerSocketæ˜¯Javaæœ€åº•å±¤å»ºç«‹ç¶²è·¯ä¼ºæœå™¨çš„åŸºæœ¬æ¦‚å¿µï¼ŒServerç«¯é€éSocketå»ºç«‹ç›£è½ï¼Œä¸¦æŒçºŒç­‰å¾…Clientçš„Requestï¼Œä½¿ç”¨Accept()å–å¾—Socketç‰©ä»¶ï¼Œå°±å¯ä»¥èˆ‡Clientç«¯é€²è¡Œå°è©±èˆ‡å–å¾—è³‡è¨Šï¼Œæ¥è‘—å°±æ˜¯IOçš„è®€å¯«ï¼Œæœ€å¾Œé‡‹æ”¾Socketè³‡æºã€‚</p><p><img src="/img/ServerSocket.png" alt="ServerSocketåœ–ç¤º"></p><p>æƒ³è‡ªå·±å‹•æ‰‹åšå¯ä»¥åƒè€ƒä»¥ä¸‹ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// å®šç¾©åŸ è™Ÿ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">serverPort</span> <span class="hljs-operator">=</span> <span class="hljs-number">5001</span>;<br><br>        <span class="hljs-type">ServerSocket</span> <span class="hljs-variable">serverSocket</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">receiveMsgSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-type">byte</span>[] receiveBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">32</span>];<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// å»ºç«‹ ServerSocket</span><br>            serverSocket = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerSocket</span>(serverPort);<br><br>            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>                System.out.println(<span class="hljs-string">&quot;æœå‹™å·²ç¶“å•Ÿå‹•ï¼Œport: &quot;</span> + serverPort);<br><br>                <span class="hljs-type">Socket</span> <span class="hljs-variable">clientSocket</span> <span class="hljs-operator">=</span> serverSocket.accept();<br>                <span class="hljs-type">SocketAddress</span> <span class="hljs-variable">clientAddress</span> <span class="hljs-operator">=</span> clientSocket.getRemoteSocketAddress();<br>                System.out.println(<span class="hljs-string">&quot;æ”¶åˆ°å®¢æˆ¶ç«¯é€£ç·š, ip: &quot;</span> + clientAddress);<br>                <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> clientSocket.getInputStream();<br>                <span class="hljs-type">OutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> clientSocket.getOutputStream();<br><br>                <span class="hljs-keyword">while</span>((receiveMsgSize = in.read(receiveBuffer)) != -<span class="hljs-number">1</span>) &#123;<br>                    out.write(<span class="hljs-string">&quot;ä¼ºæœå™¨å›æ‡‰: &quot;</span>.getBytes());<br>                    out.write(receiveBuffer, <span class="hljs-number">0</span>, receiveMsgSize);<br>                &#125;<br>                <span class="hljs-comment">// é‡‹æ”¾ Socket è³‡æº</span><br>                clientSocket.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="SpringBoot-Validation"><a href="#SpringBoot-Validation" class="headerlink" title="SpringBoot Validation"></a>SpringBoot Validation</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dependency&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>åœ¨ObjectMapperé€²è¡Œåºåˆ—åŒ–è½‰æ›æ™‚ï¼Œæœ‰äº›æ–¹ä¾¿å·¥å…·</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dependency&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@NotEmpty(message = &quot;Product name is undefined.&quot;)</span><br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-comment">// åœ¨ Java ç‰©ä»¶çš„æ¬„ä½åŠ ä¸Š @JsonProperty æ¨™è¨˜ï¼Œå¯ä»¥èª¿æ•´åºåˆ—åŒ–ç‚º JSON çš„æ¬„ä½åç¨±ã€‚</span><br><span class="hljs-meta">@JsonProperty(&quot;telephone&quot;)</span><br><span class="hljs-keyword">private</span> String tel;<br><br><span class="hljs-comment">// åœ¨ Java ç‰©ä»¶çš„æ¬„ä½åŠ ä¸Š @JsonIgnore æ¨™è¨˜ï¼Œå¯ä»¥åœ¨åºåˆ—åŒ–ç‚º JSON æ™‚å¿½ç•¥è©²æ¬„ä½ï¼Œé€£ null å€¼éƒ½ä¸æœƒå‡ºç¾</span><br><span class="hljs-meta">@JsonIgnore</span><br><span class="hljs-keyword">private</span> String isbn;<br><br><span class="hljs-comment">// åœ¨ Java ç‰©ä»¶çš„ç‰©ä»¶æ¬„ä½åŠ ä¸Š @JsonUnwrapped æ¨™è¨˜ï¼Œå¯ä»¥åœ¨åºåˆ—åŒ–ç‚º JSON æ™‚ï¼Œå°‡è©²æ¬„ä½å±•é–‹ã€‚</span><br><span class="hljs-meta">@JsonUnwrapped</span><br><span class="hljs-keyword">private</span> Publisher publisher;<br><br><span class="hljs-meta">@PostConstruct</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br> System.out.println(<span class="hljs-string">&quot;é–‹å§‹è¼‰å…¥&quot;</span>);<br>&#125;<br><br><span class="hljs-meta">@PreDestroy</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br> System.out.println(<span class="hljs-string">&quot;å®Œæˆï¼Œå°‡éŠ·æ¯€&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Spring-Filter"><a href="#Spring-Filter" class="headerlink" title="Spring Filter"></a>Spring Filter</h2><p>æœ‰æ™‚æˆ‘å€‘çš„SpringBootæ‡‰ç”¨ç¨‹å¼æœƒæƒ³è¦å°APIé€²å…¥å£ä¹‹å‰åšä¸€äº›å‰è™•ç†ï¼Œé€™æ™‚å€™ä¸åƒ…å¯ä»¥è€ƒæ…®Spring AOPï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Filterï¼Œä»¥ä¸‹æ˜¯å¯¦ç¾çš„ç¨‹å¼ç¢¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogProcessTimeFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> &#123;<br>    <span class="hljs-comment">// ç´€éŒ„APIè€—è²»æ™‚é–“</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    chain.doFilter(request, response);<br>    <span class="hljs-type">long</span> <span class="hljs-variable">processTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;<br><br>    System.out.println(processTime + <span class="hljs-string">&quot; ms&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¦ä½œå®Œ Filter çš„ç¨‹å¼å¾Œï¼Œéœ€è¦å‘ Spring è¨»å†Šï¼Œæ‰æœƒå»ºç«‹å®ƒçš„å…ƒä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FilterConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title function_">logProcessTimeFilter</span><span class="hljs-params">()</span> &#123;<br>        FilterRegistrationBean&lt;LogProcessTimeFilter&gt; bean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterRegistrationBean</span>&lt;&gt;();<br>        bean.setFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LogProcessTimeFilter</span>());<br>        bean.addUrlPatterns(<span class="hljs-string">&quot;/*&quot;</span>);<br>        bean.setName(<span class="hljs-string">&quot;logProcessTimeFilter&quot;</span>);<br><br>    <span class="hljs-comment">//bean.setOrder(1); //å¤šå€‹å­˜åœ¨å¯ä»¥è¨­ç½®é †åº </span><br>        <span class="hljs-keyword">return</span> bean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>FilterRegistrationBean æ˜¯ Spring æä¾›çš„å·¥å…·ï¼Œç”¨æ–¼è¨»å†Š Filter ä¸¦é…ç½®å…¶å±¬æ€§ï¼š</p><ul><li>setFilter()ï¼šè¨­ç½®å…·é«”çš„ Filterã€‚ </li><li>addUrlPatterns()ï¼šæŒ‡å®šå“ªäº›è·¯å¾‘æœƒè¢«è©² Filter æ””æˆªã€‚ </li><li>setOrder()ï¼šè¨­ç½®è©² Filter çš„åŸ·è¡Œé †åºï¼ˆå¯é¸ï¼‰å¤šfilteræ™‚ç”¨ä¾†æ’åºè™•ç†ã€‚</li></ul><h2 id="Spring-Exceptionè™•ç†"><a href="#Spring-Exceptionè™•ç†" class="headerlink" title="Spring Exceptionè™•ç†"></a>Spring Exceptionè™•ç†</h2><p>ç•¶ä½ çš„APIå ±éŒ¯å›å¾©ä½ çš„è‡ªå®šç¾©Exceptionæ™‚ï¼Œå¯ä»¥ç‚ºå®ƒåŠ å…¥æŒ‡å®šçš„éŒ¯èª¤ä»£ç¢¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ResponseStatus(HttpStatus.NOT_FOUND)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemNotFoundException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ItemNotFoundException</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-built_in">super</span>(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç‚ºä½ çš„è‡ªå®šç¾©Exceptionæ•æ‰ç•°å¸¸ä¸¦è™•ç†å›å‚³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ExceptionHandler(OperateAbsentItemsException.class)</span><br><span class="hljs-keyword">public</span> ResponseEntity&lt;ExceptionResponse&gt; <span class="hljs-title function_">handleOperateAbsentItem</span><span class="hljs-params">(OperateAbsentItemsException e)</span> &#123;<br>    Map&lt;String, Object&gt; info = Map.of(<span class="hljs-string">&quot;itemIds&quot;</span>, e.getItemIds());<br>    <span class="hljs-type">var</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionResponse</span>();<br>    res.setType(BusinessExceptionType.OPERATE_ABSENT_ITEM);<br>    res.setInfo(info);<br><br>    <span class="hljs-keyword">return</span> ResponseEntity.unprocessableEntity().body(res); <span class="hljs-comment">// HTTP 422</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦å¤–é‚„å¯ä»¥ä½¿ç”¨Globalçš„Exceptionè™•ç†Annotation</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestControllerAdvice(assignableTypes = &#123;ProductController.class, UserController.class&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GeneralAdvice</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">CustomDateEditor</span> <span class="hljs-variable">customDateEditor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDateEditor</span>(CommonUtil.sdf, <span class="hljs-literal">true</span>);<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ToSearchTextEditor</span> <span class="hljs-variable">toSearchTextEditor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToSearchTextEditor</span>();<br><br>    <span class="hljs-comment">// ç•°å¸¸è™•ç†æ–¹æ³•</span><br>    <span class="hljs-meta">@ExceptionHandler(OperateAbsentItemsException.class)</span><br>    <span class="hljs-keyword">public</span> ResponseEntity&lt;ExceptionResponse&gt; <span class="hljs-title function_">handleOperateAbsentItem</span><span class="hljs-params">(OperateAbsentItemsException e)</span> &#123;<br>        Map&lt;String, Object&gt; info = Map.of(<span class="hljs-string">&quot;itemIds&quot;</span>, e.getItemIds());<br>        <span class="hljs-type">var</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionResponse</span>();<br>        res.setType(BusinessExceptionType.OPERATE_ABSENT_ITEM);<br>        res.setInfo(info);<br><br>        <span class="hljs-keyword">return</span> ResponseEntity.unprocessableEntity().body(res);<br>    &#125;<br><br>    <span class="hljs-comment">// ç¶å®šè‡ªå®šç¾©å±¬æ€§ç·¨è¼¯å™¨</span><br>    <span class="hljs-meta">@InitBinder(&#123;&quot;createdFrom&quot;, &quot;createdTo&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bindDate</span><span class="hljs-params">(WebDataBinder binder)</span> &#123;<br>        binder.registerCustomEditor(Date.class, customDateEditor);<br>    &#125;<br><br>    <span class="hljs-meta">@InitBinder(&#123;&quot;name&quot;, &quot;email&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bindSearchText</span><span class="hljs-params">(WebDataBinder binder)</span> &#123;<br>        binder.registerCustomEditor(String.class, toSearchTextEditor);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToSearchTextEditor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PropertyEditorSupport</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAsText</span><span class="hljs-params">(String text)</span> <span class="hljs-keyword">throws</span> IllegalArgumentException &#123;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> CommonUtil.toSearchText(text);<br>        <span class="hljs-built_in">super</span>.setValue(t);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">toSearchText</span><span class="hljs-params">(String s)</span> &#123;<br>    <span class="hljs-keyword">return</span> Optional.ofNullable(s)<br>            .map(String::trim)<br>            .map(String::toLowerCase)<br>            .orElse(<span class="hljs-string">&quot;&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="SpringMVC-ModelAttribute"><a href="#SpringMVC-ModelAttribute" class="headerlink" title="SpringMVC @ModelAttribute"></a>SpringMVC @ModelAttribute</h2><ol><li>ç”¨ä¾†Controllerä¸Šï¼ŒåŸ·è¡Œhome()å‰å…ˆåŸ·è¡Œtop()æŠŠè³‡æ–™æ”¾åˆ°modelä¸­<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ModelAttribute(&quot;top&quot;)</span><br><span class="hljs-keyword">public</span> Map <span class="hljs-title function_">top</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> pageTop.getDataMap();<br>&#125;<br><span class="hljs-meta">@ReqeustMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">(<span class="hljs-meta">@Reqeust(require=true)</span> Map&lt;String,Object&gt; params,Model model)</span> &#123;<br>    model.addAttriute(<span class="hljs-string">&quot;model&quot;</span>,dataAssembly.homePageData(params));<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;home&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li>ç”¨ä¾†æ–¹æ³•çš„åƒæ•¸ä¸­ï¼Œé€™ç¨®ç”¨æ³•æœƒå°‡ Model ä¸­ key ç‚º â€œtopâ€ çš„å€¼æ³¨å…¥åˆ°é€™å€‹åƒæ•¸ä¸­<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ModelAttribute(&quot;top&quot;)</span><br><span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">top</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// å‡è¨­é€™è£¡æ˜¯å¾æŸå€‹æœå‹™ä¸­ç²å–è³‡æ–™ä¸¦æ”¾åˆ° model ä¸­</span><br>    <span class="hljs-keyword">return</span> pageTop.getDataMap();<br>&#125;<br><span class="hljs-meta">@ReqeustMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">(<span class="hljs-meta">@ModelAttribute(&quot;top&quot;)</span> Map top,Model model)</span> &#123;<br>    <span class="hljs-type">JsonArray</span> <span class="hljs-variable">js</span> <span class="hljs-operator">=</span> JSONArray.fromObject(map);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;test&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="Java-Stream-vs-ParallelStream"><a href="#Java-Stream-vs-ParallelStream" class="headerlink" title="Java Stream vs ParallelStream"></a>Java Stream vs ParallelStream</h2><p>Java StreamåŸ·è¡Œæ˜¯ä¸²è¡Œçš„ï¼Œä½†ParallelStreamæ˜¯ä¸¦è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯å¤šåŸ·è¡Œç·’ã€‚<br>Streamæ˜¯å°é›†åˆè³‡æ–™é¡å‹æ˜¯é †åºåŸ·è¡Œçš„ï¼Œä½†ParallelStreamå‰‡æ˜¯éš¨æ©ŸåŸ·è¡Œçš„<br>æ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Integer&gt; integerList = Lists.newArrayList();<br>List&lt;String&gt; strList = Lists.newArrayList();<br><br><span class="hljs-type">int</span> <span class="hljs-variable">practicalSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000000</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; practicalSize; i++) &#123;<br>    strList.add(String.valueOf(i));<br>&#125;<br><br>strList.parallelStream().forEach(each -&gt; &#123;<br>    integerList.add(Integer.parseInt(each));<br>&#125;);<br><br>System.out.println(strList.size()); <span class="hljs-comment">// 1000000</span><br>System.out.println(integerList.size()); <span class="hljs-comment">// å› ç‚ºå¹³è¡ŒåŒ–çš„ç·£æ•…ï¼Œå¹¾ä¹ä¸å¯èƒ½æ˜¯1000000</span><br></code></pre></td></tr></table></figure><p>æ‡‰è©²è¦æŠŠè³‡æ–™å‹æ…‹æ”¹ç”¨SychronizeListæˆ–æ˜¯Vectorä¾†è™•ç†å¤šåŸ·è¡Œç·’å•é¡Œã€‚<br>ä½¿ç”¨ParallelStreamæ‡‰è©²è¦è€ƒæ…®</p><ol><li>æ˜¯å¦çœŸæ­£éœ€è¦ä¸¦è¡Œï¼Ÿ</li><li>Taskæ˜¯å¦å½¼æ­¤ç¨ç«‹ä¸å—å½±éŸ¿ï¼Ÿ</li><li>æ˜¯å¦æœ‰é †åºåŸ·è¡Œéœ€æ±‚ï¼Ÿ</li></ol><h2 id="å‰¯ä½œç”¨-Side-Effect-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#å‰¯ä½œç”¨-Side-Effect-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="å‰¯ä½œç”¨(Side Effect) æ˜¯ä»€éº¼ï¼Ÿ"></a>å‰¯ä½œç”¨(Side Effect) æ˜¯ä»€éº¼ï¼Ÿ</h2><p>åœ¨æ“ä½œç‰©ä»¶ç•¶ä¸­ï¼Œç„¡æ„é–“æ”¹è®Šäº†ç‰©ä»¶çš„å€¼æˆ–æ˜¯å‹åˆ¥ã€‚</p><h2 id="è¨˜æ†¶é«”æ´©æ¼-Memory-Leak-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#è¨˜æ†¶é«”æ´©æ¼-Memory-Leak-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="è¨˜æ†¶é«”æ´©æ¼(Memory Leak) æ˜¯ä»€éº¼ï¼Ÿ"></a>è¨˜æ†¶é«”æ´©æ¼(Memory Leak) æ˜¯ä»€éº¼ï¼Ÿ</h2><ul><li>ç•¶ä¸€å€‹ç¨‹å¼è¢«ç·¨è­¯æˆbytecodeï¼Œåœ¨æ¡†æ¶ä¸‹é‹è¡Œçš„è©±ï¼Œæ¡†æ¶å¯ä»¥å”åŠ©è‡ªå‹•è™•ç†momery allocation, security, exception, GCç­‰å•é¡Œã€‚</li><li>è‹¥æ²’æœ‰æ¡†æ¶è™•ç†ï¼Œå°±å¿…é ˆè¦æ‰‹å‹•è™•ç†é€™äº›å•é¡Œï¼Œæ²’æœ‰æŠŠå–ç”¨çš„è¨˜æ†¶é«”å…¨éƒ¨é‡‹æ”¾å°±æœƒå°è‡´Memory leakã€‚</li><li>ä¸€èˆ¬ç¨‹å¼ä¾†èªªï¼Œåªè¦processçµæŸå¾Œè¨˜æ†¶é«”å°±æœƒè¢«è™›æ“¬æ©Ÿ(JVM)å…¨éƒ¨é‡‹æ”¾ï¼Œä¸æœƒæœ‰é€™å€‹å•é¡Œã€‚</li><li>C&#x2F;C++ å› ç‚ºæ²’æœ‰GCï¼Œæ‰€ä»¥ç¶“å¸¸å‡ºç¾ã€‚å¦å¤–åƒæ˜¯EventListener() åªç§»é™¤äº†è£¡é¢çš„å…ƒç´ å»æ²’æœ‰ç§»é™¤Listener()ä¹Ÿæœƒé€ æˆã€‚å¦å¤–é‚„æœ‰å¾ªç’°å¼•ç”¨èˆ‡å­˜å–å…¨åŸŸè®Šæ•¸ã€‚</li></ul><h2 id="å¾ªç’°å¼•ç”¨-Circular-Import"><a href="#å¾ªç’°å¼•ç”¨-Circular-Import" class="headerlink" title="å¾ªç’°å¼•ç”¨ (Circular Import)"></a>å¾ªç’°å¼•ç”¨ (Circular Import)</h2><p>ç‰©ä»¶Aåƒç…§åˆ°Bï¼ŒBåˆåƒç…§åˆ°Aï¼Œå°±æœƒé€ æˆå¾ªç’°å¼•ç”¨ï¼Œæœƒé€ æˆè¨˜æ†¶é«”æ´©æ¼ï¼ŒåŒæ™‚GCä¹Ÿæœƒç„¡æ³•æ­£å¸¸é‹è¡Œ(Javaé™¤å¤–)ã€‚</p><p>ä¸æ™‚æ›´æ–°â€¦</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>note</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç°¡å–®èªªæ˜SOLIDæ³•å‰‡</title>
    <link href="/2025/01/04/%E7%B0%A1%E5%96%AE%E8%AA%AA%E6%98%8ESOLID%E6%B3%95%E5%89%87/"/>
    <url>/2025/01/04/%E7%B0%A1%E5%96%AE%E8%AA%AA%E6%98%8ESOLID%E6%B3%95%E5%89%87/</url>
    
    <content type="html"><![CDATA[<p>ä½œç‚ºä¸€åå¾Œç«¯å·¥ç¨‹å¸«ï¼Œæˆ‘å€‘å¸¸è½éä¸å°‘é–‹ç™¼ä¸Šçš„è¦ç¯„ï¼Œæ¯”æ–¹èªªå¸¸è¦‹çš„</p><ul><li>DRYåŸå‰‡â”€â”€æŒ‡çš„æ˜¯Donâ€™t repeat yourself.ï¼Œä¸è¦é‡è¤‡å¯«åŒæ¨£çš„å…§å®¹ã€‚</li><li>KISSåŸå‰‡â”€â”€æŒ‡é–‹ç™¼çš„ç”¢å“ç¨‹å¼ç¢¼æ‡‰è©²è¦è¶Šç°¡å–®è¶Šå¥½ï¼Œç°¡å–®çš„å¥½è™•ä¸åƒ…å¯ä»¥é™ä½éŒ¯èª¤çš„ç™¼ç”Ÿç‡ï¼Œä¹Ÿå¸¶ä¾†è¼ƒå¥½ç¶­è­·ã€å¥½ç†è§£ã€å¥½æ¸¬è©¦ç­‰ç­‰å„ªé»ã€‚</li></ul><p>ä½†æˆ‘å€‘é€™æ¬¡è¦æåˆ°çš„ä¸æ˜¯ä»¥ä¸Šé€™å…©å€‹ï¼Œè€Œæ˜¯SOLIDã€‚<br>SOLIDæ˜¯ä¸€åå¾Œç«¯å·¥ç¨‹å¸«åœ¨æˆé•·çš„éç¨‹ä¸­ä¸€å®šæœƒè½åˆ°çš„å–®å­—ï¼Œç‰¹åˆ¥æŒ‡ç‰©ä»¶å°å‘è¨­è¨ˆçš„è¨­è¨ˆåŸå‰‡ï¼ŒSOLIDçš„ç›®çš„æ˜¯ä½¿è»Ÿé«”è¨­è¨ˆæ›´ç‚ºä¾¿æ–¼ç†è§£ã€æ›´ä¾¿æ–¼ä¿®æ”¹ã€è€Œä¸”æ›´å¥½ç¶­è­·çš„äº”é …è¨­è¨ˆåŸå‰‡ã€‚æˆ‘å€‘å°±ä¸€èµ·ä¾†çœ‹çœ‹ä»–å€‘å§ã€‚</p><h3 id="S-å–®ä¸€è·è²¬åŸå‰‡-Single-Responsibility-Principle"><a href="#S-å–®ä¸€è·è²¬åŸå‰‡-Single-Responsibility-Principle" class="headerlink" title="S å–®ä¸€è·è²¬åŸå‰‡(Single Responsibility Principle)"></a>S å–®ä¸€è·è²¬åŸå‰‡(Single Responsibility Principle)</h3><hr><p>SRPä¸»å¼µä¸€å€‹é¡åˆ¥æ‡‰è©²åªæœ‰ä¸€å€‹è·è²¬ï¼Œä¹Ÿå°±æ˜¯èªªä¸€å€‹é¡åˆ¥æ‡‰è©²åªæœ‰ä¸€å€‹æ”¹è®Šçš„åŸå› ã€‚ä¹Ÿæœ‰äººé€™æ¨£è§£é‡‹ï¼šä¸€å€‹é¡åˆ¥æ‡‰åªå°å”¯ä¸€çš„ä¸€å€‹è§’è‰²è² è²¬ã€‚<br>é€™è½èµ·ä¾†å¾ˆé›£ä¸è®“äººä¸èŒ«ç„¶ï¼Œæˆ‘çš„ç†è§£æ˜¯é€™æ¨£çš„ï¼ŒSRPæ˜¯æŒ‡ä¸€å€‹é¡åˆ¥æ‡‰è©²åªåšä¸€ä»¶äº‹ï¼Œèˆ‰ä¾‹ä¾†èªªï¼š</p><p>å‡è¨­æœ‰ä¸€å€‹ç‰©ä»¶åŒæ™‚è² è²¬äº†å°‡ç‰©ä»¶å›å‚³çµ¦å‰ç«¯ï¼Œä»¥åŠç‰©ä»¶å­˜å…¥è³‡æ–™åº«é€™å…©ä»¶äº‹ã€‚ç•¶ä»Šå¤©è¦æ ¼éœ€è¦èª¿æ•´æ™‚ï¼Œå°±å¯èƒ½é€ æˆï¼Œæ–°å¢æŸæ¬„ä½å¾Œå‰ç«¯å£æ‰å¾Œç«¯ä¹Ÿå­˜ä¸é€²å»çš„å•é¡Œï¼Œå› ç‚ºåŒä¸€å€‹æ¨¡çµ„è² è²¬äº†å…©ä»¶äº‹æƒ… (å›å‚³çµ¦å‰ç«¯çš„ç‰©ä»¶ + å­˜å…¥è³‡æ–™åº«çš„ç‰©ä»¶)ã€‚<br>æ¯”è¼ƒå¥½çš„åšæ³•æ˜¯åˆ‡å‰²é€™å…©å€‹åŠŸèƒ½ï¼Œä½¿å…¶æˆç‚ºä¸€å€‹ç¨ç«‹çš„é¡åˆ¥ã€‚</p><p>å¯¦å‹™ä¸Šä¾†èªªï¼Œé€™ä¸¦ä¸å¥½å¯¦ç¾ï¼Œåœ¨è¨­è¨ˆæ™‚ï¼Œé›–ç„¶æˆ‘å€‘å¸Œæœ›ä¸€å€‹é¡åˆ¥ç›¸ç•¶å–®ç´”ï¼Œä½†å¾€å¾€åˆæœƒå¸Œæœ›é€™å€‹åŠŸèƒ½æ˜¯å¯ä»¥å¥½é‡è¤‡åˆ©ç”¨çš„ï¼Œæˆ‘å€‘æœƒå¾ˆæƒ³è¦æŠŠä¸€äº›é‡è¤‡çš„ã€ä¸å±¬æ–¼è©²é¡åˆ¥çš„è™•ç†åŠ å…¥è©²é¡åˆ¥ä¸­ï¼Œé€™æœ€çµ‚å°è‡´äº†å–®ä¸€è·è²¬åŸå‰‡é­ç ´å£ã€‚<br>æ‰€ä»¥SRPæœªå¿…æ˜¯ä¸€å®šå¾—éµå®ˆçš„åŸå‰‡ï¼Œåå€’åƒæ˜¯ä¸€ç¨®ç†æƒ³å½¢å¼ï¼Œåªèƒ½é€éç¶“é©—å»å­¸ç¿’å¦‚ä½•åˆ‡å‡ºä¸€å€‹ä¹¾æ·¨çš„ã€è·è²¬åˆ†æ˜çš„é¡åˆ¥ã€‚</p><h3 id="O-é–‹æ”¾å°é–‰åŸå‰‡-Open-Closed-Principle"><a href="#O-é–‹æ”¾å°é–‰åŸå‰‡-Open-Closed-Principle" class="headerlink" title="O é–‹æ”¾å°é–‰åŸå‰‡ (Open-Closed Principle)"></a>O é–‹æ”¾å°é–‰åŸå‰‡ (Open-Closed Principle)</h3><hr><p>OCPä¸»å¼µä¸€å€‹è»Ÿé«”åœ¨é¢å°æ“´å±•æ™‚æ˜¯é–‹æ”¾çš„ï¼Œä¸”æ“´å……æ™‚ä¸æ‡‰ä¿®æ”¹åˆ°åŸæœ‰çš„ç¨‹å¼ã€‚å®ƒå¿…é ˆæ˜¯å¥½ä¿®æ”¹çš„ï¼Œå°±ç®—è¦æ”¹ï¼Œä¹Ÿä¸è©²å½±éŸ¿ç¾æœ‰ç¨‹å¼åŠŸèƒ½ã€‚ èˆ‰ä¾‹ä¾†èªªï¼š</p><p>æˆ‘å€‘æœ‰ä¸€å€‹è»Šè¼›ä»‹é¢(Vehicle)ï¼Œä¸¦æœ‰ä¸€å€‹make()è£½é€ çš„æ–¹æ³•ï¼Œæ‰€æœ‰çš„æ±½è»Š(Toyotaã€Honda)éƒ½æ˜¯é€éCarFactoryçš„assemble()æ–¹æ³•å»çµ„è£ä¸€å°æ±½è»Šã€‚ä»Šå¤©ï¼Œå‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹æ–°çš„é¡åˆ¥Mazdaï¼Œä»–åŠ å…¥æ™‚ï¼Œ ä¸æ‡‰è©²è¦æ›´æ”¹CarFactoryçš„å…§å®¹ã€‚<br>æ‰€æœ‰çš„èª¿æ•´ã€å•†æ¥­é‚è¼¯è¦é›†ä¸­åœ¨Mazdaï¼Œ<del>ä¸¦ä¸”æ²’æœ‰è³‡æ ¼åƒåŠ é€™å€‹æœƒè­°</del>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Vehicle</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Toyota</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Vehicle</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// å¯¦ä½œçœç•¥</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Honda</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Vehicle</span>&#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// å¯¦ä½œçœç•¥</span><br>   &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CarFactory</span> &#123;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">assemble</span><span class="hljs-params">(Vehicle vehicle)</span> &#123;<br>        vehicle.make();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šå¸¸å®šç¾©ä»‹é¢ã€æˆ–æ˜¯ä¸€å€‹ç¹¼æ‰¿é—œä¿‚ï¼Œå¯ä»¥å¯¦ç¾OCPï¼Œå®šç¾©ä¸­æåˆ°çš„æ“´å±•é–‹æ”¾â”€â”€å°±æ˜¯æŒ‡åŠ å…¥æ–°çš„é¡åˆ¥æ™‚ä¸æ‡‰å½±éŸ¿åˆ°åŸºåº•çš„åŠŸèƒ½ã€‚å¦‚æœçœŸçš„è¦åŠ å…¥çš„è©±ï¼Œå®šç¾©ä¸€å€‹æ–°çš„é¡åˆ¥ï¼Œé€éç¹¼æ‰¿åŸå…ˆé¡åˆ¥ä¾†å®Œæˆå®ƒã€‚<br>å°ä¿®æ”¹å°é–‰çš„æ„æ€å‰›å¥½åéä¾†ï¼Œå‡è¨­ä½ æƒ³è¦èª¿æ•´CarFactoryã€å°±è®Šå¾—ç›¸ç•¶å›°é›£ï¼Œå› ç‚ºä¸€æ—¦ä¿®æ”¹CarFactoryï¼Œæ‰€æœ‰çš„æ±½è»Šé¡åˆ¥éƒ½æœƒå—åˆ°å½±éŸ¿ï¼Œå› æ­¤å°ä¿®æ”¹æ˜¯å°é–‰çš„ã€‚</p><p>è½èµ·ä¾†æ˜¯ä¸æ˜¯ç†æ‰€ç•¶ç„¶ï¼Ÿä½†å¯¦éš›ä¸Šä¹Ÿä¸å¤ªå®¹æ˜“çœ‹åˆ°é€™æ¨£çš„ç¨‹å¼ç¢¼ï¼Œé€šå¸¸çš„æƒ…æ³æ˜¯ï¼Œå¤§å®¶å¸¸å¸¸è¦ºå¾—åœ¨åŸºåº•é¡åˆ¥ä¸­åŠ å…¥ä¸€å€‹ifåšç‰¹ä¾‹è™•ç†å°±å¥½ï¼Œé€™å°è‡´äº†ç¾å¯¦å¸¸å¸¸æ˜¯ä¸€å †if if ifåœ¨å…±ç”¨çš„é¡åˆ¥ä¸­ã€‚è¦ä¹¾æ·¨åœ°æ‹†é–‹ï¼Œæ—¢ä¸é•åKISSåˆè¦èƒ½ç¬¦åˆOCPå¾€å¾€ä¸¦ä¸ç°¡å–®ã€‚<br>æœ€å¥½çš„æƒ…æ³æ˜¯ï¼Œç•¶ä¸‹åœ¨è¨­è¨ˆåˆæœŸï¼Œå°±è€ƒæ…®åˆ°æŠ½è±¡åŒ–é¡åˆ¥çš„å¯èƒ½æ€§ï¼Œä½†é€™éƒ¨åˆ†ä¹Ÿéœ€è¦ç¶“é©—å»åˆ¤æ–·ã€‚</p><h3 id="L-é‡Œæ°æ›¿æ›åŸå‰‡-Liskov-Substitution-Principle"><a href="#L-é‡Œæ°æ›¿æ›åŸå‰‡-Liskov-Substitution-Principle" class="headerlink" title="L é‡Œæ°æ›¿æ›åŸå‰‡ (Liskov Substitution Principle)"></a>L é‡Œæ°æ›¿æ›åŸå‰‡ (Liskov Substitution Principle)</h3><hr><p>LSPä¸»å¼µï¼Œå­é¡åˆ¥å¿…é ˆèƒ½å¤ æ›¿æ›çˆ¶é¡åˆ¥ï¼Œä¸¦ä¸”è¡Œç‚ºä¸å—å½±éŸ¿ã€‚åŸå‰‡æœ‰ä¸‰ï¼š</p><ol><li>å­é¡åˆ¥çš„å…ˆæ±ºæ¢ä»¶ (Preconditions) ä¸æ‡‰è¢«åŠ å¼·ã€‚â”€â”€â”€â”€å­é¡åˆ¥æ‡‰è©²è¦å¯ä»¥å®Œå…¨å–ä»£çˆ¶é¡åˆ¥ã€ç°¡å–®ä¾†èªªå°±æ˜¯ä¸å¯ä»¥é™åˆ¶çˆ¶é¡çš„å®šç¾©ï¼Œå¦‚æœçˆ¶é¡åˆ¥çš„æ–¹æ³•æ˜¯æ¥æ”¶Vehicleã€å­é¡åˆ¥ä¸å¯ä»¥è¦†å¯«ä¸¦é™åˆ¶åªèƒ½æ”¾å…¥Mazdaã€‚</li><li>å­é¡åˆ¥çš„å¾Œç½®æ¢ä»¶ (Postconditions) ä¸æ‡‰è¢«å‰Šå¼±ã€‚â”€â”€â”€â”€å­é¡åˆ¥ä¸å¯ä»¥å‰Šå¼±çˆ¶é¡åˆ¥çš„å®šç¾©ã€èˆ‡å‰›æ‰ç›¸åï¼Œå¦‚æœçˆ¶é¡åˆ¥çš„æ–¹æ³•æ˜¯æ¥æ”¶Mazdaï¼Œå­é¡åˆ¥è¦†å¯«æ™‚ä¸å¯ä»¥æ”¹ç‚ºVehicle</li><li>çˆ¶é¡åˆ¥çš„ä¸è®Šæ¢ä»¶ (Invariants) å¿…é ˆè¢«å­å‹æ…‹æ‰€ä¿ç•™ã€‚â”€â”€â”€â”€å­é¡åˆ¥ä¸å¯ä»¥ä¿®æ”¹çˆ¶é¡åˆ¥çš„å®šç¾©ã€‚<br>ç°¡å–®ä¾†èªªå‘¢ï¼Œç•¶ä½ å­é¡åˆ¥æƒ³è¦åšèˆ‡çˆ¶é¡åˆ¥æˆªç„¶ä¸åŒçš„äº‹ï¼Œä½ æ‡‰è©²è¦æ€è€ƒï¼Œé€™å€‹ç‰©ä»¶æ˜¯å¦çœŸçš„éœ€è¦çš„æ˜¯ç¹¼æ‰¿å—ï¼Ÿé‚„æ˜¯æ‡‰è©²æ‹†é–‹ã€æˆ–æ˜¯å¥—ç”¨Interfaceã€‚</li></ol><p>è®“æˆ‘å€‘çœ‹ä¸€å€‹å£ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Gandalf</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Wizard</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attack</span><span class="hljs-params">()</span> &#123;<br>        æˆ°å¼();<br>        è¿´æ—‹æ–¬();<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æå±å•Šç‚ºä»€éº¼ç”˜é“å¤«ä¸æ˜¯å·«å¸«å—ï¼Ÿç‚ºä»€éº¼æœƒä½¿ç”¨è¿‘æˆ°æŠ€èƒ½ï¼Ÿ </span><br><span class="hljs-comment">// è½æˆ‘èªªæ¦®æ©ï¼Œé€™ç©æ„å…’æ¯”æ³•æ–å¥½ç”¨å¤šäº†</span><br></code></pre></td></tr></table></figure><h3 id="I-ä»‹é¢éš”é›¢åŸå‰‡-Interface-Segregation-Principle"><a href="#I-ä»‹é¢éš”é›¢åŸå‰‡-Interface-Segregation-Principle" class="headerlink" title="I ä»‹é¢éš”é›¢åŸå‰‡ (Interface Segregation Principle)"></a>I ä»‹é¢éš”é›¢åŸå‰‡ (Interface Segregation Principle)</h3><hr><p>ISPä¸»å¼µï¼Œå› ç‚ºæ¨¡çµ„ä¹‹é–“çš„ä¾è³´ä¸æ‡‰æœ‰ç”¨ä¸åˆ°çš„åŠŸèƒ½ã€‚<br>é€™æ˜¯ç‚ºäº†é¿å…Code smell(ç¨‹å¼ç¢¼ç•°å‘³)çš„ä¸€å€‹åŸå‰‡ï¼Œæœ‰ä¸€ç¨®è¨­è¨ˆä¸Šçš„å•é¡Œè¦åšGod Objectï¼Œé€™å€‹God Objectå°±è·Ÿä¸Šå¸ä¸€æ¨£ä»€éº¼éƒ½èƒ½åšï¼Œé€™ç¨®ç‰©ä»¶å­˜åœ¨æœ€çµ‚æœƒå°è‡´ï¼Œä»Šå¤©God Objectéœ€è¦èª¿æ•´æ™‚ï¼Œä½ å°‡æœƒæ„Ÿå—ç—›è‹¦èˆ‡çµ•æœ›ã€‚å› ç‚ºå®ƒè¢«ä½¿ç”¨åˆ°çš„åœ°æ–¹å¤ªå¤šï¼Œè€Œä½ æ¥µæœ‰å¯èƒ½ç„¡æ³•å»ç¢ºä¿ä¿®æ”¹ä¹‹å¾Œç³»çµ±æœƒç™¼ç”Ÿä»€éº¼ä¸å¯é æ–™çš„äº‹æƒ…ã€‚è…æ•—å°±æ­¤é–‹å§‹ã€‚</p><p>ç•¶å‡ºç¾é€™æ¨£çš„å•é¡Œæ™‚ï¼Œæ‡‰è©²é©ç•¶äºˆä»¥åˆ†å‰²ï¼Œæˆ‘å€‘å¯ä»¥é€éä»‹é¢ä¾†é€²è¡Œåˆ†å‰²ï¼ŒæŠŠæ¨¡çµ„åˆ†å¾—æ›´ç¬¦åˆæœ¬èº«çš„è§’è‰²ï¼Œä¹Ÿè®“ä½¿ç”¨ä»‹é¢çš„è§’è‰²åªèƒ½åˆ†åˆ¥æ¥è§¸åˆ°æ‡‰æœ‰çš„åŠŸèƒ½ã€‚<br>å¤šä½¿ç”¨ä»‹é¢ä¾†é€²è¡Œè§£è—•ã€æŠŠå¯¦ä½œéš±è—èµ·ä¾†ã€ä¿æŒæŠ½è±¡ï¼Œæœ‰åŠ©æˆ‘å€‘ç¨‹å¼çš„å½ˆæ€§ã€‚</p><h3 id="D-ä¾è³´åè½‰åŸå‰‡-Dependency-Inversion-Principle"><a href="#D-ä¾è³´åè½‰åŸå‰‡-Dependency-Inversion-Principle" class="headerlink" title="D ä¾è³´åè½‰åŸå‰‡ (Dependency Inversion Principle)"></a>D ä¾è³´åè½‰åŸå‰‡ (Dependency Inversion Principle)</h3><hr><p>DIPä¸»å¼µï¼Œ</p><ul><li>é«˜å±¤æ¨¡çµ„ä¸æ‡‰ä¾è³´ä½å±¤æ¨¡çµ„ï¼Œå®ƒå€‘éƒ½æ‡‰ä¾è³´æ–¼æŠ½è±¡ä»‹é¢ã€‚</li><li>æŠ½è±¡ä»‹é¢ä¸æ‡‰è©²ä¾è³´æ–¼å…·é«”å¯¦ä½œï¼Œå…·é«”å¯¦ä½œæ‡‰ä¾è³´æŠ½è±¡ä»‹é¢ã€‚</li></ul><p>æˆ‘ç•¶åˆçœ‹åˆ°å°±è¦ºå¾—ï¼Œé€™ä»€éº¼é¬¼ï¼Ÿå¯ä¸å¯ä»¥è¬›äººè©±ï¼Ÿå†èªªåè½‰æ˜¯ä»€éº¼ï¼Œæ–°çš„éŠæˆ²ç‹é™·é˜±å¡å—ï¼Ÿ<br>ç‚ºäº†æ›´å¥½åœ°èªªæ˜ï¼Œè®“æˆ‘å€‘ä¸€æ­¥æ­¥è§£é‡‹é€™æ¦‚å¿µå§ã€‚</p><p>é«˜å±¤ã€ä½å±¤çš„æ¦‚å¿µæ˜¯æŒ‡æŠ½è±¡åŒ–çš„ç¨‹åº¦ï¼Œæ¯”æ–¹èªª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExportService</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">exportDoc</span><span class="hljs-params">(Document document)</span> &#123;<br>        <span class="hljs-comment">//</span><br>    &#125;    <br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Document</span> &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>ç•¶ä¸­ExportServiceæ˜¯ä¸€å€‹é«˜å±¤æ¨¡çµ„ï¼ŒexportDoc()è² è²¬è¼¸å‡ºæ–‡ä»¶ï¼Œè€Œä»–ä¸éœ€è¦ç®¡æ–‡ä»¶åˆ°åº•æ˜¯.txtã€.docã€.docxï¼Œå› ç‚ºå®ƒä¸¦ä¸ç›´æ¥ä¾è³´ä½éšæ¨¡çµ„çš„å…§å®¹ï¼Œè€Œæ˜¯é€éä»‹é¢å»æ“ä½œå®ƒã€‚<br>ä½éšæ¨¡çµ„å°±åƒæ˜¯Txtã€Wordç­‰ç­‰å¯¦ä½œDocumentçš„é¡åˆ¥ï¼Œå…§éƒ¨å®šç¾©äº†å¯¦ä½œçš„å…§å®¹ã€‚<br>æ‰€ä»¥ï¼ŒExportService(é«˜éšæ¨¡çµ„)ä¸æ‡‰è©²ä¾è³´Word(ä½éšæ¨¡çµ„)ï¼Œè€Œæ˜¯ä¾è³´Documenté€™å€‹ä»‹é¢ã€‚</p><p>ç¬¬äºŒé»ï¼Œå¯ä»¥åƒè€ƒä»¥ä¸‹ç¨‹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Database</span> &#123;<br>    Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>; <span class="hljs-comment">// å¼·ä¾è³´æ–¼ JDBC çš„ Connection</span><br>&#125;<br></code></pre></td></tr></table></figure><p>é€™å€‹ä»‹é¢ä¾è³´äº†å¯¦éš›çš„å…§å®¹ï¼Œæ‡‰è©²æŠ½è±¡åŒ–ï¼Œæ¯”æ–¹èªª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Database</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveData</span><span class="hljs-params">(String data)</span>;<br>    String <span class="hljs-title function_">fetchData</span><span class="hljs-params">(String query)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€éæŠ½è±¡åŒ–ï¼Œè®“ä»‹é¢å¯ä»¥æ›´éˆæ´»ã€‚<br>é€éå¯¦ç¾DIPçš„åŸå‰‡ï¼Œæœ‰ä»¥ä¸‹å¥½è™•</p><ol><li>æé«˜éˆæ´»æ€§ï¼šç³»çµ±å¯ä»¥æ›´è¼•é¬†åœ°æ›¿æ›å…·é«”å¯¦ä½œï¼Œä¾‹å¦‚æ›´æ›è³‡æ–™åº«æˆ–æ”¯ä»˜æœå‹™ã€‚</li><li>æå‡å¯æ¸¬è©¦æ€§ï¼šé«˜å±¤æ¨¡çµ„ä¾è³´æŠ½è±¡ä»‹é¢ï¼Œå¯ä»¥é€šéæ¨¡æ“¬ç‰©ä»¶ï¼ˆMockï¼‰ä¾†é€²è¡Œå–®å…ƒæ¸¬è©¦ã€‚</li><li>é™ä½è€¦åˆï¼šé«˜å±¤èˆ‡ä½å±¤æ¨¡çµ„ç›¸äº’éš”é›¢ï¼Œä¿®æ”¹ä½å±¤æ¨¡çµ„æ™‚ä¸éœ€è¦ä¿®æ”¹é«˜å±¤æ¨¡çµ„ã€‚</li></ol><p>ä»¥ä¸Šå°±æ˜¯æˆ‘æ•´ç†çš„å…§å®¹æœ‰é—œSOLIDçš„ä¸€äº›æ¦‚å¿µè§£èªªï¼Œé‚£ä»Šå¤©å°±è¬›åˆ°é€™è£¡äº†ã€‚</p><h3 id="åƒè€ƒè³‡æº"><a href="#åƒè€ƒè³‡æº" class="headerlink" title="åƒè€ƒè³‡æº"></a>åƒè€ƒè³‡æº</h3><ol><li><a href="https://medium.com/jastzeonic/soild-%E4%BA%94%E5%8E%9F%E5%89%87%E9%82%A3%E4%B8%80%E5%85%A9%E4%BB%B6%E4%BA%8B%E6%83%85-4410b72e37f3">https://medium.com/jastzeonic/soild-%E4%BA%94%E5%8E%9F%E5%89%87%E9%82%A3%E4%B8%80%E5%85%A9%E4%BB%B6%E4%BA%8B%E6%83%85-4410b72e37f3</a></li><li><a href="https://www.explainthis.io/zh-hant/swe/solid">https://www.explainthis.io/zh-hant/swe/solid</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SOLID</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•æ‰“é€ è‡ªå·±çš„å°ˆæ¥­å½¢è±¡</title>
    <link href="/2025/01/01/%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B0%88%E6%A5%AD%E5%BD%A2%E8%B1%A1/"/>
    <url>/2025/01/01/%E5%A6%82%E4%BD%95%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%B0%88%E6%A5%AD%E5%BD%A2%E8%B1%A1/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>å—¨ï¼Œä½ æ˜¯å¦è·Ÿæˆ‘ä¸€æ¨£ï¼Œæ˜æ˜è¦ºå¾—è‡ªå·±å·¥ä½œåšäº†å¾ˆå¤šäº‹ï¼Œå¤©å¤©è¢«ä½¿å–šä¾†ä½¿å–šå»ï¼Œæ˜æ˜åšäº†ä¸å°‘äº‹ï¼Œä½†äº‹åˆ°è‡¨é ­å»æ²’æœ‰è¾¦æ³•æ˜ç¢ºåœ°å¯«å‡ºè‡ªå·±åšäº†ä»€éº¼ï¼Ÿç”šè‡³æœ‰æ™‚å€™é‚„é–‹å§‹æ‡·ç–‘èµ·è‡ªå·±åˆ°åº•ç‚ºä»€éº¼çœ‹èµ·ä¾†ä¸å¦‚ä»–äººä¾†å¾—å„ªç•°ï¼Ÿ<br>ç•¶ç„¶ï¼Œä¹Ÿæ˜¯æœ‰å¯èƒ½ä½ æˆ‘åšçš„äº‹çœŸçš„æ²’ä»€éº¼äº†ä¸èµ·ï¼Œæ˜¯é‚£ç¨®ç„¡é—œç·Šè¦ç·Šè¦çš„äº‹ä¹Ÿèªªä¸å®šã€‚ä½†å› ç‚ºæˆ‘çš„å€‹æ€§å¤©ç”Ÿæœ‰é»è‡ªå‘ï¼Œæœ‰æ™‚å¾ˆå®¹æ˜“è¢«è²¶ä½è‡ªå·±çš„åŠªåŠ›èˆ‡ä»˜å‡ºï¼Œæ¥è‘—å°±é€²å…¥è² é¢çš„èºæ—‹ï¼šåŠªåŠ›-&gt;è‡ªè²¶-&gt;åŠªåŠ›-&gt;è‡ªè²¶ã€‚<br>å› æ­¤åœ¨2025å¹´ï¼Œæˆ‘å¸Œæœ›å¯ä»¥æœ‰ä¸€å€‹æ˜ç¢ºçš„æ–¹å¼ä¾†èªè­˜è‡ªå·±ã€‚è©¦è‘—ä½¿ç”¨å¤§çœ¾çš„æ¨™æº–ä½œç‚ºæ¡†æ¶ä¾†å®šç¾©è‡ªå·±çš„è¡Œç‚ºï¼Œç•¶ç„¶æˆ‘æ¥µåŠ›å¦èªä»»ä½•äººè¢«æ¡†æ¶æŸç¸›ï¼Œä½†ä½œç‚ºè©•æ–·ã€åƒè€ƒç”¨çš„æ¨™æº–ä¾†èªªï¼Œæˆ‘æƒ³é‚„æ˜¯èƒ½ç‚ºè‡ªå·±å¸¶ä¾†é»éˆæ„Ÿèˆ‡æˆé•·ã€‚<br>æˆ‘æ‰€é¸çš„è©•æ–·æ¨™æº–ï¼Œæ˜¯Amazon Leadership Principleï¼Œåˆç¨±Amazoné ˜å°åŠ›æº–å‰‡ã€‚</p><h3 id="Amazon-Leadership-Principle-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#Amazon-Leadership-Principle-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Amazon Leadership Principle æ˜¯ä»€éº¼ï¼Ÿ"></a>Amazon Leadership Principle æ˜¯ä»€éº¼ï¼Ÿ</h3><p>é€™æ˜¯æºè‡ªAmazonå‰µè¾¦äººæ‰€æå‡ºçš„ï¼Œå…±æœ‰14é …çš„é ˜å°æº–å‰‡ã€‚é€™æ˜¯ç”¨ä¾†å‘Šè¨´æ‰€æœ‰Amazonçš„å“¡å·¥ï¼Œä»¥åŠé‚£äº›æƒ³è¦é€²å…¥Amazonçš„æ‡‰å¾µè€…å€‘ï¼ŒAmazonæ‰€è¿½æ±‚çš„å“¡å·¥å½¢è±¡ï¼Œé€™åå››é …åˆ†åˆ¥æ˜¯ï¼š</p><ol><li>é¡§å®¢è‡³ä¸Š (Customer obsession) åŠªåŠ›å·¥ä½œï¼Œè´å¾—å®¢æˆ¶å°ä»–å€‘çš„ä¿¡ä»»ï¼Œ<strong>ä»¥é¡§å®¢å„ªå…ˆ</strong>ã€‚</li><li>ä¸»äººç¿ç²¾ç¥ (Ownership) <strong>é•·é è€ƒæ…®ï¼Œä¸å› çŸ­æœŸæ¥­ç¸¾çŠ§ç‰²é•·æœŸåƒ¹å€¼</strong>ï¼Œèªç‚ºè‡ªå·±ä»£è¡¨äº†å…¬å¸ï¼Œé‡äº‹ä¸æœƒèªª<strong>é‚£ä¸æ˜¯æˆ‘çš„å·¥ä½œ</strong>â€œ</li><li>å‰µæ–°èˆ‡ç°¡åŒ– (Invent and simplify) <strong>ä¸æ–·è¿½æ±‚å‰µæ–°èˆ‡ç™¼æ˜</strong>ã€äº†è§£å¤–ç•Œå‹•æ…‹ï¼Œå°‹æ±‚<strong>ä½¿å·¥ä½œç°¡æ˜“åŒ–çš„æ–¹æ³•</strong></li><li>æ±ºç­–æ­£ç¢º (Right,a lot) <strong>åšå‡ºæ­£ç¢ºæ±ºå®š</strong>ï¼Œé€éäº†è§£å¤šæ¨£è¦–è§’ï¼ŒæŒ‘æˆ°åˆ»æ¿å°è±¡</li><li>å¥½å¥‡æ±‚çŸ¥ (Learn and be curious) <strong>çµ‚èº«å­¸ç¿’</strong>è€…ï¼Œ<strong>å°å¯èƒ½æ€§å……æ»¿å¥½å¥‡ä¸¦ä»˜è«¸è¡Œå‹•åŠ ä»¥æ¢ç´¢</strong></li><li>é¸è³¢èˆ‡èƒ½ (Hire and develop the best) è¡¨å½°å‚‘å‡ºäººæ‰ï¼Œç£¨ç·´ä»–å€‘ï¼Œå¾å“¡å·¥è§’åº¦å‡ºç™¼ã€‚</li><li>æœ€é«˜æ¨™æº– (Insist on the highest standards) æœ‰<strong>é«˜æ¨™æº–</strong>ï¼Œ<strong>ç¢ºä¿ä»»ä½•å•é¡Œä¸æœƒè”“å»¶</strong>ï¼Œ<strong>å¾—ä»¥åŠæ™‚å¾¹åº•è§£æ±ºä¸¦ç¢ºä¿ä¸å†å‡ºç¾</strong></li><li>èƒ¸æ‡·å¤§å¿— (Think big) å¾<strong>ä¸åŒè§’åº¦è€ƒæ…®å•é¡Œï¼Œå»£æ³›å°‹æ‰¾æœå‹™å®¢æˆ¶çš„æ–¹æ³•</strong>ï¼Œé€²è€Œæ¿€ç™¼å‡ºè‰¯å¥½çš„æˆæœã€‚</li><li>å´‡å°šè¡Œå‹• (Bias for action) æ±ºç­–èˆ‡è¡Œå‹•æ˜¯å¯ä»¥èª¿æ•´çš„ï¼Œ<strong>é¼“å‹µåœ¨æ·±æ€ç†Ÿæ…®çš„å‰æä¸‹å†’éšª</strong></li><li>å‹¤å„‰ç¯€ç´„ (Frugality) ä»¥<strong>æ›´å°‘çš„æŠ•å…¥æ›ä¾†æ›´å¤§çš„ç”¢å‡º</strong></li><li>è´å¾—ä¿¡ä»» (Earn trust) <strong>å°ˆæ³¨å‚¾è½ å¦èª æºé€š å°Šé‡ä»–äºº æ„Ÿæ–¼è‡ªæˆ‘æ‰¹è©•</strong> ä»¥æœ€ä½³é ˜å°è€…æ¨™æº–è¦æ±‚è‡ªå·±èˆ‡å…¶åœ˜éšŠ</li><li>è¿½æ ¹ç©¶æŸ¢ (Dive deep) <strong>æ·±å…¥å„ç’°ç¯€ï¼ŒæŒæ§ç´°ç¯€ï¼Œç¶“å¸¸è‡ªæˆ‘å¯©æ ¸ï¼Œä¸éºæ¼ä»»ä½•å·¥ä½œ</strong></li><li>æ‰¹åˆ¤èˆ‡æ‰¿è«¾ (Have backbone; disagree and commit) <strong>å‹‡æ–¼è³ªç–‘</strong>ä»–å€‘ç„¡æ³•èªåŒçš„æ±ºç­–ï¼Œä¸€æ—¦åšå‡ºæ±ºå®šï¼Œå°±å…¨å¿ƒå…¨æ„è‡´åŠ›æ–¼å¯¦ç¾ç›®æ¨™</li><li>é”æˆæ¥­ç¸¾ (Deliver results) å³ä½¿<strong>ç¢°åˆ°å›°é›£ä¹Ÿ</strong>ç¢ºä¿å·¥ä½œå“è³ªä¸¦åŸ·è¡Œå®Œæˆã€‚</li></ol><p>æˆ‘æ˜¯åƒè€ƒé€™ä»½æ–‡ç« åšå‡ºä»¥ä¸‹æ•´ç†çš„ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹ä¹Ÿæœ‰å¯ä»¥çœ‹çœ‹å®ƒï¼š<a href="https://hsinchengchao.medium.com/%E7%BE%8E%E5%9C%8B%E6%B1%82%E8%81%B7%E5%BF%83%E5%BE%97%E5%88%86%E4%BA%AB-%E5%85%AD-fb9c73ff995c">https://hsinchengchao.medium.com/%E7%BE%8E%E5%9C%8B%E6%B1%82%E8%81%B7%E5%BF%83%E5%BE%97%E5%88%86%E4%BA%AB-%E5%85%AD-fb9c73ff995c</a></p><h4 id="ç”¨è™•"><a href="#ç”¨è™•" class="headerlink" title="ç”¨è™•"></a>ç”¨è™•</h4><p>é€éé€™14é …çš„æ•´ç†ï¼Œæ˜¯ç”¨ä¾†è®“æˆ‘è‡ªå·±å»æ€è€ƒï¼Œè‡ªå·±æ—¥å¸¸çš„èˆ‰æ­¢æ˜¯å¦æœ‰ç¬¦åˆè©²è¡Œç‚ºçš„æŒ‡æ¨™ï¼Œé †å¸¶æ€è€ƒæ˜¯å¦å¯ä»¥æ•´ç†å‡ºä¸€å€‹STARä¾†æè¿°è‡ªå·±ï¼Œé€éå¯¦éš›æ¡ˆä¾‹èˆ‡æˆæœï¼Œè®“è‡ªå·±çš„åƒ¹å€¼å¯ä»¥æ›´å¥½å±•ç¾çµ¦è†è½è€…ã€‚<br>å°æ–¼å…§å‘çš„æˆ‘ä¾†èªªé€™ä¸å®¹æ˜“ï¼Œæˆ‘æ­£åœ¨å­¸ç¿’ä¸­ï¼Œç•¶ä½œæ˜¯ä»Šå¤©çš„æ–°å¹´æ–°å¸Œæœ›åšï¼Œå¸Œæœ›ä»Šå¹´èƒ½å¤ ä¸€å¸†é¢¨é †ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Resume</tag>
      
      <tag>Personality</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linkedin-äººè³‡æ€éº¼çœ‹ä½ ï¼Ÿ</title>
    <link href="/2024/12/30/Linkedin-%E4%BA%BA%E8%B3%87%E6%80%8E%E9%BA%BC%E7%9C%8B%E4%BD%A0%EF%BC%9F/"/>
    <url>/2024/12/30/Linkedin-%E4%BA%BA%E8%B3%87%E6%80%8E%E9%BA%BC%E7%9C%8B%E4%BD%A0%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="çµé ­æ€éº¼æ‰¾åˆ°ä½ ï¼Ÿ"><a href="#çµé ­æ€éº¼æ‰¾åˆ°ä½ ï¼Ÿ" class="headerlink" title="çµé ­æ€éº¼æ‰¾åˆ°ä½ ï¼Ÿ"></a>çµé ­æ€éº¼æ‰¾åˆ°ä½ ï¼Ÿ</h3><p>å‰ä¸€é™£å­åƒåŠ äº†å¹´åº•çš„<GDG Taipei>ï¼Œçªç„¶æœ‰çœ‹åˆ°Aé–‹é ­çš„çµé ­å…¬å¸é–‹Linkedinè¬›åº§ï¼Œè¦ºå¾—æœ‰èˆˆè¶£å°±å»è½è½çœ‹ï¼Œæ„å¤–çš„æ˜¯é‚„çœŸçš„çŸ¥é“äº†ä¸€äº›å¹³å¸¸ä¸æœƒçŸ¥é“çš„äº‹<br>ç•¶ç„¶ä¹Ÿå¯èƒ½æ˜¯æˆ‘æ¶‰ä¸–ä¸æ·±ï¼Œæ‡‚å¾—é‚„ä¸å¤šï¼Œå¤§æ¦‚æ•´ç†äº†ä¸€äº›æ±è¥¿ï¼Œä¹Ÿæ­¡è¿åˆ†äº«èˆ‡äº¤æµï¼š</p><ul><li>çµé ­åœ¨æ‰¾å°‹äººæ‰æ™‚ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨Linkedinç‚ºæ‹›å‹Ÿè€…æä¾›çš„å¾Œå°é€²è¡Œæœå°‹ã€‚æœå°‹æ¢ä»¶å°±ä¸»è¦æ˜¯å­¸ç¶“æ­·ç­‰ç­‰â€¦</li><li>çµé ­é€šå¸¸åœ¨æ‰¾äººæ‰æ™‚ï¼Œé¢å°é›‡ä¸»çš„éœ€æ±‚ï¼Œç¶“å¸¸ç”¨ä»¥ä¸‹é †ä½å»æ‰¾ï¼š<ul><li>Location åœ°é»ï¼Œåœ¨å€‹äººè³‡è¨Šé é¢å¡«å…¥çš„åœ°é»æœƒè¢«ç´å…¥äººè³‡çš„æœå°‹æ¢ä»¶ä¸­ã€‚</li><li>Skill æŠ€èƒ½ï¼Œå¦‚æœæœ‰ç¶“é©—çš„æŠ€èƒ½ï¼Œç›¡é‡æ”¾åœ¨æŠ€èƒ½æ¬„ä½ï¼Œå¥½è®“è‡ªå·±è¢«ç™¼ç¾ã€‚(Aç¤¾çµé ­è¡¨ç¤ºè»Ÿé«”å·¥ç¨‹å¸«ä¸å¿…å¯«è»Ÿå¯¦åŠ›)</li><li>Company ä»»è·å…¬å¸ï¼Œæœ‰äº›å…¬å¸æœƒè¦æ±‚å¾XXå…¬å¸ä¾†çš„äººï¼Œé€™æ™‚å…¬å¸å°±å¾ˆé‡è¦äº†</li><li>KeyWords é—œéµå­—</li></ul></li><li>Linkedinå¾Œå°ï¼Œé‡å°å¸‚å ´ä¸Šçš„äººæ‰ï¼Œæœƒç²—ç•¥åˆ†æˆä¸‰ç¨®é¡å‹ï¼ŒHRæ‰¾äººå¾ä¸Šå¾€ä¸‹æ‰¾ï¼š<ul><li>OPEN TO WORK é€™æ˜¯Linkedinå¯ä»¥é–‹å•Ÿçš„ç‹€æ…‹ï¼Œæ±‚è·è€…é–‹å•Ÿè¡¨ç¤ºä¸»å‹•æ‰¾å°‹å·¥ä½œï¼ŒåŒæ™‚å¯ä»¥é™åˆ¶ç‚ºåªæœ‰æ‹›å‹Ÿå°ˆå“¡æ‰å¯è¦‹ã€‚</li><li>ACTIVE TALENT é€™æ˜¯Linkedinç”¨æ¼”ç®—æ³•åˆ†é¡çš„ç‹€æ…‹ï¼Œå¯ä»¥ç†è§£ç‚ºæ´»èºç”¨æˆ¶çš„æ¨™ç±¤ï¼Œè‹¥æ˜¯æƒ³è¦è¢«åˆ†é¡åˆ°é€™ä¸€å¡Šï¼Œè¦è€ƒæ…®ï¼š<ul><li>å¤šå¤šåƒèˆ‡è²¼æ–‡å›æ‡‰</li><li>è¿‘æœŸæ›´æ–°éLinkedin Profile</li></ul></li><li>REDISCOVERED CANDIDATES éæ´»èºç”¨æˆ¶</li></ul></li></ul><h3 id="Linkedin-Profile-æ€éº¼å»ºï¼Ÿ"><a href="#Linkedin-Profile-æ€éº¼å»ºï¼Ÿ" class="headerlink" title="Linkedin Profile æ€éº¼å»ºï¼Ÿ"></a>Linkedin Profile æ€éº¼å»ºï¼Ÿ</h3><p>å¤§è‡´Linkedin Profileæœ‰é€™äº”å€‹éƒ¨åˆ†</p><ol><li>HeadLines&amp;Location</li><li>Experience</li><li>Skills&amp;Certification</li><li>About</li><li>Project</li></ol><p>Aç¤¾çµé ­è¡¨ç¤ºï¼Œé€šå¸¸å‰ä¸‰å€‹ç¬¦åˆï¼Œä»–å€‘å°±æœƒæ‰¾ä½ äº†ã€‚</p><p>æœ‰é—œHeadLinesçš„å¯«æ³•ï¼Œå¯åƒè€ƒç¯„ä¾‹ï¼š<br><img src="/img/linkedin_headlines.png"><br>Experienceçš„å¯«æ³•ï¼Œå¯åƒè€ƒç¯„ä¾‹ï¼š<br><img src="/img/linkedin_experience.png"><br>æ’°å¯«ç¶“æ­·è¦æ³¨æ„ï¼š</p><ul><li>è‡³å°‘è¦æœ‰ä¸‰å€‹bullet points</li><li>ä»‹ç´¹è‡ªå·±ä½¿ç”¨çš„æŠ€è¡“</li><li>å…¶ä»–é—œéµå­—(é ˜åŸŸã€ä½ é–‹ç™¼ä»€éº¼æ¨£çš„ç³»çµ±ç­‰ç­‰)</li><li>é‡åŒ–æè¿°æˆæœ</li></ul><p>Aboutçš„å¯«æ³•Aç¤¾çµé ­å»ºè­°ä¸è¦å¤ªé•·ï¼Œç´„åœ¨10ä»¥å…§æœ€å¥½ï¼Œå¦‚æœæ²’æƒ³æ³•å¯ä»¥åƒè€ƒç¯„ä¾‹ï¼š<br><img src="/img/linkedin_about.png"></p><p>å…¶ä»–é›œåœ–<br><img src="/img/linkedin_extra1.png"><br><img src="/img/linkedin_extra2.png"></p><p>å¤§ç´„å°±æ˜¯é€™æ¨£ï¼Œé€™ç¯‡æ–‡ç« æ²’æœ‰ä»€éº¼å¯ä»¥è®“äººé†é†çŒé ‚çš„å…§å®¹ï¼Œå¯«å®Œçš„æˆ‘å¯ä»¥ä¿è­‰ï¼Œå¤§å¤šå…§å®¹é‚„æ˜¯äº›è€ç”Ÿå¸¸è«‡ï¼Œæœ€å¤šå°±èƒ½å¸¶ä¾†ä¸€é»æ–¹å‘æ€§æŒ‡å°ã€‚<br>å°±é€™æ¨£ï¼Œç¥å„ä½æ±‚è·é †åˆ©ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linkedin</tag>
      
      <tag>Head Hunter</tag>
      
      <tag>Resume</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Clean-Code-ç­†è¨˜-2</title>
    <link href="/2024/12/29/Clean-Code-%E7%AD%86%E8%A8%98-2/"/>
    <url>/2024/12/29/Clean-Code-%E7%AD%86%E8%A8%98-2/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡æ˜¯ç¹¼çºŒä¸Šå›çš„Clean Codeç­†è¨˜ï¼Œå»¢è©±ä¸å¤šèªªï¼ŒLetâ€™s us begin.</p><h2 id="TDD"><a href="#TDD" class="headerlink" title="TDD"></a>TDD</h2><h4 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h4><ol><li>æ’°å¯«ä¸€å€‹å–®å…ƒæ¸¬è©¦å‰ä¸æ‡‰è©²æ’°å¯«ç”¢å“ç¨‹å¼ç¢¼</li><li>åªæ’°å¯«å‰›å¥½èƒ½é€šéçš„ç”¢å“ç¨‹å¼ç¢¼</li><li>åªæ’°å¯«å‰›å¥½èƒ½é€šéç•¶å‰æ¸¬è©¦å¤±æ•—çš„ç”¢å“ç¨‹å¼ç¢¼</li></ol><h4 id="æ³¨æ„è¦é»"><a href="#æ³¨æ„è¦é»" class="headerlink" title="æ³¨æ„è¦é»"></a>æ³¨æ„è¦é»</h4><ul><li>æ’°å¯«æ¸¬è©¦çš„å¥½è™•å¯ä»¥è®“ä½ æ›´å‹•ç¨‹å¼ç¢¼æ™‚ä¸é‚£éº¼ææ‡¼ï¼Œ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¸¬è©¦ç¨‹å¼ç¢¼åŒæ¨£éœ€è¦èˆ‡æ™‚ä¿±é€²ï¼Œè‹¥æ²’æœ‰è·Ÿè‘—èª¿æ•´å®¹æ˜“é€ æˆç¨‹å¼ç¢¼çš„è…æ•—ï¼Œæœ€çµ‚æ¸¬è©¦ç¨‹å¼ç¢¼çš„å“è³ªåŒæ¨£å½±éŸ¿ç”¢å“ç¨‹å¼ç¢¼ã€‚</li><li>æ¸¬è©¦ç¨‹å¼ç¢¼è¦æ±‚çš„æ˜¯å¯è®€æ€§ é—¡æ˜æ€§(Clarity)ï¼Œè€Œä¸æ˜¯æ•ˆèƒ½ã€‚</li><li>ç›¡é‡ç¶­æŒä¸€å€‹æ¸¬è©¦ä¸€å€‹æ–·è¨€(Assert)ï¼Œè®“ä¸€å€‹æ¸¬è©¦åªæœƒé¡¯ç¤ºä¸€å€‹çµæœï¼Œæ–¹ä¾¿é–‹ç™¼è€…è©•ä¼°åŠŸèƒ½ã€‚(ä¸€å€‹æ¸¬è©¦åªæ¸¬è©¦ä¸€å€‹æ¦‚å¿µ)</li></ul><h4 id="TDD-FIRSTåŸå‰‡"><a href="#TDD-FIRSTåŸå‰‡" class="headerlink" title="TDD FIRSTåŸå‰‡"></a>TDD FIRSTåŸå‰‡</h4><ul><li>Fast æ¸¬è©¦æ‡‰è©²è¦å¤ å¿«</li><li>Independent æ¸¬è©¦æ‡‰è©²è¦èƒ½å¤ ç¨ç«‹é‹è¡Œï¼Œä¸ä¾è³´å…¶ä»–æ¸¬è©¦ç¨‹å¼</li><li>Repeatable æ¸¬è©¦æ‡‰è©²è¦èƒ½å¤ é‡è¤‡ä½¿ç”¨</li><li>Self-Validating æ¸¬è©¦æ‡‰è©²è¦èƒ½å¤ è‡ªæˆ‘é©—è­‰ï¼Œé¡¯ç¤ºè¦æ¸¬è©¦çš„æ¦‚å¿µæ˜¯å¦æˆåŠŸé‹ä½œ</li><li>Timely è¦åœ¨ç”¢å“ç¨‹å¼ä¹‹å‰è¢«æ’°å¯«ï¼Œè‹¥æ˜¯ä¹‹å¾Œæ‰æ’°å¯«ï¼Œç¶“å¸¸æœƒç™¼ç¾æ’°å¯«å‡ºä¾†çš„ç”¢å“ç¨‹å¼ç¢¼ä¸¦ä¸å¥½è¢«æ¸¬è©¦</li></ul><h2 id="Class-Level"><a href="#Class-Level" class="headerlink" title="Class-Level"></a>Class-Level</h2><h4 id="å–®ä¸€è·è²¬åŸå‰‡-Single-Responsibility-Principle-SRP"><a href="#å–®ä¸€è·è²¬åŸå‰‡-Single-Responsibility-Principle-SRP" class="headerlink" title="å–®ä¸€è·è²¬åŸå‰‡(Single Responsibility Principle, SRP)"></a>å–®ä¸€è·è²¬åŸå‰‡(Single Responsibility Principle, SRP)</h4><p>å–®ä¸€è·è²¬åŸå‰‡ä¸»å¼µï¼Œä¸€å€‹é¡åˆ¥æˆ–ä¸€å€‹æ¨¡çµ„æ‡‰è©²åªèƒ½æœ‰ä¸€å€‹ï¼Œè€Œä¸”åªèƒ½æœ‰ä¸€å€‹è¢«ä¿®æ”¹çš„ç†ç”±ã€‚<br>å€‹äººå°é€™æ®µçš„ç†è§£æ˜¯ï¼Œä¸€å€‹é¡åˆ¥çš„è·è²¬æ‡‰è©²æ˜¯å¾ˆæ˜ç¢ºçš„ï¼Œä»–åªè©²è² è²¬ä¸€ä»¶äº‹ï¼Œè€Œéœ€è¦ä¿®æ”¹é¡åˆ¥çš„åŸå› ï¼Œ<br>å¿…é ˆå¾—æ˜¯ç•¶åˆèªç‚ºè¦åšçš„é‚£ä»¶äº‹ã€‚ æ¯”æ–¹èªªæœ‰ä¸€å€‹å°ˆé–€è™•ç†å ±è¡¨Excelè¼¸å‡ºçš„é¡åˆ¥ExcelObjectï¼Œè‹¥ä»Šå¤©éœ€è¦åšè¼¸å‡ºExcelä¹‹å¤–çš„äº‹ ï¼Œæ¯”æ–¹èªªï¼šåˆ¤æ–·æ ¼å¼ã€å­—ä¸²æ‹¼æ¥ã€æ¬„ä½é©—è­‰ã€çµ¦å®šé è¨­å€¼ï¼Œè‹¥å› ç‚ºé€™äº›ç†ç”±è€Œä¿®æ”¹äº†ExcelObjectï¼Œå°±æ˜¯é•åäº†SRPã€‚</p><h4 id="å‡èšåŠ›"><a href="#å‡èšåŠ›" class="headerlink" title="å‡èšåŠ›"></a>å‡èšåŠ›</h4><p>é¡åˆ¥ä¸­çš„æ–¹æ³•ï¼Œç›¡é‡è®“æ¯å€‹è®Šæ•¸éƒ½è¢«ä½¿ç”¨åœ¨æ¯ä¸€å€‹æ–¹æ³•ä¸­ã€‚<br>ç•¶é¡åˆ¥å¤±å»å‡èšåŠ›æ™‚ï¼Œå°±æ‡‰è©²å°‡å®ƒæ‹†é–‹</p><h4 id="é–‹æ”¾é–‰åˆåŸå‰‡-Open-Closed-Principle"><a href="#é–‹æ”¾é–‰åˆåŸå‰‡-Open-Closed-Principle" class="headerlink" title="é–‹æ”¾é–‰åˆåŸå‰‡(Open-Closed Principle)"></a>é–‹æ”¾é–‰åˆåŸå‰‡(Open-Closed Principle)</h4><p>é¡åˆ¥æ‡‰è©²è¦å°æ“´å……å…·å‚™é–‹æ”¾æ€§ï¼Œä½†å°ä¿®æ”¹å…·æœ‰é–‰åˆæ€§ã€‚</p><h4 id="éš”é›¢ä¿®æ”¹"><a href="#éš”é›¢ä¿®æ”¹" class="headerlink" title="éš”é›¢ä¿®æ”¹"></a>éš”é›¢ä¿®æ”¹</h4><p>é¡åˆ¥ä¹‹é–“ä¸æ‡‰è©²å¯¦é«”ä¾è³´ï¼Œè€Œæ˜¯ä¾è³´æŠ½è±¡ï¼Œé€éä¸€å±¤æŠ½è±¡éš”é›¢è®ŠåŒ–ï¼Œè²¬ä»»åˆ†æ˜ä¸”æ˜“æ–¼æ¸¬è©¦ã€‚</p><h2 id="System"><a href="#System" class="headerlink" title="System"></a>System</h2><h4 id="ä¾è³´æ³¨å…¥-Dependency-Injection-DI"><a href="#ä¾è³´æ³¨å…¥-Dependency-Injection-DI" class="headerlink" title="ä¾è³´æ³¨å…¥(Dependency Injection, DI)"></a>ä¾è³´æ³¨å…¥(Dependency Injection, DI)</h4><p>å°‡ç‰©ä»¶çš„å»ºç«‹éç¨‹å¾ä½¿ç”¨ä¸­åˆ†é›¢å‡ºä¾†ï¼Œé€™æ˜¯æ§åˆ¶åè½‰(Inversion of Control, IOC)åœ¨ç›¸ä¾æ€§ç®¡ç†è£¡çš„ä¸€ç¨®æ‡‰ç”¨æ‰‹æ®µã€‚æ§åˆ¶åè½‰æ˜¯å°‡æŸå€‹ç‰©ä»¶çš„ç¬¬äºŒå€‹è·è²¬ï¼Œç§»è‡³å…¶ä»–å°ˆæ³¨æ–¼è©²è·è²¬çš„ç‰©ä»¶è£¡ï¼Œä¹Ÿå› æ­¤æ”¯æ´äº†SRPåŸå‰‡ã€‚<br>åœ¨ç›¸ä¾æ€§ç®¡ç†çš„ç¯„ç–‡ä¸­ï¼Œä¸€å€‹ç‰©ä»¶ä¸æ‡‰è©²è² è²¬å¯¦é«”åŒ–å°æœ¬èº«çš„ç›¸ä¾ã€‚è€Œæ˜¯å°‡è²¬ä»»äº¤çµ¦å¤–éƒ¨ã€‚å»ºè­°å¯ä»¥é€éæŠ½è±¡å·¥å» é€²è¡Œã€‚</p><h4 id="æŠ½è±¡å·¥å» -Abstract-Factory-Example"><a href="#æŠ½è±¡å·¥å» -Abstract-Factory-Example" class="headerlink" title="æŠ½è±¡å·¥å» (Abstract Factory) Example"></a>æŠ½è±¡å·¥å» (Abstract Factory) Example</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŠ½è±¡ç”¢å“ï¼šButton</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Button</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// æŠ½è±¡ç”¢å“ï¼šTextBox</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">TextBox</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”ç”¢å“ï¼šWindowsButton</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowsButton</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Button</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Rendering a Windows-style Button&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”ç”¢å“ï¼šWindowsTextBox</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowsTextBox</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TextBox</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Rendering a Windows-style TextBox&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”ç”¢å“ï¼šMacOSButton</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MacOSButton</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Button</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Rendering a MacOS-style Button&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”ç”¢å“ï¼šMacOSTextBox</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MacOSTextBox</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TextBox</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Rendering a MacOS-style TextBox&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æŠ½è±¡å·¥å» ï¼šUIFactory</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">UIFactory</span> &#123;<br>    Button <span class="hljs-title function_">createButton</span><span class="hljs-params">()</span>;<br>    TextBox <span class="hljs-title function_">createTextBox</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”å·¥å» ï¼šWindowsFactory</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowsFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UIFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Button <span class="hljs-title function_">createButton</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowsButton</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> TextBox <span class="hljs-title function_">createTextBox</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowsTextBox</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å…·é«”å·¥å» ï¼šMacOSFactory</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MacOSFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UIFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Button <span class="hljs-title function_">createButton</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MacOSButton</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> TextBox <span class="hljs-title function_">createTextBox</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MacOSTextBox</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å®¢æˆ¶ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractFactoryExample</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// å®¢æˆ¶ç«¯é¸æ“‡ä¸€å€‹å·¥å» </span><br>        <span class="hljs-type">UIFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> getFactory(<span class="hljs-string">&quot;Windows&quot;</span>); <span class="hljs-comment">// å¯åˆ‡æ›ç‚º &quot;MacOS&quot;</span><br><br>        <span class="hljs-comment">// ä½¿ç”¨å·¥å» å‰µå»ºç”¢å“</span><br>        <span class="hljs-type">Button</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> factory.createButton();<br>        <span class="hljs-type">TextBox</span> <span class="hljs-variable">textBox</span> <span class="hljs-operator">=</span> factory.createTextBox();<br><br>        <span class="hljs-comment">// æ¸²æŸ“ç”¢å“</span><br>        button.render();<br>        textBox.render();<br>    &#125;<br><br>    <span class="hljs-comment">// å·¥å» é¸æ“‡é‚è¼¯</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> UIFactory <span class="hljs-title function_">getFactory</span><span class="hljs-params">(String osType)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (osType) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Windows&quot;</span> -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowsFactory</span>();<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;MacOS&quot;</span> -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">MacOSFactory</span>();<br>            <span class="hljs-keyword">default</span> -&gt; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Unknown OS type&quot;</span>);<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â–² é€™æ¨£çš„è¨­è¨ˆå¯ä»¥éˆæ´»åˆ‡æ›ä¸åŒé¢¨æ ¼çš„ UIï¼Œä¸”å°æ–¼æ–°çš„ UI ä¸»é¡Œï¼ˆå¦‚ Linuxï¼‰ï¼Œåªéœ€æ·»åŠ æ–°çš„å·¥å» å’Œç”¢å“é¡å³å¯ï¼Œç„¡éœ€ä¿®æ”¹ç¾æœ‰ä»£ç¢¼ã€‚</p><h3 id="æ©«åˆ‡é—œæ³¨é»"><a href="#æ©«åˆ‡é—œæ³¨é»" class="headerlink" title="æ©«åˆ‡é—œæ³¨é»"></a>æ©«åˆ‡é—œæ³¨é»</h3><p>å‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹äº¤æ˜“ç³»çµ±ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç™»å…¥-&gt; èº«åˆ†é©—è­‰  -&gt; ä»˜æ¬¾</li><li>ç™»å…¥-&gt; èº«åˆ†é©—è­‰  -&gt; é€€æ¬¾</li></ol><p>å˜—è©¦ä»¥é€™æ¨£çš„è§’åº¦å»ç†è§£ç³»çµ±çš„æµç¨‹ï¼Œä½ æœƒç™¼ç¾ã€Œç™»å…¥ã€èˆ‡ã€Œèº«åˆ†é©—è­‰ã€ä¸¦ä¸æ˜¯çœŸæ­£æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œä¸”å…©è€…é‡è¤‡å­˜åœ¨ã€‚ç‚ºäº†ä½¿æˆ‘å€‘å¯ä»¥æ›´å°ˆæ³¨åœ¨çœŸæ­£é‡è¦çš„å•†æ¥­æµç¨‹ä¸Šï¼Œæˆ‘å€‘å¯ä»¥å°‡é‚£äº›æ¬¡è¦çš„ç´°ç¯€ä½œç‚ºä¸€å€‹å€‹åˆ‡ç‰‡(Aspects)å¾ä¸»æµç¨‹åˆ‡å‰²å‡ºä¾†ï¼Œé€™ä¸€å€‹æ­¥é©Ÿæˆ‘å€‘ç¨±ä¹‹ç‚ºé—œæ³¨é»åˆ†é›¢ã€‚<br>è€Œå¯¦ç¾é€™æ¨£çš„æ§‹æƒ³çš„æŠ€è¡“å°±æ˜¯Java Proxyæ©Ÿåˆ¶ï¼Œæˆ–æ˜¯AOP(åˆååˆ‡é¢å°å‘ç·¨ç¨‹)ã€‚<br>é—œæ–¼AOPï¼Œå¯ä»¥åƒè€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://medium.com/@ziegler7359/spring-boot-aop-%E5%AD%B8%E7%BF%92%E5%BF%83%E5%BE%97-392e2b83cd54">Spring AOP</a></p><p>å¤§ç´„æ•´ç†åˆ°é€™é‚Šï¼Œå¾Œé¢Clean Codeçš„ç›¸é—œè¨è«–å¹¾ä¹éƒ½æ˜¯æ¡ˆä¾‹é¡Œç›®äº†ï¼Œé€™é‚Šå°±ä¸æ‹¿å‡ºä¾†è¨è«–äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Clean Code</tag>
      
      <tag>Programming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Clean Code ç­†è¨˜(1)</title>
    <link href="/2024/12/26/Clean-Code-%E7%AD%86%E8%A8%98-1/"/>
    <url>/2024/12/26/Clean-Code-%E7%AD%86%E8%A8%98-1/</url>
    
    <content type="html"><![CDATA[<p>Clean Codeçš„åŸå‰‡åŒ…å«äº†å¤šç¨®é¢å‘ï¼Œé€éClean Codeçš„å­¸ç¿’ï¼Œå¯ä»¥ä½¿ä½ å…¨æ–¹ä½çš„æª¢è¦–è‡ªå·±æ’°å¯«èˆ‡ä»–äººæ’°å¯«çš„ç¨‹å¼ç¢¼æ˜¯å¦è¶³å¤ æ•´æ½”ã€‚<br>ä»¥ä¸‹ç‚ºè‡ªå·±æ•´ç†çš„Clean Codeå­¸ç¿’ç­†è¨˜ï¼š</p><h3 id="è®Šæ•¸"><a href="#è®Šæ•¸" class="headerlink" title="è®Šæ•¸"></a>è®Šæ•¸</h3><p>å¥½çš„è®Šæ•¸å‘½åæ‡‰è©²è¦èƒ½å¤ åå‰¯å…¶å¯¦ï¼Œæ¯”æ–¹èªªï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> day;<br></code></pre></td></tr></table></figure><p>æ°¸é æ¯”</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> expireDate;<br></code></pre></td></tr></table></figure><p>è¦ä¾†å¾—ç³Ÿã€‚</p><hr><ul><li>é¿å…ä½¿ç”¨ <em>O</em> <em>0</em> <em>I</em> <em>L</em> é€™äº›å®¹æ˜“èª¤å°ã€å¯«éŒ¯çš„å­—å…ƒ</li><li>ä½¿ç”¨èƒ½å”¸å‡ºä¾†çš„åç¨±ï¼Œ<em>åœ˜éšŠæºé€šæœƒä½¿ç”¨åˆ°</em></li><li>ä½¿ç”¨å¯è¢«æœå°‹åˆ°çš„åå­— <em>é™¤éŒ¯æ™‚æœƒä½¿ç”¨åˆ°</em></li><li>ä»‹é¢èˆ‡ç¹¼æ‰¿ï¼Œå¯ä½¿ç”¨ Studentã€StudentImplä½œç‚ºå‘½å</li><li>å‘½åæ‡‰è©²ç›´è§€ï¼Œç¬¦åˆé–‹ç™¼äººå“¡çš„æƒ³åƒ</li><li>é¡åˆ¥æ‡‰ä»¥åè©å‘½åã€æ–¹æ³•æ‡‰ä»¥å‹•è©å‘½å</li></ul><hr><h3 id="å‡½å¼"><a href="#å‡½å¼" class="headerlink" title="å‡½å¼"></a>å‡½å¼</h3><p>è¨­è¨ˆåŸå‰‡</p><ul><li>è®“å‡½å¼åªåšä¸€ä»¶äº‹ï¼ŒSRPã€‚</li><li>åƒæ•¸çš„æ•¸é‡è¶Šå°‘è¶Šå¥½ï¼Œæ–¹ä¾¿é–‹ç™¼è€…äº†è§£åƒæ•¸å°æ•´ç†è¼¸å‡ºçš„å½±éŸ¿</li><li>ä¸è¦å¸¶booleané€²functionï¼Œé•èƒŒäº†SRPã€‚</li><li>å¦‚æœè¦å‚³å…¥å¤šå€‹åƒæ•¸ï¼Œç”¨ç‰©ä»¶åŒ…è£æœƒæ›´å¥½ï¼Œè‡³å°‘ç¬¦åˆç›¸åŒæ¦‚å¿µã€‚</li><li>è¼¸å…¥èˆ‡æŒ‡ä»¤åˆ†é›¢ï¼Œex:åˆ¤æ–·æ¢ä»¶èˆ‡æ“ä½œç‰©ä»¶æ˜¯å…©å€‹ä¸åŒå±¤ç´šçš„æ¦‚å¿µï¼Œä¸è¦æ”¾åœ¨ä¸€èµ·</li><li>ä¸è¦æœ‰å‰¯ä½œç”¨ï¼Œé¿å…ä¸å¯é æ–™çš„BUGç™¼ç”Ÿ</li><li>ä»¥try catch å–ä»£if åˆ¤æ–·ï¼Œæ¸›å°‘å·¢ç‹€è¿´åœˆã€‚</li></ul><hr><h3 id="ç‰©ä»¶èˆ‡è³‡æ–™çµæ§‹"><a href="#ç‰©ä»¶èˆ‡è³‡æ–™çµæ§‹" class="headerlink" title="ç‰©ä»¶èˆ‡è³‡æ–™çµæ§‹"></a>ç‰©ä»¶èˆ‡è³‡æ–™çµæ§‹</h3><ol><li><p>æŠ½è±¡åŒ–è¨­è¨ˆç•Œé¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">FuelTankCapacityInGallons();<br><span class="hljs-type">double</span> <span class="hljs-title function_">getGallonsOfGasoline</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Vehicle</span> &#123;<br>    <span class="hljs-type">double</span> <span class="hljs-title function_">getPercentFuelRemaining</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¡ç”¨å¾Œè€…çš„è¨­è¨ˆæ–¹å¼å¯ä»¥éš±è—è³‡æ–™çš„ç´°ç¯€ã€‚</p></li><li><p>è³‡æ–™çµæ§‹çš„ç¨‹å¼ç¢¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NPC</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">talk</span><span class="hljs-params">(Object object)</span> &#123;<br>        <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> Merchant) &#123;<br>            <span class="hljs-comment">// do something</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (object <span class="hljs-keyword">instanceof</span> Smith) &#123;<br>            <span class="hljs-comment">// do something</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">&quot;error&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ul><li>åœ¨NPCé¡åˆ¥ä¸­ï¼Œè¦æ“´å……ä¸€å€‹æ–°çš„é¡åˆ¥å¾ˆéº»ç…©ï¼Œå¿…é ˆè¦æ›´å‹•æ‰€æœ‰åŸå…ˆç›¸é—œçš„ç¨‹å¼ç¢¼ï¼Œä»¥ç¬¦åˆå‡½å¼çš„æ¶æ§‹</li><li>åœ¨NPCé¡åˆ¥ä¸­ï¼Œæ–°å¢æ–°çš„æ–¹æ³•å¾ˆå®¹æ˜“ï¼Œä¸éœ€æ›´å‹•æ—¢æœ‰ç¨‹å¼ç¢¼</li><li></li></ul><ol start="2"><li>ç‰©ä»¶å°å‘çš„ç¨‹å¼ç¢¼<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Merchant</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NPC</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">talk</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// do something</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Smith</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NPC</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">talk</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// do something</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">NPC</span> &#123;<br>    talk();<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><ul><li>åœ¨NPCé¡åˆ¥ä¸­ï¼Œè¦å¯«ä¸€å€‹æ–°çš„é¡åˆ¥å¾ˆå®¹æ˜“ï¼Œä¸éœ€æ›´å‹•æ—¢æœ‰ç¨‹å¼ç¢¼</li><li>åœ¨NPCé¡åˆ¥ä¸­ï¼Œæ–°å¢æ–°çš„æ–¹æ³•å¾ˆéº»ç…©ï¼Œå¿…é ˆè¦æ›´å‹•æ¯ä¸€å€‹ç¹¼æ‰¿NPCçš„é¡åˆ¥</li></ul><h3 id="ä¾‹å¤–è™•ç†"><a href="#ä¾‹å¤–è™•ç†" class="headerlink" title="ä¾‹å¤–è™•ç†"></a>ä¾‹å¤–è™•ç†</h3><ul><li>è¦–æƒ…æ³ï¼Œé¸æ“‡å°è£Exception</li><li>ä¸è¦å‚³éNull</li></ul><p>ç¯€éŒ„<Clean Code> Ch1~Ch8</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Clean Code</tag>
      
      <tag>Programming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git å¸¸ç”¨æŒ‡ä»¤èˆ‡èªªæ˜</title>
    <link href="/2024/12/24/Git-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E8%88%87%E8%AA%AA%E6%98%8E/"/>
    <url>/2024/12/24/Git-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E8%88%87%E8%AA%AA%E6%98%8E/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘å€‘å¸¸ç”¨çš„æŒ‡ä»¤æœ‰å¾ˆå¤šï¼Œå°è³‡è¨Šç§‘æŠ€çš„å­¸ç”Ÿä¾†èªªï¼ŒGitçš„ä½¿ç”¨å·²ç¶“æ˜¯åŸºç¤äº†ï¼Œæ›´ä½•æ³æ˜¯ä¸€åè³‡è¨Šå·¥ä½œè€…ã€‚æœ¬æ¬¡æ˜¯è¦æ•´ç†é‚£äº›å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œä»¥åŠé‡å°ä¸€äº›ç´°ç¯€å»åšé‡æ¸…å­¸ç¿’ã€‚<br>å¸¸ç”¨çš„æŒ‡ä»¤æ•´ç†å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">git init #åˆå§‹åŒ–Git Repo<br>git status #æŸ¥çœ‹ Git ç›®éŒ„æ›´å‹•ç‹€æ…‹<br>git log # æŸ¥çœ‹commitç´€éŒ„<br>git add  # å°‡trackedçš„è³‡æ–™ï¼Œæ·»åŠ åˆ°addå€åŸŸ<br>git commit # å°‡addå€åŸŸçš„è³‡æ–™ï¼Œæäº¤ä¸€ç­†ç´€éŒ„<br>git push # æŠŠæœ¬åœ°çš„commitæäº¤è‡³é ç«¯ä¼ºæœå™¨<br>git reset -soft # ç”¨ä¾†æ‹†commitç”¨çš„ æœƒæŠŠHEADé‡è£½åˆ°æŒ‡å®šä½ç½®<br>git reset -mixed # ç”¨ä¾†æ‹†commitç”¨çš„ é™¤äº†æŠŠHEADé‡è£½åˆ°æŒ‡å®šä½ç½®ï¼Œé‚„æœƒæŠŠè³‡æ–™è®Šæˆuntrackedç‹€æ…‹<br>git reset -hard # æœ€å°‘ç”¨ï¼Œé‡è£½åˆ°æŒ‡å®šä½ç½®ï¼Œä¸¦åˆªé™¤ä¹‹å‰ä½ç½®åˆ°é‡è£½é»ä¹‹å‰çš„commitï¼Œå±éšª!<br>git checkout: ç”¨ä¾†åˆ‡æ›åˆ†æ”¯æˆ–æ¢å¾©æª”æ¡ˆï¼Œåˆ‡æ›åˆ°åˆ†æ”¯æ™‚ï¼Œä½¿HEAD æŒ‡å‘è©²åˆ†æ”¯ã€‚<br>git merge: å°‡å¦ä¸€å€‹åˆ†æ”¯çš„æ›´æ”¹åˆä½µåˆ°ç•¶å‰åˆ†æ”¯ä¸­ï¼Œæœƒç”¢ç”Ÿåˆä½µæäº¤ã€‚<br>git rebase: ç”¨ä¾†å°‡ä¸€å€‹åˆ†æ”¯çš„æäº¤ç§»åˆ°å¦ä¸€å€‹åˆ†æ”¯ä¸Šï¼Œé€šå¸¸ç”¨ä¾†ä¿æŒæäº¤æ­·å²ç°¡æ½”ï¼Œå¯ä»¥å–ä»£ git merge çš„æ–¹å¼ã€‚<br>git branch: åˆ—å‡ºã€å‰µå»ºæˆ–åˆªé™¤åˆ†æ”¯ã€‚<br></code></pre></td></tr></table></figure><h4 id="Detach-HEAD-è¡¨ç¤ºç•¶å‰ä¸åœ¨ä»»ä½•åˆ†æ”¯ä¸Šï¼ŒHEAD-ç›´æ¥æŒ‡å‘æŸå€‹æäº¤ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨-git-checkout-è¿”å›åˆ†æ”¯ã€‚"><a href="#Detach-HEAD-è¡¨ç¤ºç•¶å‰ä¸åœ¨ä»»ä½•åˆ†æ”¯ä¸Šï¼ŒHEAD-ç›´æ¥æŒ‡å‘æŸå€‹æäº¤ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨-git-checkout-è¿”å›åˆ†æ”¯ã€‚" class="headerlink" title="Detach HEAD: è¡¨ç¤ºç•¶å‰ä¸åœ¨ä»»ä½•åˆ†æ”¯ä¸Šï¼ŒHEAD ç›´æ¥æŒ‡å‘æŸå€‹æäº¤ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ git checkout è¿”å›åˆ†æ”¯ã€‚"></a>Detach HEAD: è¡¨ç¤ºç•¶å‰ä¸åœ¨ä»»ä½•åˆ†æ”¯ä¸Šï¼ŒHEAD ç›´æ¥æŒ‡å‘æŸå€‹æäº¤ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨ git checkout è¿”å›åˆ†æ”¯ã€‚</h4><h4 id="Fast-forward-ç•¶ç›®æ¨™åˆ†æ”¯å¯ä»¥ç›´æ¥å‘å‰æ¨é€²è€Œä¸éœ€è¦åˆä½µæäº¤ï¼Œæœƒè‡ªå‹•é€²è¡Œå¿«é€²åˆä½µï¼Œä¿ç•™ç°¡æ½”çš„æ­·å²ã€‚"><a href="#Fast-forward-ç•¶ç›®æ¨™åˆ†æ”¯å¯ä»¥ç›´æ¥å‘å‰æ¨é€²è€Œä¸éœ€è¦åˆä½µæäº¤ï¼Œæœƒè‡ªå‹•é€²è¡Œå¿«é€²åˆä½µï¼Œä¿ç•™ç°¡æ½”çš„æ­·å²ã€‚" class="headerlink" title="Fast-forward: ç•¶ç›®æ¨™åˆ†æ”¯å¯ä»¥ç›´æ¥å‘å‰æ¨é€²è€Œä¸éœ€è¦åˆä½µæäº¤ï¼Œæœƒè‡ªå‹•é€²è¡Œå¿«é€²åˆä½µï¼Œä¿ç•™ç°¡æ½”çš„æ­·å²ã€‚"></a>Fast-forward: ç•¶ç›®æ¨™åˆ†æ”¯å¯ä»¥ç›´æ¥å‘å‰æ¨é€²è€Œä¸éœ€è¦åˆä½µæäº¤ï¼Œæœƒè‡ªå‹•é€²è¡Œå¿«é€²åˆä½µï¼Œä¿ç•™ç°¡æ½”çš„æ­·å²ã€‚</h4><p>å¤§è‡´æ•´ç†åˆ°é€™é‚Šï¼Œå¾Œä¾†å…¶å¯¦æˆ‘è¶Šä¾†è¶Šå°‘ç”¨äº†ï¼Œä¸»è¦æ˜¯IDEå…§å»ºGitåŠŸèƒ½å¾ˆå¤šéƒ½æ¯”Git Bash shell çš„æ›´æ˜“æ–¼ä½¿ç”¨äº†ï¼Œä¹Ÿæœ‰æ›´ä¾¿æ·çš„ä¸€äº›åšæ³•ï¼Œæ‰€ä»¥ä»¥ä¸Šåƒ…ä½œå€‹äººç´€éŒ„ä¹‹ç”¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»€éº¼æ¨£çš„ç¨‹å¼ç¢¼éœ€è¦è¢«é‡æ§‹ï¼Ÿ</title>
    <link href="/2024/12/23/%E4%BB%80%E9%BA%BC%E6%A8%A3%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E9%9C%80%E8%A6%81%E8%A2%AB%E9%87%8D%E6%A7%8B%EF%BC%9F/"/>
    <url>/2024/12/23/%E4%BB%80%E9%BA%BC%E6%A8%A3%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E9%9C%80%E8%A6%81%E8%A2%AB%E9%87%8D%E6%A7%8B%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p>ä»€éº¼æ¨£çš„ç¨‹å¼ç¢¼éœ€è¦è¢«é‡æ§‹ï¼Ÿ</p><p>é‚„è¨˜å¾—ç•¶æˆ‘åœ¨æ‰¾ç¬¬ä¸€ä»½å¾Œç«¯å·¥ä½œæ™‚ï¼Œæ›¾ç¶“æœ‰è¢«é¢è©¦å®˜å•åˆ°æœ‰æ²’æœ‰éé‡æ§‹çš„ç¶“é©—ï¼Ÿç•¶æ™‚çš„æˆ‘èœå¾—ä¸€æ‰¹ï¼Œé€£é‡æ§‹æ˜¯ä»€éº¼éƒ½è¬›ä¸å‡ºä¾†ï¼Œæœ€å¾Œåªåååååœ°èªªè‡ªå·±æ²’æœ‰é‡æ§‹çš„ç¶“é©—ã€‚å¾Œä¾†ï¼Œå—åˆ°æ•™è¨“çš„æˆ‘è®“è‡ªå·±æ…¢æ…¢å»äº†è§£é‡æ§‹ä¹‹å¾Œï¼Œæ‰æ…¢æ…¢ç™¼ç¾ã€Œé‡æ§‹ã€ä¸¦ä¸æ˜¯ä»€éº¼é«˜å¤§ä¸Šçš„åè©ï¼Œæœ‰æ™‚ç”šè‡³ä½ é‚„æ²’è½éé€™å€‹åè©æ™‚ï¼Œå°±å·²ç¶“åœ¨é‡æ§‹ä¹‹ä¸­äº†ã€‚<br>é‡æ§‹â”€â”€æ„æŒ‡åœ¨ä¸å½±éŸ¿ç¨‹å¼ç¢¼åŠŸèƒ½çš„æƒ…æ³ä¸‹ï¼Œé€²è¡Œç¨‹å¼ç¢¼çš„æ•ˆèƒ½ã€å¯è®€æ€§ã€å¯ç¶­è­·æ€§ç­‰ç­‰é€²è¡Œèª¿æ•´çš„è¡Œç‚ºã€‚å°åˆ°ä¿®æ­£å‘½åä¸è‰¯çš„è®Šæ•¸åç¨±ï¼Œå¤§åˆ°å¥—ç”¨è¨­è¨ˆæ¨¡å¼ï¼Œèª¿æ•´ç³»çµ±çš„æ¶æ§‹ ( ä½†å‰ææ˜¯åŠŸèƒ½ä¸å—å½±éŸ¿ )ï¼Œé€™äº›éƒ½å¯ä»¥ç®—æ˜¯é‡æ§‹ã€‚<br>é‡æ§‹â”€â”€é‚£äº›è®Šæ•¸ã€æ–¹æ³•ç­‰ç´šçš„é‡æ§‹ï¼Œå…¶å¯¦éƒ½ä¸ç®—å¤ªé›£ã€‚é€šå¸¸æœƒè®“äººå›°æƒ‘çš„é»æ›´å¤šæ˜¯åœ¨æ–¼ï¼Œæˆ‘ä¸ç¢ºå®šé€™æ®µç¨‹å¼ç¢¼éœ€ä¸éœ€è¦è¢«é‡æ§‹ã€‚å‡è¨­æœ‰ä¸€æ®µé—œæ–¼äº¤æ˜“çš„ç¨‹å¼ç¢¼ï¼Œä¸­é–“æœ‰è¶…é100è¡Œçš„é©—è­‰ç¨‹å¼ç¢¼ï¼Œä½ å¯èƒ½ç›´è¦ºæ€§åœ°è¦ºå¾—æ‡‰è©²è¦æå–å‡ºä¾†ä½œç‚ºä¸€å€‹ç¨ç«‹çš„æ–¹æ³•ã€‚ä½†åœ˜éšŠçš„å…¶ä»–äººä¹Ÿè¨±æ—©å°±ç¿’æ…£äº†é€™æ¨£å¯«ï¼Œé€™æ¨£ä¸€ä¾†ï¼Œæ˜¯å¦çœŸçš„èƒ½å¤ å¹«åŠ©åˆ°å…¶ä»–äººç†è§£é€™æ®µç¨‹å¼ç¢¼ï¼Ÿ<br>é€™èªªæ˜äº†å…¶å¯¦å¾ˆå¤šæ¨™æº–æœ€çµ‚ä½ ä¾ç„¶å¾—Alignè‡ªå·±çš„é–‹ç™¼åœ˜éšŠï¼Œè€Œéç›²ç›®éµå¾æŸäº›æ¨™æº–æˆ–è¦ç¯„ã€‚ç•¶ç„¶èƒ½å¤ åˆ¤æ–·å‡ºå“ªéƒ¨åˆ†çš„ç¨‹å¼ç¢¼æš´éœ²äº†ä¸å¿…è¦çš„ç´°ç¯€é€™é»ï¼Œä¹Ÿéœ€è¦ä¸€äº›ç¶“é©—ã€‚<br>å°æ–¼é€™ç¨®æ¨¡ç³Šä¸æ¸…çš„æ„Ÿè¦ºï¼Œæœ‰äº›äººå¯ä»¥ç„¡å¸«è‡ªé€šï¼ŒæŠ“å‡ºåˆç†çš„å¹³è¡¡é»ã€‚å¦‚æœä¸æ˜¯ï¼Œæˆ‘æœƒæ¨è–¦çœ‹Kent Beckçš„ã€Šæ¸¬è©¦é©…å‹•é–‹ç™¼ã€‹ï¼Œè£¡é¢è©³ç´°åœ°æè¿°äº†å¦‚ä½•å¾ä¸€å€‹è‚¥èƒ–çš„ç¨‹å¼ç¢¼ä¸æ–·èª¿æ•´ï¼Œé€éå¤§é‡çš„æ¸¬è©¦ï¼Œä¸€æ­¥æ­¥å°‡ç‰©ä»¶çš„ä¾è³´åˆ†é›¢èˆ‡å‡èšåŠ›çš„æå‡ã€‚é›–ç„¶TDDçš„é–‹ç™¼æµç¨‹æ˜¯å¦é©åˆé–‹ç™¼åœ˜éšŠä½¿ç”¨æ˜¯å€‹å¥½å•é¡Œã€‚ä½†åšç‚ºå­¸ç¿’é‡æ§‹ç¨‹å¼ç¢¼çš„ç¬¬ä¸€ç«™ä¾†èªªï¼Œæˆ‘é‚„æ˜¯èªç‚ºèªªã€Šæ¸¬è©¦é©…å‹•é–‹ç™¼ã€‹æœƒå¾ˆé©åˆåˆå‡ºèŒ…å»¬çš„å·¥ç¨‹å¸«ã€‚<br>æ­¤å¤–ï¼Œå°æ–¼é‡æ§‹ç¨‹å¼ç¢¼é€™ä»¶äº‹ï¼ŒTDDé‚„æåˆ°ä¸€å€‹æˆ‘èªç‚ºæœ€é‡è¦çš„è§€å¿µã€‚ã€Œé¦–å…ˆå¿…é ˆè¦æœ‰å®Œå–„ã€è¦†è“‹ç‡é«˜çš„æ¸¬è©¦ç¨‹å¼ç¢¼ï¼Œä¸ç„¶å°±åªæ˜¯åœ¨é‡å¯«è€Œå·²ã€</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Refactor</tag>
      
      <tag>å¿ƒå¾—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨Github Page + Hexo + Vercel å»ºç«‹ä½ çš„éƒ¨è½æ ¼</title>
    <link href="/2024/12/22/%E7%94%A8Github-Page-Hexo-Vercel-%E5%BB%BA%E7%AB%8B%E4%BD%A0%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/"/>
    <url>/2024/12/22/%E7%94%A8Github-Page-Hexo-Vercel-%E5%BB%BA%E7%AB%8B%E4%BD%A0%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC/</url>
    
    <content type="html"><![CDATA[<p>ä½œç‚ºä¸€åé–‹ç™¼è€…ï¼ŒGithubå·²ç¶“æ˜¯æ¯å¤©éƒ½ç„¡æ³•è„«é›¢çš„å·¥å…·ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒGithub Pageä¹Ÿæ˜¯è¨±å¤šæ–°æ‰‹å·¥ç¨‹å¸«çš„å¥½æœ‹å‹ï¼Œä½¿ç”¨ç°¡å–®çš„æŒ‡ä»¤å°±å¯ä»¥è®“æ–°æ‰‹å·¥ç¨‹å¸«å»ºç«‹ä¸€å€‹å±¬æ–¼è‡ªå·±çš„éƒ¨è½æ ¼ï¼Œä»¥ä¸‹å°±æ˜¯ç°¡å–®ä»‹ç´¹è¦æ€éº¼æ­å»ºä¸€å€‹è‡ªå·±çš„Github Blog<br>æˆ‘å€‘ä¸»è¦ä½¿ç”¨Hexoä½œç‚ºæ¡†æ¶ï¼Œä»–ä¸»è¦ä»¥Node.jsä½œç‚ºç·¨è­¯å·¥å…·ã€‚</p><h3 id="ç’°å¢ƒå®‰è£"><a href="#ç’°å¢ƒå®‰è£" class="headerlink" title="ç’°å¢ƒå®‰è£"></a>ç’°å¢ƒå®‰è£</h3><ol><li>Git(<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a>) ç‰ˆæœ¬æ§åˆ¶å·¥å…·</li><li>Node.js(<a href="https://nodejs.org/zh-tw">https://nodejs.org/zh-tw</a>) åŸ·è¡ŒHexoæ¡†æ¶å¿…å‚™Node.jsçš„å¥—ä»¶ç®¡ç†å·¥å…·ã€‚</li></ol><p>å®‰è£å®Œå¾Œï¼Œæ‰“é–‹CMDï¼Œè¼¸å…¥ â€œnode -vâ€ èˆ‡ â€œgit -vâ€ çœ‹çœ‹å…©è€…æ˜¯ä¸æ˜¯éƒ½æœ‰å®‰è£æˆåŠŸï¼Œæœ‰çš„è©±å°±ç¹¼çºŒä¸‹å»ã€‚</p><h1 id="æ­¥é©Ÿè§£èªª"><a href="#æ­¥é©Ÿè§£èªª" class="headerlink" title="æ­¥é©Ÿè§£èªª"></a>æ­¥é©Ÿè§£èªª</h1><h4 id="æœ¬æ©Ÿè¨­å®š"><a href="#æœ¬æ©Ÿè¨­å®š" class="headerlink" title="æœ¬æ©Ÿè¨­å®š"></a>æœ¬æ©Ÿè¨­å®š</h4><ol><li>å»ºç«‹ä½ çš„å·¥ä½œè³‡æ–™å¤¾ã€‚</li><li>åœ¨ä½ å»ºç«‹çš„å·¥ä½œè³‡æ–™å¤¾ç›®éŒ„ä¸‹ï¼Œé»é¸å³éµ â€œOpen Git Bashâ€ï¼Œé–‹å•ŸGit cmd</li><li>å®‰è£Hexo è¼¸å…¥â€npm install -g hexo-cliâ€ npm æ˜¯ node.jsçš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œ-g ä»£è¡¨åœ¨è³‡æ–™å¤¾å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨(global)ï¼Œhexo-cliæ˜¯æˆ‘å€‘è¦å®‰è£çš„node.jså¥—ä»¶</li><li>å®‰è£å®Œå¾Œè¼¸å…¥â€hexo -vâ€ ç¢ºèªhexo æ˜¯å¦æœ‰æˆåŠŸå®‰è£ï¼ŒæˆåŠŸçš„è©±ç¹¼çºŒã€‚</li><li>åœ¨ä½ çš„å·¥ä½œç›®éŒ„ä¸‹åˆå§‹åŒ–hexoè³‡è¨Š CMDè¼¸å…¥â€hexo initâ€ èˆ‡ â€œnpm installâ€</li><li>å®‰è£å®Œå¾Œè¼¸å…¥ â€œhexo sâ€ å•Ÿç”¨hexoé‹ä½œçš„ä¼ºæœå™¨ç¯„ä¾‹</li><li>ä½ æ‡‰è©²æœƒçœ‹åˆ°è¨Šæ¯ â€œHexo is running at port 4000â€ï¼Œé€™æ™‚å¯ä»¥é–‹å•ŸURLç¢ºèªçœ‹çœ‹ã€‚</li></ol><p>é€™æ¨£ä¸€ä¾†åŸºæœ¬çš„å®‰è£å°±å®Œæˆäº†ï¼</p><h4 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h4><ol><li>è¨»å†ŠGithub</li><li>ä»¥â€ä½ çš„åå­—.github.ioâ€å»ºç«‹Repositoryã€‚</li></ol><h4 id="éƒ¨ç½²è‡³GithubPage"><a href="#éƒ¨ç½²è‡³GithubPage" class="headerlink" title="éƒ¨ç½²è‡³GithubPage"></a>éƒ¨ç½²è‡³GithubPage</h4><ol><li>åœ¨Hexoå·¥ä½œè³‡æ–™å¤¾ä¸‹å®‰è£å¥—ä»¶ â€œnpm install hexo-deployer-git â€“saveâ€</li><li>æ‰“é–‹_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹è¨­å®š<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">type:</span> git<br><span class="hljs-symbol">repository:</span> &lt;ä½ çš„GithubPageè·¯å¾‘&gt;<br><span class="hljs-symbol">branch:</span> &lt;ä½ è¦æ¨çš„åˆ†æ”¯&gt;<br></code></pre></td></tr></table></figure>ä¿®æ”¹å®Œå¾Œï¼Œæˆ‘å€‘è¦é‡æ–°æ‰“åŒ…ï¼Œåœ¨cmd è¼¸å…¥ â€œhexo gâ€ ç”¢ç”Ÿéœæ…‹æ–‡ä»¶ã€‚<br>æ¥è‘—è¼¸å…¥ â€œhexo dâ€ï¼ŒæŠŠä½ çš„Hexo Pageæ¨åˆ°Githubä¸Šã€‚<br>æ¥è‘—æ‰“é–‹ä½ çš„Repositoryï¼Œä¸¦è§€å¯ŸActionsä¸­ï¼Œæ˜¯å¦WorkFlowæˆåŠŸåŸ·è¡Œå®Œã€‚å¦‚æœæ­£å¸¸çµæŸï¼Œé‚£æ­å–œä½ ï¼Œä½ å·²ç¶“å®Œæˆäº†ã€‚</li></ol><p>æ„Ÿè¬è§€çœ‹ï¼Œæœ‰ä»»ä½•å•é¡Œæ­¡è¿ä¸‹æ–¹ç•™è¨€ï¼Œå°±é€™æ¨£æ°æ°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>GithubPage</tag>
      
      <tag>Hexo</tag>
      
      <tag>Vercel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Diary in 2024/11/07</title>
    <link href="/2024/11/07/Diary-in-2024-11-07/"/>
    <url>/2024/11/07/Diary-in-2024-11-07/</url>
    
    <content type="html"><![CDATA[<p>Hi guy, I just started this new series of article. I try to express myself using my English ability. It might be dull,<br>so I assume no one want to see this. Now bro, get to previous page quickly.</p><p>Hmmâ€¦Where should I startâ€¦Oh! I know, I know.<br>My name is LIU,CHIH-MIN, everyone call me Clark at work. I worked as a software engineer for more than two years.<br>As a software engineer, Iâ€™m best at using Java to develop web application. I have tried many language of programming in my<br>first year engineer days. I have used Python,Javascript,Go,Kolin,Dart. Although this experience. I still decided to put Java<br>as my best skill. The reason is Java has the most active community, I can easy find out the resolution of my issue. Moreover,<br>active community also means better ecosystem. Although it does have some weekly, but it doesnâ€™t affect me to recongize it as<br>a best choice of learning programming.<br>Talk enough about work, let write somethin about myself, shall we?<br>I got admit that I am not a good software engineer, for I have not get satisfactory for now in my career. It troubled me for a<br>long time. I always question myself, did I really feel enough? I am now having a cozy life, I have time to play mobile game, listen<br>Youtube films, have time to sleep 8 hours a day. Sometime I found myself is a orphange of IT. For most of my college classmate go to<br>Studying for a Master Degree. I was the only one who tries to fight as a college student. After these two years, I do find out that<br>there will always have something I donâ€™t even know or hear about. I have get used to this situation. I tries to learning as much as I<br>can. But I can never be better than those who overtime throug holidays.<br>I started to think maybe this is what we called destiny, maybeâ€¦just maybe.</p>]]></content>
    
    
    <categories>
      
      <category>English</category>
      
    </categories>
    
    
    <tags>
      
      <tag>English Diary Personal</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring MapStruct</title>
    <link href="/2024/10/21/Spring-MapStruct/"/>
    <url>/2024/10/21/Spring-MapStruct/</url>
    
    <content type="html"><![CDATA[<p>åœ¨Javaçš„æ­·å²ä¸­ï¼Œæˆ‘å€‘ç‚ºäº†æ›´è²¬ä»»åˆ†æ˜çš„è™•ç†è³‡æ–™ï¼Œèª•ç”Ÿå‡ºäº†è¨±å¤šç‰©ä»¶ï¼Œå¦‚å°æ‡‰è³‡æ–™åº«çš„Persistent Object(PO)ã€ç”¨ä¾†å‚³è¼¸æºé€šä½¿ç”¨çš„Data Transfer Object(DTO)ã€ä»¥åŠç”¨ä¾†é¡¯ç¤ºçš„Value Object(VO)ï¼Œç­‰ç­‰â€¦</p><p>é€™æ¨£é‡å°åŒä¸€å€‹(å»£ç¾©ä¾†èªª)ç‰©ä»¶ï¼Œæ ¹æ“šä¸åŒä½¿ç”¨æƒ…å¢ƒé€²è¡Œå°è£ï¼Œå¾ˆå¥½å±•ç¾å‡ºJavaçš„ç‰¹è‰²(éš±è—ä¸å¿…è¦çš„ç´°ç¯€)ï¼Œä½†ç¼ºé»æ˜¯ç®¡ç†é€™äº›ç‰©ä»¶è®Šå¾—æ¯”è¼ƒéº»ç…©ï¼Œæˆ‘å€‘æœƒç¶“å¸¸å°‡ä¸€å€‹ç‰©ä»¶è½‰æ›ç‚ºå¦å¤–ä¸€å€‹ç‰©ä»¶ï¼Œæ¯”æ–¹èªªæˆ‘å€‘æŠŠDTOè½‰ç‚ºPOä¸¦å­˜å…¥è³‡æ–™åº«ä¸­ã€‚é‚£æœ‰æ²’æœ‰ä¸€å€‹æ–¹æ³•å¯ä»¥å¹«åŠ©æˆ‘å€‘è™•ç†ç‰©ä»¶è½‰æ›ã€‚</p><p>æœ‰ï¼Œå°±ä»Šå¤©è¦ä»‹ç´¹çš„Mapstructã€‚MapStructæ¯”èµ·å‚³çµ±å¸¸çœ‹åˆ°çš„ObjectMapperï¼Œå¤šäº†æ›´å¤šçš„åŠŸèƒ½å¯ä»¥ä½¿ç”¨ï¼Œä»¥ç¬¦åˆç¾åœ¨æ›´è¤‡é›œçš„å ´æ™¯ã€‚</p><p>è¦ä½¿ç”¨Mapstructï¼Œä½ é¦–å…ˆè¦å°å…¥ä¾è³´ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;dependency&gt;<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mapstruct<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mapstruct<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span></span><br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.6.0.Beta1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span></span><br>&lt;/dependency&gt;<br></code></pre></td></tr></table></figure><p>å‡è¨­æˆ‘å€‘ç¾åœ¨æœ‰ä¸€éš»è¨»å†ŠAPIï¼Œä»–è² è²¬å°‡å‚³ä¾†çš„æœƒå“¡è³‡æ–™ï¼Œåˆ¤æ–·æ˜¯å¦å¯ä»¥è¢«è¨»å†Šï¼Œä¸¦å°‡è³‡æ–™å­˜å…¥è³‡æ–™åº«ä¸­ï¼Œæˆ‘å€‘ä¸»è¦è¦å°‡Memberè½‰ç‚ºMemberPOï¼Œè¦æ ¼å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Member</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Schema(description = &quot;Unique identifier of the User&quot;, example = &quot;Clark&quot;)</span><br>    <span class="hljs-keyword">private</span> String account;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-keyword">private</span> String phone;<br>    <span class="hljs-keyword">private</span> String address;<br>    <span class="hljs-keyword">private</span> LocalDate birthday;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberPO</span> &#123;<br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span><br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-meta">@Column(nullable = false, unique = true)</span><br>    <span class="hljs-keyword">private</span> String account;<br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-meta">@Column(columnDefinition = &quot;INET&quot;)</span><br>    <span class="hljs-keyword">private</span> InetAddress ip;<br>    <span class="hljs-meta">@Column(name = &quot;wallet_id&quot;)</span><br>    <span class="hljs-keyword">private</span> Long walletId;<br>    <span class="hljs-meta">@Column(nullable = false, unique = true)</span><br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-meta">@Column(name = &quot;phone_number&quot;)</span><br>    <span class="hljs-keyword">private</span> String phoneNumber;<br>    <span class="hljs-meta">@Column(columnDefinition = &quot;TEXT&quot;)</span><br>    <span class="hljs-keyword">private</span> String address;<br>    <span class="hljs-comment">// Update by SQL Trigger</span><br>    <span class="hljs-meta">@Column(name = &quot;created_at&quot;, nullable = false, updatable = false)</span><br>    <span class="hljs-meta">@Temporal(TemporalType.TIMESTAMP)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime createdAt;<br>    <span class="hljs-comment">// Update by SQL Trigger</span><br>    <span class="hljs-meta">@Column(name = &quot;updated_at&quot;, nullable = false)</span><br>    <span class="hljs-meta">@Temporal(TemporalType.TIMESTAMP)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime updatedAt;<br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> MemberStatus.ACTIVE.name();<br>    <span class="hljs-meta">@Column(nullable = false)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">role</span> <span class="hljs-operator">=</span> MemberRole.USER.name();<br>    <span class="hljs-meta">@Column</span><br>    <span class="hljs-keyword">private</span> LocalDate birthdate;<br>    <span class="hljs-meta">@Column(name = &quot;profile_picture_url&quot;)</span><br>    <span class="hljs-keyword">private</span> String profilePictureUrl;<br>    <span class="hljs-meta">@Column(name = &quot;last_login&quot;)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime lastLogin;<br>    <span class="hljs-meta">@Column(name = &quot;login_attempts&quot;, nullable = false)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">loginAttempts</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-meta">@Column(name = &quot;security_question&quot;)</span><br>    <span class="hljs-keyword">private</span> String securityQuestion;<br>    <span class="hljs-meta">@Column(name = &quot;security_answer&quot;)</span><br>    <span class="hljs-keyword">private</span> String securityAnswer;<br>    <span class="hljs-meta">@Column(name = &quot;two_factor_enabled&quot;, nullable = false)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">twoFactorEnabled</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€™å…©å€‹ç‰©ä»¶å·®ç•°å¾ˆå¤§ï¼Œæ¬„ä½åç¨±ï¼Œè³‡æ–™æ•¸é‡ç­‰ç­‰éƒ½ä¸åŒï¼Œè¦æ€éº¼åšå‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘å€‘è¦å…ˆå®šç¾©å‡ºä¸€å€‹MapStructä¾†è™•ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MemberMapper</span> &#123;<br><span class="hljs-comment">// å¯¦ä¾‹åŒ–Mapstruct</span><br>    <span class="hljs-type">MemberMapper</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> Mappers.getMapper(MemberMapper.class);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥è‘—æˆ‘å€‘å¯ä»¥åŠ å…¥æˆ‘å€‘çš„è½‰æ›æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MemberMapper</span> &#123;<br><span class="hljs-comment">// å¯¦ä¾‹åŒ–Mapstruct</span><br>    <span class="hljs-type">MemberMapper</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> Mappers.getMapper(MemberMapper.class);<br>    <br>    MemberPO <span class="hljs-title function_">memberToMemberPo</span><span class="hljs-params">(Member member)</span>;<br>    Member <span class="hljs-title function_">memberPOToMember</span><span class="hljs-params">(MemberPO memberPO)</span>;<br>&#125;<br><span class="hljs-comment">// TEST</span><br><span class="hljs-type">MemberPO</span> <span class="hljs-variable">memberPO</span> <span class="hljs-operator">=</span> MemberMapper.INSTANCE.memberToMemberPo(member);<br><span class="hljs-type">Member</span> <span class="hljs-variable">member</span> <span class="hljs-operator">=</span> MemberMapper.INSTANCE.memberPOToMember(memberPO);<br></code></pre></td></tr></table></figure><p>æˆ‘å»ºç«‹äº†å…©å€‹æ–¹æ³•ï¼Œä»¥æ‡‰å°Memberè½‰MemberPOèˆ‡MemberPOè½‰å›Memberç‰©ä»¶çš„æƒ…å¢ƒã€‚</p><p>åŸºæœ¬ä¸Šåªè¦é€™æ¨£å…©å€‹ç‰©ä»¶å°±å¯ä»¥é€²è¡Œäº’ç›¸è½‰æ›äº†ã€‚ä½†æˆ‘å€‘å‰›å‰›æœ‰æåˆ°ï¼Œå…©è€…ç‰©ä»¶çš„æ¬„ä½åç¨±ä¸¦ä¸ç›¸åŒï¼Œé‡å°é€™éƒ¨åˆ†ï¼Œå¯ä»¥åŠ ä¸Š@Mappingé€²è¡ŒMappingï¼Œå¦‚æœé‚è¼¯æ¯”è¼ƒç‰¹æ®Šï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ›ä¸€å€‹è½‰æ›å™¨ï¼Œæˆ‘å€‘åœ¨åŠ ä¸Šé€™éƒ¨åˆ†å§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapping(source = &quot;phone&quot;,target = &quot;phoneNumber&quot;)</span><br><span class="hljs-meta">@Mapping(source = &quot;birthday&quot;,target = &quot;birthdate&quot;)</span><br><span class="hljs-meta">@Mapping(source = &quot;ip&quot;, target = &quot;ip&quot;, qualifiedByName = &quot;stringToInetAddress&quot;)</span><br>MemberPO <span class="hljs-title function_">memberToMemberPo</span><span class="hljs-params">(Member member)</span>;<br><br><span class="hljs-meta">@Named(&quot;stringToInetAddress&quot;)</span><br>    <span class="hljs-keyword">default</span> InetAddress <span class="hljs-title function_">stringToInetAddress</span><span class="hljs-params">(String ip)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> InetAddress.getByName(ip);<br>        &#125; <span class="hljs-keyword">catch</span> (UnknownHostException e) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Invalid IP address: &quot;</span> + ip, e);<br>        &#125;<br>    &#125;<br><br></code></pre></td></tr></table></figure><p>source ä»£è¡¨ä¾†æºï¼Œä¹Ÿå°±æ˜¯å‚³å…¥çš„ç‰©ä»¶å±¬æ€§ï¼Œtargetå‰‡ä»£è¡¨å›å‚³çš„ç‰©ä»¶å±¬æ€§ï¼Œé€éé€™æ¨£çš„æ–¹å¼å»æ˜ å°„å…©å€‹ç‰©ä»¶ï¼ŒqualifiedByNameå‰‡å¯ä»¥æ›ä¸€å€‹è½‰æ›å™¨ï¼Œä»¥ä¸‹æŠŠStringçš„ IPè½‰æ›ç‚º InetAddressç‰©ä»¶ã€‚</p><p>å¦‚æœä½ æƒ³è¦é‡å°ä¸€äº›æ¬„ä½åšå‡ºé è¨­å€¼ï¼ŸMapstructä¹Ÿæ”¯æ´é€™å€‹åŠŸèƒ½ï¼Œæ¯”æ–¹èªªåœ¨Memberè½‰æ›ç‚ºMemberPOå¾Œè‡ªå‹•é…ç½®è§’è‰²æ¬Šé™ç‚ºä¸€èˆ¬ä½¿ç”¨è€…(USER)ã€ä¸¦é è¨­å¸³è™Ÿç‹€æ…‹ç‚ºå•Ÿç”¨ç‹€æ…‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è½‰å‹å¾Œè¨­å®šé è¨­å€¼</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> memberPO è½‰æ›å°è±¡</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> member è½‰æ›ä¾†æº</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@AfterMapping</span><br><span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDefaultValues</span><span class="hljs-params">(<span class="hljs-meta">@MappingTarget</span> MemberPO memberPO, Member member)</span> &#123;<br>  <span class="hljs-keyword">if</span> (memberPO.getRole() == <span class="hljs-literal">null</span>) &#123;<br>      memberPO.setRole(MemberRole.USER.name());<br>  &#125;<br>  <span class="hljs-keyword">if</span> (memberPO.getStatus() == <span class="hljs-literal">null</span>) &#123;<br>      memberPO.setStatus(MemberStatus.ACTIVE.name());<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šï¼Œæˆ‘å¸¸ç”¨çš„ä¸»è¦æ“ä½œå°±æ˜¯ä»¥ä¸Šé€™äº›äº†ã€‚Mapstructéå¸¸éˆæ´»ï¼Œæä¾›äº†é¡å¤–å¯«ä¸€å€‹æ–¹æ³•é€²è¡Œæ‰‹å‹•è½‰æ›ä»¥å¤–çš„æ–¹æ³•ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥è©¦è©¦çœ‹é€™å€‹å·¥å…·ï¼Œé‚£ä»Šå¤©çš„éƒ¨åˆ†å°±åˆ°é€™è£¡äº†ï¼Œå°±æ˜å¤©è¦‹å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>MapStruct</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Reflection</title>
    <link href="/2024/10/20/Spring-Reflection/"/>
    <url>/2024/10/20/Spring-Reflection/</url>
    
    <content type="html"><![CDATA[<p>Spring Reflectionâ”€â”€åå°„ï¼Œæ˜¯ä¸å°‘æ–°æ‰‹é–‹ç™¼è€…æœƒæ„Ÿåˆ°ä¸ç†Ÿæ‚‰çš„éƒ¨åˆ†ï¼Œè€Œä»–çš„æ¦‚å¿µç¢ºå¯¦ä¹Ÿæ¯”è¼ƒè¤‡é›œï¼Œæœ¬æ¬¡å°±æ˜¯å¥½å¥½è¬›å€‹Reflectionï¼Œä»¥åŠReflectionæ€éº¼ä½¿ç”¨ã€‚</p><p>åœ¨å¹¾ç¯‡å‰æˆ‘å€‘æœ‰æåˆ°éJavaçš„ç”Ÿå‘½é€±æœŸæ˜¯ é€éjavacæŠŠJavaç¨‹å¼ç¢¼è½‰æ›æˆä½å…ƒç¢¼ï¼Œå†ç”¨JVMå»è®€å–ByteCodeä¸¦æŠŠByteCodeè½‰æ›æˆå€‹å¹³å°éƒ½å¯ä»¥æ”¯æ´çš„æ©Ÿå™¨ç¢¼ã€‚è€Œç¨‹å¼ç¢¼çš„é¡åˆ¥éƒ½æ˜¯åœ¨ç·¨è­¯éšæ®µå°±å·²ç¶“è¢«è¼‰å…¥ï¼Œä¸¦å›ºå®šä¸‹ä¾†äº†ã€‚</p><p>è€ŒReflectionæœ€å¤§çš„ç‰¹é»å°±æ˜¯å…è¨±ç¨‹å¼ç¢¼åœ¨åŸ·è¡Œéšæ®µæ‰è¼‰å…¥é¡åˆ¥ã€‚é€™éº¼åšæœ‰ç”šéº¼å¥½è™•å‘¢ï¼Ÿå°±æ˜¯å¯ä»¥å‹•æ…‹åŒ–è™•ç†å•é¡Œï¼Œå‡è¨­ä½ ä»Šå¤©æœ‰ä¸€å€‹ç”¨ä¾†è™•ç†Excelè³‡æ–™çš„ç‰©ä»¶XLSWorkerï¼Œä»–æ“æœ‰ä¸€å€‹readFileæ–¹æ³•ï¼Œä¾†è®€å–xlsçš„è³‡æ–™ã€‚ä»Šå¤©ä½ é–‹ç™¼äº†ä¸€å€‹æ–°çš„åŠŸèƒ½XLSXWorkerï¼Œè€Œä½ æƒ³è¦æ¸¬è©¦é€™å…©å€‹ç‰©ä»¶çš„åŒä¸€å€‹readFile()æ–¹æ³•æ™‚ã€‚é€™æ™‚ï¼Œä½ å°ç¨‹å¼çš„é—œæ³¨é»å°±ä¸æœƒæ˜¯ ç‰©ä»¶æœ¬èº«ï¼Œè€Œæ˜¯ä½ å¸Œæœ›çš„æ–¹æ³•æ˜¯å¦å¯ä»¥å¾—åˆ°ç¬¦åˆæœŸå¾…çš„è¼¸å‡ºã€‚ç¨‹å¼ç¢¼çš„éƒ¨åˆ†ä»¥ä¾‹å­ä¾†èªªï¼Œæœƒåƒé€™æ¨£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ²’æœ‰ä½¿ç”¨Reflectionçš„å¯«æ³•</span><br><span class="hljs-type">XLSService</span> <span class="hljs-variable">xlsService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">XLSService</span>();<br>xlsService.readFile(xlsFile);<br><br><span class="hljs-comment">//åå°„æ–¹æ³•</span><br>Class&lt;?&gt; clazz = Class.forName(<span class="hljs-string">&quot;XLSService&quot;</span>); <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ çš„ XLSService ç±»çš„å…¨é™å®šå</span><br><span class="hljs-type">Object</span> <span class="hljs-variable">xlsServiceInstance</span> <span class="hljs-operator">=</span> clazz.getDeclaredConstructor().newInstance(); <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹</span><br><br><span class="hljs-comment">// 2. é€šè¿‡åå°„è·å– readFile æ–¹æ³•</span><br><span class="hljs-type">Method</span> <span class="hljs-variable">readFileMethod</span> <span class="hljs-operator">=</span> clazz.getMethod(<span class="hljs-string">&quot;readFile&quot;</span>, String.class); <span class="hljs-comment">// å‡è®¾ readFile æ–¹æ³•æ¥å—ä¸€ä¸ª String ç±»å‹çš„å‚æ•°</span><br><br><span class="hljs-comment">// 3. è°ƒç”¨ readFile æ–¹æ³•</span><br>readFileMethod.invoke(xlsServiceInstance, xlsFile); <span class="hljs-comment">// ä¼ å…¥ xlsFile ä½œä¸ºå‚æ•°</span><br></code></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒé‚„å¯ä»¥æƒæé¡åˆ¥ä»¥ä¸‹æ“æœ‰çš„æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥å¾å¤–éƒ¨è¨ªå•é¡åˆ¥çš„ç§æœ‰æ–¹æ³•ï¼Œé€™éƒ¨åˆ†ä½¿å¥¹æœ‰äº†å®‰å…¨æ€§ä¸Šçš„ç–‘æ…®ï¼Œæ¯”æ–¹èªªä»¥ä¸‹çš„ç¨‹å¼å°±å¯ä»¥æƒæå‡ºé¡åˆ¥ä¸‹æœ‰å“ªäº›æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">Class&lt;Person&gt; personClass = Person.class;<br><br>Field[] fields = personClass.getDeclaredFields();<br><span class="hljs-keyword">for</span> (Field i : fields) &#123;<br>    System.out.println(<span class="hljs-string">&quot;Field = &quot;</span>+i.getName()); <span class="hljs-comment">// å°å‡ºé¡åˆ¥ä¸­æ‰€æœ‰çš„å±¬æ€§</span><br>&#125;<br>Method[] methods = personClass.getDeclaredMethods(); <span class="hljs-comment">//å®£å‘Šçš„æ–¹æ³•</span><br><span class="hljs-keyword">for</span> (Method m : methods) &#123;<br>    System.out.println(<span class="hljs-string">&quot;Method = &quot;</span> + m.getName()); <span class="hljs-comment">// å°å‡ºé¡åˆ¥ä¸­æ‰€æœ‰çš„æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å‡è¨­ä½ æ˜¯ä¸€åä¸æ‡·å¥½æ„çš„æ”»æ“Šè€…ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨Reflectionå»è®€å–é¡åˆ¥çš„æ‰€æœ‰å±¬æ€§èˆ‡æ–¹æ³•è—‰è€Œå¾—çŸ¥å¦‚ä½•ç«Šå–æˆ–ç«„æ”¹è³‡æ–™ï¼Œåƒæ˜¯ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œå°±å¯ä»¥ä»»æ„set ç‰©ä»¶çš„å€¼ï¼Œä½ åªéœ€è¦çŸ¥é“é¡åˆ¥çš„æ–¹æ³•åç¨±å°±å¯ä»¥äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> &lt;T&gt; T <span class="hljs-title function_">setObjectValue</span><span class="hljs-params">(Object object,String colName,Class colNameType,Object colVal)</span> <span class="hljs-keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123;<br>    Class&lt;?&gt; aClass = object.getClass(); <span class="hljs-comment">// å–å¾—é¡åˆ¥</span><br>    <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> aClass.getDeclaredMethod(<span class="hljs-string">&quot;set&quot;</span>+StringUtils.capitalize(colName),colNameType); <span class="hljs-comment">// å–å¾—æŒ‡å®šå€¼çš„setæ–¹æ³•</span><br>    method.invoke(object,colVal);<br>    <span class="hljs-keyword">return</span> (T) object;<br>&#125;<br><span class="hljs-comment">// TEST </span><br><span class="hljs-type">Billing</span> <span class="hljs-variable">billing</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Billing</span>();<br><span class="hljs-type">Billing</span> <span class="hljs-variable">billingAfterSetId</span> <span class="hljs-operator">=</span> setObjectValue(billing,<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-type">int</span>.class,id);<br></code></pre></td></tr></table></figure><p>å°å¼Ÿéå»çš„ä½¿ç”¨å ´æ™¯ä¸»è¦é‚„æ˜¯åœ¨æ’°å¯«æ¸¬è©¦æ™‚ä½¿ç”¨æ¯”è¼ƒå¸¸è¦‹ï¼Œæœ‰æ™‚ç•¶ç¨‹å¼ç¢¼è¦æ¨¡å¾ˆå¤§ï¼Œä½ éœ€è¦å»æ¸¬è©¦æŸå€‹ä½ æ’°å¯«å‡ºä¾†çš„privateæ–¹æ³•ï¼Œä½†ä½ åˆä¸æƒ³è¦ä¿®æ”¹æ–¹æ³•çš„ä½œç”¨åŸŸæ™‚ï¼ŒReflectionå°±æ˜¯ä¸€å€‹æ¯”è¼ƒå¥½çš„é¸æ“‡ï¼Œå¦å¤–Reflectionä¹Ÿé©åˆå¤§é‡æ¸¬è©¦ã€‚</p><p>è€ŒReflectionçš„ç¼ºé»ä¹Ÿå¾ˆæ˜é¡¯ã€‚ä¸€ï¼ŒReflectionçš„å¯«æ³•æœƒè®“ç¨‹å¼ç¢¼çš„ç¶­è­·é›£åº¦ç›´ç·šä¸Šå‡ï¼Œå°‘äº†Compilerè‡ªå‹•å¹«ä½ è™•ç†å‹åˆ¥åˆ¤æ–·å¾Œï¼Œå°±é€£å¤§å°å¯«éƒ½æœƒå°è‡´ä½ é–‹ç™¼ä¸ŠåŠŸèƒ½ç•°å¸¸ã€‚äºŒï¼Œå®‰å…¨æ€§ï¼Œå› ç‚ºå¯ä»¥é€éReflectionæ–¹æ³•ç›´æ¥è¨ªå•é¡åˆ¥çš„å…§éƒ¨çµæ§‹èˆ‡è‡ªå‹•è§¸ç™¼æ–¹æ³•ï¼Œå°è‡´å¥¹å¾ˆå±éšªã€‚ä¸‰ï¼Œåœ¨åŸ·è¡ŒæœŸé–“è¨ªå•é¡åˆ¥æœƒç„¡å¯é¿å…åœ°å°è‡´æ•ˆèƒ½ä½è½ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯æˆ‘çš„ä¸€äº›æ•´ç†ï¼Œé‚£éº¼æ˜å¤©è¦‹äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>Reflection</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Projection</title>
    <link href="/2024/10/19/Spring-Projection/"/>
    <url>/2024/10/19/Spring-Projection/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘å€‘åœ¨å‰å¹¾æ¬¡çš„å–®å…ƒä¸­æåˆ°äº†å»¶é²åˆå§‹åŒ–çš„æ¦‚å¿µï¼Œä½†å»¶é²åˆå§‹åŒ–å…¶å¯¦ä¸¦ä¸æ˜¯è§£æ±ºå•é¡Œçš„æ ¹æœ¬æ–¹æ³•ï¼Œç•¶é€™å€‹è­°é¡Œç”¢ç”Ÿæ™‚ï¼Œé€šå¸¸æƒ³è¦è§£æ±ºçš„å•é¡Œå°±æ˜¯â”€â”€æˆ‘å€‘ä¸€æ¬¡æŠ“å‡ºå¤ªå¤šä¸å¿…è¦çš„è³‡æ–™äº†ï¼Œ</p><p>é‚£æœ‰æ²’æœ‰ä¸€å€‹æ–¹æ³•ï¼Œå¯ä»¥è®“æˆ‘å€‘é¸æ“‡åªæŠ“å‡ºéƒ¨åˆ†çš„è³‡æ–™è€Œä¸æ˜¯å…¨éƒ¨å‘¢ï¼Ÿæœ‰çš„ï¼å»æ‰¾å§ï¼æˆ‘æŠŠæ‰€æœ‰çš„è³‡æºéƒ½æ”¾åœ¨é‚£è£¡äº†ï¼é‚£æˆ‘å€‘ä»Šå¤©çš„åˆ†äº«å°±åˆ°é€™è£¡â”€â”€</p><p>å˜–ï¼ä¸è¡Œå—ï¼Ÿå¥½å§ã€‚</p><p>Spring Projection ä¸»è¦æƒ³è¦è§£æ±ºçš„å•é¡Œï¼Œå°±æ˜¯é¿å…æ’ˆå‡ºä¸å¿…è¦çš„è³‡æ–™ï¼Œé€éåœ¨Repository å›å‚³ä¸€å€‹ä»‹é¢è€Œä¸æ˜¯ç‰©ä»¶çš„å½¢å¼ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Part1.</span><br><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Getter</span><br><span class="hljs-meta">@Setter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> &#123;<br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-meta">@OneToOne</span><br>    <span class="hljs-keyword">private</span> Person person;<br>    <span class="hljs-keyword">private</span> String state;<br>    <span class="hljs-keyword">private</span> String city;<br>    <span class="hljs-keyword">private</span> String street;<br>    <span class="hljs-keyword">private</span> String zipCode;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AddressView</span> &#123;<br>    String <span class="hljs-title function_">getZipCode</span><span class="hljs-params">()</span>;<br>    <span class="hljs-meta">@Value(&quot;#&#123;target.city + &#x27; &#x27; + target.state&#125;&quot;)</span><br>    String <span class="hljs-title function_">getCityAndState</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AddressRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Repository</span>&lt;Address, Long&gt; &#123;<br>    List&lt;AddressView&gt; <span class="hljs-title function_">getAddressByState</span><span class="hljs-params">(String state)</span>;<br>&#125;<br><br><span class="hljs-comment">// Test</span><br><span class="hljs-type">AddressView</span> <span class="hljs-variable">addressView</span> <span class="hljs-operator">=</span> addressRepository.getAddressByState(<span class="hljs-string">&quot;CA&quot;</span>).get(<span class="hljs-number">0</span>);<br><span class="hljs-comment">// Hibernate: select address0_.zip_code as col_0_0_ from address address0_ where address0_.state=?</span><br>assertThat(addressView.getZipCode()).isEqualTo(<span class="hljs-string">&quot;90001&quot;</span>);<br>assertThat(addressView.getCityAndState()).isEqualTo(<span class="hljs-string">&quot;Los Angeles CA&quot;</span>);<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¯„ä¾‹ä¸­ï¼Œæ–¼JPAçš„Repositoryä¸­å»ºç«‹äº†getAddressByState()æ–¹æ³•ï¼Œä¸¦æŒ‡å®šå›å‚³ç‰©ä»¶ç‚ºListçš„AddressViewé€™å€‹è‡ªè¨‚ç‰©ä»¶ï¼Œé€™æ¨£çš„æŸ¥è©¢å¥½è™•æ˜¯åªæœƒé¸æ“‡åˆ°è¢«ä½¿ç”¨çš„æ¬„ä½ï¼Œé¿å…é¸æ“‡åˆ°ä¸éœ€è¦çš„ç‰©ä»¶é€ æˆè³‡æºçš„æµªè²»ã€‚</p><p>æ¥è‘—æˆ‘å€‘å†çœ‹ä¸€å€‹ä¾‹å­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Getter</span><br><span class="hljs-meta">@Setter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> String firstName;<br>    <span class="hljs-keyword">private</span> String lastName;<br>    <span class="hljs-meta">@OneToOne(mappedBy = &quot;person&quot;)</span><br>    <span class="hljs-keyword">private</span> Address address;<br>    <span class="hljs-comment">// getters and setters</span><br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonView</span> &#123;<br>    String <span class="hljs-title function_">getFirstName</span><span class="hljs-params">()</span>;<br>    String <span class="hljs-title function_">getLastName</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-meta">@Value(&quot;#&#123;target.firstName + &#x27; &#x27; + target.lastName&#125;&quot;)</span><br>    String <span class="hljs-title function_">getFullName</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AddressView</span> &#123;<br>    PersonView <span class="hljs-title function_">getPerson</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// Test</span><br><span class="hljs-type">AddressView</span> <span class="hljs-variable">addressView</span> <span class="hljs-operator">=</span> addressRepository.getAddressByState(<span class="hljs-string">&quot;CA&quot;</span>).get(<span class="hljs-number">0</span>);<br><span class="hljs-type">PersonView</span> <span class="hljs-variable">personView</span> <span class="hljs-operator">=</span> addressView.getPerson();<br>assertThat(personView.getFirstName()).isEqualTo(<span class="hljs-string">&quot;John&quot;</span>);<br>assertThat(personView.getLastName()).isEqualTo(<span class="hljs-string">&quot;Doe&quot;</span>);<br></code></pre></td></tr></table></figure><p>æˆ‘å€‘ä¿®æ”¹äº†AddressViewï¼Œä½¿ä»–å¯ä»¥å›å‚³é—œè¯ç‰©ä»¶(Person)çš„è³‡æ–™ï¼Œä½†å›å‚³çš„å½¢å¼ä½¿ç”¨äº†å¦å¤–ä¸€å€‹Interfaceæ¥ï¼Œé€éPesonViewä»‹é¢ï¼Œæˆ‘å°±å¯ä»¥è¨ªå•Personé¡åˆ¥çš„firstNameèˆ‡lastNameã€‚</p><p>æ­¤å¤–ï¼ŒProjectioné‚„æœ‰æä¾› å‹•æ…‹æŠ•å½±çš„æ•ˆæœï¼Œæ¯”æ–¹èªªå¯ä»¥åœ¨ä¸Šé¢çš„RepositoryåŠ å…¥é€™ä¸€è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonDto</span> &#123;<br>    <span class="hljs-keyword">private</span> String firstName;<br>    <span class="hljs-keyword">private</span> String lastName;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PersonDto</span><span class="hljs-params">(String firstName, String lastName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.firstName = firstName;<br>        <span class="hljs-built_in">this</span>.lastName = lastName;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonView</span> &#123;<br>    String <span class="hljs-title function_">getFirstName</span><span class="hljs-params">()</span>;<br>    String <span class="hljs-title function_">getLastName</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-meta">@Value(&quot;#&#123;target.firstName + &#x27; &#x27; + target.lastName&#125;&quot;)</span><br>    String <span class="hljs-title function_">getFullName</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PersonRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Repository</span>&lt;Person, Long&gt; &#123;<br>    &lt;T&gt; T <span class="hljs-title function_">findByLastName</span><span class="hljs-params">(String lastName, Class&lt;T&gt; type)</span>;<br>&#125;<br><span class="hljs-comment">//Test</span><br><span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> personRepository.findByLastName(<span class="hljs-string">&quot;Doe&quot;</span>, Person.class);<br><span class="hljs-type">PersonView</span> <span class="hljs-variable">personView</span> <span class="hljs-operator">=</span> personRepository.findByLastName(<span class="hljs-string">&quot;Doe&quot;</span>, PersonView.class);<br><span class="hljs-type">PersonDto</span> <span class="hljs-variable">personDto</span> <span class="hljs-operator">=</span> personRepository.findByLastName(<span class="hljs-string">&quot;Doe&quot;</span>, PersonDto.class);<br><br>assertThat(person.getFirstName()).isEqualTo(<span class="hljs-string">&quot;John&quot;</span>);<br>assertThat(personView.getFirstName()).isEqualTo(<span class="hljs-string">&quot;John&quot;</span>);<br>assertThat(personDto.getFirstName()).isEqualTo(<span class="hljs-string">&quot;John&quot;</span>);<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨å„ç¨®é¡åˆ¥æˆ–ä»‹é¢å»å°è£å›å‚³çš„ç‰©ä»¶ã€‚ç•¶ç„¶ï¼Œè¦ç¢ºä¿å±¬æ€§çš„å‘½åèˆ‡SpringDataJPAçš„é¢¨æ ¼ä¸€è‡´ã€‚</p><p>é‚£ä»Šå¤©çš„éƒ¨åˆ†å°±å…ˆåˆ°é€™é‚Šå§ï¼Œæ˜å¤©è¦‹äº†ã€‚</p><p>åƒè€ƒè³‡æ–™ï¼š</p><p><a href="https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html">https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring IOC èˆ‡ DI</title>
    <link href="/2024/10/19/Spring-IOC-%E8%88%87-DI/"/>
    <url>/2024/10/19/Spring-IOC-%E8%88%87-DI/</url>
    
    <content type="html"><![CDATA[<p>ç•¶åˆå‰›å­¸Springçš„æ™‚å€™ï¼Œçœ‹è‘—æ•™å­¸å¤§è«‡Springçš„è¨­è¨ˆæ¦‚å¿µï¼Œä¸€ç›´éƒ½æ²’æœ‰ä»€éº¼æ„Ÿè¦ºï¼Œç›´åˆ°å¾Œä¾†çœŸæ­£é–‹å§‹çœ‹å¤§å‹å°ˆæ¡ˆæ™‚ï¼Œæ‰æ…¢æ…¢äº†è§£åˆ°Spring IOC èˆ‡ DI çš„æ¦‚å¿µã€‚ å› ç‚ºé€™éƒ¨åˆ† å…¶å¯¦ä¸¦ä¸å¤ªå¥½æè¿°ï¼Œæˆ‘æœƒåƒè€ƒå…¶ä»–äººçš„æè¿°åŠ ä¸Šè‡ªå·±çš„é«”æ‚Ÿæ…¢æ…¢èªªæ˜å®ƒã€‚</p><h3 id="IOC-Inversion-of-Control-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#IOC-Inversion-of-Control-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="IOC (Inversion of Control) æ˜¯ä»€éº¼ï¼Ÿ"></a>IOC (Inversion of Control) æ˜¯ä»€éº¼ï¼Ÿ</h3><p>IOCï¼Œä¸­æ–‡ç¨±ä½œæ§åˆ¶åè½‰ï¼Œæ˜¯Springè¨­è¨ˆä¸Šæœ€ç‚ºæ ¸å¿ƒçš„ä¸€é»ã€‚ä»¥å¾€æ•´å€‹æ‡‰ç”¨ç¨‹å¼çš„ç”Ÿå‘½é€±æœŸæ˜¯ç”±é–‹ç™¼è€…æ‰€é–‹ç™¼çš„ç¨‹å¼ç¢¼å®šç¾©çš„ï¼Œé–‹ç™¼è€…æœƒæ ¹æ“šéœ€æ±‚å»ºç«‹ç•¶ä¸‹æ‰€éœ€è¦çš„æœå‹™ï¼Œæ¯”æ–¹èªªnewä¸€å€‹Scannerå»åµæ¸¬ä½¿ç”¨è€…çš„è¼¸å…¥ç­‰ç­‰ã€‚</p><p>é‚£æ§åˆ¶åè½‰ç°¡å–®ä¾†èªªï¼Œå°±æ˜¯æŠŠæ–°å»ºç«‹ç‰©ä»¶é€™ä¸€ä»¶äº‹ï¼Œäº¤çµ¦æ¡†æ¶å»è™•ç†ï¼Œè€Œä¸å¿…è‡ªå·±æ’°å¯«ã€‚ç‰©ä»¶çš„å®£å‘Šã€ä½¿ç”¨èˆ‡å›æ”¶éƒ½äº¤çµ¦Springæ¡†æ¶å»åŸ·è¡Œï¼Œè®“ä½¿ç”¨è€…å¯ä»¥æ›´å°ˆæ³¨åœ¨é–‹ç™¼çš„ç¨‹å¼ç¢¼ä¸Šé¢ã€‚</p><p>ä¹‹æ‰€ä»¥æœƒé€™æ¨£åšæœ‰å¾ˆå¤šåŸå› ï¼Œæ¯”æ–¹èªªå‰å¹¾æ¬¡è«‡éçš„ï¼Œç‰©ä»¶åœ¨è¢«new ä¹‹å¾Œï¼Œå°±æœƒåœ¨è¨˜æ†¶é«”ä¸­ä½”èµ°ä¸€å¡Šä½å­ï¼Œä¸å¥½å¥½è™•ç†çš„è©±å¯èƒ½æœƒé€ æˆè¨˜æ†¶é«”è³‡æºçš„æµªè²»æˆ–ç„¡æ³•è¢«é‡‹æ”¾ç­‰ç­‰ã€‚é‚£èˆ‡å…¶å¦‚æ­¤å°±äº¤çµ¦æ¡†æ¶å¹«ä½ ç…©æƒ±é€™éƒ¨åˆ†ã€‚</p><p>é‚£DI æ˜¯ä»€éº¼å‘¢ï¼Ÿ DI å°±æ˜¯æŒ‡IOCæ˜¯æ€éº¼è¢«å¯¦ç¾çš„ï¼Œå…¶å¯¦è·ŸSpringæ²’å•¥é—œä¿‚ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>   private int id;<br>   private <span class="hljs-title class_">String</span> name;<br>   private int score;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡è¨­ä½ æƒ³è¦å¼•å…¥Examé€™å€‹ç‰©ä»¶å»å”åŠ©è¨ˆç®—æ•´å­¸æœŸçš„å¹³å‡ï¼Œä½ å¯ä»¥æ€éº¼åšï¼Ÿ</p><ol><li>Attribute Injection å°±æ˜¯ç›´æ¥å¼•å…¥ï¼Œç°¡å–®æš´åŠ›</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>   private int id;<br>   private <span class="hljs-title class_">String</span> name;<br>   private int score;<br>   <br>   @<span class="hljs-title class_">Autowired</span><br>   private <span class="hljs-title class_">ExamService</span> exam;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>Constructor Injection é€éç‰©ä»¶çš„å»ºæ§‹å¼å»æ³¨å…¥ä½ æƒ³ä½¿ç”¨çš„æœå‹™ã€‚</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>&#123;<br>   private int id;<br>   private <span class="hljs-title class_">String</span> name;<br>   private int score;<br>   private <span class="hljs-title class_">ExamService</span> exam;<br>   <br>   @<span class="hljs-title class_">Autowired</span><br>   public <span class="hljs-title class_">Student</span>(int id,<span class="hljs-title class_">String</span> name,<span class="hljs-title class_">ExamService</span> exam) &#123;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>=id;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>=name;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-property">exam</span>=exam;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°±é€™æ¨£ï¼Ÿå°ï¼Œå°±é€™æ¨£ã€‚</p><p>å¦å¤–ï¼Œä½ å€‘è‚¯å®šæœƒæ³¨æ„åˆ° @Autowiredé€™å€‹è¨»è§£å§ï¼Œé€™å€‹è¨»è§£æ˜¯ä»£è¡¨äº†å®ƒè¢«æ³¨å…¥çš„å°è±¡æ˜¯ä¸€å€‹Spring Bean ç‰©ä»¶ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬ç‰©ä»¶ï¼Œé€™ä»£è¡¨çš„æ˜¯æ¡†æ¶æœƒå¹«ä½ åœ¨å°ˆæ¡ˆå•Ÿå‹•éšæ®µæ™‚ï¼Œå°±è™•ç†å¥½ç‰©ä»¶çš„åˆå§‹åŒ–ã€‚</p><p>ä½†å¯ä»¥è¢«Spring å®¹å™¨ç®¡ç†çš„ç‰©ä»¶ï¼Œæœ¬èº«å¿…é ˆå¾—æ˜¯ä¸€å€‹Spring Beanã€‚é€™é»å¾ˆé‡è¦ï¼Œè«‹ç­†è¨˜ã€‚ä»¥ä¸Šé¢çš„ä¾‹å­ä¾†èªªï¼Œä½ å¿…é ˆå°‡Examç‰©ä»¶å®£å‘Šç‚ºä¸€å€‹Spring Beanï¼Œæ‰èƒ½å¤ ä½œç”¨ã€‚åŒæ™‚Studentä¹Ÿå¿…é ˆæ˜¯ä¸€å€‹SpringBean</p><p>Spring Bean å¯ä»¥æ˜¯ä¸€å€‹å±¬æ€§ã€å¯ä»¥æ˜¯ä¸€å€‹æ–¹æ³•ã€ä¹Ÿå¯ä»¥æ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œç”¨é€”åŒ…å±±åŒ…æµ·ï¼Œåœ¨æ­¤ä¸å¤šåšè´…è¿°ã€‚è‡³æ–¼å®£å‘Šç‰©ä»¶æˆç‚ºBeançš„æ–¹æ³•å‘¢â€¦</p><p>èªªåˆ°é€™è£¡ï¼Œä½ æœ‰ç©éå¤©æ­²ä¹‹å’²ç¨»å§¬å—ï¼Ÿä¹Ÿè¨±æ²’æœ‰ï¼Œä½†æ²’é—œä¿‚ï¼Œé€™ä¸é‡è¦ã€‚</p><p>å°‡ç‰©ä»¶å®£å‘Šç‚ºSpring Beançš„æ–¹æ³•æœ‰å¾ˆå¤šç¨®ï¼Œä¹Ÿæ ¹æ“šä½ çš„Javaç‰ˆæœ¬ä¸åŒæœ‰å·®ç•°ã€‚å¸¸è¦‹çš„éƒ¨åˆ†æœ‰</p><p>@RestControllerã€@Serviceã€@Repositoryã€@Componentã€@Configurationã€@Beanç­‰ç­‰ã€‚</p><p>ä½ å¯ä»¥æ ¹æ“šå¯¦éš›å•†æ¥­å ´æ™¯å®£å‘Šç¬¦åˆéœ€æ±‚çš„è¨»è§£ï¼Œä»–å€‘å„è‡ªæœ‰ä¸åŒçš„ç”¨é€”ï¼Œå¯ä»¥å»äº†è§£çœ‹çœ‹ã€‚</p><p>ä»Šå¤©çš„éƒ¨åˆ†å°±åˆ°æ­¤ç‚ºæ­¢äº†ï¼Œä¸‹å‘¨è¦‹å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>Inversion Of Control</tag>
      
      <tag>Dependency Injection</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[2024éµäººè³½]18-Spring Hibernate Cache</title>
    <link href="/2024/10/18/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-18-Spring-Hibernate-Cache/"/>
    <url>/2024/10/18/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-18-Spring-Hibernate-Cache/</url>
    
    <content type="html"><![CDATA[<p>åœ¨é€²è¡Œèˆ‡è³‡æ–™åº«æºé€šæ™‚ï¼Œä½¿ç”¨ORMæ˜¯å¸¸è¦‹çš„ä½œæ³•ï¼Œå› æ­¤åœ¨é–‹ç™¼ä¸Šå°±å°‘ä¸äº†è¦é¢å°Hibernateï¼Œå„˜ç®¡å¯èƒ½ä½¿ç”¨çš„æŠ€è¡“æ˜¯Spring JPAã€JPQLç­‰ç­‰ï¼Œä½†Hibernateçš„æŒä¹…åŒ–ã€å¿«å–ç­‰ç­‰éƒ½æ˜¯åŒæ¨£çš„ã€‚</p><p>ä¹‹å‰åœ¨Transactionalç¯‡æˆ‘å€‘æåˆ°ï¼Œåœ¨Sessionä¸­èˆ‡è³‡æ–™åº«ç‰©ä»¶ç¶­æŒå°æ‡‰é—œä¿‚çš„ç‹€æ…‹è¢«ç¨±ä½œPersistent(æŒä¹…)ç‹€æ…‹ï¼Œè€Œåœ¨é€™å€‹ç‹€æ…‹ä¸­ï¼Œç‚ºäº†æ¸›å°‘å°è³‡æ–™åº«çš„è² æ“”ï¼ŒHibernateæœƒå°‡å–å‡ºçš„è³‡æ–™æ”¾å…¥åœ¨å¿«å–ä¸­ï¼Œé¿å…ä¸‹ä¸€æ¬¡ç´¢å–ç›¸åŒè³‡æ–™æ™‚é‡è¤‡å°è³‡æ–™åº«ç™¼å‹•ä¸å¿…è¦çš„è«‹æ±‚è€ŒåŠ é‡è³‡æ–™åº«çš„è² æ“”ã€‚</p><p>è€Œé€™æ¥ä¸‹ä¾†å°±æœƒæœ‰ä¸€å€‹è­°é¡Œï¼ŒHibernateå¦‚ä½•ä¿æŒå¿«å–è³‡æ–™æ˜¯æ­£ç¢ºçš„ï¼Ÿ</p><p>Hibernateæœƒé‡å°åœ¨Persistentç‹€æ…‹çš„ç‰©ä»¶å»ºç«‹ä¸€å€‹è¤‡è£½å“ï¼Œç”¨ä¾†æ¯”å°æ˜¯å¦ç‰©ä»¶é­åˆ°æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯drity checkçš„åŠŸèƒ½ï¼Œä¾†ç¢ºä¿è³‡æ–™çš„æ­£ç¢ºã€‚å¦å¤–ï¼Œåªè¦åœ¨Sessionä¹‹ä¸­ï¼Œä¸€å€‹æŒä¹…åŒ–çš„ç‰©ä»¶å°±æœƒå°æ‡‰åˆ°ä¸€å€‹è¤‡è£½å“ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨å…©å€‹ç‰©ä»¶ã€‚</p><p>ç•¶ä»Šå¤©åœ¨ä¸€å€‹Sessionä¸­è³‡æ–™éå¸¸å¤§é‡å­˜åœ¨æ™‚ï¼Œå› ç‚ºé€™äº›è³‡æºåœ¨Sessionä¸­ä¸æœƒè¢«è‡ªå‹•é‡‹æ”¾ï¼Œå› æ­¤æœ‰å¯èƒ½æœƒå‡ºç¾OOM (Out Of Memory) çš„ç‹€æ³ã€‚æ‰€ä»¥å¯¦å‹™ä¸Šç‚ºäº†é¿å…é€™ä»¶äº‹æƒ…ç™¼ç”Ÿï¼Œå»ºè­°è¦å›ºå®šå°‡è³‡æ–™.flush()é€²è³‡æ–™åº«ä¸¦æ¸…é™¤å¿«å–ã€‚</p><p>å·²é è¨­æƒ…æ³ä¾†èªªï¼Œflush()çš„æ™‚æ©Ÿæ˜¯åœ¨@TransactionalçµæŸå¾Œè‡ªå‹•.flush()èˆ‡ï¼Œå¦‚æœæƒ³è¦æ ¹æ“šç‰¹æ®Šæƒ…æ³æ‰‹å‹•è§¸ç™¼flushï¼Œä»¥ä¸‹èˆ‰ä¾‹ï¼Œå‡è¨­æˆ‘è¦æ¯500ç­†è³‡æ–™å¼·åˆ¶å¯«å…¥è³‡æ–™åº«ä¸¦æ¸…é™¤å¿«å–ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@<span class="hljs-title class_">PersistenceContext</span><br>private <span class="hljs-title class_">EntityManager</span> entityManager; <span class="hljs-comment">// ä½¿ç”¨EntityMangereç®¡ç†å¯¦é«”</span><br><br><br>@<span class="hljs-title class_">Transactional</span><br>public <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsertStudents</span>(<span class="hljs-params">List&lt;Student&gt; students</span>) &#123;<br>    final int batchSize = <span class="hljs-number">500</span>;<br><br>    <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; students.<span class="hljs-title function_">size</span>(); i++) &#123;<br>        <span class="hljs-comment">// ç‰©ä»¶æŒä¹…åŒ–</span><br>        entityManager.<span class="hljs-title function_">persist</span>(students.<span class="hljs-title function_">get</span>(i));<br>        <span class="hljs-comment">// æ¯500ç­†å°±flush å’Œ clear</span><br>        <span class="hljs-keyword">if</span> (i % batchSize == <span class="hljs-number">0</span> &amp;&amp; i &gt; <span class="hljs-number">0</span>) &#123;<br>            entityManager.<span class="hljs-title function_">flush</span>();  <span class="hljs-comment">// å°‡è³‡æ–™æ›´æ”¹åŒæ­¥åˆ°è³‡æ–™åº«</span><br>            entityManager.<span class="hljs-title function_">clear</span>();  <span class="hljs-comment">// æ¸…é™¤Sessionå¿«å–</span><br>        &#125;<br>    &#125;<br>    entityManager.<span class="hljs-title function_">flush</span>();<br>    entityManager.<span class="hljs-title function_">clear</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦å¤–Hibernateçš„å¿«å–é‚„æœ‰åˆ†ç‚ºå…©ç¨®ï¼ŒSession Levelèˆ‡SessionFactory Levelï¼Œå‰è€…æ˜¯åªå¿«å–åœ¨Sessionä¸­ï¼Œå¦å¤–ä¸€å€‹å‰‡æ˜¯å¯ä»¥åœ¨å¤šå€‹Sessionä¸­è¢«å…±åŒä½¿ç”¨ï¼Œæ›´å¸¸è¦‹çš„èªªæ³•æˆ‘å€‘ç¨±å‘¼å®ƒå€‘ç‚º ä¸€ç´šå¿«å–(Session Cache) èˆ‡ äºŒç´šå¿«å–(SessionFactory Session)ã€‚Session Levelçš„å¿«å–æœƒåœ¨SessionçµæŸå¾Œè¢«æ¸…é™¤ï¼ŒäºŒç´šå¿«å–å‰‡åªæœƒåœ¨è³‡æ–™è¢«æ›´æ–°æ™‚åˆªé™¤èˆŠçš„å¿«å–ï¼Œå› æ­¤æœ‰æ™‚äºŒç´šå¿«å–çš„ç®¡ç†æœƒæœ‰ä¸€äº›æ½›åœ¨å•é¡Œç™¼ç”Ÿã€‚æ›´å¤šå¯ä»¥åƒè€ƒåº•ä¸‹çš„é€£çµã€‚</p><p>ä»Šå¤©çš„åˆ†äº«å°±å…ˆåˆ°é€™é‚Šäº†ï¼Œæˆ‘å€‘æ˜å¤©è¦‹äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Beanå»¶é²åˆå§‹åŒ–</title>
    <link href="/2024/10/17/Spring-Bean%E5%BB%B6%E9%81%B2%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
    <url>/2024/10/17/Spring-Bean%E5%BB%B6%E9%81%B2%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<p>ç•¶ä½ å•Ÿå‹•ä¸€å€‹å°ˆæ¡ˆï¼ŒSpring Frameworkæœƒå°‡æ‰€æœ‰è¢«å®šç¾©ç‚ºBeançš„ç‰©ä»¶äº¤çµ¦Spring å®¹å™¨æ§åˆ¶ï¼ŒSpring Bean çš„ä¸€å€‹ä¸»è¦ç‰¹æ€§æ˜¯æ¡ç”¨äº†Singleton(å–®ä¾‹)æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯Beançš„ç”Ÿå‘½é€±æœŸä¸æ˜¯ç”±ä½¿ç”¨è€…æŒæ§ï¼Œè€Œæ˜¯äº¤çµ¦æ¡†æ¶ï¼Œé€™ä¹Ÿæ˜¯IOCçš„ç²¾ç¥ã€‚</p><p>ä½†æ˜¯ä½ æœ‰æ²’æœ‰æƒ³éï¼Œå‡è¨­ä½ æ“æœ‰ä¸€å€‹é–‹éŠ·æ˜‚è²´çš„æœå‹™ï¼Œå®ƒçš„åŠŸèƒ½ä¸¦ä¸ç¶“å¸¸è¢«ä½¿ç”¨ï¼Œä½†æ˜¯å»ä½”æ“šäº†å¤§é‡çš„æ•ˆèƒ½ï¼Œè€Œä¸”åˆæ˜¯ä¸€å€‹Beanã€‚ä½ å¯èƒ½æœƒæƒ³ï¼Œæœ‰æ²’æœ‰ä¸€å€‹æ–¹æ³•å¯ä»¥è®“é–‹ç™¼è€…è‡ªå·±å»æŒæ§é€™å€‹ç‰©ä»¶çš„ç”Ÿå‘½é€±æœŸï¼Ÿ</p><p>æœ‰ï¼Œå°±æ˜¯@Lazyé€™å€‹åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Lazy</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXService</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">XXService</span><span class="hljs-params">()</span> &#123;<br>     System.out.print(<span class="hljs-string">&quot;XXService Init!&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>@Lazyæä¾›äº†å»¶é²åˆå§‹åŒ–çš„åŠŸèƒ½ï¼Œä½¿Beanåœ¨å°ˆæ¡ˆå•Ÿå‹•æ™‚ï¼Œè¢«å»ºç«‹çš„æ˜¯ä¸€å€‹Beançš„ä»£ç†è€Œä¸æ˜¯Beanæœ¬èº«ï¼Œå¯¦éš›ä¸ŠBeanæœƒåœ¨è¢«æ³¨å…¥åˆ°å…¶ä»–é¡åˆ¥æ™‚æ‰è¢«è¼‰å…¥ä¸¦åˆå§‹åŒ–ã€‚è€Œå®šç¾©æ–¹æ³•é™¤äº†å®šç¾©åœ¨Classä¸Šä¹‹å¤–ï¼Œé‚„æœ‰ä»¥ä¸‹å…©ç¨®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MyBean myBean;<br>    <br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyService</span><span class="hljs-params">(<span class="hljs-meta">@Lazy</span> MyBean myBean)</span> &#123;<br>        <span class="hljs-built_in">this</span>.myBean = myBean;<br>    &#125;<br>    <br>&#125;<br><br>èˆ‡<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">SpringApplication</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplication</span>(MyApp.class);<br>        app.setLazyInitialization(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å¯ç”¨å…¨å±€å»¶è¿Ÿåˆå§‹åŒ–</span><br>        app.run(args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥å®šç¾©@Lazyåœ¨ä¾è³´æ³¨å…¥çš„ä½ç½®ï¼Œé€™æœƒè®“å¯¦éš›ä½¿ç”¨åˆ°åŠŸèƒ½æ™‚æ‰åˆå§‹åŒ–Beanï¼Œå¦å¤–ä¹Ÿå¯ä»¥åƒä¸‹æ–¹ç›´æ¥å®šç¾©åœ¨SpringBootçš„è¨­å®šä¸­(ä½†ä¸å»ºè­°)</p><p>é€™ç¨®æ–¹æ³•çš„å„ªç¼ºé»å¦‚ä¸‹ï¼š</p><p>å„ªé»ï¼š</p><ol><li>æ¸›å°‘SpringBootåˆå§‹å•Ÿå‹•çš„æœå‹™æ•¸é‡ï¼Œè³‡æºçš„ç¯€çœï¼Œé‡å•Ÿé€Ÿåº¦ä¹Ÿæœƒæ¯”è¼ƒå¿«ã€‚</li><li>åªåœ¨éœ€è¦æ™‚å»ºç«‹ï¼Œé¿å…å†—é¤˜å ç”¨ã€‚</li></ol><p>ç¼ºé»ï¼š</p><ol><li>å»¶é²ï¼Œå› ç‚ºè¢«å»¶é²åˆå§‹åŒ–å»ºç«‹çš„Beanæœƒåœ¨è¢«å¯¦éš›ä½¿ç”¨æ™‚æ‰è¢«å»ºç«‹ï¼Œå¯èƒ½æœƒç™¼ç”Ÿå»ºç«‹èŠ±çš„æ™‚é–“è¶…å‡ºé æœŸå°è‡´ä¸å¯é æ–™çš„æƒ…æ³ç™¼ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½åˆå§‹åŒ–å‡ºéŒ¯ï¼Œä½†å› ç‚ºä¸æ˜¯ç”±Springå®¹å™¨æŒæ§ï¼Œæ²’æœ‰ç¬¬ä¸€æ™‚é–“æŒæ¡åˆ°éŒ¯èª¤ç™¼ç”Ÿã€‚</li></ol><p>é™¤äº†Spring Beanä¹‹å¤–ï¼ŒHibernateçš„è³‡æ–™åº«ç‰©ä»¶ä¹ŸåŒæ¨£å¯ä»¥è¨­å®šå»¶é²åˆå§‹åŒ–ï¼ŒHibernateçš„å»¶é²åˆå§‹åŒ–é€šå¸¸æ˜¯ç”¨ä¾†é¿å…ä¸€æ¬¡æ€§è¼‰å…¥åˆ°ä¸éœ€è¦çš„Entityï¼Œé€šå¸¸è¼‰å…¥æ¨¡å¼è¢«åˆ†ç‚ºå…©ç¨®</p><ol><li>Eager Loading ç«‹å³è¼‰å…¥</li><li>Lazy Loading å»¶é²è¼‰å…¥</li></ol><p>è€Œå®ƒå€‘è¢«ä½¿ç”¨çš„æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Entity</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Character</span> &#123;<br> <span class="hljs-keyword">private</span> String name;<br> <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br> <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> unic_id;<br> <br> <span class="hljs-meta">@OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;skillTree&quot;)</span><br> <span class="hljs-keyword">private</span> Set&lt;SkillTree&gt; skillTreeSet;<br> <br> <span class="hljs-meta">@OneToOne(fetch = FetchType.EAGER)</span><br> <span class="hljs-meta">@JoinColumn(name = &quot;user_id&quot;)</span><br> <span class="hljs-keyword">private</span> User user<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šå®šç¾©äº†ä¸€å€‹è§’è‰²é¡åˆ¥(Character)ï¼Œä»–å°æ‡‰åˆ°å¤šçµ„çš„æŠ€èƒ½æ¨¹(SkillTree)ï¼Œä½†è³‡æ–™åº«è®€å–Characterè³‡æ–™æ™‚ï¼Œä¸æœƒé è¨­ä¸€ä½µè®€å–skillTreeï¼Œæ¸›å°‘ä¸å¿…è¦çš„è³‡æºæµªè²»ã€‚å¦å¤–é‡å°Userå‰‡æ˜¯æ¡ç”¨EAGER_LOADINGã€‚é è¨­å€¼æ˜¯ toManyçš„æ¡ç”¨LAZYï¼ŒtoOneçš„æ¡ç”¨EAGERã€‚</p><p>ç„¶è€Œï¼Œä¿—è©±èªªå¾—å¥½ï¼Œæœ‰ä¸€å¥½å°±æ²’æœ‰å…©å¥½ï¼Œä½†æ˜¯æœ‰ä¸‰å¥½å¤å‡œæ˜¯æˆ‘çš„ ( èª¤</p><p>Hibernateä½¿ç”¨å»¶é²è¼‰å…¥æœƒæœ‰ä¸€å€‹æ½›åœ¨å•é¡Œï¼Œå°±æ˜¯LazyInitializationExceptionï¼Œå¦‚æœè©¦åœ–åœ¨Sessionå·²ç¶“é—œé–‰çš„æ™‚å€™è¨ªå•è¢«é—œè¯çš„è³‡æ–™æ™‚ï¼Œå› ç‚ºç„¡æ³•è¼‰å…¥ï¼Œæ‰€ä»¥æœƒå‡ºç¾æ­¤éŒ¯èª¤ã€‚æƒ³ä¾†ä¹Ÿåˆç†ï¼Œä½ æ˜¯ä¸å¯èƒ½è¨ªå•å¾—åˆ°ä½ ä¸€é–‹å§‹æ²’æœ‰è¼‰å…¥çš„å¯¦é«”çš„ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/getMyCharacter&quot;)</span><br><span class="hljs-keyword">public</span> Character <span class="hljs-title function_">getMyCharacter</span><span class="hljs-params">(<span class="hljs-meta">@Reqeustparam</span> <span class="hljs-type">long</span> id)</span> &#123;<br><br><span class="hljs-type">Character</span> <span class="hljs-variable">myCharacter</span> <span class="hljs-operator">=</span> charaService.findCharacterByUnicId(id);<br><br><span class="hljs-type">SkillTree</span> <span class="hljs-variable">myCharacterSkillSet</span> <span class="hljs-operator">=</span> myCharacter.getSkillTreeSet(); <span class="hljs-comment">// å‡ºéŒ¯</span><br>&#125;<br></code></pre></td></tr></table></figure><p>è§£æ±ºæ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>åœ¨Transactionalä¸­å°±æŠŠå±¬æ€§è¼‰å…¥ã€‚</li><li>ä½¿ç”¨JOINèªæ³•ï¼Œä¸€é–‹å§‹å°±è¼‰å…¥å®Œæ•´çš„å¯¦é«”ï¼Œå¾è€Œé¿å…ç„¡æ³•å­˜å–çš„å•é¡Œ</li></ol><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„åˆ†äº«ï¼Œ@Lazyæˆ‘åœ¨å·¥ä½œä¸Šå¾ˆå°‘çœ‹åˆ°ï¼Œä½†ä¸€æ¬¡çœ‹éå¾Œå°±ä¸€ç›´å¾ˆå¥½å¥‡ä»–æ˜¯ä»€éº¼ï¼Œçœ‹è‘—çœ‹è‘—å°±ç”¢å‡ºé€™ç¯‡è¨˜éŒ„æ–‡ç« äº†ï¼Œå¸Œæœ›èƒ½å°å…¶ä»–æœ‰é¡ä¼¼å›°æƒ‘çš„æœ‹å‹å¸¶ä¾†ä¸€é»å¹«åŠ©ï¼Œé‚£æˆ‘å€‘æ˜å¤©è¦‹å§</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>Bean</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring Transaction (2024éµäººè³½-15)</title>
    <link href="/2024/10/15/Spring-Transaction-2024%E9%90%B5%E4%BA%BA%E8%B3%BD-15/"/>
    <url>/2024/10/15/Spring-Transaction-2024%E9%90%B5%E4%BA%BA%E8%B3%BD-15/</url>
    
    <content type="html"><![CDATA[<p>åšç‚ºä¸€å€‹å¾Œç«¯å·¥ç¨‹å¸«ï¼Œé™¤äº†è¦ç†è§£ç¨‹å¼ç¢¼çš„é‹ä½œä»¥åŠå‰¯ä½œç”¨ä¹‹å¤–ï¼Œå°æ–¼è³‡æ–™åº«çš„æºé€šä¹Ÿæ˜¯é‡è¦ä¸€èª²ï¼Œä¹Ÿè¨±å‰›é–‹å§‹æ™‚æ²’é‚£éº¼é—œéµï¼Œä½†éš¨è‘—ç³»çµ±çš„è¦æ¨¡é€æ¼¸æ“´å¤§ï¼Œä½ å°æ–¼ç³»çµ±çš„äº†è§£æœ¬èº«å°±è®Šå¾—ç›¸ç•¶é‡è¦äº†ã€‚</p><p>æåˆ°è³‡æ–™åº«çš„å­˜å–ï¼Œæˆ‘å€‘å°±ä¸å…åœ°æåˆ°å¹¾ä¹æ˜¯å®¶å–»æˆ¶æ›‰çš„ACIDå®šå¾‹äº†ã€‚ACIDæ˜¯é—œè¯å¼è³‡æ–™åº«çš„åŸºæœ¬ç‰¹æ€§ï¼Œä»–å€‘è¦ç¯„äº†ä¸€å€‹äº¤æ˜“ï¼Œä¹Ÿå°±æ˜¯èˆ‡è³‡æ–™åº«æºé€šçš„ä¸€å€‹å–®ä½ï¼Œå¿…é ˆå…·å‚™ç”šéº¼ç‰¹æ€§ã€‚ä»–å€‘åˆ†åˆ¥ç”±ï¼š</p><ol><li>Atomicity åŸå­æ€§</li><li>Consistency ä¸€è‡´æ€§</li><li>Isolation éš”é›¢æ€§</li><li>Durability æŒä¹…æ€§ã€‚</li></ol><p>å…±å››æ¨£çµ„æˆï¼Œå¾ŒçºŒè¢«é–‹ç™¼å‡ºä¾†çš„NOSQLç­‰ç­‰ï¼Œé›–ç„¶æ²’æœ‰å®Œå…¨å¯¦ç¾æ‰€æœ‰çš„ç‰¹æ€§ï¼Œä½†ä¹Ÿæœ‰ä¸å°‘åšåˆ°äº†éƒ¨åˆ†çš„å¯¦ç¾ï¼Œå…¶é‡è¦åº¦å¯è¦‹ä¸€æ–‘ã€‚</p><p>åŸå­æ€§ä»£è¡¨ä¸€å€‹æ“ä½œå¿…é ˆæ˜¯å…¨éƒ¨æˆåŠŸã€è¦ä¸ç„¶å°±æ˜¯å…¨éƒ¨å¤±æ•—ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œä½ åœ¨éº¥ç•¶å‹é»äº†å¥—é¤ä¸¦å¾—åˆ°äº†åŠ ä¸€å…ƒå¤šä¸€ä»¶çš„å¤§è–¯ï¼Œä½ ç„¡æ³•åœ¨ä¸è²·å¥—é¤ï¼Œåªç”¨ä¸€å…ƒç²å¾—å¤§è–¯ï¼Œé€™å°±æ˜¯åŸå­æ€§ã€‚</p><p>ä¸€è‡´æ€§ä»£è¡¨ä¸€å€‹äº¤æ˜“çš„å‰å¾Œéƒ½å¿…é ˆè¦ç¬¦åˆå®Œæ•´æ€§çš„è¦ç¯„ï¼Œå¯«å…¥çš„è³‡æ–™å¿…é ˆå®Œå…¨ç¬¦åˆæ‰€æœ‰è¦ç¯„ï¼Œå¥—ç”¨åŒæ¨£çš„ç´„æŸã€Triggerç­‰ç­‰ã€‚</p><p>éš”é›¢æ€§æ˜¯ä¸€ç¨®è³‡æ–™åº«è™•ç†å¤šå€‹ä½µç™¼äº¤æ˜“å°è³‡æ–™é€²è¡Œè®€å¯«çš„èƒ½åŠ›ï¼Œéš”é›¢æ€§æœ‰åˆ†ç‚ºå››ç¨®ç´šåˆ¥ä¾†æ ¹æ“šå„ç¨®ä¸åŒéœ€æ±‚çš„å•†æ¥­å ´æ™¯é€²è¡Œæ“ä½œã€‚</p><p>æŒä¹…æ€§ä»£è¡¨äº†äº¤æ˜“å°è³‡æ–™åº«çš„å¯«å…¥æ˜¯æ°¸ä¹…çš„ï¼Œä¸æœƒå› ç‚ºç³»çµ±çš„ç•°å¸¸å°è‡´è³‡æ–™æ¶ˆå¤±ã€‚</p><p>é€™äº›è¦ç¯„çœ‹èµ·ä¾†å¾ˆåˆç†ï¼Œä½†æœªå¿…é©åˆæ¯ç¨®å•†æ¥­å ´æ™¯ï¼Œå¯¦éš›ä¸Šé‚„æ˜¯è¦å¤šå¤šè€ƒæ…®å¯¦éš›ä¸Šçš„å•†æ¥­å ´æ™¯åœ¨åšå‡ºæ±ºå®šã€‚å°±å¥½æ¯”é«˜å¯ç”¨æ€§èˆ‡ç³»çµ±æ•ˆèƒ½æ°¸é éƒ½æ˜¯ä¸€å€‹ç„¡æ³•å…¼å¾—çš„é¸é …ä¸€æ¨£ã€‚ç«¯çœ‹ä½ è¦å¦‚ä½•å–æ¨ã€‚</p><p>åœ¨é€™å››é …RDBMSçš„ç‰¹æ€§ä¸­ï¼Œéš”é›¢æ€§æ˜¯æœ€ç‚ºè¤‡é›œçš„ä¸€ç¨®ï¼Œé—œæ–¼éš”é›¢æ€§çš„è¨­å®šå¾€å¾€æ²’æœ‰æœ€ä½³è§£ç­”ï¼Œåªæœ‰æƒ³å‡ºæœ€åˆé©çš„é¸é …ï¼Œä¸¦æ¥å—ä»–çš„tradeoff(ä»£åƒ¹)ã€‚</p><p>åœ¨é–‹å§‹æéš”é›¢å±¤ç´šå‰ï¼Œæˆ‘å€‘å…ˆä¾†å›æ†¶ä¸€ä¸‹ä¹‹å‰æåˆ°çš„Hibernateå»ºç«‹ä¸€æ®µæœƒè©±çš„ç”Ÿå‘½æµç¨‹ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// é–‹å•ŸSessionï¼Œç›¸ç•¶æ–¼é–‹å•ŸJDBCçš„Connection</span><br><span class="hljs-title class_">Session</span> session = <span class="hljs-title class_">HibernateUtil</span>.<span class="hljs-title function_">getSessionFactory</span>().<span class="hljs-title function_">openSession</span>(); <br><span class="hljs-comment">// Transactionè¡¨ç¤ºä¸€çµ„æœƒè©±æ“ä½œ</span><br><span class="hljs-title class_">Transaction</span> tx= session.<span class="hljs-title function_">beginTransaction</span>(); <br><span class="hljs-comment">// å°‡ç‰©ä»¶æ˜ å°„è‡³è³‡æ–™åº«è¡¨æ ¼ä¸­å„²å­˜</span><br>session.<span class="hljs-title function_">save</span>(user);<br>tx.<span class="hljs-title function_">commit</span>(); <br>session.<span class="hljs-title function_">close</span>(); <br></code></pre></td></tr></table></figure><p>æ ¹æ“šä¸Šé¢çš„èªªæ˜ï¼Œå¯ä»¥ç¸½çµå‡ºä¸€å€‹æœƒè©±æ˜¯é€™æ¨£çš„ï¼š</p><ol><li>å»ºç«‹ä¸€å€‹èˆ‡è³‡æ–™åº«çš„Session</li><li>åœ¨Sessionä¸­å»ºç«‹ä¸€ç­†Transaction</li><li>åŸ·è¡Œè³‡æ–™çš„è®€å¯« ( save()â€¦flush()ç­‰ç­‰)</li><li>æŠŠé€²è¡Œä¸­äº¤æ˜“æäº¤(commit)</li><li>é—œé–‰é–‹å•Ÿçš„å°è©±(Session)</li></ol><p>ç°¡å–®å¸¶éæœƒè©±å¾Œï¼Œæˆ‘å€‘å›åˆ°åŸå…ˆçš„è©±é¡Œï¼Œä¾†é–‹å§‹æå››ç¨®éš”é›¢å±¤ç´šå§ï¼Œç”±æœ€å¯¬é¬†åˆ°æœ€åš´è¬¹åˆ†åˆ¥æ˜¯ï¼š</p><ol><li><strong>Read Uncommittedã€‚<br>é€™å€‹éš”é›¢å±¤ç´šå¯ä»¥è®€å–å…¶ä»–åŸ·è¡Œç·’ä¸­save()å¾Œå°šæœªè¢«commit()çš„è³‡æ–™ã€‚</strong></li><li>Read Committedã€‚<br>é€™å€‹éš”é›¢å±¤ç´šåªå…è¨±è®€å–å…¶ä»– transaction å·²ç¶“commitçš„è³‡æ–™ã€‚é¿å…äº†è®€å–åˆ°æœªè¢«commitçš„è³‡æ–™ï¼Œä¹Ÿå°±æ˜¯Dirty Readé«’è®€å•é¡Œã€‚</li><li>Repeatable Readã€‚<br>é€™å€‹éš”é›¢å±¤ç´šä¸‹ï¼Œä¸€èˆ¬çš„é è¨­æƒ…æ³æ˜¯ï¼ŒåŒæ¨£çš„è®€å–ï¼Œå›æ‡‰çš„è³‡æ–™éƒ½å¿…é ˆæ˜¯ä¸€æ¨£ï¼Œé€™é¿å…äº†å› å‰å¾Œè®€å–åŒç­†è³‡æ–™è¨˜éŒ„å°è‡´è³‡æ–™ä¸ä¸€è‡´çš„å•é¡Œï¼Œä¹Ÿå°±æ˜¯No-repeatable Readã€‚</li><li><strong>Serializable<br>é€™å€‹éš”é›¢å°±æ˜¯åºåˆ—åŒ–ï¼Œä¹Ÿå°±æ˜¯èªªåŒæ™‚åªå…è¨±ä¸€å€‹åŸ·è¡Œç·’å°è³‡æ–™é€²è¡Œæ“ä½œï¼Œé€™æ ¹æœ¬è§£æ±ºäº†éš”é›¢æ€§ä½µç™¼å­˜å–çš„å•é¡Œï¼Œä½†æ˜¯åŸºæœ¬ä¸Šåœ¨ç¾åœ¨åˆ†æ•£å¼ç³»çµ±ç››è¡Œçš„æ™‚ä»£ä¸‹ä¸æœƒä½¿ç”¨ã€‚</strong></li></ol><p>å¦å¤–ï¼Œå¦‚æœæåˆ°æ•ˆèƒ½çš„è©±ï¼Œæ’åºå°±å‰›å¥½ç›¸åï¼Œæœ€ä¸Šé¢çš„æ•ˆç‡æœ€å¿«ï¼Œæœ€ä¸‹é¢çš„æ•ˆç‡æœ€å·®ï¼Œé–‹ç™¼è€…å¿…é ˆè¦æ ¹æ“šå¯¦éš›éœ€æ±‚ï¼Œè¨­å®šåˆç†çš„éš”é›¢å±¤ç´šã€‚</p><p>ç´ä»Šå¤©æˆ‘å€‘å°±è¬›åˆ°é€™è£¡å•¦ï¼Œæ˜å¤©è¦‹ æ°æ°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Transaction</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBoot ControllerAdvice</title>
    <link href="/2024/10/14/SpringBoot-ControllerAdvice/"/>
    <url>/2024/10/14/SpringBoot-ControllerAdvice/</url>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€è¼ªæˆ‘å€‘æåˆ°äº†ï¼Œå¦‚æœåœ¨Controllerè§£æç‰©ä»¶éšæ®µå°±å‡ºéŒ¯ï¼Œå°±æ²’æœ‰è¾¦æ³•æ’°å¯«try catchå» æ•æ‰é€™éƒ¨åˆ†ã€‚é€™éƒ¨åˆ†å…¶å¯¦æœ‰å¾ˆå¤šç¨®è™•ç†æ–¹æ³•ï¼Œä»¥ä¸‹æˆ‘åªä»‹ç´¹å…©ç¨®ã€‚</p><p>ç¬¬ä¸€ç¨®æ˜¯æ¯”è¼ƒç°¡æ˜“çš„åšæ³•ï¼Œå°±æ˜¯Springçš„ErrorControllerï¼ŒSpringé è¨­é¡¯ç¤ºéŒ¯èª¤æœƒä½¿ç”¨ErrorControlleråšç‚ºé¡¯ç¤ºï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥åšçš„å°±æ˜¯å®šç¾©ä¸€å€‹Controlleré¡åˆ¥ä¸¦å¯¦ä½œErrorControllerï¼Œå°±èƒ½å¤ æ””æˆªä¾‹å¤–ï¼Œä¸¦å°è£æˆ‘å€‘éœ€è¦çš„è³‡è¨Šåœ¨è£¡é¢ã€‚æ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ç¢¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomErrorController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ErrorController</span> &#123;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/error&quot;)</span><br>    <span class="hljs-keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">handleError</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>        Map&lt;String, Object&gt; response = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> (Integer) request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.status_code&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">errorMessage</span> <span class="hljs-operator">=</span> (String) request.getAttribute(<span class="hljs-string">&quot;javax.servlet.error.message&quot;</span>);<br><br>        response.put(<span class="hljs-string">&quot;status&quot;</span>, statusCode);<br>        response.put(<span class="hljs-string">&quot;error&quot;</span>, errorMessage != <span class="hljs-literal">null</span> ? errorMessage : <span class="hljs-string">&quot;Unexpected error&quot;</span>);<br><br>        <span class="hljs-type">HttpStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> statusCode != <span class="hljs-literal">null</span> ? HttpStatus.valueOf(statusCode) : HttpStatus.INTERNAL_SERVER_ERROR;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseEntity</span>&lt;&gt;(response, status);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getErrorPath</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/error&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>&#x2F;errorçš„ç¨‹å¼ç¢¼ä¸­å¯ä»¥å¾—çŸ¥ï¼Œæˆ‘å€‘åˆ©ç”¨äº†ResponseEntityåŒ…è£éäº†æˆ‘å€‘çš„å›å‚³ä¸¦åŠ ä¸Šäº†status èˆ‡ error æ¬„ä½ï¼Œä½¿å›å‚³çš„è³‡æ–™æ˜¯å¯ä»¥æ§åˆ¶çš„ã€‚å¦å¤–ï¼ŒgetErrorPath()çš„ä½œç”¨æ˜¯æŠŠéŒ¯èª¤çš„è·¯å¾‘è½‰åˆ°&#x2F;errorè·¯å¾‘ä¸‹ï¼Œçµ±ä¸€åšéŒ¯èª¤è™•ç†ã€‚</p><p>é€™æ¨£çš„åšæ³•æ˜¯ç°¡å–®ç›´è§€ï¼Œä½†æ˜¯èƒ½å¤ å¥—ç”¨çš„æ–¹æ³•æœ‰é™ï¼Œå¦‚æœæƒ³è¦æ›´å¤§ç¯„åœçš„è™•ç†éŒ¯èª¤ï¼Œæˆ‘æœƒå»ºè­°ä½¿ç”¨å…¶ä»–æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯é€™æ¬¡è¦ä»‹ç´¹çš„Spring ControllerAdivceã€‚</p><p>Spring ControllerAdviceæœ¬èº«å·²ç¶“æ•´åˆåœ¨SpringBootä¸­ï¼Œä¸éœ€è¦é¡å¤–å¼•å…¥ï¼Œå®ƒä¸»è¦æä¾›çš„æ–¹æ³•æœ‰ä¸‰ç¨®ã€‚</p><ol><li>Global ç´šåˆ¥çš„çš„ä¾‹å¤–è™•ç†</li><li>è³‡æ–™é å…ˆè™•ç†</li><li>è³‡æ–™ç¶å®š</li></ol><p>å…ˆä»‹ç´¹ç¬¬ä¸€ç¨®ï¼Œä¹Ÿæ˜¯æˆ‘æœ€å¸¸ç”¨çš„ä¾‹å¤–è™•ç†æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestControllerAdvice(assignableTypes = TestController.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Throwable</span> &#123;<br><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@ExceptionHandler(value = NameNotCorrectException.class)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleExceptionCollecter</span><span class="hljs-params">(HttpServletRequest req, Exception e)</span> &#123;<br>        <span class="hljs-comment">// å¤„ç†NameNotCorrectExceptionçš„é€»è¾‘</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;nameNotCorrect&quot;</span>; <span class="hljs-comment">// è¿”å›é”™è¯¯é¡µé¢æˆ–å…¶ä»–é€‚å½“çš„å“åº”</span><br>    &#125;<br><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@ExceptionHandler(value = IDNotCorrectException.class)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleNullPointerException</span><span class="hljs-params">(HttpServletRequest req, Exception e)</span> &#123;<br>        <span class="hljs-comment">// å¤„ç†NullPointerExceptionçš„é€»è¾‘</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ID NotCorrect&quot;</span>; <span class="hljs-comment">// è¿”å›é”™è¯¯é¡µé¢æˆ–å…¶ä»–é€‚å½“çš„å“åº”</span><br>    &#125;<br>    ...<br></code></pre></td></tr></table></figure><p>@RestControllerAdviceå®£å‘Šäº†é¡åˆ¥æ˜¯ControllerAdviceï¼ŒassignTypeå®šç¾©äº†ä½œç”¨çš„é¡åˆ¥ã€‚åœ¨åº•ä¸‹æˆ‘å®£å‘Šäº†å…©å€‹è‡ªå®šç¾©é¡åˆ¥ï¼Œåªè¦Controllerçˆ†å‡ºé€™å…©ç¨®éŒ¯èª¤ï¼Œå°±æœƒä¾†åˆ°é€™è£¡ï¼Œä¸¦å›å¾©å­—ä¸²çµ¦ä½¿ç”¨è€…ã€‚</p><p>å†ä¾†æ˜¯ç¬¬äºŒç¨®ï¼Œè³‡æ–™çš„é å…ˆè™•ç†ã€‚ä»¥ä¸‹çš„ç¯„ä¾‹æ˜¯ï¼Œå®£å‘Šä¸€å€‹Binderå»é‡å°å‚³å…¥åƒæ•¸åšé è™•ç†ï¼Œä½¿ç”¨äº†CustomDateEditoræŠŠå­—ä¸²çš„æ™‚é–“è½‰æ›æˆDate()å‹åˆ¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@InitBinder</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initBinder</span><span class="hljs-params">(WebDataBinder binder)</span> &#123;<br>    <span class="hljs-comment">// æŠŠæ—¥æœŸè½‰æ›ç‚ºDate()</span><br>    <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">dateFormat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>);<br>    dateFormat.setLenient(<span class="hljs-literal">false</span>);<br>    binder.registerCustomEditor(Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDateEditor</span>(dateFormat, <span class="hljs-literal">false</span>));<br>&#125;<br><br><span class="hljs-meta">@GetMapping(&quot;/profile&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserProfile</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;birthDate&quot;)</span> Date birthDate)</span> &#123;<br>        <span class="hljs-comment">// birthDate å·²ç»é€šè¿‡ @InitBinder è¿›è¡Œè½¬æ¢</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#x27;s birth date is: &quot;</span> + birthDate;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€å¾Œæ˜¯ç¬¬ä¸‰ç¨®ï¼Œåœ¨ModelAttributeä¸­äº‹å…ˆæ·»åŠ å…ƒç´ ï¼Œä½¿Controllerå¯ä»¥ç›´æ¥ä½¿ç”¨é€™å€‹å±¬æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ModelAttribute</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAttributes</span><span class="hljs-params">(Model model)</span> &#123;<br>        model.addAttribute(<span class="hljs-string">&quot;globalAttribute&quot;</span>, <span class="hljs-string">&quot;This is a global attribute&quot;</span>);<br>&#125;<br><br><span class="hljs-meta">@GetMapping(&quot;/profileInfo&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProductInfo</span><span class="hljs-params">(ModelMap model)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">globalAttribute</span> <span class="hljs-operator">=</span> (String) model.get(<span class="hljs-string">&quot;globalAttribute&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Product Info with Global Attribute: &quot;</span> + globalAttribute;<br>&#125;<br></code></pre></td></tr></table></figure><p>å€‹äººæ„Ÿæƒ³æ˜¯ï¼Œä¾‹å¤–è™•ç†æ˜¯æœ€å¥½ç”¨çš„ï¼Œå…¶ä»–çš„éƒ¨åˆ†å„˜ç®¡æ–¹ä¾¿ï¼Œä½†å€’æ˜¯ä¹Ÿæ²’æœ‰åˆ° éå¸¸å¿…è¦ï¼Œä½†æ˜¯ç”¨ä¾†äº†è§£å­¸ç¿’é‚„æ˜¯å¾ˆä¸éŒ¯çš„ï¼Œæ¨è–¦çµ¦å„ä½ã€‚</p><p>é‚£éº¼ä»Šå¤©çš„åˆ†äº«å°±åˆ°é€™é‚Šï¼Œæˆ‘å€‘æ˜å¤©è¦‹ï¼Œ88ã€‚</p><p>åƒè€ƒè³‡æ–™ï¼š</p><p><a href="https://www.cnblogs.com/antaia11/p/15092280.html">https://www.cnblogs.com/antaia11/p/15092280.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>Exception</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring TestContainerä¸€æ¬¡å°±æ‡‚</title>
    <link href="/2024/10/12/Spring-TestContainer%E4%B8%80%E6%AC%A1%E5%B0%B1%E6%87%82/"/>
    <url>/2024/10/12/Spring-TestContainer%E4%B8%80%E6%AC%A1%E5%B0%B1%E6%87%82/</url>
    
    <content type="html"><![CDATA[<p>ç•¶ä»Šå¤©ä½ æƒ³è¦é€²è¡ŒWeb Applicationçš„æ¸¬è©¦æ™‚ï¼Œé™¤äº†ç¨‹å¼é–‹ç™¼ï¼Œå¤–éƒ¨çš„ç’°å¢ƒé…ç½®ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå‡è¨­ä½ æƒ³è¦é–‹ç™¼ä¸€å€‹MySQLçš„æ‡‰ç”¨ç¨‹å¼ä»¥åŠä¸€å€‹PostgreSQLçš„æ‡‰ç”¨ç¨‹å¼ï¼Œä½ å°±æœƒå¿…é ˆè¦åœ¨æœ¬åœ°å®‰è£å…©ä»½è³‡æ–™åº«ã€‚é€™æ˜¯éå»çš„ä½œæ³•ã€‚</p><p>ç„¶è€Œï¼Œåƒ…åƒ…å› ç‚ºæ¸¬è©¦å°±å¾—å®‰è£ä¸€å€‹è³‡æ–™åº«çš„æ–°ç’°å¢ƒéå¸¸éº»ç…©ï¼Œæ‰€ä»¥å¾Œä¾†åœ¨é€²è¡Œé–‹ç™¼æ¸¬è©¦æ™‚ï¼Œè¨±å¤šé–‹ç™¼äººå“¡éƒ½æœƒä½¿ç”¨Dockerï¼Œå…ˆåœ¨æœ¬æ©Ÿä¸‹è¼‰Imageä¹‹å¾Œåœ¨æœ¬åœ°åŸ·è¡Œã€‚å¦‚æ­¤ä¸€ä¾†å°±ä¸å¿…è¦ç…©æƒ±å„SQLçš„å®‰è£äº†ã€‚</p><p>TestContinerä¾æ“šé€™æ¨£çš„éœ€æ±‚èª•ç”Ÿï¼Œæ•´åˆäº†Dockerèˆ‡SpringBootTestçš„åŠŸèƒ½ï¼Œå¯¦ä½œä¹Ÿå¾ˆç°¡å–®ã€‚æ¯”æ–¹èªªä»Šå¤©æƒ³è¦æ¸¬è©¦æˆ‘çš„API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentController</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> StudentRepository repo;<br>    StudentController(StudentRepository repo) &#123;<br>        <span class="hljs-built_in">this</span>.repo = repo;<br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/api/student&quot;)</span><br>    List&lt;Student&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> repo.findAll();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">StudentRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">JpaRepository</span>&lt;Student, Long&gt; &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯å®‰è£ç’°å¢ƒï¼Œå®‰è£åŸºæœ¬çš„Spring Webã€å–ç”¨è³‡æ–™çš„Spring JPAã€è³‡æ–™åº«çš„ä¾è³´(ä»¥ä¸‹ä½¿ç”¨PostgreSQLèˆ‰ä¾‹)ã€SpringBootTestã€TestContainerèˆ‡Rest Assured ( æä¾›æ•´åˆæ¸¬è©¦ä½¿ç”¨çš„æ–¹æ³• )ï¼Œå¦‚æœä½ ä½¿ç”¨Mavençš„è©±ï¼Œå®‰è£æ‡‰è©²æœƒå¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">///</span> <span class="hljs-string">...</span><br><span class="hljs-string">&lt;properties&gt;</span><br><span class="hljs-string">&lt;java.version&gt;17&lt;/java.version&gt;</span><br><span class="hljs-string">&lt;testcontainer.version&gt;1.19.8&lt;/testcontainer.version&gt;</span><br><span class="hljs-string">&lt;/properties&gt;</span><br><span class="hljs-string">///</span> <span class="hljs-string">...</span><br><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.postgresql&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;postgresql&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;spring-boot-testcontainers&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;postgresql&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br><span class="hljs-string">&lt;dependency&gt;</span><br><span class="hljs-string">&lt;groupId&gt;io.rest-assured&lt;/groupId&gt;</span><br><span class="hljs-string">&lt;artifactId&gt;rest-assured&lt;/artifactId&gt;</span><br><span class="hljs-string">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="hljs-string">&lt;/dependency&gt;</span><br></code></pre></td></tr></table></figure><p>ç’°å¢ƒå®‰è£å¾Œä¾¿å¯ä»¥è‘—æ‰‹æ’°å¯«æ¸¬è©¦ç¨‹å¼äº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentControllerTest</span> &#123;<br><br>    <span class="hljs-meta">@LocalServerPort</span><br>    <span class="hljs-keyword">private</span> Integer port;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ©ç”¨docker Imageå»ºç«‹ä¸€å€‹PostgreSQLçš„å®¹å™¨ï¼Œå®¹å™¨å…§çš„ä½å€æ˜¯é è¨­çš„5432</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">static</span> PostgreSQLContainer&lt;?&gt; postgres = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PostgreSQLContainer</span>&lt;&gt;(<br>            <span class="hljs-string">&quot;postgres:16-alpine&quot;</span><br>    );<br><br>    <span class="hljs-meta">@BeforeAll</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeAll</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;PostgreSQL é–‹å§‹å»ºç«‹&quot;</span>);<br>        postgres.start();<br>    &#125;<br><br>    <span class="hljs-meta">@AfterAll</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterAll</span><span class="hljs-params">()</span> &#123;<br>        postgres.stop();<br>        System.out.println(<span class="hljs-string">&quot;PostgreSQL å·²çµ‚æ­¢&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@DynamicPropertySource</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureProperties</span><span class="hljs-params">(DynamicPropertyRegistry registry)</span> &#123;<br>        registry.add(<span class="hljs-string">&quot;spring.datasource.url&quot;</span>, postgres::getJdbcUrl);<br>        registry.add(<span class="hljs-string">&quot;spring.datasource.username&quot;</span>, postgres::getUsername);<br>        registry.add(<span class="hljs-string">&quot;spring.datasource.password&quot;</span>, postgres::getPassword);<br>    &#125;<br><br>    <span class="hljs-meta">@Autowired</span><br>    StudentRepository studentRepository;<br><br>    <span class="hljs-meta">@BeforeEach</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUp</span><span class="hljs-params">()</span> &#123;<br>        RestAssured.baseURI = <span class="hljs-string">&quot;http://localhost:&quot;</span> + port;<br>        studentRepository.deleteAll();<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">shouldGetAllStudents</span><span class="hljs-params">()</span> &#123;<br>        List&lt;Student&gt; students = List.of(<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-string">&quot;john@mail.com&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;Dennis&quot;</span>, <span class="hljs-string">&quot;dennis@mail.com&quot;</span>)<br>        );<br>        studentRepository.saveAll(students);<br><br>        given()<br>                .contentType(ContentType.JSON) <span class="hljs-comment">// è«‹æ±‚æ™‚çš„Header</span><br>                .<span class="hljs-keyword">when</span>()  <br>                .get(<span class="hljs-string">&quot;/api/students&quot;</span>) <span class="hljs-comment">// è«‹æ±‚è·¯å¾‘</span><br>                .then()<br>                .statusCode(<span class="hljs-number">200</span>) <span class="hljs-comment">// é è¨ˆæ¥å—å›å‚³statusCode</span><br>                .body(<span class="hljs-string">&quot;name&quot;</span>, everyItem(not(containsString(<span class="hljs-string">&quot;Clark&quot;</span>)))); <span class="hljs-comment">// å›å‚³ä¸­çš„æ¯ä¸€å€‹nameéƒ½ä¸å¯ä»¥åŒ…å«Clark</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€™æ®µå»ºæ§‹äº†ä¸€å€‹PostgreSQLçš„Instanceï¼Œä¸¦å¯¦éš›å­˜å…¥å€¼å¾Œé€²è¡Œæ•´åˆæ¸¬è©¦èˆ‡é©—è­‰çµæœã€‚æˆ‘ç°¡å–®è¬›ä¸€ä¸‹é‹ä½œ</p><ul><li>@SpringBootTest(webEnvironment &#x3D; SpringBootTest.WebEnvironment.RANDOM_PORT)<br>é€™æ®µä»£è¡¨äº†SpringBootTest æœƒåœ¨éš¨æ©Ÿçš„PortåŸ·è¡Œ ç”¨ä¾†æ¨¡æ“¬å¤–éƒ¨çš„HTTPè«‹æ±‚æ¸¬è©¦</li><li>@LocalServerPort<br>é€™æ®µå®£å‘Šäº†SpringBootTestçš„Port</li><li>@BeforeAllæ˜¯ä¸€å€‹SpringBootTestçš„æ–¹æ³•ï¼Œæœƒåœ¨å•Ÿå‹•ä¹‹å¾Œï¼Œä»»ä½•@TeståŸ·è¡Œä¹‹å‰è¢«åŸ·è¡Œï¼Œä¸”åªæœƒåŸ·è¡Œä¸€æ¬¡ï¼Œå¯ä»¥çœ‹å‡ºé€™ä¸€æ®µå•Ÿå‹•äº†PostgreSQLå®¹å™¨ã€‚</li><li>@AfterAllåœ¨æ‡‰ç”¨ç¨‹å¼çµæŸå¾ŒæŠŠPostgreSQLå®¹å™¨åœæ­¢ã€‚</li><li>@DynamicPropertySource<br>SpringBootæœ¬ä¾†è®€å–è³‡æ–™åº«ç›¸é—œä½å€è³‡è¨Šçš„æ˜¯é€éapplication.propertiesé€™å€‹æª”æ¡ˆï¼Œè©²è¨»è§£çš„ä½œç”¨æ˜¯å‹•æ…‹é…ç½®application.propertiesçš„å…§å®¹ã€‚é€™é‚Šæ˜¯å–å¾—å®¹å™¨çš„è·¯å¾‘èˆ‡å¸³è™Ÿå¯†ç¢¼ä¸¦è¦†è“‹æ‰é–‹ç™¼ç’°å¢ƒçš„application.properties</li><li>@BeforeEach<br>èˆ‡BeforeAllä¸åŒï¼Œè©²æ–¹æ³•æœƒåœ¨æ¯ä¸€å€‹Testæ–¹æ³•åŸ·è¡Œä¹‹å‰è¢«åŸ·è¡Œï¼Œæ¯”æ–¹èªªé€™æ®µå®šç¾©äº†æ•´åˆæ¸¬è©¦çš„è·¯å¾‘ï¼Œä¸¦ç§»é™¤æ‰€æœ‰å­˜æ”¾åœ¨Containerçš„è³‡æ–™ï¼Œé¿å…è³‡æ–™é‡è¤‡å­˜å…¥ã€‚</li></ul><p>ä»¥ä¸Šæ˜¯Spring Container çš„åŸºæœ¬ä½¿ç”¨ï¼Œå€‹äººè¦ºå¾—é€™å€‹æ–¹æ³•å¯ä»¥éš”é›¢é–‹ç™¼ç’°å¢ƒé©—è­‰APIï¼Œå°æ–¼æ’°å¯«æ•´åˆæ¸¬è©¦ä¾†èªªç›¸ç•¶ç†æƒ³ï¼Œå¦å¤–å¦‚æœæœ¬åœ°æ²’æœ‰Docker Imageï¼Œé‚„å¯ä»¥å”åŠ©å®‰è£ï¼Œæ¨è–¦å„ä½è©¦è©¦çœ‹ã€‚</p><p>é‚£éº¼ä»Šå¤©çš„æ–‡ç« å°±åˆ°é€™é‚Šï¼Œæ„Ÿæ©ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>Test Container</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring @Lombokä»‹ç´¹</title>
    <link href="/2024/10/11/Spring-Lombok%E4%BB%8B%E7%B4%B9/"/>
    <url>/2024/10/11/Spring-Lombok%E4%BB%8B%E7%B4%B9/</url>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ²’ä»€éº¼æ™‚é–“ï¼Œæ±ºå®šè¦ä¾†ä»‹ç´¹è¼•é¬†åˆç°¡å–®çš„Lombokï¼ŒLombokæ˜¯ä¸€å¥—Javaçš„å‡½å¼åº«ï¼Œå…§éƒ¨åŒ…å«äº†è¨±å¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>@Setter</li><li>@Getter</li><li>@Slf4j - æ’°å¯«logçš„å·¥å…·ï¼Œç¶“å¸¸ä»¥logé–‹é ­( ex.log.info())</li><li>@ToString - æ’°å¯«ç‰©ä»¶çš„toString() æ–¹æ³•ï¼Œè‹¥ä¸è¤‡å¯«åªæœƒå°å‡ºä½å€è³‡è¨Š</li><li>@NoArgsConstructor å»ºç«‹ç„¡åƒæ•¸å»ºæ§‹å¼</li><li>@AllArgsConstructor å»ºç«‹æ‰€æœ‰åƒæ•¸çš„å»ºæ§‹å¼</li><li>@RequireConstructor å»ºç«‹åŒ…å«æ‰€æœ‰finalåƒæ•¸çš„å»ºæ§‹å¼</li><li>@EqualsAndHash è‡ªå‹•è¤‡å¯«equalsèˆ‡hashæ–¹æ³•</li><li>@Builder éµå¾ªbuilerPattern ä¾†å»ºç«‹ç‰©ä»¶</li><li>@Data &gt;&gt; getter + setter + toString + equals + hashCode + requireArgsConstructor</li></ul><p>ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><br>@<span class="hljs-title class_">Slf4</span>j<br>@<span class="hljs-title class_">NoArgsConstructor</span><br>@<span class="hljs-title class_">AllArgsConstructor</span><br>@<span class="hljs-title class_">Builder</span><br>@<span class="hljs-title class_">Data</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>   private final int id;<br>   private final <span class="hljs-title class_">String</span> name;<br>   private <span class="hljs-title class_">String</span> status;<br>   private <span class="hljs-title class_">String</span> nickname;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€™æ˜¯ä½¿ç”¨äº†Lombokï¼Œè®“æˆ‘å€‘çœ‹çœ‹æ²’ä½¿ç”¨Lombokçš„ç‰ˆæœ¬ ( åŒåŠŸèƒ½ )</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    private <span class="hljs-keyword">static</span> final <span class="hljs-title class_">Logger</span> log = <span class="hljs-title class_">LoggerFactory</span>.<span class="hljs-title function_">getLogger</span>(<span class="hljs-title class_">Student</span>.<span class="hljs-property">class</span>);<br><br>    private final int id;<br>    private final <span class="hljs-title class_">String</span> name;<br>    private <span class="hljs-title class_">String</span> status;<br>    private <span class="hljs-title class_">String</span> nickname;<br><br>    <span class="hljs-comment">// No-args constructor</span><br>    public <span class="hljs-title class_">Student</span>() &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-number">0</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-literal">null</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-literal">null</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nickname</span> = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// All-args constructor</span><br>    public <span class="hljs-title class_">Student</span>(int id, <span class="hljs-title class_">String</span> name, <span class="hljs-title class_">String</span> status, <span class="hljs-title class_">String</span> nickname) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = status;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nickname</span> = nickname;<br>    &#125;<br><br>    <span class="hljs-comment">// Getters</span><br>    public int <span class="hljs-title function_">getId</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    public <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    public <span class="hljs-title class_">String</span> <span class="hljs-title function_">getStatus</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> status;<br>    &#125;<br><br>    public <span class="hljs-title class_">String</span> <span class="hljs-title function_">getNickname</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> nickname;<br>    &#125;<br><br>    <span class="hljs-comment">// Setters</span><br>    public <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStatus</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> status</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = status;<br>    &#125;<br><br>    public <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNickname</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> nickname</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">nickname</span> = nickname;<br>    &#125;<br><br>    <span class="hljs-comment">// toString</span><br>    @<span class="hljs-title class_">Override</span><br>    public <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, status=&#x27;&quot;</span> + status + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, nickname=&#x27;&quot;</span> + nickname + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// equals and hashCode</span><br>    @<span class="hljs-title class_">Override</span><br>    public boolean <span class="hljs-title function_">equals</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> o</span>) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || <span class="hljs-title function_">getClass</span>() != o.<span class="hljs-title function_">getClass</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-title class_">Student</span> student = (<span class="hljs-title class_">Student</span>) o;<br>        <span class="hljs-keyword">return</span> id == student.<span class="hljs-property">id</span> &amp;&amp; <br>               <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">equals</span>(name, student.<span class="hljs-property">name</span>) &amp;&amp;<br>               <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">equals</span>(status, student.<span class="hljs-property">status</span>) &amp;&amp;<br>               <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">equals</span>(nickname, student.<span class="hljs-property">nickname</span>);<br>    &#125;<br><br>    @<span class="hljs-title class_">Override</span><br>    public int <span class="hljs-title function_">hashCode</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">hash</span>(id, name, status, nickname);<br>    &#125;<br></code></pre></td></tr></table></figure><p>ç¸½ä¹‹ï¼ŒLombokåˆ©ç”¨è¨»è§£ä¾†å¹«ä½ çœå»ä¸€å¤§ç­†è¦æ…¢æ…¢æ‰‹å¯«ç‰©ä»¶å»ºç«‹èˆ‡è®€å–æ–¹æ³•çš„æ™‚é–“ï¼Œæˆ‘éå»ä¹Ÿå¾ˆå–œæ­¡ä½¿ç”¨Lombokï¼Œä½†æ˜¯ä»–ä¹Ÿæœªå¿…éƒ½æ˜¯å¥½è™•ã€‚ä»¥ä¸‹çµ±æ•´å‡ºå®ƒçš„ç¼ºé»ï¼š</p><ol><li>é«˜åº¦ä¾µå…¥æ€§ã€‚ Lombok å³ä½¿å¦‚æ­¤å¯¦ç”¨ï¼Œä»–ä¹Ÿæ²’æœ‰è¢«åŠ å…¥springBootè£¡é¢ï¼Œè€Œæ˜¯ä¸€å€‹ç¬¬ä¸‰æ–¹çš„å¥—ä»¶ï¼Œè€Œä¸”åªè¦åœ¨å°ˆæ¡ˆä½¿ç”¨äº†ï¼Œå°±æœƒå»ºè­°ä¸€å¾‹ä½¿ç”¨ï¼Œé¿å…åŒæ™‚å­˜åœ¨å…©ç¨®æ–¹æ³•ä¸å¥½ç®¡ç†ã€‚</li><li>ç®¡ç†ä¸æ˜“ï¼Œé€šå¸¸ä¾†èªªï¼Œæˆ‘å€‘å¯ä»¥é€éé»é¸functionä¾†æ‰¾å‡ºä»–çš„usageï¼Œä½†lombokç›®å‰ä¸è¡Œï¼Œä¹Ÿå°±æ˜¯èªªå¦‚æœä½¿ç”¨Lombokï¼Œæœƒå°è‡´ä½ ç„¡æ³•ç¢ºèªåˆ°åº•æœ‰å¤šå°‘åœ°æ–¹ä½¿ç”¨å®ƒã€‚</li><li>å®¹æ˜“å°è‡´å£ç¿’æ…£ï¼Œç•¶æƒ³åˆ°å»ºç«‹ç‰©ä»¶æ™‚ï¼Œæƒ³éƒ½æ²’æƒ³å°±æ”¾ä¸€å€‹@Dataä¸Šå»ï¼Œä¸¦ä¸æ˜¯ä¸€å€‹å¥½ç¿’æ…£ï¼Œä½†ä½¿ç”¨Lombokå¸¸å¸¸æœƒå°è‡´æˆ‘å€‘é€™éº¼åšã€‚</li><li>å¤–éƒ¨å¥—ä»¶ä¾è³´æœ‰æ™‚æœƒå°è‡´æ„æƒ³ä¸åˆ°çš„å•é¡Œç™¼ç”Ÿï¼Œä¹‹å‰æˆ‘æœ‰ä¸€æ¬¡é–‹ç™¼æ–°å°ˆæ¡ˆæ™‚ï¼Œå¼•å…¥äº†Lombokï¼Œçµæœå› ç‚ºå¥—ä»¶ç‰ˆæœ¬ç•°å¸¸ï¼Œgetterèˆ‡setterå‡ºä¾†çš„å€¼å…¨éƒ¨è®Šæˆnullï¼Œä½†æ²’æœ‰ä»»ä½•exceptionå›å ±ï¼Œæˆ‘æ‰¾äº†ä¸€ä¸‹å­æ‰ç™¼ç¾æ˜¯lombokçš„å•é¡Œã€‚</li></ol><p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»Šå¤©å·æ‡¶çš„åˆ†äº«ï¼Œæˆ‘å€‘æ˜å¤©è¦‹ï¼Œæ°æ°</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootçš„ä¸‰å±¤å¼æ¶æ§‹</title>
    <link href="/2024/10/08/SpringBoot%E7%9A%84%E4%B8%89%E5%B1%A4%E5%BC%8F%E6%9E%B6%E6%A7%8B/"/>
    <url>/2024/10/08/SpringBoot%E7%9A%84%E4%B8%89%E5%B1%A4%E5%BC%8F%E6%9E%B6%E6%A7%8B/</url>
    
    <content type="html"><![CDATA[<p>SpringBooté‡å°ä¸€å€‹Rest Web Serviceï¼Œæå‡ºäº†ä¸‰å±¤å¼æ¶æ§‹çš„æ¦‚å¿µï¼Œåˆ†åˆ¥æ˜¯Controllerã€Serviceã€Repositoryã€‚</p><p>ä»¥ä¸‹æˆ‘å€‘ç°¡å–®å»ºç«‹ä¸€å€‹åŸºæœ¬çš„ä¸‰å±¤å¼æ¶æ§‹æ‡‰ç”¨ç¨‹å¼ï¼Œä¸¦èªªæ˜å…¶ä¸­æ¦‚å¿µã€‚</p><p>Controllers</p><p>Controlleræ˜¯APIçš„é€²å…¥å£ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯å‚³å…¥åƒæ•¸çš„æª¢æ¸¬èˆ‡ä¸€äº›è³‡æ–™çš„å‰è™•ç†ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œä¸€å€‹æœ€åŸºæœ¬çš„Cotnrolleræœƒåƒé€™æ¨£ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@<span class="hljs-title class_">RestController</span><br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentController</span> &#123;<br><br>    @<span class="hljs-title class_">Autowired</span><br>    private <span class="hljs-title class_">StudentService</span> studentService;<br><br>    @<span class="hljs-title class_">GetMapping</span>(<span class="hljs-string">&quot;/getOneStudent&quot;</span>)<br>    public <span class="hljs-title class_">Student</span> <span class="hljs-title function_">getOneStudent</span>(<span class="hljs-params">@RequestParam(<span class="hljs-string">&quot;name&quot;</span>) <span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!name.<span class="hljs-title function_">matches</span>(<span class="hljs-string">&quot;/s+&quot;</span>))&#123;<br>            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(name + <span class="hljs-string">&quot;éå§“åæ¬„ä½&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> studentService.<span class="hljs-title function_">getStudent</span>(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>@RestController æ˜¯Springçš„è¨»è§£ï¼Œä»£è¡¨é€™å€‹classæª”ä½œç‚ºä¸€å€‹REST API çš„ Controllerè¢«å®šç¾©ï¼Œåœ¨é€™è£¡å¯ä»¥æ’°å¯«å„ç¨®endPoint(APIå…¥å£)ã€‚</p><p>@Autowired ä»£è¡¨äº†äº¤çµ¦Spring ç®¡ç†çš„ Beanï¼Œä¸¦å·²å…¨åŸŸæ¨¡å¼æ³¨å…¥åˆ°é€™å€‹æª”æ¡ˆä¸­ï¼Œé€™éƒ¨åˆ†ä¹‹å¾Œæˆ‘æœƒä¹‹å¾Œå†èªªæ˜ï¼Œç¾åœ¨åªéœ€è¦äº†è§£å®ƒæ˜¯ä¸€å€‹Serviceï¼Œå¯ä»¥å¹«æˆ‘å€‘è™•ç†éº»ç…©çš„äº‹æƒ…å°±å¥½ã€‚</p><p>@GetMapping(â€&#x2F;getOneStudentâ€) ä»£è¡¨äº†ä¸€å€‹endPointï¼Œè·¯å¾‘ç‚º &#x2F;getOneStudentã€‚å¦‚æœä½ å•Ÿå‹•çš„è©±ï¼Œä»–é è¨­æœƒé€£ç·šåˆ°<a href="http://localhost:8080/getOneMerchant%E9%80%99%E5%80%8B%E8%B7%AF%E5%BE%91%E4%B8%8B%E3%80%82">http://localhost:8080/getOneMerchanté€™å€‹è·¯å¾‘ä¸‹ã€‚</a></p><p>EndPointå…§éƒ¨æ¥æ”¶äº†ä¸€å€‹åƒæ•¸ï¼Œå¦‚æœç•¶åˆURLå¸¶å…¥çš„æŸ¥è©¢æ¢ä»¶æœ‰åŒ…å«nameçš„è©±ï¼Œé€™è£¡å°±æœƒè¢«è¼‰å…¥é€²å»ï¼Œä»–æ¥è‘—æœƒåˆ©ç”¨æ­£è¦è¡¨é”å¼åˆ¤æ–·Stringæ˜¯å¦ç¬¦åˆç´”è‹±æ–‡ä¸åŒ…å«æ•¸å­—ï¼Œå¦‚æœåˆ¤æ–·å¤±æ•—çš„è©±å°‡æœƒå›å‚³Nullï¼Œå¦å‰‡å‘¼å«StudentService.getStudent()æ–¹æ³•å–å¾—Studentè³‡æ–™ã€‚</p><p>çœ‹å®Œäº†Controlleréƒ¨åˆ†ï¼Œæˆ‘å€‘æ¥è‘—ä¾†äº†è§£å¯¦éš›ä¸ŠAPIæ˜¯æ€éº¼å–å¾—æˆ‘å€‘æ‰€éœ€è¦çš„è³‡æ–™çš„ã€‚</p><p>Serviceæ˜¯ç¨‹å¼ä¸»è¦çš„åŠŸèƒ½å€åŸŸï¼Œè™•ç†ä¸€å€‹APIæœ€ç‚ºè¤‡é›œçš„å•†æ¥­é‚è¼¯éƒ¨åˆ†ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@<span class="hljs-title class_">Service</span><br>public <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentService</span> &#123;<br><br>    @<span class="hljs-title class_">Autowired</span><br>    private <span class="hljs-title class_">StudentRepository</span> studentRepository;<br><br>    public <span class="hljs-title class_">Student</span> <span class="hljs-title function_">getStudent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) &#123;<br>        <span class="hljs-keyword">return</span> studentRepository.<span class="hljs-title function_">findByName</span>(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>@Service å®£å‘Šäº†é€™å€‹.classæ˜¯ä¸€å€‹Service(å»¢è©±)ï¼Œç•¶ä¸­@Autowiredå¼•å…¥äº†StudentRepositoryã€‚</p><p>getStudent()çš„æ–¹æ³•å¾ˆç°¡å–®ï¼Œå°±æ˜¯åˆå‘¼å«äº†ä¸€å±¤ï¼Œå–å¾—Studentçš„è³‡æ–™ã€‚</p><p>ä½ ä¹Ÿè¨±ç¾åœ¨æœƒå¾ˆå›°æƒ‘ç‚ºä»€éº¼è¦æå¾—é€™éº¼éº»ç…©ï¼Œä½†æˆ‘å¿…é ˆèªªï¼Œç•¶ç³»çµ±åŠŸèƒ½é€æ¼¸è¤‡é›œï¼Œè¦æ¨¡é€æ¼¸å¢å¤§å¾Œï¼Œè‰¯å¥½çš„æŠŠåŠŸèƒ½åˆ‡åˆ†å‡ºä¾†æ˜¯å¾ˆé‡è¦çš„ï¼ŒDebugæ™‚ä½ å°±æœƒå¾ˆæ„Ÿè¬çš„ã€‚</p><p>æœ€å¾Œæ˜¯Repositoryçš„éƒ¨åˆ†ï¼ŒRepositoryæŒç®¡èˆ‡è³‡æ–™åº«çš„äº’å‹•ï¼Œä¸»è¦æ˜¯æŠŠè³‡æ–™åº«çš„éƒ¨åˆ†å¾Serviceå±¤ç¨ç«‹å‡ºä¾†ã€‚å¯¦éš›çš„ç¨‹å¼ç¢¼æœƒåƒæ˜¯ä»¥ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jsx">@<span class="hljs-title class_">Repository</span><br>public interface <span class="hljs-title class_">StudentRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CrudRepository</span>&lt;<span class="hljs-title class_">Student</span>, <span class="hljs-title class_">Long</span>&gt; &#123;<br>    <span class="hljs-title class_">Student</span> <span class="hljs-title function_">findByName</span>(<span class="hljs-title class_">String</span> name);<br>&#125;<br></code></pre></td></tr></table></figure><p>@Repositoryçš„åŠŸç”¨â€¦é¡æˆ‘å°±ä¸èªªäº†ï¼Œä½ å€‘çŒœå¾—åˆ°çš„ã€‚é€™å€‹StudentRepositoryçš„ä»‹é¢ç¹¼æ‰¿äº†CrudRepositoryé€™å€‹é¡åˆ¥ï¼Œé€™æ„å‘³è‘—å®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs jsx">public interface <span class="hljs-title class_">CrudRepository</span>&lt;T, <span class="hljs-variable constant_">ID</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Repository</span>&lt;T, <span class="hljs-variable constant_">ID</span>&gt; &#123;<br>    &lt;S <span class="hljs-keyword">extends</span> T&gt; S <span class="hljs-title function_">save</span>(S entity);<br>    &lt;S <span class="hljs-keyword">extends</span> T&gt; <span class="hljs-title class_">Iterable</span>&lt;S&gt; <span class="hljs-title function_">saveAll</span>(<span class="hljs-title class_">Iterable</span>&lt;S&gt; entities);<br>    <span class="hljs-title class_">Optional</span>&lt;T&gt; <span class="hljs-title function_">findById</span>(<span class="hljs-variable constant_">ID</span> id);<br>    boolean <span class="hljs-title function_">existsById</span>(<span class="hljs-variable constant_">ID</span> id);<br>    <span class="hljs-title class_">Iterable</span>&lt;T&gt; <span class="hljs-title function_">findAll</span>();<br>    <span class="hljs-title class_">Iterable</span>&lt;T&gt; <span class="hljs-title function_">findAllById</span>(<span class="hljs-title class_">Iterable</span>&lt;<span class="hljs-variable constant_">ID</span>&gt; ids);<br>    long <span class="hljs-title function_">count</span>();<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteById</span>(<span class="hljs-variable constant_">ID</span> id);<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span>(T entity);<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteAllById</span>(<span class="hljs-title class_">Iterable</span>&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-variable constant_">ID</span>&gt; ids);<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteAll</span>(<span class="hljs-title class_">Iterable</span>&lt;? <span class="hljs-keyword">extends</span> T&gt; entities);<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteAll</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢æˆ‘å°±ä¸ä¸€ä¸€ç´°èªªï¼Œç¸½ä¹‹å°±æ˜¯ç¬¦åˆä¸€èˆ¬æ—¥å¸¸çš„å°è³‡æ–™åº«çš„ç•°å‹•åŠŸèƒ½ã€‚åƒä¸Šé¢çš„åŠŸèƒ½å°±æ˜¯åˆ©ç”¨Nameå¾è³‡æ–™åº«ä¸­æ‰¾å‡ºStudentçš„è³‡æ–™ï¼Œä¸¦å›å‚³åˆ°Serviceï¼Œå†å›å‚³åˆ°Controllerï¼Œæœ€å¾Œå›è¦†çµ¦APIçš„ä½¿ç”¨è€…ã€‚ä»¥ä¸Šå°±æ˜¯ä¸€å€‹æœ€åŸºæœ¬çš„ä¸‰å±¤å¼æ¶æ§‹çš„æ‡‰ç”¨ç¨‹å¼ã€‚</p><p>ä»Šå¤©çš„éƒ¨åˆ†å°±åˆ°æ­¤ç‚ºæ­¢äº†ï¼Œæ˜å¤©è¦‹å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¿«é€Ÿéµå¥½ä¸€å€‹SpringBootå°ˆæ¡ˆ</title>
    <link href="/2024/10/07/%E5%BF%AB%E9%80%9F%E9%8D%B5%E5%A5%BD%E4%B8%80%E5%80%8BSpringBoot%E5%B0%88%E6%A1%88/"/>
    <url>/2024/10/07/%E5%BF%AB%E9%80%9F%E9%8D%B5%E5%A5%BD%E4%B8%80%E5%80%8BSpringBoot%E5%B0%88%E6%A1%88/</url>
    
    <content type="html"><![CDATA[<p>å¥½å•¦ï¼Œè¬›äº†é‚£éº¼å¤šç¯‡Javaäº†ï¼Œæˆ‘æƒ³æ˜¯æ™‚å€™ä¾†çœ‹çœ‹SpringBootäº†</p><p>éå»ï¼Œé‚„è¨˜å¾—æˆ‘åœ¨å­¸ç”Ÿæ™‚æœŸæ™‚ï¼Œå…‰æ˜¯å®‰è£Java JDK ç­‰ç­‰çš„å°±å¯ä»¥æä¸ŠåŠå¤©ï¼Œä½ å¾—è¦ä¸‹è¼‰JDKï¼Œä½ é‚„è¦çŸ¥é“è‡ªå·±éœ€è¦çš„æ˜¯Java EEé‚„æ˜¯Java SEï¼Œä¸‹è¼‰å¾Œä½ é‚„è¦çŸ¥é“æ€éº¼é–‹å•Ÿç³»çµ±ç’°å¢ƒè®Šæ•¸åŠ å…¥pathä»¥åŠJAVA_HOMEç­‰ç­‰ã€‚èˆ‰å‡¡å°‘äº†ä¸€å€‹ç´°ç¯€éƒ½æœƒè®“ä¸€å€‹åˆæ¥è§¸ç¨‹å¼çš„æœ‹å‹æ„Ÿåˆ°æŒ«æŠ˜èˆ‡å°å¤–é¢ç±ƒçƒå ´çš„æ†§æ†¬ã€‚ ( è¿·ä¹‹è²ï¼šæˆ‘é‚„æ²’èªªEcpliseå‘¢ )</p><p>æ‰€å¹¸å¾Œä¾†ï¼ŒJetBrainçš„Intellij IDEA æ¨å‡ºäº†ï¼Œä¸¦æœ€å¤§åŒ–ç°¡åŒ–äº†åˆå§‹ç’°å¢ƒå®‰è£çš„è¤‡é›œç¨‹åº¦ï¼Œè®“Javaé–‹ç™¼è€…ä¸å¿…åœ¨å°Javaå®‰è£ç’°å¢ƒç„¦é ­çˆ›é¡ã€‚</p><p>é¦–å…ˆï¼Œè¦å®‰è£SpringBootï¼Œä½ åªéœ€è¦å®‰è£Intellij IDEAï¼š<a href="https://www.jetbrains.com/idea/">https://www.jetbrains.com/idea/</a></p><p>å¦‚æœä½ æ˜¯å…è²»ä»”çš„è©±å®‰è£Community ç‰ˆæœ¬ï¼Œé€™å€‹ç‰ˆæœ¬ä¸€äº›åŠŸèƒ½æ¯”è¼ƒä¾·é™ï¼Œä½†å¦‚æœä½ åªæ˜¯ç”¨ä¾†ç·´ç¿’è€Œéå¤§é‡ä½¿ç”¨çš„è©±ï¼ŒCommunityå°±è¶³å¤ æ‡‰ä»˜äº†ã€‚</p><p>å¦‚æœä½ æ˜¯ä»˜è²»ä»”ã€æˆ–æ˜¯å­¸ç”Ÿçš„è©±å¯ä»¥å®‰è£Ultimateç‰ˆæœ¬ï¼Œé€™å€‹é …ç›®æ¯”è¼ƒå®Œæ•´ï¼Œä½†åŸºæœ¬åŠŸèƒ½éƒ½æ˜¯ä¸å—å½±éŸ¿çš„ï¼Œè«‹å„ä½è‡ªè¡Œé¸æ“‡ã€‚</p><p>åœ¨ç­‰å¾…å®‰è£çš„åŒæ™‚ï¼Œå„ä½å¯ä»¥å…ˆé–‹å•ŸSpringå®˜æ–¹æä¾›çš„å°ˆæ¡ˆç”¢ç”Ÿå™¨ï¼š<a href="https://start.spring.io/;">Spring Initializr</a></p><p>åœ¨é€™è£¡ä½ å¯ä»¥é¸æ“‡ä½ æƒ³è¦ä½¿ç”¨çš„ç‰ˆæœ¬åŠå·¥å…·ï¼Œè‹¥æ˜¯æ‡¶å¾—æƒ³ï¼Œå¯ä»¥åƒè€ƒæˆ‘çš„é€™å¼µåœ–ã€‚</p><p>è¨˜å¾—è¦å¼•å…¥Spring Webï¼Œå› ç‚ºæˆ‘å€‘è¦æ’°å¯«çš„æ˜¯ä¸€å€‹Web Applicationã€‚</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/48871ff2-43a1-4294-ac43-f706269b20d2/b27bbcd3-1719-4916-a911-c8f23e86391f/image.png" alt="image.png"></p><p>ä¸‹è¼‰ä¸¦è§£å£“ç¸®å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨ä½ å‰›å‰›ä¸‹è¼‰å¥½çš„Intellij IDEAé–‹å•Ÿå°ˆæ¡ˆã€‚</p><p>æ¥ä¸‹ä¾†ä½ æ‡‰è©²æœƒçœ‹åˆ°é€™æ¨£çš„ç•«é¢ï¼Œé€™å°±æ˜¯ä¸€å€‹æœ€åŸå§‹çš„SpringBootå°ˆæ¡ˆï¼Œç°¡å–®å§ã€‚</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/48871ff2-43a1-4294-ac43-f706269b20d2/6a5286ad-4cdd-464f-b32b-c06c25eceb25/image.png" alt="image.png"></p><p>å†ä¾†ä»‹ç´¹ä¸€ä¸‹å³é‚Šçš„ç›®éŒ„çµæ§‹ï¼Œä¸»è¦çš„ç¨‹å¼ç¢¼éƒ½æ”¾åœ¨srcç›®éŒ„ä¸‹ï¼Œsrcåº•ä¸‹æœ‰mainèˆ‡testï¼Œtestä¸»è¦æ˜¯æä¾›çµ¦å¯«æ¸¬è©¦æ¡ˆä¾‹æ™‚ä½¿ç”¨ï¼Œä¸€èˆ¬é–‹ç™¼çš„ç¨‹å¼ç¢¼å‰‡æœƒèšé›†åœ¨mainä¸­ã€‚</p><p>mainä¸­åŒ…å«äº†javaèˆ‡resourceï¼Œresourceä¸»è¦æ˜¯å¯ä»¥æ”¾ä¸€äº›éœæ…‹è³‡æºï¼Œæ¯”æ–¹èªªåœ–ç‰‡æˆ–æª”æ¡ˆç­‰ç­‰ï¼Œä»¥åŠå‰ç«¯çš„ç•«é¢æœƒæ”¾åœ¨templateä½ç½®ï¼Œjavaå°±â€¦..javaã€‚</p><p>å¦å¤–æœ‰ä¸€å€‹å€¼å¾—ä¸€æçš„å°±æ˜¯application.propertiesé€™å€‹æª”æ¡ˆã€‚application.properties æ˜¯SpringBootç”¨ä¾†ç°¡åŒ–é…ç½®çš„ä¸€å€‹æª”æ¡ˆã€‚å‡è¨­ä½ æƒ³è¦æ’°å¯«Applicationé–‹æ”¾çš„portã€DBçš„é€£ç·šURLã€æ˜¯å¦è¦å¥—ç”¨ç†±é‡å•Ÿç­‰ç­‰éƒ½å¯ä»¥æ”¾åœ¨é€™è£¡é…ç½®ï¼Œåªè¦è¨˜å¾—éµç…§SpringBootçš„æ ¼å¼ï¼Œå°±å¯ä»¥é‹ä½œï¼Œè€Œä¸å¿…æ’°å¯«ç¨‹å¼ç¢¼ã€‚</p><p>å†ä¾†æˆ‘å€‘ä¾†çœ‹åˆ°DemoApplicationé€™å€‹æª”æ¡ˆã€‚é€™é‚Šæ˜¯ç¨‹å¼çš„èµ·å§‹é»ï¼Œ@SpringBootApplicationå®£å‘Šäº†é€™æ˜¯ä¸€å€‹SpringBootçš„æ‡‰ç”¨ç¨‹å¼ã€‚</p><p>æœ€å¾Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹å¤–é¢çš„pom.xmlæª”æ¡ˆã€‚</p><p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/48871ff2-43a1-4294-ac43-f706269b20d2/4d17bc93-d60b-4be7-a2f0-9f2882315a69/image.png" alt="image.png"></p><p>ä½ å¯èƒ½çœ¼èŠ±æ’©äº‚ï¼Œä½†æ²’é—œä¿‚ï¼Œä½ ä¸å¿…æ¯ä¸€è¡Œéƒ½äº†è§£å®ƒã€‚å…ˆé—œæ³¨åœ¨ç¾æœ‰çš„é‡é»å°±å¥½ï¼š</p><ol><li>name å®ƒåæ˜ äº†ä½ çš„æ‡‰ç”¨ç¨‹å¼çš„åç¨±</li><li>description å®ƒåæ˜ äº†ä½ çš„æ‡‰ç”¨ç¨‹å¼çš„æè¿°</li><li>java.version é€™éƒ¨åˆ†æ±ºå®šäº†ä½ è¦åœ¨å°ˆæ¡ˆä½¿ç”¨çš„JDKç‰ˆæœ¬</li><li><dependecies> é€™éƒ¨åˆ†å…§éƒ¨å°±æ˜¯æ”¾ç½®ä½ æƒ³è¦å¼•å…¥çš„dependencyã€æ¯”æ–¹èªªå‰›å‰›å¼•å…¥çš„Spring Webå°±æœƒä»¥ spring-boot-starter-webé¡¯ç¤ºåœ¨dependencyåœ¨è£¡é¢ï¼Œå¦å¤–é‚„æœ‰ä¸€äº›SpringBooté è¨­å¼•å…¥çš„dependencyï¼Œå°±ä¸ä¸€ä¸€å¤šåšä»‹ç´¹äº†ã€‚<br>ä¹‹å¾Œè‹¥æ˜¯è¦å¼•å…¥å¥—ä»¶ï¼Œä¸å¿…è‡ªå·±å¯«ï¼Œç›´æ¥å¾Mavenå®˜æ–¹å–å¾—å°±å¯ä»¥è¤‡è£½è²¼ä¸Šäº†ï¼Œç›¸ç•¶æ–¹ä¾¿ã€‚<a href="https://mvnrepository.com/artifact/org.springframework/spring-aop/6.1.12">https://mvnrepository.com/artifact/org.springframework/spring-aop/6.1.12</a></li></ol><p>ä»¥ä¸Šæ˜¯æˆ‘çš„æ¥µçŸ­SpringBootå°ˆæ¡ˆä»‹ç´¹ï¼Œä¸‹ä¸€è¼ªæˆ‘å€‘è¦é€²è¡Œé–‹ç™¼ï¼Œå¾ŒçºŒæœƒæåˆ°æ›´å¤šæœ‰é—œSpring SpringBootçš„äº‹ï¼Œé‚£éº¼æˆ‘å€‘ä¸‹æ¬¡è¦‹æ‹‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java hashcode()è§£èªª</title>
    <link href="/2024/10/05/Java-hashcode-%E8%A7%A3%E8%AA%AA/"/>
    <url>/2024/10/05/Java-hashcode-%E8%A7%A3%E8%AA%AA/</url>
    
    <content type="html"><![CDATA[<p>ä¸Šå›ï¼Œæˆ‘å€‘é‡å°Studentç‰©ä»¶è¦†å¯«äº†.equals()æ–¹æ³•ï¼Œé€šå¸¸åœ¨è¤‡å¯«.equals()å¾Œï¼Œå¾ˆå¤šäººæœƒå»ºè­°éœ€è¦ä¸€ä½µè¦†å¯«.hashcode()æ–¹æ³•ï¼Œé€™æ˜¯ç‚ºä»€éº¼å‘¢ï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘å€‘å…ˆå­¸ç¿’ä¸€å€‹è§€å¿µã€‚ä»€éº¼æ˜¯ã€ŒHashã€ï¼Ÿ</p><p>ä¸­æ–‡å«åšé›œæ¹Šï¼ŒHashå°±æ˜¯ä¸€ç¨®æŠŠè³‡æ–™é‡æ–°è™•ç†éçš„ä¸€ç¨®æ–¹æ³•ï¼Œæ¯”æ–¹èªªé›œæ¹Šæ¼”ç®—æ³• ( SHA-1ã€MD5ã€SHA-256ç­‰ç­‰)ï¼Œé€™æ¨£é‡å°è³‡æ–™ç”¢ç”Ÿå‡ºçš„ä¸€ä¸²äº‚æ•¸ï¼Œæˆ‘å€‘å¸¸ç¨±å‘¼å®ƒç‚ºHashCodeã€‚èˆ‰å¸¸è¦‹çš„ä¾‹å­ä¾†èªªï¼Œæ•¸ä½ç°½ç« å°±æ˜¯æ¯”å°é›™æ–¹ç”¢ç”Ÿå‡ºçš„Hashæ˜¯å¦ç›¸åŒï¼Œä¾†åˆ¤æ–·å…§å®¹æœ‰ç„¡é­åˆ°ç«„æ”¹ã€‚</p><p>çœ‹åˆ°é€™è£¡ï¼Œä½ å¯èƒ½æœ‰äº›æƒ³æ³•äº†ï¼Œæ²’éŒ¯ï¼ŒhashCode()ä¹Ÿåœ¨å¾ˆå¤šåœ°æ–¹æ˜¯ç”¨ä¾†æ¯”å°çš„ï¼Œæ¯”æ–¹èªªHashSeté€™å€‹å‹åˆ¥å°±æœƒé è¨­ä½¿ç”¨hashCodeä¾†åˆ¤æ–·æ˜¯å¦æ˜¯åŒä¸€å€‹å€¼ã€‚æˆ‘å€‘ç¹¼çºŒä¸Šä¸€ç¯‡çš„ç¯„ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>        <span class="hljs-type">int</span> schoolId;<br>        Integer age;<br>        String name;<br>        <span class="hljs-type">char</span> rank;<br>        Student(<span class="hljs-type">int</span> schoolId, Integer age, String name, <span class="hljs-type">char</span> rank) &#123;<br>            <span class="hljs-built_in">this</span>.schoolId = schoolId;<br>            <span class="hljs-built_in">this</span>.age = age;<br>            <span class="hljs-built_in">this</span>.name = name;<br>            <span class="hljs-built_in">this</span>.rank = rank;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object that)</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.schoolId == ((Student) that).schoolId &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.age, ((Student) that).age) &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.name, ((Student) that).name) &amp;&amp;<br>                    <span class="hljs-built_in">this</span>.rank == ((Student) that).rank;<br>        &#125;<br>  &#125;<br><br><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-string">&quot;John&quot;</span>,<span class="hljs-string">&#x27;B&#x27;</span>);<br><span class="hljs-type">Student</span> <span class="hljs-variable">copyStudent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-string">&quot;John&quot;</span>,<span class="hljs-string">&#x27;B&#x27;</span>);<br>System.out.println(student.hashCode()); <span class="hljs-comment">//output: 162083492</span><br>System.out.println(copyStudent.hashCode()); <span class="hljs-comment">//output: 1135300227</span><br><br>HashSet&lt;Student&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>list.add(student);<br>list.add(copyStudent);<br>System.out.println(list.size()); <span class="hljs-comment">// 2</span><br></code></pre></td></tr></table></figure><p>çœ‹ç¬¬ä¸‰ã€å››è¡Œä½ å¯ä»¥ç™¼ç¾ï¼Œå…©å€‹Studentç‰©ä»¶çš„hashCodeä¾ç„¶æ˜¯ä¸åŒçš„ï¼Œé€™é»å°è‡´äº†ä»¥ä¸‹çš„HashSetä¸­ï¼Œå°‡é€™å…©å€‹ç‰©ä»¶åˆ¤æ–·ç‚ºä¸åŒçš„ç‰©ä»¶ï¼Œæ‰€ä»¥é™£åˆ—é•·åº¦ç‚º2ã€‚ä½†æˆ‘å€‘çŸ¥é“ï¼ŒSet é›†åˆé€™å€‹è³‡æ–™çµæ§‹ æ‡‰è©²è¦èƒ½å¤ å°‡é‡è¤‡çš„è³‡æ–™æ’é™¤æ‰å°ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘å€‘è¦åšçš„æ˜¯ï¼Œåœ¨è¤‡å¯«equals()æ–¹æ³•å¾Œï¼ŒåŒæ­¥è¤‡å¯«.hashCode()æ–¹æ³•ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>        <span class="hljs-type">int</span> schoolId;<br>        Integer age;<br>        String name;<br>        <span class="hljs-type">char</span> rank;<br>        Student(<span class="hljs-type">int</span> schoolId, Integer age, String name, <span class="hljs-type">char</span> rank) &#123;<br>            <span class="hljs-built_in">this</span>.schoolId = schoolId;<br>            <span class="hljs-built_in">this</span>.age = age;<br>            <span class="hljs-built_in">this</span>.name = name;<br>            <span class="hljs-built_in">this</span>.rank = rank;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object that)</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.schoolId == ((Student) that).schoolId &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.age, ((Student) that).age) &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.name, ((Student) that).name) &amp;&amp;<br>                    <span class="hljs-built_in">this</span>.rank == ((Student) that).rank;<br>        &#125;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> Objects.hash(schoolId, age, name, rank);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>é€™æ¨£ï¼Œå…©å€‹ç‰©ä»¶å°å‡ºçš„hashCodeå°±æœƒæ˜¯åŒä¸€å€‹å€¼äº†ï¼ŒHashSetä¹Ÿæ‰èƒ½å¤ æ­£å¸¸é‹ä½œã€‚</p><p>æ¥è‘—æˆ‘å€‘ä¾†çœ‹çœ‹å¦å¤–ä¸€å€‹æœ‰é—œHashçš„è³‡æ–™çµæ§‹ï¼šHashMapã€‚é¦–å…ˆæˆ‘å€‘ä¾†çœ‹çœ‹HashMapçš„å…§éƒ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashMap</span>&lt;K,V&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMap</span>&lt;K,V&gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>&lt;K,V&gt;, Cloneable, Serializable &#123;<br>    ......<br>        <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;K,V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>.Entry&lt;K,V&gt; &#123;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> hash;<br>        <span class="hljs-keyword">final</span> K key;<br>        V value;<br>        Node&lt;K,V&gt; next;<br>......<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼ŒHashMapå…§éƒ¨æ˜¯ä¸€å€‹Nodeçµæ§‹ï¼Œä¹Ÿå°±æ˜¯LinkedListã€‚å…§éƒ¨åŒ…å«äº†keyã€valueã€hashèˆ‡ä¸‹ä¸€å€‹ç¯€é»çš„æŒ‡æ¨™ã€‚æ‰€ä»¥ç•¶ä¸€å€‹HashMapæ”¾å…¥ä¸€ç­†è³‡æ–™æ™‚ï¼Œæœƒå…ˆåˆ¤æ–·ç•¶å‰ä½å€æœ‰æ²’æœ‰å­˜æ”¾ï¼Œè‹¥å·²ç¶“å­˜æ”¾äº†å‰‡å‰å¾€ä¸‹ä¸€å€‹ç¯€é»å»å­˜æ”¾å€¼ã€‚</p><p>ç•¶ä½¿ç”¨.put()æ”¾å…¥è³‡æ–™æ™‚ï¼ŒHashMapå…§éƒ¨é è¨­æœƒæ ¹æ“šhashCodeæ±ºå®šè¦æ”¾åœ¨å“ªä¸€å€‹bucketè£¡é¢(hashCode çš„ä¾†æºæ˜¯keyå€¼)ï¼Œä¹Ÿæœƒä½¿ç”¨equalsåˆ¤æ–·ç‰©ä»¶æ˜¯å¦å…§å®¹ç›¸åŒï¼Œè¦†å¯«.hashCodeå¯ä»¥æå‰è®“HashmapçŸ¥é“è¦æ”¾å…¥çš„ç‰©ä»¶æ˜¯å¦å­˜åœ¨ç•¶å‰çš„çµæ§‹ä¸­ã€‚</p><p>å¤§æ¦‚å°ç‰©ä»¶çš„.equals()èˆ‡.hashCode()æ–¹æ³•å°±æ•´ç†åˆ°é€™é‚Šï¼Œç´°ç¯€ä¸Šå…¶å¯¦é‚„æœ‰ä¸å°‘å€¼å¾—ç ”ç©¶çš„éƒ¨åˆ†ï¼Œç„¡å¥ˆæœ¬äººå­¸è—ä¸ç²¾ï¼Œåªèƒ½è¬›åˆ°é€™è£¡äº†ã€‚æœ‰æƒ³æ³•çš„å¤§å¤§æ­¡è¿åœ¨åº•ä¸‹è£œå……ï¼Œæ„Ÿè¬å„ä½çš„è§€çœ‹ã€‚</p><p>åƒè€ƒè³‡æ–™ï¼š</p><p><a href="https://codegym.cc/tw/groups/posts/tw.210.java-ha-xi-ma-">https://codegym.cc/tw/groups/posts/tw.210.java-ha-xi-ma-</a></p><p><a href="https://openhome.cc/Gossip/JavaEssence/ObjectEquality.html">https://openhome.cc/Gossip/JavaEssence/ObjectEquality.html</a></p><p><a href="https://chikuwa-tech-study.blogspot.com/2023/10/java-hashmap-structure-design.html">https://chikuwa-tech-study.blogspot.com/2023/10/java-hashmap-structure-design.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[2024éµäººè³½]02-Call By Valueï¼Ÿã€Call By Referenceï¼Ÿ =èˆ‡==èˆ‡equals()é—œè¯</title>
    <link href="/2024/10/02/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-02-Call-By-Value%EF%BC%9F%E3%80%81Call-By-Reference%EF%BC%9F-%E8%88%87-%E8%88%87equals-%E9%97%9C%E8%81%AF/"/>
    <url>/2024/10/02/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-02-Call-By-Value%EF%BC%9F%E3%80%81Call-By-Reference%EF%BC%9F-%E8%88%87-%E8%88%87equals-%E9%97%9C%E8%81%AF/</url>
    
    <content type="html"><![CDATA[<p>é€™ç« ä¸»è¦è¨è«–çš„é»æœ‰å…©å€‹ã€‚</p><ol><li>Java Call By Valueèˆ‡Call By Referenceéƒ½æ˜¯ä»€éº¼ï¼Ÿ</li><li>Java &#x3D;ã€&#x3D;&#x3D;ã€equals() ä¹‹é–“çš„å·®åˆ¥ä»¥åŠå¦‚ä½•ä½¿ç”¨ï¼Ÿ</li></ol><p>åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹è®“æˆ‘è¬›å€‹å¤§ç´„äº”åå­—çš„å¹¹è©±ã€‚<br>é€™æ¬¡æ„Ÿè¬XXç³¾æˆ‘ä¸€åŒåƒåŠ éµäººè³½ï¼Œè‹¥ä¸æ˜¯ä»–ï¼Œæˆ‘ç¾åœ¨è‚¯å®šèººåœ¨åºŠä¸Šè€å»¢ç©æ‰‹æ©Ÿâ€¦å—¯ï¼Ÿæˆ‘è©²æ„Ÿè¬ä»–å—ï¼Ÿå””â€¦å—¯â€¦</p><p>å¥½ï¼Œç®—äº†ï¼Œæ­£æ–‡é–‹å§‹ã€‚</p><p>åœ¨åˆå­¸Javaæ™‚ï¼Œæœ‰ä¸€äº›Javaçš„è§€å¿µæ˜¯ä½ å¿…é ˆè¦èªè­˜çš„ï¼Œåƒæ˜¯ åŸºæœ¬å‹åˆ¥ (Primitive Type)èˆ‡åƒè€ƒå‹åˆ¥(Reference Type)ï¼Œé€™å…©å€‹çš„å·®åˆ¥åœ¨ï¼Œç•¶è®Šæ•¸è¢«æ”¹è®Šæ™‚ï¼ŒåŸºæœ¬å‹åˆ¥è¢«æ”¹è®Šçš„æ˜¯å€¼æœ¬èº«ï¼Œè€Œåƒè€ƒå‹åˆ¥æ”¹è®Šçš„æ˜¯åƒè€ƒçš„å°è±¡ã€‚</p><p>é‡å°Call By Valueå¯ä»¥åƒè€ƒä»¥ä¸‹ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-type">int</span> schoolId;<br>    Integer age;<br>    String name;<br>    <span class="hljs-type">char</span> rank;<br>    Student(<span class="hljs-type">int</span> schoolId, Integer age, String name, <span class="hljs-type">char</span> rank) &#123;<br>        <span class="hljs-built_in">this</span>.schoolId = schoolId;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.rank = rank;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">replaceByHacker</span><span class="hljs-params">(<span class="hljs-type">int</span> schoolId, Integer age, String name, <span class="hljs-type">char</span> rank)</span> &#123;<br>    schoolId = <span class="hljs-number">99999</span>;<br>    age = <span class="hljs-number">9999</span>;<br>    name = <span class="hljs-string">&quot;Stolen&quot;</span>;<br>    rank = <span class="hljs-string">&#x27;F&#x27;</span>;<br>&#125;<br><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-string">&quot;John&quot;</span>,<span class="hljs-string">&#x27;B&#x27;</span>);<br>System.out.println(student);<br>replaceByHacker(student.schoolId,student.age,student.name,student.rank);<br>System.out.println(student);<br><br><span class="hljs-comment">//output</span><br>schoolId=<span class="hljs-number">1</span>, age=<span class="hljs-number">14</span>, name=John, rank=B<br>schoolId=<span class="hljs-number">1</span>, age=<span class="hljs-number">14</span>, name=John, rank=B<br></code></pre></td></tr></table></figure><p>æ¯”æ–¹èªªï¼Œæˆ‘å€‘æœ‰ä¸€å€‹å­¸ç”Ÿé¡åˆ¥ï¼Œæˆ‘å€‘å®šç¾©å®ƒä¹‹å¾Œï¼Œå…ˆå°å‡ºå­¸ç”Ÿçš„è³‡æ–™ï¼Œæ¥è‘—åŸ·è¡ŒreplaceByHacker()æ–¹æ³•ï¼Œæƒ³è¦ç«„æ”¹å­¸ç”Ÿè³‡æ–™ï¼Œä½†æœ€å¾Œå­¸ç”Ÿçš„è³‡æ–™ä¸¦æ²’æœ‰è¢«æ”¹è®Šã€‚<br>åŸå› æ˜¯å‚³å…¥çš„åƒæ•¸æ˜¯åŸºæœ¬å‹åˆ¥ï¼Œä¹Ÿå°±æ˜¯å‚³å…¥çš„æ˜¯â€å€¼â€è€Œä¸æ˜¯â€åƒè€ƒâ€ï¼Œå› æ­¤å¯¦éš›ä¸Šåœ¨æ–¹æ³•å…§éƒ¨è¢«æ›´æ”¹å¾Œï¼Œä¹Ÿä¸æœƒå½±éŸ¿è©²è®Šæ•¸ã€‚<br>æ¥è‘—æˆ‘å€‘ä¾†çœ‹å¦å¤–ä¸€å€‹ä¾‹å­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">replaceByHacker2</span><span class="hljs-params">(Student student)</span> &#123;<br>  student.age = <span class="hljs-number">777</span>;<br>&#125;<br>  System.out.println(student);<br>  replaceByHacker2(student);<br>  System.out.println(student);<br>  <br>  <span class="hljs-comment">//output</span><br>schoolId=<span class="hljs-number">1</span>, age=<span class="hljs-number">14</span>, name=John, rank=B<br>schoolId=<span class="hljs-number">1</span>, age=<span class="hljs-number">777</span>, name=John, rank=B<br></code></pre></td></tr></table></figure><p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥åœ¨æ–¹æ³•ä¸­æ›´æ”¹studenté€™å€‹ç‰©ä»¶çš„å±¬æ€§ï¼Œä½†å°ç‰©ä»¶æœ¬èº«ä¹Ÿæ˜¯ç„¡æ³•è¢«æ›´æ”¹çš„ï¼Œæ¯”æ–¹èªªä½ ä¸èƒ½åœ¨æ–¹æ³•ä¸­æŠŠstudentæŒ‡å®šç‚ºnullã€‚</p><p>æˆ‘è‡ªå·±çš„ç†è§£æ˜¯ï¼Œæ–¹æ³•ä¸­ä½ æ“ä½œçš„é€™äº›åƒæ•¸éƒ½åªæ˜¯ä¸€å€‹ä»£ç†çš„å°è±¡ï¼Œä¸¦ä¸æ˜¯å€¼æœ¬èº«ï¼Œæ‰€ä»¥ä»¥&#x3D;å–ä»£ä¸æœƒç”Ÿæ•ˆï¼Œä½†å¦‚æœä½¿ç”¨ç‰©ä»¶æœ¬èº«çš„æ–¹æ³•æ”¹è®Šç‰©ä»¶çš„ç‹€æ…‹ï¼Œå› ç‚ºä¸æ˜¯ä½¿ç”¨æ–¹æ³•å…§çš„ï¼Œæ‰€ä»¥å¯ä»¥è¢«æ”¹è®Šã€‚<br>å¦å¤–ï¼ŒJavaæœ¬èº«ä¹Ÿç„¡æ³•å‚³å…¥è¨˜æ†¶é«”ä½å€ï¼Œå› æ­¤ä¸¦æ²’æœ‰æ²’æœ‰Call By Referenceçš„æ¦‚å¿µã€‚<br>è‡³æ–¼å“ªäº›å±¬æ–¼åŸºæœ¬å‹åˆ¥ï¼Œå“ªäº›å±¬æ–¼åƒè€ƒå‹åˆ¥çš„ï¼Œå¯ä»¥çœ‹çœ‹é€™ç¯‡æ–‡ç« ï¼š<a href="https://yubin551.gitbook.io/java-note/basic_java_programming/datatype/referencedatatype">https://yubin551.gitbook.io/java-note/basic_java_programming/datatype/referencedatatype</a></p><p>ç¶œåˆä»¥ä¸Šç¯„ä¾‹æˆ‘å€‘å¯ä»¥å¾—å‡ºä¸€é“çµè«–ã€‚é‡å° åŸºæœ¬å‹åˆ¥ä¸­ &#x3D; æ‰€å‚³éçš„æ˜¯å€¼ï¼Œè€Œé‡å°åƒè€ƒå‹åˆ¥ &#x3D; æ‰€å‚³éçš„æ˜¯å€¼çš„åƒè€ƒï¼Œç‚ºäº†æ›´å¥½åœ°èªªæ˜é€™ä»¶äº‹ï¼Œæˆ‘å€‘å†èˆ‰å€‹ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>b=a;<br></code></pre></td></tr></table></figure><p>é€™ä¸‰è¡Œç¨‹å¼ç¢¼åšäº†ä»¥ä¸‹äº‹ï¼š</p><ol><li>JVMåœ¨è¨˜æ†¶é«”ä¸­å®£å‘Šä¸€å€‹ç©ºé–“æ”¾äº†10ï¼Œä¸¦æŠŠaæŒ‡å®šçµ¦10</li><li>æŠŠkæŒ‡å®šçµ¦10</li><li>JVMåœ¨è¨˜æ†¶é«”ä¸­å®£å‘Šä¸€å€‹ç©ºé–“æ”¾äº†5ï¼Œä¸¦æŠŠbæŒ‡å®šçµ¦5ã€‚</li><li>æŠŠaå­˜æ”¾çš„10æŒ‡å®šçµ¦b</li><li>a,bç­‰æ–¼10</li></ol><p>é€™æ˜¯å‚³éå€¼çš„ä¾‹å­ï¼Œæ¥ä¸‹ä¾†æ˜¯å‚³éåƒè€ƒçš„ä¾‹å­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;Some&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> a;<br><br>System.out.println(<span class="hljs-string">&quot;is a equal b ?&quot;</span> + (a == b)); <span class="hljs-comment">// output: true</span><br><span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;Car&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;Car&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;is c equal d ?&quot;</span> + (c == d)); <span class="hljs-comment">// output: false</span><br>System.out.println(<span class="hljs-string">&quot;is c equal d ?&quot;</span> + (c.equals(d))); <span class="hljs-comment">// output: true</span><br></code></pre></td></tr></table></figure><p>å‰é¢éƒ½ä¸€æ¨£ï¼Œå·®åˆ¥åªæ˜¯åœ¨ç¬¬äºŒè¡Œaå°‡å®ƒçš„åƒè€ƒçµ¦äº†bï¼Œæ‰€ä»¥a bæ­¤æ™‚æŒ‡å‘äº†åŒä¸€å€‹ä½ç½®ï¼ˆè¨˜æ†¶é«”ä½å€ï¼‰ã€‚</p><p>å€¼å¾—ä¸€æçš„æ˜¯ c d å…©å€‹è®Šæ•¸ï¼Œå…©å€‹éƒ½å®£å‘Šç‚ºåŒä¸€å€‹â€Carâ€ï¼Œä½†æ˜¯å› ç‚ºc d å…©å€‹ä½¿ç”¨new String()æ–¹æ³•å®£å‘Šï¼Œä¸¦æ“æœ‰å„è‡ªçš„è¨˜æ†¶é«”ä½å€ï¼Œä¸”å…©è€…ä¸¦æ²’æœ‰æŒ‡å‘åŒä¸€å€‹åƒè€ƒã€‚æ‰€ä»¥ &#x3D;&#x3D; æ¯”è¼ƒçš„çµæœæ˜¯ falseã€‚</p><p>åŒæ™‚ï¼Œä½ ä¹Ÿå¯ä»¥å¾—çŸ¥ &#x3D;&#x3D; ä¸¦ä¸æ˜¯å€¼çš„æ¯”è¼ƒï¼Œè€Œæ˜¯åˆ¤æ–·å…©å€‹è®Šæ•¸æ˜¯å¦æŒ‡å‘åŒä¸€å€‹ä½å€ã€‚</p><p>æ‰€ä»¥ï¼Œè‹¥è¦æ¯”è¼ƒå…©å€‹å­—ä¸²å¯¦éš›ä¸Šæ˜¯å¦ç›¸åŒï¼Œå‰‡è¦ä½¿ç”¨.equals()ã€‚</p><p>åŸºæœ¬ä¸Šï¼ŒéPrimitive Typeçš„å‹åˆ¥æˆ‘éƒ½ä¸å»ºè­°ä½¿ç”¨ &#x3D;&#x3D; ä½œç‚ºåˆ¤æ–·æ˜¯å¦ç›¸ç­‰çš„ä¾æ“šï¼Œå› ç‚ºä¸æº–ã€‚</p><p>å†ä¾†æˆ‘å€‘ä¾†çœ‹ä¸‹ä¸€é¡Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-string">&quot;John&quot;</span>,<span class="hljs-string">&#x27;B&#x27;</span>);<br><span class="hljs-type">Student</span> <span class="hljs-variable">copyStudent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-number">1</span>,<span class="hljs-number">14</span>,<span class="hljs-string">&quot;John&quot;</span>,<span class="hljs-string">&#x27;B&#x27;</span>);<br>System.out.println(student == copyStudent); <span class="hljs-comment">//output: false</span><br>System.out.println(student.equals(copyStudent)); <span class="hljs-comment">//output: false</span><br></code></pre></td></tr></table></figure><p>å¾å‰›å‰›æˆ‘å€‘å¯ä»¥å¾—çŸ¥&#x3D;&#x3D;æ¯”è¼ƒçš„æ˜¯è¨˜æ†¶é«”ä½å€ï¼Œå› æ­¤ç¬¬ä¸‰è¡Œç‚ºfalseæ˜¯å¯ç†è§£çš„ï¼Œä½†æˆ‘æƒ³ä½ ä¸€å®šæœƒå¥½å¥‡ç‚ºç”šéº¼ç¬¬å››è¡Œä¸æ˜¯trueå‘¢ï¼Ÿé€™å€‹åŸå› æ˜¯å› ç‚ºç‰©ä»¶æœ¬èº«è‹¥æ²’æœ‰å¯¦ä½œ.equals()æ–¹æ³•æ™‚é è¨­å¥—ç”¨Objectçš„.equals()ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸‹ç¨‹å¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span> &#123;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span> == obj);<br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹åˆ°æ²’ï¼Œä»–çµæœé‚„æ˜¯ä½¿ç”¨&#x3D;&#x3D; å»æ¯”è¼ƒï¼Œæ‰€ä»¥ï¼Œé€™ä¹Ÿæ˜¯ç‚ºå¾ˆå¤šç‰©ä»¶åœ¨å»ºç«‹å¾Œå¿…é ˆè¦è¤‡å¯«.equals()çš„åŸå› ï¼Œå› ç‚ºä¸æº–ï¼Œä¹‹æ‰€ä»¥æˆ‘èªªä¸æº–æ˜¯å› ç‚ºï¼Œä¸¦ä¸æ˜¯æ‰€æœ‰æ™‚å€™éƒ½æœƒå‘ˆç¾éŒ¯èª¤çš„çµæœï¼Œåœ¨ä¸€äº›è¤‡é›œçš„æƒ…æ³ä¸‹ï¼Œå¯èƒ½ä½ ä¸¦ä¸çŸ¥é“å…©å€‹ç‰©ä»¶çš„è¨˜æ†¶é«”ä½å€æ˜¯å¦åŒæºã€‚</p><p>æ‰€ä»¥åœ¨å¯¦å‹™ä¸Šå¿…é ˆè¦é¡å¤–è¦†å¯«æˆæˆ‘å€‘éœ€è¦çš„åˆ¤æ–·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>        <span class="hljs-type">int</span> schoolId;<br>        Integer age;<br>        String name;<br>        <span class="hljs-type">char</span> rank;<br>        Student(<span class="hljs-type">int</span> schoolId, Integer age, String name, <span class="hljs-type">char</span> rank) &#123;<br>            <span class="hljs-built_in">this</span>.schoolId = schoolId;<br>            <span class="hljs-built_in">this</span>.age = age;<br>            <span class="hljs-built_in">this</span>.name = name;<br>            <span class="hljs-built_in">this</span>.rank = rank;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(Integer age)</span> &#123;<br>            <span class="hljs-built_in">this</span>.age = age;<br>        &#125;<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object that)</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.schoolId == ((Student) that).schoolId &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.age, ((Student) that).age) &amp;&amp;<br>                    Objects.equals(<span class="hljs-built_in">this</span>.name, ((Student) that).name) &amp;&amp;<br>                    <span class="hljs-built_in">this</span>.rank == ((Student) that).rank;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯ä¸€äº›Javaçš„è§€å¿µï¼Œä¸‹ä¸€å›ä¹Ÿæœƒç¹¼çºŒè«‡æœ‰é—œJavaçš„ä¸€äº›ç‰¹æ€§ï¼Œæˆ‘å€‘æ˜å¤©è¦‹å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>[2024éµäººè³½]01-2024äº†é‚„å­¸Javaå—ï¼Ÿ</title>
    <link href="/2024/10/01/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-01-2024%E4%BA%86%E9%82%84%E5%AD%B8Java%E5%97%8E%EF%BC%9F/"/>
    <url>/2024/10/01/2024%E9%90%B5%E4%BA%BA%E8%B3%BD-01-2024%E4%BA%86%E9%82%84%E5%AD%B8Java%E5%97%8E%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸€å€‹å­¸Javaä¸åˆ°å…©å¹´çš„èœé³¥å·¥ç¨‹å¸«ã€‚ç‚ºç”šéº¼å­¸äº†ä¸€å¹´å¤šæˆ‘é‚„æ˜¯è¦å …ç¨±èœé³¥å‘¢ï¼Ÿé€™æ˜¯å› ç‚ºJavaçš„ä¸–ç•Œå¯¦åœ¨æ˜¯å¤ªå¤§äº†ã€‚æˆ‘æƒ³å³ä½¿èŠ±äº†å››äº”å¹´ï¼Œä¹Ÿä¾ç„¶æœƒå°Javaçš„è¨±å¤šåŠŸèƒ½æ„Ÿåˆ°ååˆ†é™Œç”Ÿå§ã€‚</p><p>ä¹‹æ‰€ä»¥æœƒåƒèˆ‡é€™æ¬¡çš„éµäººè³½ï¼Œä¸»è¦ä¹Ÿæ˜¯è¢«æœ‹å‹ç³¾åœ˜ï¼Œå› ç‚ºæœ€ä½æ˜¯ä¸‰äººçµ„åœ˜ä½†æ˜¯å‰›å¥½ç¼ºä¸€äººï¼Œæ–¼æ˜¯æˆ‘å°±è£œäº†é€²å»ã€‚é‚£è©±åˆèªªå›ä¾†äº†ï¼Œæ—¢ç„¶éƒ½åƒèˆ‡äº†ï¼Œæˆ‘ä¹Ÿè¦ºå¾—é€™æ˜¯å€‹å¥½æ©Ÿæœƒï¼Œå¯ä»¥æ•´ç†è‡ªå·±é€™ä¸€å¹´å¤šä¾†å­¸ç¿’Javaã€Springçš„ç¨®ç¨®çŸ¥è­˜ï¼Œå¤§åˆ°è»Ÿé«”è¨­è¨ˆçš„æ¦‚å¿µï¼Œå°åˆ°æ€éº¼ä½¿ç”¨ä¸€å€‹APIï¼Œéƒ½æ˜¯åœ¨æˆ‘é€™æ¬¡éµäººè³½æœƒè«‡åˆ°çš„ç¯„åœï¼Œ30å¤©å…§ï¼Œæˆ‘ä¸åªæœƒæåˆ°SpringBootã€ä¹Ÿæœƒæåˆ°Javaçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œä½†ä¸æ˜¯å¾é ­å­¸ï¼Œé€šå¸¸å°±ä¸€äº›è§€å¿µçš„è£œå……ï¼Œå¹«åŠ©ä½ åœ¨åŸºæœ¬çš„Codingå¤–ï¼Œå°è‡ªå·±ä½¿ç”¨çš„å·¥å…·æœ‰æ›´å¤šçš„ä¸€å±¤èªè­˜ã€‚</p><p>é€™ç¯‡æ–‡ç« æœƒé©åˆä»€éº¼äººï¼Ÿ</p><ol><li>å¯«éã€æˆ–è‡³å°‘è½éJavaçš„äººã€‚</li><li>æƒ³è¦å­¸ç¿’æ›´å¤šæœ‰é—œJavaçŸ¥è­˜çš„äººã€‚</li><li>å¸Œæœ›å¯ä»¥äº†è§£æ›´å¤šSpringBootåŠŸèƒ½çš„äººã€‚</li><li>å‘¨æœ«æœ‰ç©ºçš„äººã€‚</li></ol><p>å¦‚æœä½ ä¸å±¬æ–¼ä»¥ä¸Šå››é¡äººï¼Œé‚£å»ºè­°ä½ å¯ä»¥ä¸Šä¸€é é›¢é–‹äº†ï¼Œå»åšäº›çœŸæ­£è®“ä½ é–‹å¿ƒçš„äº‹å§ã€‚äººç”Ÿå¯¶è²´ï¼Œä½•å¿…èˆ‡è‡ªå·±çš„é«®ç·šéä¸å»å‘¢ï¼Ÿ</p><p>é‚„æ²’èµ°ï¼Ÿå¾ˆå¥½ï¼Œé‚£ï¼Œæ­£æ–‡é–‹å§‹ã€‚<br>Javaä½œç‚ºä¸€åè€å‰è¼©ï¼Œç›®å‰å·²ç¶“æœ‰25å¹´çš„æ­·å²ï¼Œä¹Ÿèª•ç”Ÿå‡ºè¨±å¤šæ‡‰ç”¨ç¨‹å¼ã€‚Javaçš„ç†±é–€ç¨‹åº¦ï¼Œä½ å¯ä»¥åƒè€ƒé€™å¼µåœ–ã€‚<br><a href="https://www.statista.com/statistics/793628/worldwide-developer-survey-most-used-languages/">https://www.statista.com/statistics/793628/worldwide-developer-survey-most-used-languages/</a><br>åœ¨2024å¹´ï¼Œæœ€å¸¸è¢«é–‹ç™¼è€…ä½¿ç”¨çš„ç¨‹å¼èªè¨€æ’è¡Œä¸­ï¼Œæ’‡é™¤éå¾Œç«¯çš„è³‡æ–™ï¼ŒJavaè¢«ä½¿ç”¨çš„æ¯”ç‡ä¸­åƒ…å°æ–¼Pythonï¼Œè€ŒPythonè¿‘å¹´ä¾†çš„å´›èµ·ä¸»è¦èˆ‡AIã€æ©Ÿå™¨å­¸ç¿’æœ‰é—œï¼Œç”±æ­¤å¯è¦‹ï¼ŒJavaä½œç‚ºä¸€å€‹å¤è€çš„èªè¨€ä¾ç„¶ä¿æŒè‘—å¼·å¤§çš„ç«¶çˆ­åŠ›ã€‚<br>å®ƒçš„ä¸»è¦å„ªé»å¦‚ä¸‹ï¼š</p><ol><li>ç”Ÿæ…‹çš„æˆç†Ÿï¼š<br>é¸æ“‡ä¸€å€‹å¤è€ä¸”ç†±é–€çš„ç¨‹å¼èªè¨€æœ‰è¨±å¤šå¥½è™•ï¼Œå…¶ä¸­ä¸€é …ä¾¿æ˜¯è±å¯Œçš„å¥—ä»¶èˆ‡ç¤¾ç¾¤è³‡æºï¼Œä½œç‚ºä¸€åè»Ÿé«”é–‹ç™¼è€…ï¼Œæœ‰è¨±å¤šèˆ‡ä½ ä¸€æ¨£çš„é–‹ç™¼è€…ä¹Ÿè¨±æ—©ä½ ä¸€æ­¥é‡è¦‹äº†æŸå€‹ä½ æ­£å›°æ“¾çš„é›£é¡Œï¼Œä¸¦çµ¦å‡ºäº†å¯«æ³•ã€‚è€Œä½ åªéœ€è¦ç…§æ¬ï¼Œå°±å¯ä»¥é”åˆ°ä½ çš„ç›®çš„ï¼Œé€™å¾ˆå¤§çš„ä¸€å€‹å¹…åº¦æ¸›å°‘äº†é¢å°ä¸ç¢ºå®šæ€§çš„è©¦éŒ¯æˆæœ¬ã€‚</li><li>å‘ä¸‹ç›¸å®¹æ€§ï¼š<br>åœ¨å¤šå¹´Oracle(Javaçš„å…¬å¸)çš„é–‹ç™¼è€…çš„åŠªåŠ›ä¹‹ä¸‹ï¼ŒJava æœ‰å¤šå€‹ç‰ˆæœ¬çš„JDKï¼Œå¾Java1.8åˆ°Java21ç‰ˆï¼Œä½ æœƒåœ¨æ¥­ç•Œçœ‹åˆ°å„ç¨®ä¸åŒç‰ˆæœ¬çš„Javaï¼Œå°å¼Ÿæˆ‘å¾…çš„å‰å…¬å¸ç”šè‡³åœ¨éƒ¨åˆ†å°ˆæ¡ˆä¸­ä½¿ç”¨Java 7ï¼Œä¸éé‚£æ˜¯å¦å¤–ä¸€å€‹æ•…äº‹ã€‚<br>ç¸½åœ°ä¾†èªªï¼ŒJavaæä¾›äº†é«˜åº¦çš„å‘ä¸‹ç›¸å®¹ï¼Œé‡å°å·²å­˜åœ¨çš„ä¼æ¥­ç´šæ‡‰ç”¨æä¾›äº†ç›¸ç•¶å¥½çš„æ”¯æ´ã€‚</li><li>å¼·å‹åˆ¥èªè¨€ï¼š<br>åœ¨æˆ‘éå»çš„å…¬å¸ï¼Œæ›¾ç¶“æœ‰é‡åˆ°é€™æ¨£çš„å•é¡Œã€‚æƒ…å¢ƒæ˜¯é€™æ¨£çš„ï¼Œç¨‹å¼ä¸­æœ‰ä¸€æ®µé‡å°æ‰‹çºŒè²»çš„è™•ç†æ˜¯é€™æ¨£çš„ã€‚<br>String merchantFeeInWeek &#x3D; ((Integer) map.get(â€œfeeâ€)).toString();<br>å‰é¢çš„mapæ²’æœ‰æŒ‡å®švalueçš„å‹åˆ¥ã€‚æœ¬ä¾†é€™æ®µç¨‹å¼ç¢¼é›–ç„¶ä¸å¥½çœ‹ï¼Œä½†å› ç‚ºç¨®ç¨®åŸå› æ²’æœ‰äººä¸»å‹•å»æ”¹å®ƒï¼Œç›´åˆ°æœ‰ä¸€å¤©é‡‘é¡é«˜åˆ°è¶…å‡ºé æœŸæ™‚ï¼Œé€™æ®µå°±çˆ†å‡ºéŒ¯èª¤äº†ï¼ŒåŸå› æ˜¯å› ç‚ºæ‡¶æƒ°äº¤çµ¦è‡ªå‹•å‹åˆ¥è½‰æ›æ‰€é€ æˆçš„å•é¡Œã€‚è‡ªå‹•è™•ç†éº»ç…©çš„å‹åˆ¥æœ¬èº«æ˜¯ä»¶å¥½äº‹ï¼Œä½†æˆ‘çš„çœ‹æ³•æ˜¯ï¼Œå¦‚æœä¸€é–‹å§‹æ˜¯å¯ä»¥è¢«æ˜ç¢ºå®šç¾©çš„ï¼Œé‚£å°±ä¸è©²è®“å®ƒæ¨¡ç³Šè™•ç†ã€‚å¯èƒ½æ¯”è¼ƒéº»ç…©ï¼Œä½†é€™æ‡‰è©²æ˜¯å¿…è¦çš„ã€‚</li></ol><p>ä»¥ä¸Šï¼Œæ˜¯æˆ‘å°å°å·¥ç¨‹å¸«å°Javaé€™é–€èªè¨€çš„ä¸€äº›å°æ„Ÿæƒ³ï¼Œè‹¥æœ‰ä¸åŒçš„æ„è¦‹ä¹Ÿæ­¡è¿åœ¨ä¸‹æ–¹è¨è«–ï¼Œé‚£éº¼æˆ‘å€‘æ˜å¤©å†æœƒå§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Google API ç’°å¢ƒå»ºç½®</title>
    <link href="/2024/09/15/Google-API-%E7%92%B0%E5%A2%83%E5%BB%BA%E7%BD%AE/"/>
    <url>/2024/09/15/Google-API-%E7%92%B0%E5%A2%83%E5%BB%BA%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<blockquote><p><strong>Google Docs API æä¾›äº†è®€å–ã€å¯«å…¥ã€æ›´æ–°ä¸‰ç¨®API</strong></p></blockquote><p><img src="/img/google_survey_1.png" alt="image.png"></p><p>æ¯å€‹Googleæ–‡ä»¶æœ‰å„è‡ªå°ˆå±¬çš„documentIdï¼Œå¦‚ä¸‹ï¼š</p><aside>ğŸ’¡ `https://docs.google.com/document/d/{**DOCUMENT_ID}**/edit`</aside><h2 id="ç’°å¢ƒè¨­å®š-Sampleç¨‹å¼ç¢¼ï¼š"><a href="#ç’°å¢ƒè¨­å®š-Sampleç¨‹å¼ç¢¼ï¼š" class="headerlink" title="ç’°å¢ƒè¨­å®š&amp;Sampleç¨‹å¼ç¢¼ï¼š"></a>ç’°å¢ƒè¨­å®š&amp;Sampleç¨‹å¼ç¢¼ï¼š</h2><ul><li>é–‹ç™¼ç’°å¢ƒ Java 17 with SpringBoot &#x2F; Java 1.8 ä»¥ä¸Šç‰ˆæœ¬å¿…è¦ã€‚</li><li>å¥—ä»¶ç®¡ç† maven &#x2F; <a href="https://gradle.org/install/">Gradle 7.0 ä»¥ä¸Šç‰ˆæœ¬</a></li></ul><ol><li>åœ¨Google Cloud å°ˆæ¡ˆå•Ÿç”¨ APIï¼Œå¦‚æœæ²’æœ‰å°ˆæ¡ˆè«‹æ–°å»ºä¸€å€‹ã€‚</li><li>å•Ÿç”¨Google Docs APIã€‚</li></ol><p><img src="/img/google_survey_2.png" alt="image.png"></p><ol><li>é–‹å•ŸGoogle Cloud Consoleï¼Œé»é¸ã€Œé¸å–®ã€ &gt; ã€ŒAPI èˆ‡ æœå‹™ã€ &gt; ã€ŒåŒæ„ç•«é¢ã€ &gt; User Type é¸æ“‡å…§éƒ¨å¾Œå»ºç«‹ã€‚</li></ol><p><img src="/img/google_survey_3.png" alt="image.png"></p><ol start="2"><li>è¼¸å…¥æ”¯æ´Emailå¾Œå»ºç«‹ã€‚</li></ol><p><img src="/img/google_survey_4.png" alt="image.png"></p><ol><li>åœ¨Google Cloud consoleä¸­ï¼Œé»é¸ã€Œé¸å–®ã€&gt; ã€ŒAPIèˆ‡æœå‹™ã€ &gt; ã€Œæ†‘è­‰ã€ &gt; ã€Œå»ºç«‹æ†‘è­‰ã€ &gt; ã€ŒOAuth Client IDã€ &gt; æ‡‰ç”¨ç¨‹å¼é¡å‹é¸æ“‡ã€Œé›»è…¦ç‰ˆæ‡‰ç”¨ç¨‹å¼ã€ã€å‘½åä¸€å€‹æ†‘è­‰åç¨±ã€‚</li></ol><p><img src="/img/google_survey_5.png" alt="image.png"></p><ol><li>å»ºç«‹å®Œæˆå¾Œï¼Œéœ€è¦ä¸‹è¼‰æ†‘è­‰(<strong>credentials.jsonæª”æ¡ˆ)ä¸¦æ”¾ç½®åˆ°æª”æ¡ˆçš„å·¥ä½œç›®éŒ„</strong></li><li>å¼•å…¥éœ€è¦çš„å¥—ä»¶</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;dependency&gt;<br>    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;<br>    &lt;artifactId&gt;google-api-services-docs&lt;/artifactId&gt;<br>    &lt;version&gt;v1-rev20220609-<span class="hljs-number">2.0</span><span class="hljs-number">.0</span>&lt;/version&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;com.google.api-client&lt;/groupId&gt;<br>    &lt;artifactId&gt;google-api-client&lt;/artifactId&gt;<br>    &lt;version&gt;<span class="hljs-number">2.0</span><span class="hljs-number">.0</span>&lt;/version&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;com.google.oauth-client&lt;/groupId&gt;<br>    &lt;artifactId&gt;google-oauth-client-jetty&lt;/artifactId&gt;<br>    &lt;version&gt;<span class="hljs-number">1.34</span><span class="hljs-number">.1</span>&lt;/version&gt;<br>&lt;/dependency&gt;<br>&lt;dependency&gt; <span class="hljs-comment">//Optional </span><br>    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;<br>    &lt;artifactId&gt;google-api-services-drive&lt;/artifactId&gt;<br>    &lt;version&gt;v3-rev20240730-<span class="hljs-number">2.0</span><span class="hljs-number">.0</span>&lt;/version&gt;<br>&lt;/dependency&gt;<br><br><span class="hljs-comment">// è‹¥ä½¿ç”¨Gradleå‰‡æ˜¯ä»¥ä¸‹</span><br>dependencies &#123;<br>    implementation <span class="hljs-string">&#x27;com.google.api-client:google-api-client:2.0.0&#x27;</span><br>    implementation <span class="hljs-string">&#x27;com.google.oauth-client:google-oauth-client-jetty:1.34.1&#x27;</span><br>    implementation <span class="hljs-string">&#x27;com.google.apis:google-api-services-docs:v1-rev20220609-2.0.0&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¦‚æœè¦ä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œæœƒéœ€è¦Enable-å…¶ä»–çš„API"><a href="#å¦‚æœè¦ä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œæœƒéœ€è¦Enable-å…¶ä»–çš„API" class="headerlink" title="å¦‚æœè¦ä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œæœƒéœ€è¦Enable å…¶ä»–çš„API"></a>å¦‚æœè¦ä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œæœƒéœ€è¦Enable å…¶ä»–çš„API</h2><h1 id="åƒè€ƒæ–‡ä»¶ï¼š"><a href="#åƒè€ƒæ–‡ä»¶ï¼š" class="headerlink" title="åƒè€ƒæ–‡ä»¶ï¼š"></a>åƒè€ƒæ–‡ä»¶ï¼š</h1><p><a href="https://developers.google.com/docs/api/how-tos/overview?hl=zh-tw">https://developers.google.com/docs/api/how-tos/overview?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/quickstart/java?hl=zh-tw">https://developers.google.com/docs/api/quickstart/java?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/reference/rest?hl=zh-tw">https://developers.google.com/docs/api/reference/rest?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/reference/rest/v1/documents/get?hl=zh-tw">https://developers.google.com/docs/api/reference/rest/v1/documents/get?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/reference/rest/v1/documents/batchUpdate?hl=zh-tw">https://developers.google.com/docs/api/reference/rest/v1/documents/batchUpdate?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/samples/output-json?hl=zh-tw">https://developers.google.com/docs/api/samples/output-json?hl=zh-tw</a></p><p><a href="https://developers.google.com/docs/api/how-tos/move-text?hl=zh-tw">https://developers.google.com/docs/api/how-tos/move-text?hl=zh-tw</a></p><p><a href="https://developers.google.com/drive/api/guides/create-file?hl=zh-tw">https://developers.google.com/drive/api/guides/create-file?hl=zh-tw</a></p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Tutorial</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JavaåŸºæœ¬è³‡æ–™çµæ§‹ä»‹ç´¹</title>
    <link href="/2024/07/27/Java%E5%9F%BA%E6%9C%AC%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E4%BB%8B%E7%B4%B9/"/>
    <url>/2024/07/27/Java%E5%9F%BA%E6%9C%AC%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E4%BB%8B%E7%B4%B9/</url>
    
    <content type="html"><![CDATA[<p>é€™ç¯‡æ–‡ç« ä¸»è¦åœ¨ä»‹ç´¹Javaçš„å„ç¨®é›†åˆè³‡æ–™çµæ§‹ï¼Œä¹…ä¹…ä¾†è¤‡ç¿’ä¸€ä¸‹åŸºæœ¬åŠŸã€‚</p><h2 id="Java-é›†åˆæ¡†æ¶çš„ä¸»è¦é¡å‹èˆ‡å·®ç•°"><a href="#Java-é›†åˆæ¡†æ¶çš„ä¸»è¦é¡å‹èˆ‡å·®ç•°" class="headerlink" title="Java é›†åˆæ¡†æ¶çš„ä¸»è¦é¡å‹èˆ‡å·®ç•°"></a>Java é›†åˆæ¡†æ¶çš„ä¸»è¦é¡å‹èˆ‡å·®ç•°</h2><p>Java çš„é›†åˆæ¡†æ¶æä¾›äº†ä¸‰å¤§ä¸»è¦é¡å‹ï¼š<code>List</code>ã€<code>Set</code> å’Œ <code>Map</code>ï¼Œæ¯ç¨®é¡å‹éƒ½æœ‰ä¸åŒçš„ç‰¹æ€§èˆ‡é©ç”¨å ´æ™¯ã€‚</p><h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>ç‰¹æ€§ï¼šæœ‰åºã€å…è¨±é‡è¤‡å…ƒç´ ã€ä»¥ç´¢å¼•å­˜å–</p><table><thead><tr><th>é¡å‹</th><th>ç‰¹æ€§</th><th>é©ç”¨å ´æ™¯</th></tr></thead><tbody><tr><td><strong>ArrayList</strong></td><td>- å‹•æ…‹å¤§å°ï¼ŒåŸºæ–¼é™£åˆ—å¯¦ç¾<br/>- éš¨æ©Ÿè®€å–å¿« (<code>O(1)</code>)<br/>- æ’å…¥ã€åˆªé™¤æ•ˆç‡ä½ (<code>O(n)</code>)<br/>- éåŒæ­¥<br/>- å®¹é‡è‡ªå‹•æ“´å……ï¼ˆ1.5 å€ï¼‰<br/>- é è¨­åˆå§‹å®¹é‡ç‚º 10</td><td>- è³‡æ–™è®€å–é »ç¹ã€è®Šå‹•å°‘çš„å ´åˆ<br/>- éœ€è¦å¿«é€Ÿéš¨æ©Ÿå­˜å–<br/>- ä¸»è¦åœ¨å°¾éƒ¨æ–°å¢&#x2F;åˆªé™¤å…ƒç´ </td></tr><tr><td><strong>LinkedList</strong></td><td>- é›™å‘éˆçµä¸²åˆ—<br/>- æ’å…¥ã€åˆªé™¤å¿« (<code>O(1)</code>)<br/>- è®€å–æ•ˆç‡ä½ (<code>O(n)</code>)<br/>- éåŒæ­¥<br/>- å¯¦ç¾äº† Deque ä»‹é¢ï¼Œå¯ç•¶ä½œä½‡åˆ—æˆ–å †ç–Šä½¿ç”¨</td><td>- è³‡æ–™é »ç¹æ’å…¥ã€åˆªé™¤çš„æƒ…æ³<br/>- éœ€è¦å¾å…©ç«¯æ“ä½œé›†åˆçš„å ´æ™¯<br/>- ä¸éœ€è¦éš¨æ©Ÿå­˜å–</td></tr><tr><td><strong>Vector</strong></td><td>- åŒæ­¥ç‰ˆçš„ ArrayList<br/>- åŸ·è¡Œç·’å®‰å…¨ä½†æ•ˆç‡è¼ƒä½<br/>- å®¹é‡è‡ªå‹•æ“´å……ï¼ˆ2 å€ï¼‰<br/>- å·²è¢« Collections.synchronizedList() å–ä»£</td><td>- éœ€è¦åŸ·è¡Œç·’å®‰å…¨ä½†ä¸é »ç¹æ“ä½œçš„å ´åˆ<br/>- å»ºè­°ä½¿ç”¨ ArrayList é…åˆ Collections.synchronizedList()</td></tr></tbody></table><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>ç‰¹æ€§ï¼šç„¡åºã€ä¸å…è¨±é‡è¤‡å…ƒç´ ã€åŸºæ–¼ equals() å’Œ hashCode() åˆ¤æ–·é‡è¤‡</p><table><thead><tr><th>é¡å‹</th><th>ç‰¹æ€§</th><th>é©ç”¨å ´æ™¯</th></tr></thead><tbody><tr><td><strong>HashSet</strong></td><td>- åŸºæ–¼ <code>HashMap</code> å¯¦ç¾<br/>- ç„¡åºå„²å­˜ï¼Œå­˜å–å¿« (<code>O(1)</code>)<br/>- å…è¨± null å…ƒç´ <br/>- éåŒæ­¥</td><td>- éœ€è¦å¿«é€Ÿå»é‡çš„é›†åˆ<br/>- ä¸åœ¨æ„å…ƒç´ é †åº<br/>- éœ€è¦ O(1) æ™‚é–“è¤‡é›œåº¦çš„æ·»åŠ &#x2F;åˆªé™¤&#x2F;æŸ¥è©¢</td></tr><tr><td><strong>TreeSet</strong></td><td>- åŸºæ–¼ <code>TreeMap</code> å¯¦ç¾<br/>- å…ƒç´ æ’åºå„²å­˜<br/>- ä¸å…è¨± null å…ƒç´ <br/>- ä½¿ç”¨è‡ªç„¶æ’åºæˆ–è‡ªå®šç¾© Comparator<br/>- æ“ä½œè¤‡é›œåº¦ç‚º O(log n)</td><td>- éœ€è¦æœ‰åºçš„å»é‡é›†åˆ<br/>- éœ€è¦ç¯„åœæŸ¥è©¢<br/>- éœ€è¦ç²å¾—æ’åºå¾Œçš„å…ƒç´ </td></tr><tr><td><strong>LinkedHashSet</strong></td><td>- åŸºæ–¼ <code>LinkedHashMap</code> å¯¦ç¾<br/>- ç¶­è­·æ’å…¥é †åº<br/>- çµåˆ HashSet çš„å¿«é€Ÿå’Œæœ‰åºæ€§</td><td>- éœ€è¦è¨˜ä½æ’å…¥é †åºçš„å»é‡é›†åˆ<br/>- éœ€è¦å¯é æ¸¬çš„è¿­ä»£é †åº</td></tr></tbody></table><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>ç‰¹æ€§ï¼škey-value è³‡æ–™çµæ§‹ã€key ä¸å¯é‡è¤‡ã€value å¯é‡è¤‡</p><table><thead><tr><th>é¡å‹</th><th>ç‰¹æ€§</th><th>é©ç”¨å ´æ™¯</th></tr></thead><tbody><tr><td><strong>HashMap</strong></td><td>- ç„¡åºéµå€¼æ˜ å°„<br/>- å­˜å–å¿« (<code>O(1)</code>)<br/>- éåŒæ­¥<br/>- å…è¨± null éµå’Œå€¼<br/>- Java 8 å¾Œä½¿ç”¨ç´…é»‘æ¨¹å„ªåŒ–ç¢°æ’</td><td>- å–®åŸ·è¡Œç·’ä¸‹çš„å¿«é€ŸæŸ¥è©¢èˆ‡æ›´æ–°<br/>- ä¸éœ€è¦æ’åºçš„éµå€¼å°æ‡‰ç”¨</td></tr><tr><td><strong>TreeMap</strong></td><td>- éµå€¼æ’åºå­˜å„²<br/>- åŸºæ–¼ç´…é»‘æ¨¹<br/>- å­˜å–é€Ÿåº¦ç‚º <code>O(log n)</code><br/>- ä¸å…è¨± null éµï¼Œå…è¨± null å€¼<br/>- å¯ä½¿ç”¨è‡ªå®šç¾© Comparator</td><td>- éœ€è¦æŒ‰éµæ’åºçš„æ˜ å°„<br/>- éœ€è¦ç¯„åœæ“ä½œ<br/>- éœ€è¦æœ€æ¥è¿‘å€¼æŸ¥è©¢</td></tr><tr><td><strong>Hashtable</strong></td><td>- åŒæ­¥ç‰ˆçš„ HashMap<br/>- åŸ·è¡Œç·’å®‰å…¨ä½†æ•ˆç‡è¼ƒä½<br/>- ä¸å…è¨± null éµå’Œå€¼<br/>- å·²è¢« ConcurrentHashMap å–ä»£</td><td>- å»ºè­°ä½¿ç”¨ ConcurrentHashMap æ›¿ä»£<br/>- èˆŠç³»çµ±ç¶­è­·</td></tr><tr><td><strong>LinkedHashMap</strong></td><td>- ç¶­è­·æ’å…¥é †åºæˆ–è¨ªå•é †åº<br/>- çµåˆ HashMap çš„å¿«é€Ÿå’Œæœ‰åºæ€§<br/>- å¯å¯¦ç¾ LRU å¿«å–</td><td>- éœ€è¦è¨˜ä½éµå€¼å°æ’å…¥é †åº<br/>- éœ€è¦å¯¦ç¾ LRU å¿«å–æ©Ÿåˆ¶</td></tr></tbody></table><h3 id="è£œå……èªªæ˜"><a href="#è£œå……èªªæ˜" class="headerlink" title="è£œå……èªªæ˜"></a>è£œå……èªªæ˜</h3><ol><li><p><strong>åŸ·è¡Œç·’å®‰å…¨çš„é¸æ“‡</strong>ï¼š</p><ul><li>ä½¿ç”¨ Collections çš„åŒæ­¥åŒ…è£å™¨ï¼š<code>Collections.synchronizedList/Set/Map()</code></li><li>ä½¿ç”¨ <code>java.util.concurrent</code> åŒ…ä¸­çš„å¯¦ç¾ï¼š<ul><li><code>CopyOnWriteArrayList</code></li><li><code>ConcurrentHashMap</code></li><li><code>ConcurrentSkipListSet/Map</code></li></ul></li></ul></li><li><p><strong>æ•ˆèƒ½è€ƒé‡</strong>ï¼š</p><ul><li>åˆå§‹å®¹é‡è¨­ç½®ï¼šè‹¥é çŸ¥é›†åˆå¤§å°ï¼Œå»ºè­°è¨­å®šé©ç•¶çš„åˆå§‹å®¹é‡</li><li>è¼‰å…¥å› å­ï¼šHashMap&#x2F;HashSet é è¨­ 0.75ï¼Œå¯æ ¹æ“šéœ€æ±‚èª¿æ•´</li><li>è¿­ä»£æ•ˆèƒ½ï¼šLinkedHashMap&#x2F;Set æ¯” HashMap&#x2F;Set ç¨æ…¢ï¼Œä½†æä¾›å¯é æ¸¬çš„è¿­ä»£é †åº</li></ul></li><li><p><strong>é¸æ“‡å»ºè­°</strong>ï¼š</p><ul><li>ä¸€èˆ¬å ´æ™¯ï¼šArrayListã€HashMap</li><li>éœ€è¦æ’åºï¼šTreeSetã€TreeMap</li><li>éœ€è¦åŸ·è¡Œç·’å®‰å…¨ï¼šConcurrentHashMapã€CopyOnWriteArrayList</li><li>éœ€è¦è¨˜ä½é †åºï¼šLinkedHashMapã€LinkedHashSet</li></ul></li></ol><h2 id="Array-èˆ‡-ArrayList-çš„å·®åˆ¥"><a href="#Array-èˆ‡-ArrayList-çš„å·®åˆ¥" class="headerlink" title="Array èˆ‡ ArrayList çš„å·®åˆ¥"></a>Array èˆ‡ ArrayList çš„å·®åˆ¥</h2><h3 id="1-Arrayï¼ˆé™£åˆ—ï¼‰"><a href="#1-Arrayï¼ˆé™£åˆ—ï¼‰" class="headerlink" title="1. Arrayï¼ˆé™£åˆ—ï¼‰"></a><strong>1. Arrayï¼ˆé™£åˆ—ï¼‰</strong></h3><p><strong>ç°¡ä»‹</strong>ï¼š</p><p><code>Array</code> æ˜¯ Java ä¸­æœ€åŸºæœ¬çš„é™£åˆ—çµæ§‹ï¼Œæä¾›äº†å›ºå®šå¤§å°çš„ã€é€£çºŒå­˜å„²çš„æ•¸æ“šçµæ§‹ã€‚ç‰¹æ€§ï¼š</p><ul><li><strong>å›ºå®šå¤§å°</strong>ï¼šåœ¨å‰µå»ºæ™‚éœ€è¦æŒ‡å®šå¤§å°ï¼Œä¸”ä¸èƒ½å‹•æ…‹èª¿æ•´ã€‚</li><li><strong>å¿«é€Ÿå­˜å–</strong>ï¼š<code>Array</code> æä¾› <strong>O(1)</strong> çš„éš¨æ©Ÿå­˜å–é€Ÿåº¦ï¼Œéå¸¸é©åˆé »ç¹è®€å–è³‡æ–™çš„å ´åˆã€‚</li><li><strong>å…ƒç´ é¡å‹å›ºå®š</strong>ï¼šåªèƒ½å­˜å„²ç›¸åŒé¡å‹çš„å…ƒç´ ï¼Œä¸”å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç‰©ä»¶æˆ–åŸºæœ¬é¡å‹ï¼ˆå¦‚ <code>int</code>ã€<code>char</code> ç­‰ï¼‰ã€‚</li></ul><p>å…©è€…ä¹‹é–“çš„æ¯”è¼ƒ</p><table><thead><tr><th>\</th><th>Array</th><th>ArrayList</th></tr></thead><tbody><tr><td><strong>å¤§å°</strong></td><td>å›ºå®š</td><td>å¯å‹•æ…‹èª¿æ•´</td></tr><tr><td><strong>å‹åˆ¥</strong></td><td>æ”¯æ´åŸºæœ¬é¡å‹èˆ‡ç‰©ä»¶</td><td>åªæ”¯æ´ç‰©ä»¶é¡å‹</td></tr><tr><td><strong>æ•ˆèƒ½</strong></td><td>è¨˜æ†¶é«”å ç”¨è¼ƒå°‘ï¼Œæ•ˆèƒ½è¼ƒé«˜</td><td>å¢åˆªå…ƒç´ æ™‚æ•ˆèƒ½è¼ƒä½</td></tr><tr><td><strong>ç·šç¨‹å®‰å…¨</strong></td><td>éåŒæ­¥</td><td>éåŒæ­¥</td></tr></tbody></table><h3 id="å †ç–Š-Stack-ï¼šå¾Œé€²å…ˆå‡º-LIFO-åŸç†"><a href="#å †ç–Š-Stack-ï¼šå¾Œé€²å…ˆå‡º-LIFO-åŸç†" class="headerlink" title="å †ç–Š (Stack)ï¼šå¾Œé€²å…ˆå‡º (LIFO) åŸç†"></a>å †ç–Š (Stack)ï¼šå¾Œé€²å…ˆå‡º (LIFO) åŸç†</h3><p><strong>å †ç–Šï¼ˆStackï¼‰</strong> æ˜¯ä¸€ç¨®éµå¾ª<strong>å¾Œé€²å…ˆå‡ºï¼ˆLast In, First Out, LIFOï¼‰</strong>çš„æ•¸æ“šçµæ§‹ã€‚åœ¨ Java ä¸­ï¼Œç•¶æ–¹æ³•è¢«èª¿ç”¨æ™‚ï¼Œæœƒè¢«å£“å…¥å †ç–Šé ‚éƒ¨ï¼Œæ–¹æ³•çµæŸå¾Œæœƒå¾å †ç–Šä¸­å½ˆå‡ºã€‚</p><h4 id="é‹ä½œåŸç†ï¼š"><a href="#é‹ä½œåŸç†ï¼š" class="headerlink" title="é‹ä½œåŸç†ï¼š"></a>é‹ä½œåŸç†ï¼š</h4><p>å‡è¨­æ–¹æ³•èª¿ç”¨é †åºå¦‚ä¸‹ï¼š</p><p><code>method1()</code> â†’ <code>method2()</code> â†’ <code>method3()</code></p><ol><li><code>method3()</code> æœƒå…ˆåŸ·è¡Œä¸¦å®Œæˆï¼Œç„¶å¾Œå¾å †ç–Šä¸­å½ˆå‡ºã€‚</li><li>æ¥è‘— <code>method2()</code> å®Œæˆä¸¦å½ˆå‡ºã€‚</li><li>æœ€å¾Œ <code>method1()</code> å®Œæˆã€‚</li></ol><h3 id="æ¡ˆä¾‹ï¼šå‘¼å«å †ç–Š-Call-Stack-èˆ‡-å †ç–Šè¿½è¹¤-Stack-Trace"><a href="#æ¡ˆä¾‹ï¼šå‘¼å«å †ç–Š-Call-Stack-èˆ‡-å †ç–Šè¿½è¹¤-Stack-Trace" class="headerlink" title="æ¡ˆä¾‹ï¼šå‘¼å«å †ç–Š (Call Stack) èˆ‡ å †ç–Šè¿½è¹¤ (Stack Trace)"></a>æ¡ˆä¾‹ï¼šå‘¼å«å †ç–Š (Call Stack) èˆ‡ å †ç–Šè¿½è¹¤ (Stack Trace)</h3><ul><li><strong>Call Stack</strong>ï¼šç®¡ç†æ–¹æ³•èª¿ç”¨é †åºï¼Œæ¯æ¬¡æ–¹æ³•èª¿ç”¨æœƒç”Ÿæˆä¸€å€‹ <code>StackTraceElement</code>ï¼Œè¨˜éŒ„æ–¹æ³•åç¨±ã€æ–‡ä»¶åã€è¡Œè™Ÿç­‰ï¼Œæ–¹æ³•å®Œæˆå¾Œè©²å…ƒç´ å¾å †ç–Šä¸­å½ˆå‡ºã€‚</li><li><strong>Stack Trace</strong>ï¼šç•¶ç™¼ç”ŸéŒ¯èª¤æ™‚ï¼Œå †ç–Šè¿½è¹¤æœƒåˆ—å‡ºå¾æ–¹æ³•èª¿ç”¨é–‹å§‹åˆ°éŒ¯èª¤ç™¼ç”Ÿæ™‚çš„å®Œæ•´å †ç–Šè·¯å¾‘ï¼Œå¹«åŠ©é–‹ç™¼è€…å®šä½éŒ¯èª¤ä¾†æºã€‚</li></ul><p>å¤§è‡´ä»‹ç´¹å¦‚ä¸Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Data Structure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—¥æœ¬è»ŸéŠ€é‡‘æµAPIç­†è¨˜</title>
    <link href="/2024/06/21/%E6%97%A5%E6%9C%AC%E8%BB%9F%E9%8A%80%E9%87%91%E6%B5%81API%E7%AD%86%E8%A8%98/"/>
    <url>/2024/06/21/%E6%97%A5%E6%9C%AC%E8%BB%9F%E9%8A%80%E9%87%91%E6%B5%81API%E7%AD%86%E8%A8%98/</url>
    
    <content type="html"><![CDATA[<p>é€™é‚Šæ˜¯ä¹‹å‰æ•´ç†çš„ç­†è¨˜ï¼Œå…¬å¸ä¹‹å‰ä¸²æ¥äº†è»ŸéŠ€é‡‘æµï¼Œæˆ‘é€™é‚Šä¹Ÿä¸€ä½µå”åŠ©äº†é‡‘æµç›¸é—œDomainçš„æ•´ç†ï¼Œä¹‹å‰æ¥è§¸çš„é‡‘æµå¤§å¤šæ˜¯å°ç£çš„éŠ€è¡Œæˆ–æ”¯ä»˜å•†çš„APIæ¨¡å¼ï¼Œç¬¬ä¸€æ¬¡çœ‹åˆ°æµ·å¤–çš„ä¹Ÿè¦ºå¾—æœ‰é»æ–°é®®ã€‚å°æ—¥æœ¬é‡‘æµé€™å¡Šæœ‰èˆˆè¶£çš„ä¹Ÿå¯ä»¥çœ‹çœ‹</p><h2 id="èª²é‡‘æ–¹å¼-ç”¨æˆ¶æ”¶æ¬¾æ¨¡å¼"><a href="#èª²é‡‘æ–¹å¼-ç”¨æˆ¶æ”¶æ¬¾æ¨¡å¼" class="headerlink" title="èª²é‡‘æ–¹å¼(ç”¨æˆ¶æ”¶æ¬¾æ¨¡å¼)"></a><strong>èª²é‡‘æ–¹å¼(ç”¨æˆ¶æ”¶æ¬¾æ¨¡å¼)</strong></h2><ul><li>éƒ½åº¦èª²é‡‘ &#x3D; æ¯æ¬¡äº¤æ˜“éƒ½å¾ä¿¡ç”¨å¡æ‰£æ¬¾</li><li>ç¶™ç¶šèª²é‡‘ï¼ˆç°¡æ˜“ï¼‰ &#x3D; æ ¹æ“šè»ŸéŠ€è¦å®šæ—¥æ‰£é™¤å›ºå®šé‡‘é¡</li><li>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ &#x3D; æ ¹æ“šç‰¹åº—æŒ‡å®šæ—¥æœŸèˆ‡æŒ‡å®šé‡‘é¡æ‰£æ¬¾</li></ul><h2 id="å£²ä¸Šæ–¹å¼-è«‹æ¬¾æ¨¡å¼"><a href="#å£²ä¸Šæ–¹å¼-è«‹æ¬¾æ¨¡å¼" class="headerlink" title="å£²ä¸Šæ–¹å¼(è«‹æ¬¾æ¨¡å¼)"></a><strong>å£²ä¸Šæ–¹å¼(è«‹æ¬¾æ¨¡å¼)</strong></h2><ul><li>è‡ªå‹•å£²ä¸Šæ–¹å¼ &gt; è‡ªå‹•è«‹æ¬¾</li><li>æŒ‡å®šå£²ä¸Šæ–¹å¼ &gt; æ‰‹å‹•è«‹æ¬¾</li></ul><h2 id="ä¸ä¿¡ã¨å£²ä¸Š-æˆæ¬Šèˆ‡è«‹æ¬¾"><a href="#ä¸ä¿¡ã¨å£²ä¸Š-æˆæ¬Šèˆ‡è«‹æ¬¾" class="headerlink" title="ä¸ä¿¡ã¨å£²ä¸Š(æˆæ¬Šèˆ‡è«‹æ¬¾)"></a><strong>ä¸ä¿¡ã¨å£²ä¸Š(æˆæ¬Šèˆ‡è«‹æ¬¾)</strong></h2><h2 id="æä¾›åŠŸèƒ½ä»‹ç´¹"><a href="#æä¾›åŠŸèƒ½ä»‹ç´¹" class="headerlink" title="æä¾›åŠŸèƒ½ä»‹ç´¹"></a>æä¾›åŠŸèƒ½ä»‹ç´¹</h2><table><thead><tr><th><strong>æä¾›æ©Ÿèƒ½å(åŠŸèƒ½)</strong></th><th><strong>èª¬æ˜</strong></th></tr></thead><tbody><tr><td>è³¼å…¥<br/>(ä»˜æ¬¾)</td><td>è³¼å…¥å•†å“ã®æ±ºæ¸ˆã‚’è¡Œã†æ©Ÿèƒ½ã§ã™ã€‚æŒ‡å®šå£²ä¸Šã®å ´åˆã¯ã€ä¸ä¿¡ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã¨ãªã‚Šã€å£²ä¸Šæ©Ÿèƒ½ã®å®Ÿæ–½ãŒå¿…è¦ã§ã™ã€‚<br/>(æŒ‡ä»˜æ¬¾ï¼Œè‹¥æ‰‹å‹•è«‹æ¬¾æ¨¡å¼éœ€ä½¿ç”¨è«‹æ¬¾åŠŸèƒ½)</td></tr><tr><td>å£²ä¸Š<br/>(è«‹æ¬¾)</td><td>æŒ‡å®šå£²ä¸Šã®å ´åˆã«ã€ä¸ä¿¡å¾Œã®å–å¼•ã‚’å…¨é¡è«‹æ±‚ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚åŠ ç›Ÿåº—ã®ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä½¿ç”¨ã—ã¾ã™ã€‚å£²ä¸Šã‚’å®Ÿæ–½ã—ãªã„ã¨ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ©ç”¨ä»£é‡‘ã¯è«‹æ±‚ã•ã‚Œãšã€åŠ ç›Ÿåº—ã¸ã®å…¥é‡‘ã‚‚ã•ã‚Œã¾ã›ã‚“ã€‚<br/>(æ‰‹å‹•è«‹æ¬¾æ™‚ï¼Œå°‡æˆæ¬Šé‡‘é¡é€²è¡Œå…¨é¡è«‹æ¬¾çš„åŠŸèƒ½ï¼Œä¸è«‹æ¬¾ä¸æ‰£é™¤æ¶ˆè²»è€…éŒ¢ï¼Œç‰¹åº—ä¹Ÿä¸æœƒæ”¶åˆ°é‡‘æµ)</td></tr><tr><td>éƒ¨åˆ†å£²ä¸Š<br/>(éƒ¨åˆ†è«‹æ¬¾)</td><td>æŒ‡å®šå£²ä¸Šã®å ´åˆã«ã€ä¸ä¿¡å¾Œã®å–å¼•ã«å¯¾ã—ã¦ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸è«‹æ±‚ã—ãŸã„é‡‘é¡ã‚’æŒ‡å®šã—ã¦è«‹æ±‚ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚â€»è«‹æ±‚é‡‘é¡ã¯ã€ä¸ä¿¡å–å¾—é‡‘é¡ã®ç¯„å›²å†…ã¨ãªã‚Šã¾ã™ã€‚<br/>(éƒ¨åˆ†è«‹æ¬¾ï¼Œåªè«‹éƒ¨åˆ†æ¬¾é …ï¼Œå‹¿è¶…éæˆæ¬Šé‡‘é¡)</td></tr><tr><td>å–æ¶ˆ<br/>(å–æ¶ˆæˆæ¬Š)</td><td>æŒ‡å®šå£²ä¸Šã®å ´åˆã«ã€ä¸ä¿¡å¾Œã®å–å¼•ã‚’å–æ¶ˆã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚å£²ä¸Šå¾Œã®å–å¼•ã«å¯¾ã—ã¦ã¯ã€è¿”é‡‘ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚  <br/> (å–æ¶ˆæˆæ¬Šï¼Œè‹¥å·²è«‹æ¬¾ï¼Œå‰‡éœ€å‘¼å«é€€æ¬¾)</td></tr><tr><td>è¿”é‡‘<br/>(é€€æ¬¾)</td><td>å£²ä¸Šå¾Œã®å–å¼•ã‚’å…¨é¡è¿”é‡‘ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚å£²ä¸Šå‰ã®å–å¼•ã«å¯¾ã—ã¦ã¯ã€å–æ¶ˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br/>(è«‹æ¬¾å¾Œçš„å…¨é¡é€€æ¬¾åŠŸèƒ½ã€‚)</td></tr><tr><td>éƒ¨åˆ†è¿”é‡‘<br/>(éƒ¨åˆ†é€€æ¬¾)</td><td>å£²ä¸Šå¾Œã®å–å¼•ã«å¯¾ã—ã¦ã€è¿”é‡‘ã—ãŸã„é‡‘é¡ã‚’æŒ‡å®šã—ã¦è¿”é‡‘ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚1å›ã®ã¿ä½¿ç”¨å¯èƒ½ã§ã™ã€‚<br/>(éƒ¨åˆ†é€€æ¬¾åŠŸèƒ½ï¼Œåªèƒ½é€€æ¬¾ä¸€æ¬¡)</td></tr><tr><td>è¤‡æ•°å›è¿”é‡‘<br/>(å¤šæ¬¡é€€æ¬¾)</td><td>å£²ä¸Šå¾Œã®å–å¼•ã«å¯¾ã—ã¦ã€è¿”é‡‘ã—ãŸã„é‡‘é¡ã‚’æŒ‡å®šã—ã¦è¤‡æ•°å›è¿”é‡‘ãŒã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚åˆ©ç”¨ä»£é‡‘ãŒ0å††ã«ãªã‚‹ã¾ã§è¤‡æ•°å›ä½¿ç”¨å¯èƒ½ã§ã™ã€‚<br/>(å¤šæ¬¡é€€æ¬¾åŠŸèƒ½ï¼Œé€€åˆ°ä¸èƒ½é€€ç‚ºæ­¢)</td></tr><tr><td>é‡‘é¡å¤‰æ›´<br/>(é‡‘é¡è®Šæ›´)</td><td>ä¸ä¿¡å¾Œã¾ãŸã¯å£²ä¸Šå¾Œã®å–å¼•ã«å¯¾ã—ã¦ã€å¤‰æ›´ã—ãŸã„é‡‘é¡ã‚’æŒ‡å®šã—ã¦å¤‰æ›´ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚â€»ä¸ä¿¡å–å¾—é‡‘é¡ãŠã‚ˆã³å£²ä¸Šé‡‘é¡ã®ç¯„å›²ã‚’è¶…ãˆã¦ã®å¤‰æ›´ã‚‚å¯èƒ½ã§ã™ã€‚<br/>(æˆæ¬Šå¾Œæˆ–è«‹æ¬¾å¾Œï¼Œå¸Œæœ›è®Šæ›´é‡‘é¡ï¼Œå¯ä»¥è¶…éç•¶åˆçš„æˆæ¬Š&#x2F;è«‹æ¬¾é¡åº¦)</td></tr><tr><td>å†ä¸ä¿¡<br/>(å†æˆæ¬Š)</td><td>éå»ã®æ±ºæ¸ˆæƒ…å ±ã‚’åˆ©ç”¨ã—ã¦ã€åˆ¥ã®æ±ºæ¸ˆã¨ã—ã¦ä¸ä¿¡ã‚’å–å¾—ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚ä¸ä¿¡æœŸé™å†…ã®å£²ä¸ŠãŒã§ããªã„å ´åˆãªã©ã«åˆ©ç”¨ã—ã¾ã™ã€‚<br/>(åˆ©ç”¨å‰æ¬¡çš„ä»˜æ¬¾è³‡è¨Šï¼Œå†æ¬¡ä»˜æ¬¾çš„åŠŸèƒ½ï¼Œç”¨æ–¼è¶…å‡ºè«‹æ¬¾æœŸé™çš„æƒ…å¢ƒ)</td></tr><tr><td>æ±ºæ¸ˆçµæœå‚ç…§<br/>(æŸ¥è©¢ä»˜æ¬¾çµæœ)</td><td>æ±ºæ¸ˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚<br/>(æŸ¥è©¢ä»˜æ¬¾çµæœ)</td></tr><tr><td>å…¥é‡‘é€šçŸ¥</td><td>ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§æ”¯æ‰•ã„ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹æ‰•ã„ã€æŒ¯è¾¼ç­‰ï¼‰ã‚’æ¸ˆã¾ã›ãŸã“ã¨ã‚’åŠ ç›Ÿåº—ã¸é€šçŸ¥ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚  <br/>(é‡å°ç·šä¸‹ä»˜æ¬¾ç”¨æˆ¶å·²ç¶“ä»˜æ¬¾å®Œæˆæ™‚é€šçŸ¥ç‰¹åº—ä¹‹åŠŸèƒ½ã€‚)</td></tr><tr><td>æ”¯æ‰•æœŸé™åˆ‡ã‚Œã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥</td><td>ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã®æ”¯æ‰•ã„ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹æ‰•ã„ç­‰ï¼‰ã®æœŸé™ãŒéããŸãŸã‚ã€å–å¼•ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã«ãªã£ãŸã“ã¨ã‚’åŠ ç›Ÿåº—ã¸é€šçŸ¥ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚<br/>(é‡å°ç·šä¸‹ä»˜æ¬¾ç”¨æˆ¶æœªèƒ½åŠæ™‚ä»˜æ¬¾å°è‡´å–æ¶ˆé€šçŸ¥)</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆç°¡æ˜“ï¼‰è§£ç´„</td><td>ç¶™ç¶šèª²é‡‘ï¼ˆç°¡æ˜“ï¼‰ã®ç™»éŒ²ã‚’è§£ç´„ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚è§£ç´„ä»¥å¾Œã®èª²é‡‘ã¯ã€è¡Œã„ã¾ã›ã‚“ã€‚</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆç°¡æ˜“ï¼‰è§£ç´„é€šçŸ¥</td><td>èª²é‡‘ãŒã§ããªã‹ã£ãŸå–å¼•ã‚’åŠ ç›Ÿåº—ã¸é€šçŸ¥ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚è§£ç´„é€šçŸ¥ä»¥å¾Œã®èª²é‡‘ã¯ã€è¡Œã„ã¾ã›ã‚“ã€‚</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ç”³è¾¼</td><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ã§æä¾›ã™ã‚‹è³¼å…¥å•†å“ã®ç”³è¾¼ã¿ã‚’è¡Œã†æ©Ÿèƒ½ã§ã™ã€‚ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ã®ç™»éŒ²ã®ã¿ã§èª²é‡‘ã¯è¡Œã„ã¾ã›ã‚“ã€‚</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰å†ç”³è¾¼</td><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ã§ç™»éŒ²ã—ãŸèª²é‡‘é‡‘é¡ã‚’å¤‰æ›´ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰è³¼å…¥</td><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ã§æä¾›ã™ã‚‹è³¼å…¥å•†å“ã®æ±ºæ¸ˆã‚’è¡Œã†æ©Ÿèƒ½ã§ã™ã€‚</td></tr><tr><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰è§£ç´„</td><td>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼‰ã®ç™»éŒ²ã‚’è§£ç´„ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚</td></tr></tbody></table><h2 id="è»ŸéŠ€è¦ç¯„"><a href="#è»ŸéŠ€è¦ç¯„" class="headerlink" title="è»ŸéŠ€è¦ç¯„"></a>è»ŸéŠ€è¦ç¯„</h2><ul><li>ç•¶æœˆè«‹æ¬¾äº¤æ˜“ï¼Œæ¶ˆè²»è€…æœƒæ–¼æ¬¡æœˆæœˆåº•æ”¯ä»˜</li><li>ç•¶æœˆäº¤æ˜“ï¼Œæ¬¡æœˆè«‹æ¬¾ï¼Œæ¶ˆè²»è€…æœƒæ–¼æ¬¡æ¬¡æœˆåº•æ”¯ä»˜</li><li>ä¿¡ç”¨å¡é‡‘æµå¯ä»¥é€²è¡Œ2æ¬¡æ¸…ç®—ã€‚</li><li>éƒ½åº¦èª²é‡‘ï¼šæ¶ˆè²»è€…åœ¨æ¯æ¬¡åˆ©ç”¨æœå‹™éƒ½æ‰£æ¬¾</li><li>ç¶™ç¶šèª²é‡‘ï¼ˆç°¡æ˜“ï¼‰ï¼šæ ¹æ“šè»ŸéŠ€è¦ç¯„(æœˆåˆ)å¾æ¶ˆè²»è€…èº«ä¸Šæ‰£é™¤å›ºå®šé‡‘é¡ </li><li>ç¶™ç¶šèª²é‡‘ï¼ˆå®šæœŸãƒ»å¾“é‡ï¼šæ ¹æ“šåº—å®¶æŒ‡å®šçš„æ—¥æœŸèˆ‡é‡‘é¡é€²è¡Œæ¶ˆè²»è€…çš„é‡‘é¡æ‰£é™¤ </li><li>åœ¨ç‰¹åº—è«‹æ¬¾å¾Œ10å¤©æ”¶åˆ°æ”¶æ”¯å ±è¡¨ï¼Œè«‹æ¬¾å¾Œçš„æ¬¡æœˆæœˆåº•æœƒæ”¶åˆ°æ¬¾é …ã€‚ </li><li>1~15æ—¥çš„è«‹æ¬¾ï¼Œæœˆåº•æ”¶åˆ°æ¬¾é … </li><li>16æ—¥è‡³æœˆåº•çš„è«‹æ¬¾ï¼Œéš”æœˆ15æ—¥æœƒæ”¶åˆ°æ¬¾é …</li></ul><p>é‡å°éƒ½åº¦èª²é‡‘:</p><ul><li>è‡ªå‹•è«‹æ¬¾ ä¸éœ€è¦è«‹æ¬¾ </li><li>æ‰‹å‹•è«‹æ¬¾ 45æ—¥ä»¥å…§å¯ä»¥è«‹æ¬¾ </li><li>è‡ªå‹•è«‹æ¬¾ ç„¡æ³•å–æ¶ˆ </li><li>æ‰‹å‹•è«‹æ¬¾ 45å¤©ä»¥å…§å¯ä»¥å–æ¶ˆ </li><li>é€€æ¬¾æœŸé™ 6å€‹æœˆ </li><li>å†æˆæ¬ŠæœŸé™ 6å€‹æœˆ</li></ul><p>å¤§ç´„æ•´ç†å¦‚ä¸Šï¼Œæœ‰ä¸æ‡‚çš„å¯ä»¥åœ¨å•æˆ‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SoftBank</tag>
      
      <tag>Payment</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java Optional API ç´€éŒ„</title>
    <link href="/2024/05/23/Java-Optional-API-%E7%B4%80%E9%8C%84/"/>
    <url>/2024/05/23/Java-Optional-API-%E7%B4%80%E9%8C%84/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æˆ‘åœ¨å¯«Javaæ™‚ï¼Œç¸½æ˜¯è¦ºå¾—ä¸€ç›´å¯« if (obj !&#x3D; null) {} é€™æ¨£çš„è™•ç†æœƒè®“æ•´é«”çš„ç¨‹å¼ç¢¼è®Šå¾—ä¸å¥½çœ‹ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸€ç¨®APIå¯ä»¥æ›´å¥½åœ°å”åŠ©æˆ‘è™•ç†NLPå•é¡Œï¼Œæ–¼æ˜¯æˆ‘å¾ŒçºŒå°±é–‹å§‹ä½¿ç”¨Optionalé€™å€‹å¥—ä»¶<br>ï¼Œè¦ºå¾—å®ƒæŒºå¥½ç”¨çš„ã€‚å®ƒå¥½ç”¨çš„é»å¦‚ä¸‹ï¼š</p><ul><li><p>æä¾›å…©ç¨®å°Nullçš„è™•ç†æ–¹å¼ï¼Œä½¿ä½ æ›´å®‰å…¨åœ°æ“ä½œä½ çš„è®Šæ•¸ã€‚ä¾‹å¦‚èªªï¼šOptional.of() èˆ‡ Optional.ofNullable()</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> Optional.ofNullable(object); <br><span class="hljs-type">boolean</span> <span class="hljs-variable">isExist</span> <span class="hljs-operator">=</span> object.isPresent(); <span class="hljs-comment">// Null é¡¯ç¤ºç‚º false</span><br><span class="hljs-keyword">if</span>(isExist) &#123;<br>    System.out.println(<span class="hljs-string">&quot;String = &quot;</span> + object.get());<br>&#125;<br><br><span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> Optional.of(object); <span class="hljs-comment">// è‹¥Objectç‚ºNullæœƒç«‹å³çˆ†éŒ¯</span><br></code></pre></td></tr></table></figure></li><li><p>æ”¯æ´Lambda function</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> Optional.ofNullable(object);<br>object.ifPresent(name -&gt; System.out.println(name.length()));<br></code></pre></td></tr></table></figure></li><li><p>ä¾‹å¤–è™•ç†å¯ä»¥è³¦å€¼ã€åŸ·è¡ŒLambdaã€æ‹‹éŒ¯èª¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è‹¥InputNameå­˜åœ¨é¡¯ç¤ºInputNameå¦å‰‡å›å‚³orElse Value</span><br><span class="hljs-type">String</span> <span class="hljs-variable">inputName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Kevin&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> Optional.ofNullable(inputName).orElse(<span class="hljs-string">&quot;John&quot;</span>); <br><br><span class="hljs-comment">// å¦‚æœç‚ºNull å¯ä»¥ä½¿ç”¨orElse() èˆ‡ orElseGet() è™•ç†Nullå•é¡Œ</span><br><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">defaultText</span> <span class="hljs-operator">=</span> Optional.ofNullable(text).orElseGet(<span class="hljs-built_in">this</span>::getMyDefault);<br><span class="hljs-type">String</span> <span class="hljs-variable">defaultText</span> <span class="hljs-operator">=</span> Optional.ofNullable(text).orElse(getMyDefault());<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMyDefault</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Default Value&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// å¦‚æœç‚ºnull æ‹‹å‡ºException</span><br><span class="hljs-type">String</span> <span class="hljs-variable">insertName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Kelvin&quot;</span>;<br>name = Optional.ofNullable(insertName).orElseThrow(IllegalArgumentException::<span class="hljs-keyword">new</span>);<br></code></pre></td></tr></table></figure></li><li><p>æ”¯æ´Java Stream APIï¼Œæä¾›æ›´å¤šè³‡æ–™è™•ç†çš„å”åŠ©ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä½¿ç”¨filterå¯ä»¥ç¯©é¸åˆ¤æ–·</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> <span class="hljs-number">2016</span>;<br>Optional&lt;Integer&gt; yearOptional = Optional.of(year);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">is2016</span> <span class="hljs-operator">=</span> yearOptional.filter(y -&gt; y == <span class="hljs-number">2016</span>).isPresent();<br><br><span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ functioné€²è¡Œå€¼çš„æª¢æ¸¬åˆ¤æ–·</span><br><span class="hljs-type">Modem</span> <span class="hljs-variable">modem2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Modem</span>(<span class="hljs-number">13.10d</span>);<br>System.out.println(<span class="hljs-string">&quot;Result = &quot;</span> + priceIsInRange2(modem2));<br><span class="hljs-type">boolean</span> <span class="hljs-title function_">priceIsInRange2</span><span class="hljs-params">(Modem modem2)</span> &#123;<br>    <span class="hljs-keyword">return</span> Optional.ofNullable(modem2)<br>            .map(Modem::getPrice).<br>            filter(p -&gt; p &gt;= <span class="hljs-number">10</span>).<br>            filter(p -&gt; p &lt;= <span class="hljs-number">15</span>).<br>            isPresent();<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Modem</span> &#123;<br>      <span class="hljs-keyword">private</span> Double price;<br><br>      Modem(Double price) &#123;<br>          <span class="hljs-built_in">this</span>.price = price;<br>      &#125;<br>      <span class="hljs-comment">// standard getters and setters</span><br><br>      <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Double price)</span> &#123;<br>          <span class="hljs-built_in">this</span>.price = price;<br>      &#125;<br><br>      Double <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<br>          <span class="hljs-keyword">return</span> price;<br>      &#125;<br>&#125;<br><br><br><span class="hljs-comment">// åˆ©ç”¨mapé€²è¡Œæ˜ å°„ï¼Œå†ç”¨filterè™•ç†å€¼</span><br><span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot; password &quot;</span>;<br>Optional&lt;String&gt; passOpt = Optional.of(password);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">correctPassword</span> <span class="hljs-operator">=</span> passOpt<br>.filter(pass -&gt; pass.equals(<span class="hljs-string">&quot;password&quot;</span>))<br>.isPresent();<br>assertFalse(correctPassword);<br>correctPassword = passOpt<br>.map(String::trim)<br>.filter(pass -&gt; pass.equals(<span class="hljs-string">&quot;password&quot;</span>))<br>.isPresent();<br>assertTrue(correctPassword);<br></code></pre></td></tr></table></figure></li><li><p>å°Collection APIçš„è™•ç†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ä½¿ç”¨map è™•ç†é™£åˆ—</span><br>List&lt;String&gt; companyNames = Arrays.asList(<span class="hljs-string">&quot;paypal&quot;</span>, <span class="hljs-string">&quot;oracle&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;microsoft&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;apple&quot;</span>);<br>Optional&lt;List&lt;String&gt;&gt; listOptional = Optional.of(companyNames);<br><span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> listOptional.map(List::size).orElse(<span class="hljs-number">0</span>);<br>System.out.println(<span class="hljs-string">&quot;SIZE = &quot;</span> + size);<br><br><span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">26</span>);<br>Optional&lt;Person&gt; personOptional = Optional.of(person);<br>Optional&lt;String&gt; nameOptional = personOptional<br>                                    .map(Person::getName)<br>                                    .orElseThrow(IllegalArgumentException::<span class="hljs-keyword">new</span>);<br>Optional&lt;String&gt; namesOptional = personOptional.flatMap(Person::getName);<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testflatMap</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    List&lt;Integer&gt; together = Stream.of(asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), asList(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment">// Stream of List&lt;Integer&gt;</span><br>            .flatMap(List::stream)<br>            .map(integer -&gt; integer + <span class="hljs-number">1</span>)<br>            .collect(Collectors.toList());<br>    assertEquals(asList(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>), together);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = i;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Optional&lt;String&gt; <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Optional.ofNullable(name);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Optional&lt;Integer&gt; <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Optional.ofNullable(age);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Optional&lt;String&gt; <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Optional.ofNullable(password);<br>    &#125;<br><br>    <span class="hljs-comment">// normal constructors and setters</span><br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>æ›´å¤šåƒè€ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//  å–å¾—ç¬¬ä¸€å€‹énullçš„å€¼ï¼ŒOptional::get æ˜¯ç‚ºäº†å–å¾—&lt;Stream&lt;String&gt;&gt;</span><br><span class="hljs-comment">//  æ–¹æ³•æœƒå…¨æ•¸åŸ·è¡Œ</span><br><span class="hljs-type">String</span> <span class="hljs-variable">found</span> <span class="hljs-operator">=</span> Stream.of(getEmpty(), getHello(), getBye())<br>        .filter(Optional::isPresent)<br>        .map(Optional::get)<br>        .findFirst()<br>        .get();<br><br><span class="hljs-comment">//  åŒæ¨£æ„æ€ï¼Œä½†æ–¹æ³•ä¸æœƒå…¨æ•¸åŸ·è¡Œ</span><br>Optional&lt;String&gt; found2 =<br>      Stream.&lt;Supplier&lt;Optional&lt;String&gt;&gt;&gt;of(<span class="hljs-built_in">this</span>::getEmpty, <span class="hljs-built_in">this</span>::getHello, <span class="hljs-built_in">this</span>::getBye)<br>              .map(Supplier::get)<br>              .filter(Optional::isPresent)<br>              .map(Optional::get)<br>              .findFirst();<br><br><span class="hljs-comment">// è‹¥functionæƒ³è¦å¸¶ä¸Šåƒæ•¸ éœ€ä½¿ç”¨lambda</span><br>Optional&lt;String&gt; found3 = Stream.&lt;Supplier&lt;Optional&lt;String&gt;&gt;&gt;of(<br>              () -&gt; createOptional(<span class="hljs-string">&quot;empty&quot;</span>),<br>              () -&gt; createOptional(<span class="hljs-string">&quot;hello&quot;</span>)<br>      )<br>      .map(Supplier::get)<br>      .filter(Optional::isPresent)<br>      .map(Optional::get)<br>      .findFirst();<br><br><span class="hljs-comment">//        åˆ¤æ–·æ˜¯å¦å…¨æ•¸ç‚ºnull</span><br><span class="hljs-type">String</span> <span class="hljs-variable">found4</span> <span class="hljs-operator">=</span> Stream.&lt;Supplier&lt;Optional&lt;String&gt;&gt;&gt;of(<br>                () -&gt; createOptional(<span class="hljs-string">&quot;empty&quot;</span>),<br>                () -&gt; createOptional(<span class="hljs-string">&quot;E&quot;</span>)<br>        )<br>        .map(Supplier::get)<br>        .filter(Optional::isPresent)<br>        .map(Optional::get)<br>        .findFirst()<br>        .orElseGet(() -&gt; <span class="hljs-string">&quot;default&quot;</span>);<br><br>assertEquals(<span class="hljs-string">&quot;E&quot;</span>,found4);<br><br><span class="hljs-keyword">private</span> Optional&lt;String&gt; <span class="hljs-title function_">getEmpty</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> Optional.empty();<br>&#125;<br><br><span class="hljs-keyword">private</span> Optional&lt;String&gt; <span class="hljs-title function_">getHello</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> Optional.of(<span class="hljs-string">&quot;hello&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">private</span> Optional&lt;String&gt; <span class="hljs-title function_">getBye</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> Optional.of(<span class="hljs-string">&quot;bye&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">private</span> Optional&lt;String&gt; <span class="hljs-title function_">createOptional</span><span class="hljs-params">(String input)</span> &#123;<br>    <span class="hljs-keyword">if</span> (input == <span class="hljs-literal">null</span> || <span class="hljs-string">&quot;&quot;</span>.equals(input) || <span class="hljs-string">&quot;empty&quot;</span>.equals(input)) &#123;<br>        <span class="hljs-keyword">return</span> Optional.empty();<br>    &#125;<br>    <span class="hljs-keyword">return</span> Optional.of(input);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>API</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£èªªSQLçš„Transactionèˆ‡éš”é›¢å±¤ç´š</title>
    <link href="/2024/05/19/%E8%A7%A3%E8%AA%AASQL%E7%9A%84Transaction%E8%88%87%E9%9A%94%E9%9B%A2%E5%B1%A4%E7%B4%9A/"/>
    <url>/2024/05/19/%E8%A7%A3%E8%AA%AASQL%E7%9A%84Transaction%E8%88%87%E9%9A%94%E9%9B%A2%E5%B1%A4%E7%B4%9A/</url>
    
    <content type="html"><![CDATA[<h2 id="ä»€éº¼æ˜¯Transactionï¼Ÿ"><a href="#ä»€éº¼æ˜¯Transactionï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯Transactionï¼Ÿ"></a>ä»€éº¼æ˜¯Transactionï¼Ÿ</h2><p>Transactionï¼Œå¤§é™¸æœ‰äººç¿»è­¯ç‚ºäº¤æ˜“æˆ–äº‹å‹™ï¼Œä½†éƒ½åŒä¸€å€‹æ„æ€ã€‚</p><span id="more"></span>å®ƒæ˜¯ä¸€å€‹åŸ·è¡Œéç¨‹ä¸­çš„ä¸€å€‹é‚è¼¯å–®ä½ã€‚æ¯”æ–¹èªªSELECTã€INSERTã€UPDATEï¼Œç•¶ä¸­ä¹Ÿå¯èƒ½åŒ…å«å¤šå€‹è¡Œç‚ºï¼Œæ¯”æ–¹èªªæŸ¥è©¢å¾Œæ›´æ–°ã€‚ç‚ºäº†ç¢ºä¿è³‡æ–™åº«çš„äº¤æ˜“åœ¨å„ç¨®æƒ…æ³ä¸‹éƒ½æ˜¯ç¶­æŒæ­£ç¢ºæ€§ï¼Œäº¤æ˜“æœ‰å››å€‹ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯ä¿—ç¨±çš„ACIDã€‚<h3 id="1-Atomicity-åŸå­æ€§"><a href="#1-Atomicity-åŸå­æ€§" class="headerlink" title="1. Atomicity åŸå­æ€§"></a>1. <strong>A</strong>tomicity åŸå­æ€§</h3><p>åŸå­æ€§ä¸»å¼µäº¤æ˜“å¿…é ˆè¦ç¶­æŒçµ±ä¸€ä¸è®Šçš„ç‹€æ³ï¼Œäº¤æ˜“å¿…é ˆæ˜¯å…¨æ•¸æˆåŠŸï¼Œä¸ç„¶å°±å¾—æ˜¯å…¨éƒ¨å¤±æ•—ã€‚<br>èˆ‰ä¾‹ï¼š å‡è¨­ä½ æ˜¯æ¶ˆè²»è€…ï¼Œé€²è¡Œæ¶ˆè²»å¾Œåœ¨å‰å°çš„äº¤æ˜“ç³»çµ±æœ‰å­˜å…¥é€™ç­†äº¤æ˜“ï¼Œä½†æ˜¯ç³»çµ±çš„äº¤æ˜“å¾Œå°å»æ²’æœ‰é€™ç­†äº¤æ˜“ï¼Œé¡¯ç¤ºæ›´æ–°é€™å€‹åŠŸèƒ½<strong>åªåšäº†ä¸€åŠ</strong>ï¼Œäº¤æ˜“çš„è¡Œç‚ºç ´å£äº†<strong>åŸå­æ€§</strong>ã€‚</p><h3 id="2-Consistency-ä¸€è‡´æ€§"><a href="#2-Consistency-ä¸€è‡´æ€§" class="headerlink" title="2. Consistency ä¸€è‡´æ€§"></a>2. <strong>C</strong>onsistency ä¸€è‡´æ€§</h3><p>ä¸€è‡´æ€§ä¸»å¼µï¼Œäº¤æ˜“å‰èˆ‡äº¤æ˜“å¾Œéƒ½å¿…é ˆè¦éµå®ˆå®Œæ•´æ€§çš„è¦ç¯„ï¼Œæ¯”æ–¹èªªåº—å®¶å‰å°çš„äº¤æ˜“ç³»çµ±èˆ‡ç³»çµ±å¾Œå°<strong>å¿…é ˆè¦ç¶­æŒä¸€è‡´æ€§</strong>ï¼Œäº¤æ˜“çš„çµæœä¸çµ±ä¸€ç ´å£äº†<strong>ä¸€è‡´æ€§</strong>ã€‚</p><h3 id="3-Isolation-éš”é›¢æ€§"><a href="#3-Isolation-éš”é›¢æ€§" class="headerlink" title="3. Isolation éš”é›¢æ€§"></a>3. <strong>I</strong>solation éš”é›¢æ€§</h3><p>éš”é›¢æ€§ä»£è¡¨äº†äº¤æ˜“ä¸æ‡‰è©²äº’ç›¸å¹²æ“¾ï¼Œå‡è¨­ä½ çœ‹åˆ°çš„æˆ¶é ­æœ‰1000å…ƒï¼Œè€Œä½ åœ¨é ˜800å»åƒé£¯æ™‚ï¼Œå‰›å¥½é›»è²»åŒæ™‚æ‰£æ¬¾å°è‡´ä½ ç„¡æ³•é€²è¡Œäº¤æ˜“ã€‚ä¸å¤ åš´è¬¹çš„éš”é›¢æ€§å¾ŒçºŒæœƒç”¢ç”Ÿè¨±å¤šå•é¡Œï¼Œç­‰ä¸€ä¸‹æœƒä¸€ä¸€ä»‹ç´¹ã€‚</p><h3 id="4-Durability-æ°¸ä¹…æ€§"><a href="#4-Durability-æ°¸ä¹…æ€§" class="headerlink" title="4. Durability æ°¸ä¹…æ€§"></a>4. <strong>D</strong>urability æ°¸ä¹…æ€§</h3><p>æ°¸ä¹…æ€§æ„å‘³å°æ–¼è³‡æ–™çš„å¯«å…¥æ˜¯æ°¸ä¹…çš„ï¼Œå³ä½¿ç³»çµ±æ•…éšœä¹Ÿä¸æœƒä¸Ÿå¤±è³‡æ–™ã€‚</p><p>é€™äº›è¦ç¯„çœ‹èµ·ä¾†å¾ˆåˆç†ï¼Œä½†æœªå¿…é©åˆæ¯ç¨®å•†æ¥­å ´æ™¯ï¼Œå¯¦éš›ä¸Šé‚„æ˜¯è¦å¤šå¤šè€ƒæ…®å¯¦éš›ä¸Šçš„å•†æ¥­å ´æ™¯åœ¨åšå‡ºæ±ºå®šã€‚å°±å¥½æ¯”é«˜å¯ç”¨æ€§èˆ‡ç³»çµ±æ•ˆèƒ½æ°¸é éƒ½æ˜¯ä¸€å€‹ç„¡æ³•å…¼å¾—çš„é¸é …ä¸€æ¨£ã€‚ç«¯çœ‹ä½ è¦å¦‚ä½•å–æ¨ã€‚</p><h2 id="ä¸‰ç¨®SQLéš”é›¢æ€§æœƒç”¢ç”Ÿçš„å•é¡Œ"><a href="#ä¸‰ç¨®SQLéš”é›¢æ€§æœƒç”¢ç”Ÿçš„å•é¡Œ" class="headerlink" title="ä¸‰ç¨®SQLéš”é›¢æ€§æœƒç”¢ç”Ÿçš„å•é¡Œ"></a>ä¸‰ç¨®SQLéš”é›¢æ€§æœƒç”¢ç”Ÿçš„å•é¡Œ</h2><p>è¨­å®šäº†éŒ¯èª¤çš„éš”é›¢å±¤ç´šæœƒé€ æˆè¨±å¤šç³»çµ±ä¸Šé›£ç¶­è­·çš„èª²é¡Œï¼Œç‰¹åˆ¥æ˜¯åœ¨å¤šåŸ·è¡Œç·’çš„å ´æ™¯ï¼Œä½¿ç”¨Trasactionç‰¹æ€§è¦ç‰¹åˆ¥è¬¹æ…ã€‚å¸¸è¦‹çš„éš”é›¢æ€§ä¸æ­£ç¢ºæœƒæœ‰ä»¥ä¸‹å•é¡Œï¼š</p><h3 id="1-Dirty-Read-é«’è®€"><a href="#1-Dirty-Read-é«’è®€" class="headerlink" title="1. Dirty Read é«’è®€"></a>1. Dirty Read é«’è®€</h3><p>æŒ‡ä¸€ç­†äº¤æ˜“åœ¨è™•ç†éç¨‹ä¸­è®€å–äº†å¦å¤–ä¸€å€‹äº¤æ˜“â€æœªæäº¤â€çš„æ•¸æ“šã€‚<br>èˆ‰ä¾‹ï¼š<br>å¸³æˆ¶åŸæœ‰1000ï¼Œ<br>Aæœƒ</p><ol><li>å°å¸³æˆ¶é ˜500</li><li>å°å¸³æˆ¶å­˜500<br>Bæœƒ</li><li>è®€å–å¸³æˆ¶é¤˜é¡ã€‚</li></ol><p>åœ¨å…©è€…åŒæ™‚è™•ç†çš„ä½µç™¼æƒ…æ³ä¸‹å¯èƒ½ç™¼ç”Ÿï¼š A1 &gt; B &gt;A2<br>ä¹Ÿå°±æ˜¯èªªå¸³æˆ¶å…¶å¯¦éŒ¢ä¸¦æ²’æœ‰æ¸›å°‘ï¼Œä½†åœ¨Bçš„è¦–è§’ä¸­ï¼Œå¯èƒ½ç”¢ç”Ÿå¸³æˆ¶å°‘äº†500å…ƒçš„çµæœã€‚</p><h3 id="2-Non-Repeatable-ä¸å¯é‡è¤‡è®€"><a href="#2-Non-Repeatable-ä¸å¯é‡è¤‡è®€" class="headerlink" title="2. Non-Repeatable ä¸å¯é‡è¤‡è®€"></a>2. Non-Repeatable ä¸å¯é‡è¤‡è®€</h3><p>æŒ‡ä¸€å€‹äº¤æ˜“ç¯„åœå…§ï¼Œå¤šæ¬¡æŸ¥è©¢æŸå€‹æ•¸æ“šï¼Œå»å¾—åˆ°ä¸åŒçš„çµæœã€‚<br>èˆ‰ä¾‹ï¼š<br>å‘ˆä¸Šä¾‹ï¼ŒBåˆæ¬¡è®€å–æ™‚å¾—åˆ°äº†500ï¼Œä½†éä¸€ä¸‹å­è®€å–å¾Œåˆå¾—åˆ°äº†1000ã€‚å…©æ¬¡çµæœä¸ä¸€è‡´ã€‚</p><h3 id="3-Phantom-Read-å¹»è®€"><a href="#3-Phantom-Read-å¹»è®€" class="headerlink" title="3. Phantom Read å¹»è®€"></a>3. Phantom Read å¹»è®€</h3><p>ä¸€å€‹äº¤æ˜“ç¯„åœå…§ï¼Œå¤šæ¬¡æŸ¥è©¢æŸå€‹æ•¸æ“šï¼Œå»å¾—åˆ°ä¸åŒçš„è³‡æ–™ç­†æ•¸ã€‚</p><h2 id="å››ç¨®éš”é›¢å±¤ç´š"><a href="#å››ç¨®éš”é›¢å±¤ç´š" class="headerlink" title="å››ç¨®éš”é›¢å±¤ç´š"></a>å››ç¨®éš”é›¢å±¤ç´š</h2><h3 id="1-Read-Uncommitted"><a href="#1-Read-Uncommitted" class="headerlink" title="1. Read Uncommitted:"></a>1. Read Uncommitted:</h3><p>é€™å€‹éš”é›¢å±¤ç´šå¯ä»¥è®€å–å°šæœªcommitçš„è³‡æ–™ï¼Œå› ç‚ºè³‡æ–™åŒ…å«ç‚ºcommitçš„è³‡æ–™ï¼Œæ‰€ä»¥å¯èƒ½æœƒç”¢ç”Ÿä»¥ä¸Šä¸‰ç¨®å•é¡Œã€‚<br>é€™ç¨®éš”é›¢å±¤ç´šå¯èƒ½ç”¢ç”Ÿï¼š</p><ul><li>é«’è®€</li><li>ä¸å¯é‡è¤‡è®€</li><li>å¹»è®€</li></ul><h3 id="2-Read-Committedï¼š"><a href="#2-Read-Committedï¼š" class="headerlink" title="2. Read Committedï¼š"></a>2. Read Committedï¼š</h3><p>é€™å€‹éš”é›¢å±¤ç´šåªå…è¨±è®€å–å…¶ä»– transaction commit éçš„è³‡æ–™ï¼Œå¯ä»¥è§£æ±ºé«’è®€çš„å•é¡Œï¼Œ<br>ä¸éå¦‚æœä¸€å€‹ transaction çš„å…©å€‹ SELECT èªæ³•é–“æœ‰å¦ä¸€å€‹äº¤æ˜“ commit äº†æ–°è³‡æ–™ï¼Œ<br>æœƒé€ æˆç¬¬ä¸€æ¬¡è®€å–èˆ‡ç¬¬äºŒæ¬¡è®€å–çµæœä¸ä¸€è‡´çš„å•é¡Œï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»‹ç´¹éçš„ä¸å¯é‡è¤‡è®€ã€‚<br>é€™ç¨®éš”é›¢å±¤ç´šå¯èƒ½ç”¢ç”Ÿï¼š</p><ul><li>ä¸å¯é‡è¤‡è®€</li><li>å¹»è®€</li></ul><h3 id="3-Repeatable-Read"><a href="#3-Repeatable-Read" class="headerlink" title="3. Repeatable Read"></a>3. Repeatable Read</h3><p>åŒä¸€å€‹ transaction å…§ï¼Œé™¤éè‡ªå·±ä¿®æ”¹ï¼Œå¦å‰‡å¤šæ¬¡ SELECT çš„çµæœéƒ½æœƒç›¸åŒï¼Œè§£æ±ºäº†ä¸å¯é‡è¤‡è®€çš„å•é¡Œã€‚<br>é€™ç¨®éš”é›¢å±¤ç´šå¯èƒ½ç”¢ç”Ÿï¼š</p><ul><li>å¹»è®€</li></ul><h3 id="4-Serializable"><a href="#4-Serializable" class="headerlink" title="4. Serializable"></a>4. Serializable</h3><p>åœ¨ä¸€é–‹å§‹æéï¼Œæ˜¯ä¸€å€‹ç”¨æ•ˆèƒ½æ›å–ä¸€è‡´æ€§çš„éš”é›¢å±¤ç´šï¼Œ<br>è®“æ‰€æœ‰ transaction åºåˆ—åŒ–åŸ·è¡Œï¼Œé¿å…ä½µç™¼å¯èƒ½æœƒé€ æˆçš„å•é¡Œã€‚<br>å¯è§£æ±ºå•é¡Œä½†æ•ˆèƒ½ä½è½ã€‚</p><p>ä»¥ä¸Š</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€ç†Šæœ¬å¼ã€‘å­¸ç¿’ Girl Band Cry 1 è©±å‡ºç¾çš„æ–¹è¨€</title>
    <link href="/2024/05/19/%E3%80%90%E7%86%8A%E6%9C%AC%E5%BC%81%E3%80%91%E5%AD%B8%E7%BF%92-Girl-Band-Cry-1-%E8%A9%B1%E5%87%BA%E7%8F%BE%E7%9A%84%E6%96%B9%E8%A8%80/"/>
    <url>/2024/05/19/%E3%80%90%E7%86%8A%E6%9C%AC%E5%BC%81%E3%80%91%E5%AD%B8%E7%BF%92-Girl-Band-Cry-1-%E8%A9%B1%E5%87%BA%E7%8F%BE%E7%9A%84%E6%96%B9%E8%A8%80/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‘¨æœ«å°±æ˜¯è£œç•ªæ™‚åˆ»ï¼Œé€™ä¸€å­£å‹•ç•«çœŸæ˜¯ç³ç‘¯æ»¿ç›®ï¼Œåšç‚ºä¸€åè€å®…å®…ï¼Œè¿‘å¹´ä¾†è¶Šä¾†è¶Šå¤šæ·±å…¥äººå¿ƒçš„æ¨‚åœ˜ç•ªèª•ç”Ÿï¼Œå¾å­¤ç¨æ–æ»¾åˆ°MyGOï¼Œé€™å­£é‚„æœ‰Girl Band Cryé€™éƒ¨ï¼Œç¬¬ä¸€è©±åšå¾—å¾ˆå¥½ï¼Œæœ‰èˆˆè¶£è«‹å¤§å®¶ä¸€å®šè¦çœ‹çœ‹ã€‚é€™æ¬¡è¦è¨è«–çš„æ˜¯å‹•ç•«ç¬¬ä¸€è©±ä¸­å‡ºç¾çš„ç†Šæœ¬å¼ï¼Œè®“å„ä½å¯ä»¥ç°¡å–®ä¸Šæ‰‹ç†Šæœ¬å¼ã€‚</p><span id="more"></span><h2 id="ä»€éº¼äººé©åˆé–±è®€é€™ç¯‡æ–‡ç« ï¼Ÿ"><a href="#ä»€éº¼äººé©åˆé–±è®€é€™ç¯‡æ–‡ç« ï¼Ÿ" class="headerlink" title="ä»€éº¼äººé©åˆé–±è®€é€™ç¯‡æ–‡ç« ï¼Ÿ"></a>ä»€éº¼äººé©åˆé–±è®€é€™ç¯‡æ–‡ç« ï¼Ÿ</h2><ul><li>è‡³å°‘å­¸éäº”åéŸ³ï¼Œæ‡‚ä¸€é»æ—¥æ–‡æ–‡æ³•çš„</li><li>å°æ¨‚åœ˜ç•ªã€æˆ–å‹•æ¼«æœ‰èˆˆè¶£</li><li>åœ¨ç­‰æ˜å¹´é˜¿åŒ—æ¯é›å¡å‡ºï¼Œæƒ³è¦æ›å€‹èƒƒå£çš„äºº</li></ul><h3 id="ã‚ã„ã•ãƒ¼"><a href="#ã‚ã„ã•ãƒ¼" class="headerlink" title="ã‚ã„ã•ãƒ¼"></a>ã‚ã„ã•ãƒ¼</h3><p>ã€Œã‚ã„ã•ãƒ¼ã€åœ¨ç†Šæœ¬å¼ä¸­æ˜¯æ„Ÿå˜†è©ï¼ŒåŸºæœ¬ä¸Šæ²’æœ‰å¤ªå¤šçš„æ„ç¾©åœ¨å…§ï¼Œé€šå¸¸åœ¨è¡¨ç¤ºé©šè¨çš„å ´åˆä¸­è¢«ä½¿ç”¨ã€‚ç›¸ä¼¼çš„ç”¨æ³•æœ‰</p><ul><li>ã‚ã„ã•ãƒ¼ã—</li><li>ã‚ã‚“ã•ãƒ¼ã—</li><li>ã‚ã„ã•ãƒ¼ã</li><li>ã‚ã„ã•ããƒ¼</li></ul><p>ç”¨æ³•çš†ç›¸ä¼¼ï¼Œå¯ä»¥åƒè€ƒçœ‹çœ‹ã€‚</p><h3 id="ãªã‚“ã—ã‚ˆã£ã¨"><a href="#ãªã‚“ã—ã‚ˆã£ã¨" class="headerlink" title="ãªã‚“ã—ã‚ˆã£ã¨"></a>ãªã‚“ã—ã‚ˆã£ã¨</h3><p>ã€Œãªã‚“ã—ã‚ˆã£ã¨ã€æ›å¸¸ç”¨çš„èªæ³•å°±æ˜¯ ãªã«ã—ã¦ã‚‹ã®ï¼Œä¹Ÿå°±æ˜¯ ä½ åœ¨åšä»€éº¼ï¼Ÿ çš„æ„æ€ï¼Œæ ¹æ“šå ´åˆå¯èƒ½æœƒç”¢ç”Ÿ ä½ åœ¨åšä»€éº¼å•Š çš„ç”Ÿæ°£ã€è²¬å‚™æ„æ€ï¼Œè«‹å¤šç•™æ„ã€‚å¦å¤–ï¼Œä¼¼ä¹åœ¨ç¦å²¡æ–¹è¨€ä¸­ä¹Ÿæœ‰ä¸€æ¨£çš„ç”¨æ³•åœ¨ã€‚</p><h3 id="ã°ã„"><a href="#ã°ã„" class="headerlink" title="ã°ã„"></a>ã°ã„</h3><p>ã€Œã°ã„ã€åœ¨å…¨æ–‡ä¸­æ˜¯â€é›»è©±ã‹ã‘ã¦ããŸã°ã„â€ï¼Œä¹Ÿå°±æ˜¯æœ‰æ‰“é›»è©±çµ¦ä½ äº†å–”ï¼Œé€™æ¨£ï¼Œæ²’ä»€éº¼å¥½èªªçš„ï¼Œå¯ä»¥ç†è§£ç‚ºã€Œã‚ˆã€çš„æ„æ€ã€‚</p><h3 id="æ¥ã‚“ã£ã¦"><a href="#æ¥ã‚“ã£ã¦" class="headerlink" title="æ¥ã‚“ã£ã¦"></a>æ¥ã‚“ã£ã¦</h3><p>é€™å€‹æ¯”è¼ƒä¸å±¬æ–¼æ–¹è¨€ï¼Œæ‡‰è©²èªªæ²’æœ‰è¾¦æ³•ç‰¹å®šç‚ºå“ªå€‹åœ°å€çš„æ–¹è¨€ï¼Œå„åœ°çš„æ–¹è¨€éƒ½æœ‰å‡ºç¾ï¼Œæœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥å‘Šè¨´æˆ‘å…¶ä»–åœ°å€æ˜¯å¦ä¹Ÿæœ‰åŒæ¨£çš„ç‹€æ³ã€‚<br>ã€Œæ¥ã‚“ã£ã¦ã€ &#x3D;&#x3D; æ¥ãªãã¦  ä¸ä¾†çš„æ„æ€</p><h3 id="ã‚ã‹ã£ã¨ã†"><a href="#ã‚ã‹ã£ã¨ã†" class="headerlink" title="ã‚ã‹ã£ã¨ã†"></a>ã‚ã‹ã£ã¨ã†</h3><p>é€™å€‹ä¹Ÿæ˜¯ç–‘ä¼¼åœ¨å¤šåœ°éƒ½å‡ºç¾éçš„æ–¹è¨€ï¼Œç¦å²¡æ¯”è¼ƒå¸¸è¦‹ã€‚<br>ã€Œã‚ã‹ã£ã¨ã†ã€ å¯ä»¥ç†è§£ç‚º åˆ†ã‹ã£ã¦ã‚‹ã€€å°±æ˜¯æˆ‘æ˜ç™½çš„æ„æ€ã€‚</p><h3 id="ã‘ã‚“"><a href="#ã‘ã‚“" class="headerlink" title="ã‘ã‚“"></a>ã‘ã‚“</h3><p>é€™å€‹ä¹Ÿåœ¨å„åœ°éƒ½æœ‰å‡ºç¾ï¼Œå¯ä»¥å°‡ã‘ã‚“ç†è§£ç‚ºèªåŠ©è©ï¼Œï½ã ã‹ã‚‰çš„æ„æ€ã€‚<br>ä¾‹å¥ï¼šæ˜æ—¥è¡Œãã‘ã‚“</p><h3 id="ã†ã‚‹ã•ã‹"><a href="#ã†ã‚‹ã•ã‹" class="headerlink" title="ã†ã‚‹ã•ã‹"></a>ã†ã‚‹ã•ã‹</h3><p>é€™å€‹æ‡‰è©²ä¸ç”¨è§£é‡‹äº†ï¼Œå°±æ˜¯ã†ã‚‹ã•ã„çš„ç†Šæœ¬å¼ã€‚</p><h3 id="ï½ã¨ï¼Ÿ"><a href="#ï½ã¨ï¼Ÿ" class="headerlink" title="ï½ã¨ï¼Ÿ"></a>ï½ã¨ï¼Ÿ</h3><p>ç†Šæœ¬å¼æœ‰æ™‚æœƒåœ¨å¥å°¾åŠ å…¥ã¨ï¼Œå°±æ˜¯æ—¥æ–‡ï½ãªã®çš„æ„æ€<br>ä¾‹å¥ï¼šã„ã‘ã‚‹ã¨ï¼Ÿ</p><h3 id="ï½ãªã‹ã¨"><a href="#ï½ãªã‹ã¨" class="headerlink" title="ï½ãªã‹ã¨"></a>ï½ãªã‹ã¨</h3><p>ä¹å·åœ°æ–¹çš„æ–¹è¨€ï¼Œãªã‹ã¨ å¯ä»¥ç†è§£ç‚º ãªã„ï¼Œæ¯”æ–¹èªªãªã‹ã¨ã‚ˆã€€ï¼ã€€ãªã„ã‚“ã§ã™ã‚ˆ</p><p>ä»¥ä¸Šï¼Œæä¾›åƒè€ƒï¼Œç†Šæœ¬æ–¹è¨€é›–ç„¶æœ‰å¾ˆå¤šèˆ‡ä¹å·ã€ç¦å²¡åœ°å€æ··åœ¨ä¸€èµ·ï¼Œä½†é‚„æ˜¯å¾ˆæœ‰è¶£å‘¢ã€‚ä¸èªªäº†ï¼Œæˆ‘è¦å»çœ‹ç¬¬2è©±äº†ã€‚</p><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><ol><li><a href="https://rkk.jp/gamadase/k_detail.php?id=20070126021119">https://rkk.jp/gamadase/k_detail.php?id=20070126021119</a></li><li><a href="https://keepergiken.jp/keepre/4191/">https://keepergiken.jp/keepre/4191/</a></li><li><a href="https://ja.wikipedia.org/wiki/%E7%86%8A%E6%9C%AC%E5%BC%81">https://ja.wikipedia.org/wiki/%E7%86%8A%E6%9C%AC%E5%BC%81</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Japanese</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç†Šæœ¬å¼</tag>
      
      <tag>ã‚¬ãƒ¼ãƒ«ã‚ºãƒãƒ³ãƒ‰ã‚¯ãƒ©ã‚¤</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»€éº¼æ˜¯TDDï¼Ÿå¦‚ä½•å¯¦ä½œï¼Ÿ</title>
    <link href="/2024/05/18/%E4%BB%80%E9%BA%BC%E6%98%AFTDD%EF%BC%9F%E5%A6%82%E4%BD%95%E5%AF%A6%E4%BD%9C%EF%BC%9F/"/>
    <url>/2024/05/18/%E4%BB%80%E9%BA%BC%E6%98%AFTDD%EF%BC%9F%E5%A6%82%E4%BD%95%E5%AF%A6%E4%BD%9C%EF%BC%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="ä»€éº¼æ˜¯TDDï¼Ÿ"><a href="#ä»€éº¼æ˜¯TDDï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯TDDï¼Ÿ"></a>ä»€éº¼æ˜¯TDDï¼Ÿ</h3><p>TDDï¼Œå…¨åæ¸¬è©¦é©…å‹•é–‹ç™¼(Test Driven Development)æ˜¯ä¸€ç¨®è»Ÿé«”é–‹ç™¼çš„æ–¹æ³•è«–ï¼Œé¡§åæ€ç¾©é€™ç¨®é–‹ç™¼æ–¹å¼ä»¥æ¸¬è©¦é©…å‹•ã€‚ä½¿ç”¨TDDé€²è¡Œé–‹ç™¼çš„æµç¨‹å¦‚ä¸‹ï¼š</p><span id="more"></span><ol><li>ç´…ç‡ˆ</li><li>ç¶ ç‡ˆ</li><li>é‡æ§‹</li></ol><h4 id="ç´…ç‡ˆéšæ®µ"><a href="#ç´…ç‡ˆéšæ®µ" class="headerlink" title="ç´…ç‡ˆéšæ®µ"></a>ç´…ç‡ˆéšæ®µ</h4><p>é€™å€‹éšæ®µå¿…é ˆè¦æ’°å¯«å‡ºä¸€å€‹å¿…å®šæœƒå¤±æ•—çš„ç¨‹å¼ç¢¼</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>TDD</tag>
      
      <tag>Methology</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java Streamç”¨æ³•ã€MapStructã€Lombokèªæ³•</title>
    <link href="/2024/05/01/Java-Stream%E7%94%A8%E6%B3%95%E3%80%81MapStruct%E3%80%81Lombok%E8%AA%9E%E6%B3%95/"/>
    <url>/2024/05/01/Java-Stream%E7%94%A8%E6%B3%95%E3%80%81MapStruct%E3%80%81Lombok%E8%AA%9E%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>Java 8 åŠ å…¥Streamèªæ³•ï¼Œæä¾›äº†å¾ˆå¤šé‡å°é™£åˆ—ç‰©ä»¶çš„ä¾¿åˆ©åŠŸèƒ½ï¼Œä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸è¦‹çš„ç”¨æ³•ã€‚</p><span id="more"></span><h3 id="Java-Stream-å¸¸è¦‹ç”¨æ³•"><a href="#Java-Stream-å¸¸è¦‹ç”¨æ³•" class="headerlink" title="Java Stream å¸¸è¦‹ç”¨æ³•"></a>Java Stream å¸¸è¦‹ç”¨æ³•</h3><p>Java Stream ä¸»è¦åŠŸèƒ½å¦‚ä¸‹</p><ol><li>Filter é€éè¨­å®šçš„æ¢ä»¶éæ¿¾å…ƒç´ </li></ol><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">//</span> æ‰¾å‡ºéEmptyæ•¸é‡<br>long memberCount = gameDevMember<br><span class="hljs-string">.stream</span><span class="hljs-params">()</span><br><span class="hljs-string">.filter</span><span class="hljs-params">(string -&gt; !string.isEmpty()</span>)<br><span class="hljs-string">.count</span><span class="hljs-params">()</span>;<br><br><span class="hljs-string">//</span> æ‰¾å‡ºéé‡è¤‡çš„ç¬¬ä¸€ä½æˆå“¡<br>String firstMember = gameDevMember<br><span class="hljs-string">.stream</span><span class="hljs-params">()</span><br><span class="hljs-string">.filter</span><span class="hljs-params">(string -&gt; !string.isEmpty()</span>)<br><span class="hljs-string">.distinct</span><span class="hljs-params">()</span><br><span class="hljs-string">.findFirst</span><span class="hljs-params">()</span><br><span class="hljs-string">.get</span><span class="hljs-params">()</span>;<br><br><span class="hljs-string">//</span> æ‰¾å‡º é™£åˆ—ä¸­ä»¥AL1Sé–‹é ­çš„ä»»ä½•ä¸€å€‹ï¼Œè‹¥æ²’æœ‰ç¬¦åˆçš„å›å‚³<span class="hljs-string">&quot;IS NOT EXIST&quot;</span><br>String findQueen = gameDevMember<br><span class="hljs-string">.stream</span><span class="hljs-params">()</span><br><span class="hljs-string">.filter</span><span class="hljs-params">(string -&gt; string.startsWith(&quot;AL1S&quot;)</span>)<br><span class="hljs-string">.distinct</span><span class="hljs-params">()</span><br><span class="hljs-string">.findAny</span><span class="hljs-params">()</span><br><span class="hljs-string">.orElse</span><span class="hljs-params">(&quot;IS NOT EXIST&quot;)</span>;<br><br><span class="hljs-string">//</span> æ‰¾å‡ºå‰ä¸‰ä½æˆå“¡<br>String findThreeMember = gameDevMember<br><span class="hljs-string">.stream</span><span class="hljs-params">()</span><br><span class="hljs-string">.filter</span><span class="hljs-params">(string -&gt; !string.isEmpty()</span>)<br><span class="hljs-string">.distinct</span><span class="hljs-params">()</span><br><span class="hljs-string">.limit</span><span class="hljs-params">(3)</span><br><span class="hljs-string">.collect</span><span class="hljs-params">(Collectors.joining()</span>);<br><br></code></pre></td></tr></table></figure><ol start="2"><li>Map æ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å°æ‡‰çš„çµæœ</li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs gradle">List&lt;Food&gt; foodObj = Arrays.<span class="hljs-keyword">asList</span>(<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;é…¸è¾£æ¹¯&quot;</span>),<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;é¤›é£©æ¹¯&quot;</span>),<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;è‚‰ç¾¹æ¹¯&quot;</span>),<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;ç‰›è‚‰æ¹¯&quot;</span>),<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;è²¢ä¸¸æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;ä¸‹æ°´æ¹¯&quot;</span>));<br><br><span class="hljs-comment">// å–å¾—ç‰©ä»¶çš„å­—ä¸²</span><br>List&lt;String&gt; foodList = foodObj.stream().map( food -&gt; food.getFoodName()).<span class="hljs-keyword">toList</span>();<br>System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;é£Ÿç‰©æœ‰&quot;</span>+foodList);<br></code></pre></td></tr></table></figure><ol start="3"><li>forEach è¿­ä»£Streamä¸­çš„æ¯å€‹å…ƒç´  ( åŒæ¨£å¯ä»¥ä¿®æ”¹ ä½†æ˜¯ä¸æœƒå›å‚³)</li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><br>List&lt;Food&gt; foodObj = Arrays.<span class="hljs-keyword">asList</span>(<br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;é…¸è¾£æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;é¤›é£©æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;è‚‰ç¾¹æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;ç‰›è‚‰æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;è²¢ä¸¸æ¹¯&quot;</span>), <br>    <span class="hljs-keyword">new</span> Food(<span class="hljs-string">&quot;ä¸‹æ°´æ¹¯&quot;</span>));<br><br>List&lt;String&gt; foodList = foodObj.stream()<br>.map( food -&gt; food.getFoodName())<br>.<span class="hljs-keyword">toList</span>();<br>System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;é£Ÿç‰©æœ‰&quot;</span>+foodList);<br><br><span class="hljs-comment">// å°‡æ‰€æœ‰FoodName åŠ ä¸Š NT$</span><br>foodObj<br>.stream()<br>.forEach(food -&gt; &#123;<br>food.foodName = <span class="hljs-string">&quot;NT$&quot;</span>+food.getFoodName();<br>&#125;);<br><br></code></pre></td></tr></table></figure><ol start="4"><li>reduce (å…ƒç´ åŒ¯ç¸½æˆå–®ä¸€çµæœã€‚)</li></ol><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams">List&lt;<span class="hljs-keyword">Integer</span>&gt; integers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br><span class="hljs-comment">//å°‡åˆ—è¡¨å…ƒç´ åŠ ç¸½</span><br><span class="hljs-keyword">Integer</span> <span class="hljs-keyword">sum</span> = integers.stream().reduce(<span class="hljs-number">0</span>, (a, b) -&gt; a + b);<br></code></pre></td></tr></table></figure><h3 id="MapStruct-ç”¨æ³•ï¼ŒMapStructå¯ä»¥å°‡å…©å€‹é¡åˆ¥äº’ç›¸è½‰æ›"><a href="#MapStruct-ç”¨æ³•ï¼ŒMapStructå¯ä»¥å°‡å…©å€‹é¡åˆ¥äº’ç›¸è½‰æ›" class="headerlink" title="MapStruct ç”¨æ³•ï¼ŒMapStructå¯ä»¥å°‡å…©å€‹é¡åˆ¥äº’ç›¸è½‰æ›"></a>MapStruct ç”¨æ³•ï¼ŒMapStructå¯ä»¥å°‡å…©å€‹é¡åˆ¥äº’ç›¸è½‰æ›</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Builder</span><br><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPo</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> id;<br>    <span class="hljs-keyword">private</span> Date gmtCreate;<br>    <span class="hljs-keyword">private</span> Date createTime;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> buyerId;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> age;<br>    <span class="hljs-keyword">private</span> String userNick;<br>    <span class="hljs-keyword">private</span> String userVerified;<br>&#125;<br><br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEntity</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> id;<br>    <span class="hljs-keyword">private</span> Date gmtCreate;<br>    <span class="hljs-keyword">private</span> Date createTime;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> buyerId;<br>    <span class="hljs-keyword">private</span> <span class="hljs-built_in">Long</span> age;<br>    <span class="hljs-keyword">private</span> String userNick1;<br>    <span class="hljs-keyword">private</span> String userVerified;<br>&#125;<br><br><span class="hljs-comment">// è½‰æ›å™¨</span><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IPersonMapper</span> &#123;<br>    IPersonMapper INSTANCT = Mappers.getMapper(IPersonMapper.<span class="hljs-keyword">class</span>);<br>    <span class="hljs-meta">@Mapping(target = <span class="hljs-string">&quot;userNick1&quot;</span>, source = <span class="hljs-string">&quot;userNick&quot;</span>)</span> <span class="hljs-comment">// å¦‚æœåç¨±ä¸åŒç„¡æ³•å°æ‡‰ å°±ä½¿ç”¨ é€™å€‹åšMapping</span><br>    <span class="hljs-meta">@Mapping(target = <span class="hljs-string">&quot;age&quot;</span>, source = <span class="hljs-string">&quot;age&quot;</span>, numberFormat = <span class="hljs-string">&quot;#0.00&quot;</span>)</span><br><br>    UserEntity poToentity(UserPo userPo);<br>&#125;<br><br><span class="hljs-comment">// æ¸¬è©¦PO èˆ‡ Entity è½‰æ›</span><br><span class="hljs-keyword">public</span> static void testNormal() &#123;<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;-----------testNormal-----start------&quot;</span>);<br>    UserPo userPo = UserPo.builder()<br>            .id(<span class="hljs-number">1L</span>)<br>            .gmtCreate(new Date())<br>           .buyerId(<span class="hljs-number">666L</span>)<br>           .userNick(<span class="hljs-string">&quot;æ¸¬è©¦mapstruct&quot;</span>)<br>           .userVerified(<span class="hljs-string">&quot;ok&quot;</span>)<br>           .age(<span class="hljs-number">18L</span>)<br>           .build();<br><br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;USERPO = &quot;</span> + userPo);<br>    UserEntity userEntity = IPersonMapper.INSTANCT.poToentity(userPo);<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;ENTITY = &quot;</span> + userEntity);<br>    System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;-----------testNormal-----ent------&quot;</span>);<br>    &#125;<br><br></code></pre></td></tr></table></figure><h3 id="Lombok-çš„Annonation"><a href="#Lombok-çš„Annonation" class="headerlink" title="@Lombok çš„Annonation"></a>@Lombok çš„Annonation</h3><ul><li>@Data æ³¨è§£ï¼š<br>@Data æ˜¯ Lombok æä¾›çš„æœ€å¸¸ç”¨çš„æ³¨è§£ä¹‹ä¸€ï¼Œå®ƒç»“åˆäº† @ToStringã€@EqualsAndHashCodeã€@Getterã€@Setter ä»¥åŠ @RequiredArgsConstructor çš„åŠŸèƒ½ã€‚å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆè¿™äº›æ–¹æ³•ï¼Œå¹¶ä¸ºç±»çš„æ¯ä¸ªéé™æ€å­—æ®µåˆ›å»º Getter å’Œ Setter æ–¹æ³•ï¼Œè¿˜ä¼šç”Ÿæˆ toString æ–¹æ³•å’Œ equalsã€hashCode æ–¹æ³•ã€‚</li><li>@Builder æ³¨è§£ï¼š<br>@Builder æ˜¯ Lombok æä¾›çš„æ³¨è§£ï¼Œç”¨äºå®ç°å»ºé€ è€…æ¨¡å¼ã€‚å®ƒç”Ÿæˆä¸€ä¸ªåµŒå¥—çš„é™æ€å†…éƒ¨ç±» Builderï¼Œä½¿å¾—åˆ›å»ºå¯¹è±¡æ—¶å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œæ›´åŠ æ¸…æ™°å’Œæ˜“è¯»ã€‚ä½¿ç”¨ @Builder æ³¨è§£æ—¶ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç”Ÿæˆå™¨æ¨¡å¼è®¾ç½®å®ä¾‹çš„å­—æ®µã€‚</li><li>@AllArgsConstructor æ³¨è§£ï¼š<br>@AllArgsConstructor æ˜¯ Lombok æä¾›çš„æ³¨è§£ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ã€‚å®ƒä¼šä¸ºç±»çš„æ¯ä¸ªå­—æ®µç”Ÿæˆæ„é€ å‡½æ•°å‚æ•°ï¼Œæ–¹ä¾¿åˆ›å»ºå¯¹è±¡æ—¶ä¼ å…¥æ‰€æœ‰å­—æ®µçš„å€¼ã€‚</li><li>@NoArgsConstructor æ³¨è§£ï¼š<br>@NoArgsConstructor æ˜¯ Lombok æä¾›çš„æ³¨è§£ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚å®ƒå¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“æ‚¨åœ¨ä½¿ç”¨ @Builder æ³¨è§£æ—¶ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œ@Builder æ³¨è§£éœ€è¦ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring AOP åŸºæœ¬æ¦‚å¿µèˆ‡ä½¿ç”¨</title>
    <link href="/2024/05/01/Spring-AOP-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2024/05/01/Spring-AOP-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>åˆ°ç›®å‰ç‚ºæ­¢ï¼Œåœ¨ç¨‹å¼é–‹ç™¼çš„ç™¼å±•ä¸Šå·²ç¶“èª•ç”Ÿäº†è¨±å¤šé¢¨æ ¼ï¼Œå¦‚ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ(Object-Oriented-Programming)ã€</p><span id="more"></span><p>Functional-Programming FPï¼Œé€™äº›æ–¹æ³•éƒ½æœ‰å¥½æœ‰å£ï¼Œä½†éƒ½æœ‰å…±åŒçš„ç›®çš„ï¼Œå°±æ˜¯ç°¡åŒ–é‡è¤‡çš„ç¨‹å¼ç¢¼ï¼Œç‰©ä»¶å°å‘ç¨‹å¼èªè¨€ä½¿ç”¨ç‰©ä»¶çš„å°è£ã€ç¹¼æ‰¿ç‰¹æ€§å»ç´„æŸç¨‹å¼ç¢¼ï¼Œè€ŒFPå‰‡æ˜¯å°ˆæ³¨åœ¨æ•´å€‹æµç¨‹ä¸Šï¼Œé€éå°‡åŠŸèƒ½å»ºç«‹ç‚ºä¸€å€‹å€‹å¾®å°çš„Functionï¼Œé€²è¡Œé–‹ç™¼ã€‚FPçš„å¥½è™•æ˜¯ï¼Œé€šå¸¸å¯è®€æ€§å¯ä»¥æå‡ä¸å°‘ã€‚æ­¤å¤–å› ç‚ºFunctionå°ï¼Œå„åŠŸèƒ½ä¹Ÿå¾ˆå¥½å…±ç”¨ã€‚<br>ä½†ä»Šå¤©è¦ä»‹ç´¹çš„ä¸¦ä¸æ˜¯é€™å…©è€…ï¼Œè€Œæ˜¯å¦å¤–ä¸€ç¨®é¢¨æ ¼ï¼Œè¢«ç¨±ç‚ºåˆ‡é¢å°å‘ç¨‹å¼è¨­è¨ˆ(Aspect-Oriented-Programming)ã€‚<br>AOPçš„ä¸»è¦è¨´æ±‚æ˜¯ï¼Œå°‡æ•´å€‹ç¨‹å¼æµç¨‹è¦–ç‚ºä¸€å€‹Flowï¼Œå‡è¨­æˆ‘æœ‰å…©éš»APIï¼Œåˆ†åˆ¥æä¾›äº†ä»˜æ¬¾ã€é€€è²¨å…©åŠŸèƒ½ã€‚<br>ä»˜æ¬¾çš„æµç¨‹å¦‚ä¸‹ï¼šé©—è­‰ &gt; äº¤æ˜“ &gt; å›å‚³çµæœ<br>é€€è²¨çš„æµç¨‹å¦‚ä¸‹ï¼šé©—è­‰ &gt; é€€è²¨ &gt; å›å‚³çµæœ<br>è€ŒAOPæ ¸å¿ƒç²¾ç¥å°±æ˜¯å°‡å…©è€…ç›¸åŒçš„ã€Œé©—è­‰ã€éƒ¨åˆ†æå–å‡ºä¾†ä½œç‚ºä¸€å€‹åˆ‡é¢(Aspect)ï¼Œè®“ä»˜æ¬¾èˆ‡é€€è²¨çš„APIå¯ä»¥é›†ä¸­åœ¨çœŸæ­£é‡è¦çš„å•†æ¥­é‚è¼¯ã€‚ä¹Ÿå°±æ˜¯æ‰€è¬‚çš„ã€Œé—œæ³¨é»åˆ†é›¢ã€çš„æ¦‚å¿µã€‚<br>å¸¸è¦‹çš„Annotationå¦‚ä¸‹ï¼š</p><ul><li>@Aspect - å°‡é¡åˆ¥å®£å‘Šç‚ºä¸€å€‹åˆ‡é¢ï¼Œåˆ‡é¢æ–¹æ³•æ”¾åœ¨è£¡é¢ã€‚</li><li>@Pointcut - åˆ‡å…¥é»ã€‚å®šç¾©åˆ‡å…¥ä½ç½®ï¼Œé€šå¸¸ä½¿ç”¨executionåˆ‡é»è¡¨é”å¼è¡¨é”ã€‚</li><li>@Before å‰ç½®é€šçŸ¥ï¼Œå¸¸åœ¨åˆ‡å…¥æ–¹æ³•åŸ·è¡Œå‰åŸ·è¡Œã€‚è‹¥æ­¤æ–¹æ³•å›å ±ç•°å¸¸ï¼Œå‰‡ä¸æœƒåŸ·è¡Œæ–¹æ³•ã€‚è€Œæ˜¯åŸ·è¡Œ@Afterèˆ‡@AfterThrowing</li><li>@After å¾Œç½®æ–¹æ³• - å†åˆ‡å…¥æ–¹æ³•åŸ·è¡Œå¾ŒåŸ·è¡Œ</li><li>@AfterReturn - åœ¨æ–¹æ³•æ­£å¸¸çµæŸreturnå¾ŒåŸ·è¡Œ</li><li>@AfterThrowing - æ‹‹å‡ºç•°å¸¸å¾ŒåŸ·è¡Œï¼Œè‹¥ç„¡ç•°å¸¸å‰‡ä¸æœƒåŸ·è¡Œ</li><li>@Around - ç’°ç¹é€šçŸ¥ï¼Œå¯ä»¥è¦–ç‚º@Before+@After+@AfterThrowing+@AfterReturn</li><li>@Order - æŒ‡å®šåˆ‡å…¥åŸ·è¡Œé †åº</li></ul><h3 id="Spring-AOP-ç‚ºä½•ä¸ç”Ÿæ•ˆï¼ŸåŸå› ï¼Ÿ"><a href="#Spring-AOP-ç‚ºä½•ä¸ç”Ÿæ•ˆï¼ŸåŸå› ï¼Ÿ" class="headerlink" title="Spring AOP ç‚ºä½•ä¸ç”Ÿæ•ˆï¼ŸåŸå› ï¼Ÿ"></a>Spring AOP ç‚ºä½•ä¸ç”Ÿæ•ˆï¼ŸåŸå› ï¼Ÿ</h3><p><strong>A:</strong> ç•¶åˆ‡é¢åœ¨é¡åˆ¥ä¸Šé‹ä½œæ™‚ï¼Œæˆ‘å€‘ä½¿ç”¨çš„é¡åˆ¥å¯¦éš›ä¸Šæ˜¯ç”±Springæ›¿æˆ‘å€‘ç”Ÿæˆäº†ä¸€å€‹ä»£ç†å°è±¡ï¼Œæ•…åˆ‡é¢å¿…é ˆä¾è³´æ–¼é¡åˆ¥çš„å‘¼å«ã€‚ç°¡å–®ä¾†èªª a.getMessage() å¯ä»¥å¥—ç”¨ AOP ä½† getMessage() æ˜¯ä¸è¡Œçš„ï¼<br>è§£æ±ºæ–¹æ³•ï¼š</p><ol><li><p>æ³¨å…¥é¡åˆ¥ï¼Œä½¿ç”¨self</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@Component<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestBean</span> &#123;<br><br>    @Autowired<br>    <span class="hljs-keyword">private</span> TestBean self;  <span class="hljs-comment">// è¿™ä¸ªè£…é…çš„å¯¹è±¡æ˜¯ä»£ç†å¯¹è±¡</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span>()</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;hello&quot;</span>);<br>        self.hi(); <span class="hljs-comment">// é€™æ¨£å°±æœƒæˆåŠŸ</span><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hi</span>()</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;hi&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å•Ÿç”¨exposeProxy</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs csharp">@EnableAspectJAutoProxy(exposeProxy=<span class="hljs-literal">true</span>)<br>@Component<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestBean</span> &#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hello</span>()</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;hello&quot;</span>);<br>        TestBean self = (TestBean) AopContext.currentProxy();  <span class="hljs-comment">// è·å–å½“å‰ä»£ç†</span><br>        self.hi();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">hi</span>()</span> &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;hi&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="ç¯„ä¾‹"><a href="#ç¯„ä¾‹" class="headerlink" title="ç¯„ä¾‹"></a>ç¯„ä¾‹</h3><p>ä»¥ä¸‹æ˜¯ä¸€å€‹ç¯„ä¾‹çš„åˆ‡é¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.example.demo;<br><br><span class="hljs-keyword">import</span> org.aspectj.lang.JoinPoint;<br><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.*;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StrangeAOP</span> &#123;<br><br>    <span class="hljs-meta">@Pointcut(value = &quot;execution(* com.example.demo.controller..*.*(..))&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pointcut</span><span class="hljs-params">()</span>&#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Before(&quot;pointcut()&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å‰ç½®é€šçŸ¥&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@After(&quot;pointcut()&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">(JoinPoint joinPoint)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;åç½®é€šçŸ¥&quot;</span>);<br>    &#125;<br>    <span class="hljs-meta">@AfterReturning(pointcut=&quot;pointcut()&quot;,returning = &quot;result&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">result</span><span class="hljs-params">(JoinPoint joinPoint,Object result)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;è¿”å›é€šçŸ¥:&quot;</span>+result);<br>    &#125;<br>&#125;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestController</span>&#123;<br><br>    <span class="hljs-meta">@GettingMapping(&quot;/)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getIndex</span><span class="hljs-params">()</span>&#123;<br>        System.out.print(<span class="hljs-string">&quot;Index&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This is Index&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å°å‡ºè¨Šæ¯çš„é †åºæ‡‰è©²æ˜¯ </p><p>å‰ç½®é€šçŸ¥ &gt; This is index &gt; åç½®é€šçŸ¥ &gt; è¿”å›é€šçŸ¥+result</p><p>ä»¥ä¸Š</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
      <tag>AOP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åœ¨SpringBoot å¯«æ¸¬è©¦ @Mock,@MockBean,MvcResult</title>
    <link href="/2024/05/01/%E5%9C%A8SpringBoot-%E5%AF%AB%E6%B8%AC%E8%A9%A6-Mock-MockBean/"/>
    <url>/2024/05/01/%E5%9C%A8SpringBoot-%E5%AF%AB%E6%B8%AC%E8%A9%A6-Mock-MockBean/</url>
    
    <content type="html"><![CDATA[<p>åœ¨Springé–‹ç™¼å®Œå¾Œï¼Œæˆ‘å€‘éœ€è¦æ¸¬è©¦è‡ªå·±æ’°å¯«çš„APIæœ‰æ²’æœ‰å•é¡Œã€‚é™¤äº†åœ¨SpringBootå°ˆæ¡ˆé è¨­çš„SpringBootTestä¸­é‡å°å–®å€‹æ–¹æ³•é€²è¡Œå–®ä½æ¸¬è©¦å¤–ï¼Œæœ‰æ™‚ä¹Ÿæœƒæœ‰éœ€è¦å»Mockï¼Œå°±æ˜¯å‡é€ ä¸€å€‹ç‰©ä»¶çš„éœ€æ±‚ã€‚<br>å‡è¨­ä»Šå¤©ç¨‹å¼æ¯”è¼ƒè¤‡é›œï¼Œéœ€æ ¹æ“šDBå›å‚³çš„è³‡æ–™åšåˆ¤æ–·ï¼Œè€ŒDBå‰›å¥½æ²’æœ‰é€™æ¨£çš„è³‡æ–™æ™‚ï¼Œèˆ‡å…¶æ›´å‹•DBä»¥ç¬¦åˆæ¸¬è©¦ï¼Œä¸å¦‚å‡é€ DBçš„å…§å®¹ï¼Œå–®æ¸¬è©¦APIã€‚æ›å¥è©±èªªï¼Œå› ç‚ºæˆæœ¬å¤ªé«˜ï¼Œæ‰€ä»¥åˆ©ç”¨å‡é€ çš„æ–¹å¼ä¾†æ’°å¯«ç¬¦åˆéœ€è¦è¦æ¨¡çš„ç¨‹å¼ç¢¼ã€‚</p><h3 id="Mockitoæ¡†æ¶"><a href="#Mockitoæ¡†æ¶" class="headerlink" title="Mockitoæ¡†æ¶"></a>Mockitoæ¡†æ¶</h3><p>Mockitoæ˜¯ä¸€å€‹Mockæ¡†æ¶ï¼ŒåŒæ™‚é©ç”¨å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦ã€‚ä»¥ä¸‹ä»‹ç´¹å¸¸è¦‹çš„ç”¨æ³•ï¼š</p><span id="more"></span><ol><li>@MockBean å¯ä»¥ç”¨ä¾†å‡é€ Repositoryï¼Œä¹Ÿå°±æ˜¯å‡é€ è³‡æ–™åº«å›å‚³çš„è³‡æ–™ï¼Œå› ç‚ºæ˜¯å‡é€ ä¸€æ•´å€‹ç‰©ä»¶ï¼Œæ‰€ä»¥æ¯”è¼ƒé©åˆåœ¨æ•´åˆæ¸¬è©¦ä¸­ä½¿ç”¨ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œåƒæ˜¯ä»¥ä¸‹ç”¨æ³•ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@MockBean</span><br><span class="hljs-keyword">private</span> StudentRepository stuRepo;<br><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">studentMock</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">Student</span> <span class="hljs-variable">stu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>    stu.setStudentId(<span class="hljs-string">&quot;001&quot;</span>);<br>    stu.setStudentName(<span class="hljs-string">&quot;Joe&quot;</span>); <br>    stu.setStudentCreateTime(LocalDateTime.now()); <br>    <span class="hljs-comment">// å‡é€ ä¸€å€‹Studentç‰©ä»¶</span><br><br>    Mockito.<span class="hljs-keyword">when</span>(studentRepo.getAbsentStudent(Mockito.anyString())).thenReturn(stu);<br>    <span class="hljs-comment">// ç•¶ æƒ³è¦å–å¾—è«‹å‡å­¸ç”Ÿçš„è³‡æ–™æ™‚ï¼Œå°±å›å‚³å‡é€ çš„Studentç‰©ä»¶</span><br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>æƒ³è¦å‡é€ æ–¹æ³•æˆ–æ˜¯è®Šæ•¸ï¼Œå‡è¨­æˆ‘æœ‰ä¸€å€‹ç‰©ä»¶MainServiceã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> MainService <span class="hljs-title function_">MockConfig</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">MainService</span> <span class="hljs-variable">mainService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MainService</span>();<br><span class="hljs-type">MainService</span> <span class="hljs-variable">mainService_mock</span> <span class="hljs-operator">=</span> Mockito.spy(mainService); <br>       <span class="hljs-comment">// å‡é€ ä¸€å€‹Mockç‰©ä»¶</span><br><br>       Mockito.doReturn(<span class="hljs-literal">null</span>).<span class="hljs-keyword">when</span>(mainService_mock).SendRequest(Mockito.anyObject(),Mockito.anyString());<br>       <span class="hljs-comment">// ä½¿MainServiceä¸­çš„SendRequest()å›å‚³Null</span><br><br>       Mockito.doNothing().<span class="hljs-keyword">when</span>(mainService_mock).validate(Mockito.anyObject()); <span class="hljs-comment">// å…ˆä¸åšæ¬„ä½æª¢æŸ¥</span><br><span class="hljs-comment">// ä½¿MainServiceä¸­çš„validate()æ–¹æ³•è·³éä¸åŸ·è¡Œ(åƒ…é™æ–¹æ³•æ²’æœ‰å›å‚³å€¼çš„ç‹€æ³ void)</span><br><br>       ReflectionTestUtils.setField(mainService_mock, <span class="hljs-string">&quot;domain&quot;</span>, <span class="hljs-string">&quot;https://www.google.com.tw/&quot;</span>); <br>       <span class="hljs-comment">// ä»¿é€ MainServiceä¸­çš„@Value</span><br><br>       ReflectionTestUtils.setField(mainService_mock, <span class="hljs-string">&quot;apiKey&quot;</span>, <span class="hljs-string">&quot;a4d1206bf951479fbcbe2e4bb6475d41&quot;</span>); <span class="hljs-comment">// ä»¿é€  @Value</span><br><span class="hljs-comment">// ä»¿é€ MainServiceä¸­çš„@Value</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="SpringMvc-å–®å…ƒæ¸¬è©¦"><a href="#SpringMvc-å–®å…ƒæ¸¬è©¦" class="headerlink" title="SpringMvc å–®å…ƒæ¸¬è©¦"></a>SpringMvc å–®å…ƒæ¸¬è©¦</h3><p>å¦‚æœæƒ³è¦åšéƒ¨åˆ†æ•´åˆæ¸¬è©¦ï¼Œå¯ä»¥ä½¿ç”¨MvcResultå»æ¸¬è©¦ä¸€å€‹Rest API</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">HttpHeaders httpHeaders = <span class="hljs-built_in">new</span> HttpHeaders();<br>httpHeaders.<span class="hljs-keyword">add</span>(&quot;Content-Type&quot;, &quot;application/json&quot;);<br>httpHeaders.<span class="hljs-keyword">add</span>(&quot;Version&quot;, &quot;1.0.1&quot;);<br>httpHeaders.<span class="hljs-keyword">add</span>(&quot;ClientIp&quot;, &quot;1.1.1.1&quot;);<br><br>RequestBuilder requestBuilder =<br>        MockMvcRequestBuilders<br>                .<span class="hljs-keyword">get</span>(&quot;/api/transaction&quot;)<br>                .headers(httpHeaders)<br>                .param(&quot;type&quot;, &quot;Credit&quot;)<br>                .param(&quot;sum&quot;, &quot;10000&quot;);<br>// è¦è¢«æ¸¬è©¦çš„APIéœ€è¦å»ºç«‹ä¸€å€‹ReqeustBuilder<br><br>MvcResult result = mockMvc.<span class="hljs-keyword">perform</span>(requestBuilder)<br>        .andDo(print())<br>        .andExpect(jsonPath(&quot;$.code&quot;).<span class="hljs-keyword">value</span>(&quot;0&quot;))<br>        .andExpect(jsonPath(&quot;$.message&quot;).<span class="hljs-keyword">value</span>(&quot;SUCCESS&quot;))<br>        .andReturn();<br>// æ¸¬è©¦ï¼Œå›å‚³æœƒå°å‡ºä¸€å€‹æ¨™æº–åŒ–çš„è¦æ ¼ã€‚è‹¥ä¸ç¬¦åˆandExpect()çš„æ¢ä»¶å°±æœƒå›å ±AssertionError<br><br><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java Optionalä»‹ç´¹èˆ‡ä½¿ç”¨æ–¹æ³•</title>
    <link href="/2024/04/24/Java-Optional%E4%BB%8B%E7%B4%B9%E8%88%87%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2024/04/24/Java-Optional%E4%BB%8B%E7%B4%B9%E8%88%87%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>Optionalæ˜¯Java 8æ¨å‡ºæ™‚åŠ å…¥çš„æ–°åŠŸèƒ½ï¼ŒOptionalè¢«ç™¼æ˜å‡ºä¾†çš„åˆè¡·æ˜¯ç‚ºäº†è§£æ±ºJavaå¸¸è¦‹çš„NullPointExceptionã€‚</p><span id="more"></span><p>ç‚ºæ²’å¯«éJavaçš„äººç§‘æ™®ä¸€ä¸‹ï¼ŒNullPointExceptionå¤§å¤šæ•¸çš„ç™¼ç”ŸåŸå› éƒ½æ˜¯é‡å°valueç‚ºNullé€²è¡Œæ“ä½œè€Œå°è‡´çš„ä¾‹å¤–ç‹€æ³ï¼ŒOptionalç‚ºæ­¤å‡ºç¾ã€‚</p><h4 id="Java-8-Optional-ä½¿ç”¨æ–¹å¼"><a href="#Java-8-Optional-ä½¿ç”¨æ–¹å¼" class="headerlink" title="Java 8 Optional ä½¿ç”¨æ–¹å¼"></a>Java 8 Optional ä½¿ç”¨æ–¹å¼</h4><p>ä½¿ç”¨æ–¹å¼å¾ˆç°¡å–®ï¼Œå¯ä»¥ç†è§£ç‚ºå°‡å€¼å¤–éƒ¨å†åŒ…äº†ä¸€å±¤é¡åˆ¥ï¼Œæ¯”æ–¹èªªä»¥ä¸‹ç¨‹å¼ï¼š</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">Optional</span>&lt;Student&gt; student = <span class="hljs-keyword">Optional</span>.ofNullable(studentRepo.getAllStudent())<br></code></pre></td></tr></table></figure><p>Studenté¡åˆ¥çš„å¤–éƒ¨åŒ…äº†ä¸€å€‹Optionalé¡åˆ¥ï¼Œå¯ä»¥æƒ³åƒç‚ºç¨‹å¼å¤–éƒ¨åˆåŒ…äº†ä¸€å€‹try catchçš„è™•ç†ã€‚</p><h4 id="Optioalå¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š"><a href="#Optioalå¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š" class="headerlink" title="Optioalå¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š"></a>Optioalå¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š</h4><ul><li>isPresent() <strong>åˆ¤æ–·æ˜¯å¦ç‚ºNullï¼Œæ˜¯å‰‡å›å‚³Trueï¼Œå¦å‰‡å›å‚³False</strong></li><li>get() <strong>å–å¾—Optionalå…§çš„å€¼ï¼Œéœ€è¦å…ˆä½¿ç”¨isPresent()ç¢ºèªæ˜¯å¦ç‚ºNull</strong></li><li>Optional.of() <strong>å»ºç«‹Optionalçš„æ–¹æ³•ï¼Œè‹¥ç‚ºNullæœƒç›´æ¥å ±éŒ¯</strong></li><li>Optional.ofNullable() <strong>å»ºç«‹Optionalçš„æ–¹æ³•ï¼Œå¯ä»¥æ”¾å…¥Nullèˆ‡éNullç‰©ä»¶</strong></li><li>ifPresent() <strong>å¦‚æœå€¼ç‚ºéNullå°±åŸ·è¡ŒæŸæ–¹æ³•ï¼Œæ²’æœ‰å›å‚³å€¼</strong></li><li>orElse() <strong>å¦‚æœå€¼ç‚ºNullå°±ç”¨åƒæ•¸ä»£æ›¿</strong></li><li>orElseGet() <strong>å¦‚æœå€¼ç‚ºNullå°±åŸ·è¡Œè©²æ–¹æ³•ï¼Œèˆ‡orElse()ç›¸å·®åœ¨å¯æ¥å—å‚³å…¥åƒæ•¸ä¸åŒ</strong></li><li>orElseThrow() <strong>å¦‚æœå€¼ç‚ºNullå°±æ‹‹å‡ºæŸäº›Exception</strong></li></ul><h4 id="ä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•"><a href="#ä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•" class="headerlink" title="ä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•"></a>ä»¥ä¸‹ä»‹ç´¹ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Optional&lt;String&gt; opt = Optional.ofNullable(InputName);<br><span class="hljs-keyword">if</span>(opt.isPresent())&#123; // åˆ¤æ–· æ˜¯å¦ç‚º<span class="hljs-keyword">Null</span><br>    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;String = &quot; + opt.<span class="hljs-keyword">get</span>()); // é<span class="hljs-keyword">Null</span>æ‰å–å€¼<br>&#125;<br><br>opt.ifPresent(<span class="hljs-type">name</span> -&gt; <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(<span class="hljs-type">name</span>)); // åŒä¸€å€‹æ„æ€ï¼Œåªæ˜¯å¯«å¾—æ¯”è¼ƒç°¡æ½”<br><br>String <span class="hljs-type">name</span> = Optional.ofNullable(InputName).orElse(&quot;John&quot;); //è‹¥inputName æ˜¯ <span class="hljs-keyword">null</span> å›å‚³&quot;John&quot;<br><br>opNull.orElseGet(() -&gt; &quot;John&quot;); // åŒå€‹æ„æ€ åªæ˜¯orElseGet() æ¥å—çš„æ˜¯æ–¹æ³•<br><br><span class="hljs-type">name</span> = Optional.ofNullable(insertName).orElseThrow(IllegalArgumentException::<span class="hljs-built_in">new</span>); // <span class="hljs-keyword">null</span>ã€€å°±æ‹‹å‡ºIllegalArgumentException<br></code></pre></td></tr></table></figure><h4 id="æ›´å¤šå¯¦éš›æ‡‰ç”¨"><a href="#æ›´å¤šå¯¦éš›æ‡‰ç”¨" class="headerlink" title="æ›´å¤šå¯¦éš›æ‡‰ç”¨"></a>æ›´å¤šå¯¦éš›æ‡‰ç”¨</h4><p>ä½¿ç”¨Optionalé‚„æœ‰ä¸€å€‹å¥½è™•ï¼Œå°±æ˜¯å¯ä»¥å¥—ç”¨Java 8 çš„API</p><ol><li>åˆ¤æ–·æ˜¯å¦ç‚º2016å¹´</li></ol><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Optional&lt;Integer&gt; yearOptional <span class="hljs-operator">=</span> Optional.of(year)<span class="hljs-comment">;</span><br>boolean is2016 <span class="hljs-operator">=</span> yearOptional<br>                    .filter(y -&gt; y <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">2016</span>)<br>                    .isPresent()<span class="hljs-comment">; // åˆ¤æ–·å€¼æ˜¯å¦ç‚º2016å¹´</span><br></code></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–·ç‰©ä»¶åƒ¹æ ¼ç¯„åœæ˜¯å¦ä»‹æ–¼15~20ä¹‹é–“</li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ functioné€²è¡Œå€¼çš„æª¢æ¸¬åˆ¤æ–·</span><br>Modem modem2 = new Modem(<span class="hljs-number">13.10d</span>);<br>System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;Result = &quot;</span> + priceIsInRange2(modem2));<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Modem</span> &#123;<br>      <span class="hljs-keyword">private</span> <span class="hljs-built_in">Double</span> price;<br><br>      <span class="hljs-keyword">public</span> Modem(<span class="hljs-built_in">Double</span> price) &#123;<br>          <span class="hljs-keyword">this</span>.price = price;<br>      &#125;<br>      <span class="hljs-comment">// standard getters and setters</span><br><br>      <span class="hljs-keyword">public</span> void setPrice(<span class="hljs-built_in">Double</span> price) &#123;<br>          <span class="hljs-keyword">this</span>.price = price;<br>      &#125;<br><br>      <span class="hljs-keyword">public</span> <span class="hljs-built_in">Double</span> getPrice() &#123;<br>          <span class="hljs-keyword">return</span> price;<br>      &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> boolean priceIsInRange2(Modem modem2) &#123;<br>    <span class="hljs-keyword">return</span> Optional.ofNullable(modem2)<br>            .map(Modem::getPrice).<br>            filter(p -&gt; p &gt;= <span class="hljs-number">10</span>).<br>            filter(p -&gt; p &lt;= <span class="hljs-number">15</span>).<br>            isPresent();<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>å…ˆè™•ç†éå†åˆ¤æ–·ã€‚</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">String password = <span class="hljs-string">&quot; password &quot;</span>;<br><span class="hljs-type">Optional</span>&lt;String&gt; passOpt = <span class="hljs-type">Optional</span>.of(password);<br>boolean correctPassword = passOpt<br>.<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">pass</span> -&gt; <span class="hljs-keyword">pass</span>.equals(<span class="hljs-string">&quot;password&quot;</span>))<br>.isPresent();<br>assertFalse(correctPassword);<br><br>correctPassword = passOpt<br>.<span class="hljs-built_in">map</span>(String::trim)<br>.<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">pass</span> -&gt; <span class="hljs-keyword">pass</span>.equals(<span class="hljs-string">&quot;password&quot;</span>))<br>.isPresent();<br>assertTrue(correctPassword);<br></code></pre></td></tr></table></figure><ol start="4"><li>å–å¾—é™£åˆ—é•·åº¦ï¼Œnullç‚º0</li></ol><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-built_in">List</span><span class="hljs-operator">&lt;</span><span class="hljs-built_in">String</span><span class="hljs-operator">&gt;</span> <span class="hljs-variable">companyNames</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">Arrays</span><span class="hljs-operator">.</span><span class="hljs-variable">asList</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;paypal&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;oracle&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;microsoft&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-operator">,</span> <span class="hljs-string">&quot;apple&quot;</span><span class="hljs-punctuation">)</span><span class="hljs-operator">;</span><br><span class="hljs-built_in">Optional</span><span class="hljs-operator">&lt;</span><span class="hljs-built_in">List</span><span class="hljs-operator">&lt;</span><span class="hljs-built_in">String</span><span class="hljs-operator">&gt;&gt;</span> <span class="hljs-variable">listOptional</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">Optional</span><span class="hljs-operator">.</span><span class="hljs-variable">ofNullable</span><span class="hljs-punctuation">(</span><span class="hljs-variable">companyNames</span><span class="hljs-punctuation">)</span><span class="hljs-operator">;</span><br><span class="hljs-variable">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-variable">listOptional</span><span class="hljs-operator">.</span><span class="hljs-variable">map</span><span class="hljs-punctuation">(</span><span class="hljs-built_in">List</span><span class="hljs-string">::size</span><span class="hljs-punctuation">)</span><span class="hljs-operator">.</span><span class="hljs-variable">orElse</span><span class="hljs-punctuation">(</span><span class="hljs-number">0</span><span class="hljs-punctuation">)</span><span class="hljs-operator">;</span><br><span class="hljs-variable">System</span><span class="hljs-operator">.</span><span class="hljs-variable">out</span><span class="hljs-operator">.</span><span class="hljs-variable">println</span><span class="hljs-punctuation">(</span><span class="hljs-string">&quot;SIZE = &quot;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">size</span><span class="hljs-punctuation">)</span><span class="hljs-operator">;</span><br></code></pre></td></tr></table></figure><ol start="5"><li>map èˆ‡ flatmap çš„å·®ç•° <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">// å‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹åŒ…å«å­—ä¸²çš„åˆ—è¡¨</span><br>List&lt;String&gt; words = Arrays.<span class="hljs-keyword">asList</span>(<span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;Stream&quot;</span>, <span class="hljs-string">&quot;API&quot;</span>);<br><br><span class="hljs-comment">// ä½¿ç”¨mapæ“ä½œï¼Œå°‡æ¯å€‹å­—ä¸²è½‰æ›ç‚ºå®ƒçš„é•·åº¦</span><br>List&lt;Integer&gt; wordLengths = words.stream()<br>        .map(String::length)<br>        .<span class="hljs-keyword">collect</span>(Collectors.<span class="hljs-keyword">toList</span>());<br>System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;ä½¿ç”¨ map æ“ä½œå¾—åˆ°çš„é•·åº¦åˆ—è¡¨: &quot;</span> + wordLengths);<br><br><span class="hljs-comment">// ä½¿ç”¨flatMapæ“ä½œï¼Œå°‡æ¯å€‹å­—ä¸²æ‹†åˆ†ç‚ºå–®å€‹å­—ç¬¦ä¸¦å¹³å¦åŒ–ç‚ºå–®ç¨çš„æµ</span><br>List&lt;Character&gt; characters = words.stream()<br>        .flatMap(word -&gt; word.chars().mapToObj(c -&gt; (<span class="hljs-keyword">char</span>) c))<br>        .<span class="hljs-keyword">collect</span>(Collectors.<span class="hljs-keyword">toList</span>());<br>System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;ä½¿ç”¨ flatMap æ“ä½œå¾—åˆ°çš„å­—ç¬¦åˆ—è¡¨: &quot;</span> + characters);<br><br><span class="hljs-regexp">/ /</span>ä½¿ç”¨ map æ“ä½œå¾—åˆ°çš„é•·åº¦åˆ—è¡¨: [<span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>]<br><span class="hljs-comment">// ä½¿ç”¨ flatMap æ“ä½œå¾—åˆ°çš„å­—ç¬¦åˆ—è¡¨: [J, a, v, a, S, t, r, e, a, m, A, P, I]</span><br> <br></code></pre></td></tr></table></figure></li><li>åƒè€ƒç”¨æ³•<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">//  å–å¾—ç¬¬ä¸€å€‹énullçš„å€¼ï¼ŒOptional::get æ˜¯ç‚ºäº†å–å¾—&lt;Stream&lt;String&gt;&gt;</span><br><span class="hljs-comment">//  æ–¹æ³•æœƒå…¨æ•¸åŸ·è¡Œ</span><br><span class="hljs-built_in">String</span> found = Stream.of(getEmpty(), getHello(), getBye())<br>        .filter(Optional<span class="hljs-type">::isPresent</span>)<br>        .<span class="hljs-built_in">map</span>(Optional<span class="hljs-type">::get</span>)<br>        .findFirst()<br>        .get();<br><br><span class="hljs-comment">//  åŒæ¨£æ„æ€ï¼Œä½†æ–¹æ³•ä¸æœƒå…¨æ•¸åŸ·è¡Œ</span><br>Optional&lt;<span class="hljs-built_in">String</span>&gt; found2 =<br>      Stream.&lt;Supplier&lt;Optional&lt;<span class="hljs-built_in">String</span>&gt;&gt;&gt;of(this<span class="hljs-type">::getEmpty</span>, this<span class="hljs-type">::getHello</span>, this<span class="hljs-type">::getBye</span>)<br>              .<span class="hljs-built_in">map</span>(Supplier<span class="hljs-type">::get</span>)<br>              .filter(Optional<span class="hljs-type">::isPresent</span>)<br>              .<span class="hljs-built_in">map</span>(Optional<span class="hljs-type">::get</span>)<br>              .findFirst();<br><br><span class="hljs-comment">// è‹¥functionæƒ³è¦å¸¶ä¸Šåƒæ•¸ éœ€ä½¿ç”¨lambda</span><br>Optional&lt;<span class="hljs-built_in">String</span>&gt; found3 = Stream.&lt;Supplier&lt;Optional&lt;<span class="hljs-built_in">String</span>&gt;&gt;&gt;of(<br>              () -&gt; createOptional(<span class="hljs-string">&quot;empty&quot;</span>),<br>              () -&gt; createOptional(<span class="hljs-string">&quot;hello&quot;</span>)<br>      )<br>      .<span class="hljs-built_in">map</span>(Supplier<span class="hljs-type">::get</span>)<br>      .filter(Optional<span class="hljs-type">::isPresent</span>)<br>      .<span class="hljs-built_in">map</span>(Optional<span class="hljs-type">::get</span>)<br>      .findFirst();<br><br><br><span class="hljs-comment">//        åˆ¤æ–·æ˜¯å¦å…¨æ•¸ç‚ºnull</span><br><span class="hljs-built_in">String</span> found4 = Stream.&lt;Supplier&lt;Optional&lt;<span class="hljs-built_in">String</span>&gt;&gt;&gt;of(<br>                () -&gt; createOptional(<span class="hljs-string">&quot;empty&quot;</span>),<br>                () -&gt; createOptional(<span class="hljs-string">&quot;E&quot;</span>)<br>        )<br>        .<span class="hljs-built_in">map</span>(Supplier<span class="hljs-type">::get</span>)<br>        .filter(Optional<span class="hljs-type">::isPresent</span>)<br>        .<span class="hljs-built_in">map</span>(Optional<span class="hljs-type">::get</span>)<br>        .findFirst()<br>        .orElseGet(() -&gt; <span class="hljs-string">&quot;default&quot;</span>);<br><br>assertEquals(<span class="hljs-string">&quot;E&quot;</span>,found4);<br><br><span class="hljs-keyword">private</span> Optional&lt;<span class="hljs-built_in">String</span>&gt; getEmpty() &#123;<br>        <span class="hljs-keyword">return</span> Optional.empty();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Optional&lt;<span class="hljs-built_in">String</span>&gt; getHello() &#123;<br>        <span class="hljs-keyword">return</span> Optional.of(<span class="hljs-string">&quot;hello&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Optional&lt;<span class="hljs-built_in">String</span>&gt; getBye() &#123;<br>        <span class="hljs-keyword">return</span> Optional.of(<span class="hljs-string">&quot;bye&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Optional&lt;<span class="hljs-built_in">String</span>&gt; createOptional(<span class="hljs-built_in">String</span> input) &#123;<br>        <span class="hljs-keyword">if</span> (input == <span class="hljs-built_in">null</span> || <span class="hljs-string">&quot;&quot;</span>.<span class="hljs-keyword">equals</span>(input) || <span class="hljs-string">&quot;empty&quot;</span>.<span class="hljs-keyword">equals</span>(input)) &#123;<br>            <span class="hljs-keyword">return</span> Optional.empty();<br>        &#125;<br>        <span class="hljs-keyword">return</span> Optional.of(input);<br>    &#125;<br><br></code></pre></td></tr></table></figure></li><li>mapèˆ‡flatmap<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">public</span> static String testOptionalFlatMap(Student student) &#123;<br><br><span class="hljs-comment">// é€™æ®µæ˜¯ä½¿ç”¨Optional æª¢æ¸¬ Null</span><br>        <span class="hljs-keyword">var</span> score = student.getScore();<br>        <span class="hljs-keyword">if</span>(score.isPresent()) &#123;<br>            <span class="hljs-keyword">var</span> word = score.<span class="hljs-keyword">get</span>().getWord();<br>            <span class="hljs-keyword">if</span>(word .isPresent()) &#123;<br>                <span class="hljs-keyword">return</span> word.<span class="hljs-keyword">get</span>();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;NA&quot;</span>;<br><br><span class="hljs-comment">// é€™æ®µæ˜¯ä½¿ç”¨Optional Flatmap æª¢æ¸¬ Null</span><br>        <span class="hljs-keyword">return</span> student.getScore()<br>                .flatMap(Score::getWord)<br>                .orElse(<span class="hljs-string">&quot;n.a.&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>ä»¥ä¸Šå°±æ˜¯å¸¸è¦‹çš„åŸºæœ¬Optionalç”¨æ³•ï¼Œä¹Ÿè¨±ä¸éœ€è¦å…¨éƒ¨éƒ½æœƒï¼Œåªéœ€è¦åŸºæœ¬äº†è§£å°±å¾ˆå¤ ç”¨äº†ä¹Ÿèªªä¸å®šã€‚</li></ol><p>ä»¥ä¸Š</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Swaggeræ’°å¯«ä½ çš„ Rest API document å§!(é©ç”¨Java 17)</title>
    <link href="/2024/04/22/%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8Swagger%E5%8A%9F%E8%83%BD-%E9%81%A9%E7%94%A8Java-17/"/>
    <url>/2024/04/22/%E7%B0%A1%E5%96%AE%E4%BD%BF%E7%94%A8Swagger%E5%8A%9F%E8%83%BD-%E9%81%A9%E7%94%A8Java-17/</url>
    
    <content type="html"><![CDATA[<p>ä½œç‚ºä¸€å€‹å¾Œç«¯å·¥ç¨‹å¸«ï¼Œé™¤äº†åŸºæœ¬çš„APIé–‹ç™¼ï¼Œå¦‚ä½•æ’°å¯«å‡ºè®“äººå¥½ç†è§£çš„æ–‡ä»¶è‡³é—œé‡è¦ã€‚ä¸€ä»½å¥½çš„æ–‡ä»¶ä¸åƒ…å¯ä»¥å¹«åŠ©RDäº†è§£APIï¼Œä¹Ÿèƒ½æä¾›çµ¦PMç­‰éƒ¨é–€å»äº†è§£è‡ªå·±çš„ç”¢å“ã€‚</p><span id="more"></span>Swaggerå°±æ˜¯å› æ­¤è€Œç”Ÿï¼ŒSwaggerçš„ç‰¹è‰²æ˜¯åˆ©ç”¨Annonationæ’°å¯«æ–‡ä»¶ï¼Œå¦å¤–é€éOpenAPIï¼Œå°‡æ’°å¯«çš„å…§å®¹è½‰æˆéœæ…‹ç¶²é ï¼Œæ–‡ä»¶åªéœ€è¦æä¾›éœæ…‹ç¶²é å°±å¯ä»¥è®“å‰ç«¯äººå“¡ã€PMå»åƒè€ƒAPIçš„æ ¼å¼èˆ‡è¦ç¯„ï¼Œç›¸ç•¶æ–¹ä¾¿ã€‚<p>æœ¬æ–‡ä»¥Java 17èˆ‰ä¾‹ã€‚</p><h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><p>åœ¨Mavençš„pom.xmlæª”æ¡ˆä¸­æ·»åŠ ä»¥ä¸‹ä¾è³´ï¼Œä¸¦reloadï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springdoc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>springdoc-openapi-starter-webmvc-ui<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>æ¥è‘—è£œä¸ŠAPI(å·²ç¶“æœ‰APIçš„é€™éƒ¨åˆ†å¯ä»¥ä¸çœ‹)</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(<span class="hljs-string">&quot;/api&quot;</span>)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberController</span> &#123;<br>    <span class="hljs-meta">@PutMapping(<span class="hljs-string">&quot;/member&quot;</span>)</span><br>    <span class="hljs-keyword">public</span> String login(<span class="hljs-meta">@RequestBody</span> HashMap reqMap) &#123;<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;Start login~&quot;</span>);<br>        String response = memberService.login(reqMap);<br>        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">&quot;Response = &quot;</span> + response);<br>        <span class="hljs-keyword">return</span> response;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥è‘—è¨ªå•ä»¥ä¸‹è·¯å¾‘<br><a href="http://localhost:8080/swagger-ui/index.html">http://localhost:8080/swagger-ui/index.html</a><br>å°±å¯ä»¥çœ‹åˆ°ä¸€å€‹éœæ…‹ç¶²é ï¼Œè£¡é¢æ‡‰è©²æœ‰æ‰€æœ‰Projectçš„APIï¼Œç°¡å–®çš„å»ºç«‹å°±å®Œæˆäº†ã€‚<br>OpenAPIçš„ç‰¹è‰²æ˜¯å¯ä»¥å»ºç«‹ä¸€å€‹ç¶²é ï¼Œè®“ä½ ç€è¦½å°ˆæ¡ˆä¸­æ‰€æœ‰åœ¨åµæ¸¬ç¯„åœå…§çš„APIã€‚</p><p>ä½ å¯ä»¥è©¦è‘—ç‚ºAPIæ·»åŠ ä¸€äº›è³‡è¨Šï¼Œåƒæ˜¯é‡å°ç³»çµ±çš„åç¨±ã€æè¿°æˆ–æ˜¯é–‹ç™¼è€…çš„è³‡æ–™ç­‰ç­‰ã€‚åƒé€™æ¨£</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><br>@<span class="hljs-keyword">Configuration</span><br><span class="hljs-built_in">public</span> <span class="hljs-keyword">class</span> OpenAPIConfiguration &#123;<br><br>   @Bean<br>   <span class="hljs-built_in">public</span> OpenAPI defineOpenApi() &#123;<br>       <span class="hljs-keyword">Server</span> <span class="hljs-keyword">server</span> = <span class="hljs-built_in">new</span> <span class="hljs-keyword">Server</span>();<br>       <span class="hljs-keyword">server</span>.setUrl(&quot;http://localhost:8080&quot;);<br>       <span class="hljs-keyword">server</span>.setDescription(&quot;Development&quot;);<br><br>       Contact myContact = <span class="hljs-built_in">new</span> Contact();<br>       myContact.setName(&quot;Jane Doe&quot;);<br>       myContact.setEmail(&quot;your.email@gmail.com&quot;);<br><br>       <span class="hljs-keyword">Info</span> information = <span class="hljs-built_in">new</span> <span class="hljs-keyword">Info</span>()<br>               .title(&quot;Employee Management System API&quot;)<br>               .version(&quot;1.0&quot;)<br>               .description(&quot;This API exposes endpoints to manage employees.&quot;)<br>               .contact(myContact);<br>       <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> OpenAPI().<span class="hljs-keyword">info</span>(information).servers(List.<span class="hljs-keyword">of</span>(<span class="hljs-keyword">server</span>));<br>   &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦ç‚ºå€‹åˆ¥çš„APIæ·»åŠ æè¿°ï¼Œå¯ä»¥åƒè€ƒä»¥ä¸‹ç¨‹å¼ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-meta">@Tag(name = <span class="hljs-string">&quot;get&quot;</span>, description = <span class="hljs-string">&quot;GET methods of Employee APIs&quot;</span>)</span><br><span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/employees&quot;</span>)</span><br><span class="hljs-keyword">public</span> List&lt;Employee&gt; findAllEmployees() &#123;<br>   <span class="hljs-keyword">return</span> repository.findAll();<br>&#125;<br><br><span class="hljs-meta">@Tag(name = <span class="hljs-string">&quot;get&quot;</span>, description = <span class="hljs-string">&quot;GET methods of Employee APIs&quot;</span>)</span><br><span class="hljs-meta">@GetMapping(<span class="hljs-string">&quot;/employees/&#123;employeeId&#125;&quot;</span>)</span><br><span class="hljs-keyword">public</span> Employee getEmployee(<span class="hljs-meta">@PathVariable</span> int employeeId) &#123;<br>   Employee employee = repository.findById(employeeId)<br>           .orElseThrow(() -&gt; new RuntimeException(<span class="hljs-string">&quot;Employee id not found - &quot;</span> + employeeId));<br>   <span class="hljs-keyword">return</span> employee;<br>&#125;<br></code></pre></td></tr></table></figure><p>@Tagä¸­çš„nameä»£è¡¨äº†åˆ†é¡ï¼Œdescriptionä»£è¡¨é‡å°é€™å€‹åˆ†é¡çš„æè¿°ã€‚</p><p>å¦‚æœè¦å»ºç«‹Responseçš„æ–‡ä»¶è¦ç¯„çš„è©±ï¼Œå¯ä»¥åƒè€ƒä»¥ä¸‹ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">@ApiResponses(&#123;<br>       @ApiResponse(responseCode = <span class="hljs-string">&quot;200&quot;</span>, content = &#123; @Content(mediaType = <span class="hljs-string">&quot;application/json&quot;</span>,<br>               schema = @Schema(implementation = Employee.<span class="hljs-keyword">class</span>)) &#125;),<br>       @ApiResponse(responseCode = <span class="hljs-string">&quot;404&quot;</span>, description = <span class="hljs-string">&quot;Employee not found&quot;</span>,<br>               content = @Content) &#125;)<br>@DeleteMapping(<span class="hljs-string">&quot;/employees/&#123;employeeId&#125;&quot;</span>)<br>public <span class="hljs-built_in">String</span> deleteEmployee(@PathVariable int employeeId) &#123;<br>   Employee employee = repository.findById(employeeId)<br>           .orElseThrow(<span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">&quot;Employee id not found - &quot;</span> + employeeId));<br>   repository.<span class="hljs-keyword">delete</span>(employee);<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Deleted employee with id: &quot;</span> + employeeId;<br>&#125;<br></code></pre></td></tr></table></figure><p>@ApiResponseæ˜¯ä¸€å€‹å›å‚³æ ¼å¼ï¼Œå¯ä»¥æ’°å¯«ä¸åŒHTTPç‹€æ…‹ç¢¼çš„å›å‚³å…§å®¹ï¼Œä»¥åŠæ›´å¤šæè¿°ã€‚<br>æœ‰äº†ä»¥ä¸ŠåŠŸèƒ½ï¼Œä½ æ‡‰è©²å°±å¯ä»¥ç‚ºä½ çš„APIå¯«å‡ºè¶³å¤ æè¿°çš„æ–‡ä»¶äº†ã€‚</p><p><img src="/images/swagger-demo.png" alt="è¿™æ˜¯å›¾ç‰‡"></p><h3 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h3><ol><li><a href="https://medium.com/@berktorun.dev/swagger-like-a-pro-with-spring-boot-3-and-java-17-49eed0ce1d2f">https://medium.com/@berktorun.dev/swagger-like-a-pro-with-spring-boot-3-and-java-17-49eed0ce1d2f</a></li><li><a href="https://bell-sw.com/blog/documenting-rest-api-with-swagger-in-spring-boot-3/E">https://bell-sw.com/blog/documenting-rest-api-with-swagger-in-spring-boot-3/E</a></li></ol><p>ä»¥ä¸Š</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Spring JPA(JDK 17)çš„ä¸€äº›ç–‘é›£é›œç—‡</title>
    <link href="/2024/04/20/Spring-JPA-JDK-17-%E7%9A%84%E4%B8%80%E4%BA%9B%E7%96%91%E9%9B%A3%E9%9B%9C%E7%97%87/"/>
    <url>/2024/04/20/Spring-JPA-JDK-17-%E7%9A%84%E4%B8%80%E4%BA%9B%E7%96%91%E9%9B%A3%E9%9B%9C%E7%97%87/</url>
    
    <content type="html"><![CDATA[<h3 id="å•é¡Œä¸€"><a href="#å•é¡Œä¸€" class="headerlink" title="å•é¡Œä¸€"></a>å•é¡Œä¸€</h3><p>ä»Šå¤©åœ¨è‡ªå·±åšProjectæ™‚ï¼Œå•Ÿå‹•Projectæ™‚è€æ˜¯å‡ºç¾Spring JPA å†’å‡ºçš„éŒ¯èª¤è¨Šæ¯:not a managed type classâ€¦</p><span id="more"></span><p>é‡åˆ°æ™‚ç•¶ä¸‹æˆ‘æœ‰é»å›°æƒ‘ï¼Œå› ç‚ºä¹‹å‰åšæ™‚å¾ä¾†æ²’çœ‹éï¼Œæ‰€ä»¥åœ¨é€™é‚Šåšå€‹ç´€éŒ„ï¼š<br>éŒ¯èª¤çš„åœ°æ–¹å¦‚ä¸‹ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">package</span> com.example.payment_system.orm;<br><br><span class="hljs-keyword">import</span> javax.persistence.Column;<br><span class="hljs-keyword">import</span> javax.persistence.Entity;<br><span class="hljs-keyword">import</span> javax.persistence.Id;<br><span class="hljs-keyword">import</span> javax.persistence.Table;<br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><br><span class="hljs-meta">@Entity</span><br><span class="hljs-meta">@Table</span>(name = <span class="hljs-string">&quot;payment_member_info&quot;</span>)<br><span class="hljs-keyword">public</span> <span class="hljs-title class_"><span class="hljs-keyword">class</span> <span class="hljs-title">PaymentMemberInfo</span> </span>&#123;<br><br>    <span class="hljs-meta">@Id</span><br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_member_id&quot;</span>)<br>    <span class="hljs-keyword">private</span> Long pmiMeberId;<br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_member_name&quot;</span>,nullable = <span class="hljs-literal">false</span>,length = <span class="hljs-number">255</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> pmsMemberName;<br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_member_phone&quot;</span>,nullable = <span class="hljs-literal">false</span>,length = <span class="hljs-number">30</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> pmiMemberPhone;<br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_member_email&quot;</span>,nullable = <span class="hljs-literal">false</span>,length = <span class="hljs-number">255</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> pmiMemberEmail;<br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_member_pwd&quot;</span>,nullable = <span class="hljs-literal">false</span>,length = <span class="hljs-number">255</span>)<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">String</span> pmiMemberpwd;<br>    <span class="hljs-meta">@Column</span>(name = <span class="hljs-string">&quot;pmi_lastlogin_time&quot;</span>,nullable = <span class="hljs-literal">false</span>)<br>    <span class="hljs-keyword">private</span> LocalDateTime pmiLastloginTime;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>é€™å€‹éŒ¯èª¤ç™¼ç”Ÿçš„åŸå› ä¾†è‡ªSpringçš„JDKç‰ˆæœ¬å•é¡Œï¼Œåœ¨æ–°ç‰ˆçš„SpringBootèˆ‡JDKä¸­ï¼ŒæŠŠJavaXçµ¦æ›¿æ›æˆäº†Jakartaï¼Œæ‰€ä»¥åªè¦æ˜¯SpringBoot 6+ èˆ‡ JDK 17+ï¼Œéƒ½æ˜¯ä½¿ç”¨jakarta persist apiï¼Œåªè¦æ›æˆjakartaå°±è§£æ±ºé€™å€‹å•é¡Œäº†ã€‚</p><h3 id="å•é¡ŒäºŒ"><a href="#å•é¡ŒäºŒ" class="headerlink" title="å•é¡ŒäºŒ"></a>å•é¡ŒäºŒ</h3><p>åœ¨æ–°å»ºç«‹å°ˆæ¡ˆæ™‚é‡åˆ°éŒ¯èª¤</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Failed <span class="hljs-built_in">to</span> configure <span class="hljs-keyword">a</span> DataSource: <span class="hljs-string">&#x27;url&#x27;</span> attribute is <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">and</span> no embedded datasource could be configured.<br><br>Reason: Failed <span class="hljs-built_in">to</span> determine <span class="hljs-keyword">a</span> suitable driver class<br><br><br>Action:<br><br>Consider <span class="hljs-keyword">the</span> following:<br>If you want <span class="hljs-keyword">an</span> embedded database (H2, HSQL <span class="hljs-keyword">or</span> Derby), please <span class="hljs-built_in">put</span> <span class="hljs-keyword">it</span> <span class="hljs-keyword">on</span> <span class="hljs-title">the</span> <span class="hljs-title">classpath</span>.<br>If you have database settings <span class="hljs-built_in">to</span> be loaded <span class="hljs-built_in">from</span> <span class="hljs-keyword">a</span> particular profile you may need <span class="hljs-built_in">to</span> activate <span class="hljs-keyword">it</span> (no profiles are currently active).<br><br><br>Process finished <span class="hljs-keyword">with</span> exit code <span class="hljs-number">1</span><br><br></code></pre></td></tr></table></figure><p>é€™å¾ˆæ˜é¡¯çš„å°±æ˜¯å°‘äº†è¨­å®šè³‡æ–™åº«çš„popertiesï¼Œæ‰€ä»¥å¦‚æœé‡åˆ°çš„è©±è¦æª¢æŸ¥application.popertiesæ˜¯å¦å­˜åœ¨ä»¥ä¸‹configï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">spring.datasource.url</span>=jdbc:sqlserver://localhost:<span class="hljs-number">1433</span><span class="hljs-comment">;databaseName=payment;encrypt=false;</span><br><span class="hljs-attr">spring.datasource.username</span>=sa<br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-number">17</span>E513579<br><span class="hljs-attr">spring.datasource.driver-class-name</span>=com.microsoft.sqlserver.jdbc.SQLServerDriver<br><br></code></pre></td></tr></table></figure><p>å¾ä¸Šè‡³ä¸‹åˆ†åˆ¥æ˜¯ï¼šé€£ç·šè³‡æ–™åº«çš„urlã€é€£ç·šè³‡æ–™åº«çš„å¸³è™Ÿã€å¯†ç¢¼ã€ä»¥åŠè³‡æ–™åº«é©…å‹•ç¨‹å¼ï¼Œæ ¹æ“šä½ ä½¿ç”¨ä¸åŒçš„è³‡æ–™åº«è¦æ·»åŠ çš„ç¨æœ‰ä¸åŒï¼Œä»¥ä¸‹ä»¥SQL Serverä½œç‚ºèˆ‰ä¾‹ã€‚</p><h3 id="å•é¡Œä¸‰"><a href="#å•é¡Œä¸‰" class="headerlink" title="å•é¡Œä¸‰"></a>å•é¡Œä¸‰</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&quot;encrypt&quot; å±¬æ€§è¨­å®šç‚º &quot;true&quot; ä¸” &quot;trustServerCertificate&quot; å±¬æ€§è¨­ç‚º &quot;false&quot;ï¼Œä½†é©…å‹•ç¨‹å¼ç„¡æ³•ä½¿ç”¨å®‰å…¨é€šè¨Šç«¯å±¤ (SSL) åŠ å¯†å»ºç«‹ <span class="hljs-keyword">SQL</span> <span class="hljs-keyword">Server</span> çš„å®‰å…¨é€£ç·š: éŒ¯èª¤: PKIX <span class="hljs-type">path</span> building failed: sun.<span class="hljs-keyword">security</span>.provider.certpath.SunCertPathBuilderException: unable <span class="hljs-keyword">to</span> find <span class="hljs-keyword">valid</span> certification <span class="hljs-type">path</span> <span class="hljs-keyword">to</span> requested targetã€‚ ClientConnectionId:<span class="hljs-number">7633</span>a811-f5ed<span class="hljs-number">-4644</span>-b413<span class="hljs-number">-770e31275</span>a44<br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨é€£ç·šæ™‚å‡ºç¾ä»¥ä¸‹å•é¡Œï¼Œä»£è¡¨è³‡æ–™åº«æ²’æœ‰è¨­å®šSSLåŠ å¯†çš„ï¼Œæ–¹æ³•æœ‰å…©ç¨®ï¼Œè§£æ³•æœ‰èª¿æ•´è³‡æ–™åº«SSLåŠ å¯†ï¼Œä»¥åŠåœ¨application.popertiesè¨­å®šå–æ¶ˆåŠ å¯†å…©ç¨®æ–¹æ³•ã€‚å¦‚æœå¾Œè€…å¯ä»¥åƒè€ƒä»¥ä¸‹ç¨‹å¼ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">spring.datasource.url</span>=jdbc:sqlserver://localhost:<span class="hljs-number">1433</span><span class="hljs-comment">;databaseName=payment;encrypt=false;</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Š</p><h3 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h3><ol><li><a href="https://stackoverflow.com/questions/28664064/spring-boot-not-a-managed-type">https://stackoverflow.com/questions/28664064/spring-boot-not-a-managed-type</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é—œæ–¼æˆ‘æ‹¿åˆ°æ—¥æœ¬å…¬å¸çš„å…§å®šå»æ±ºå®šæ‹’çµ•çš„é‚£ä»¶äº‹</title>
    <link href="/2024/04/19/%E9%97%9C%E6%96%BC%E6%88%91%E6%8B%BF%E5%88%B0%E6%97%A5%E6%9C%AC%E5%85%AC%E5%8F%B8%E7%9A%84%E5%85%A7%E5%AE%9A%E5%8D%BB%E6%B1%BA%E5%AE%9A%E6%8B%92%E7%B5%95%E7%9A%84%E9%82%A3%E4%BB%B6%E4%BA%8B/"/>
    <url>/2024/04/19/%E9%97%9C%E6%96%BC%E6%88%91%E6%8B%BF%E5%88%B0%E6%97%A5%E6%9C%AC%E5%85%AC%E5%8F%B8%E7%9A%84%E5%85%A7%E5%AE%9A%E5%8D%BB%E6%B1%BA%E5%AE%9A%E6%8B%92%E7%B5%95%E7%9A%84%E9%82%A3%E4%BB%B6%E4%BA%8B/</url>
    
    <content type="html"><![CDATA[<h4 id="ä½ æœ‰æ²’æœ‰æ›¾ç¶“æƒ³éï¼Œåªè¦æ­è‘—é›»è»Šã€å°±å¯ä»¥åœ¨æ·ºè‰æ‹ç…§ï¼Ÿ-ä½ æœ‰æ²’æœ‰æƒ³éï¼Œåªè¦æ­ä¸€æœƒå…’æ–°å¹¹ç·šï¼Œå°±å¯ä»¥åœ¨äº¬éƒ½å°‹è¨ªå„åœ°æ—¥æœ¬ç¾æ™¯ï¼Ÿ"><a href="#ä½ æœ‰æ²’æœ‰æ›¾ç¶“æƒ³éï¼Œåªè¦æ­è‘—é›»è»Šã€å°±å¯ä»¥åœ¨æ·ºè‰æ‹ç…§ï¼Ÿ-ä½ æœ‰æ²’æœ‰æƒ³éï¼Œåªè¦æ­ä¸€æœƒå…’æ–°å¹¹ç·šï¼Œå°±å¯ä»¥åœ¨äº¬éƒ½å°‹è¨ªå„åœ°æ—¥æœ¬ç¾æ™¯ï¼Ÿ" class="headerlink" title="ä½ æœ‰æ²’æœ‰æ›¾ç¶“æƒ³éï¼Œåªè¦æ­è‘—é›»è»Šã€å°±å¯ä»¥åœ¨æ·ºè‰æ‹ç…§ï¼Ÿ ä½ æœ‰æ²’æœ‰æƒ³éï¼Œåªè¦æ­ä¸€æœƒå…’æ–°å¹¹ç·šï¼Œå°±å¯ä»¥åœ¨äº¬éƒ½å°‹è¨ªå„åœ°æ—¥æœ¬ç¾æ™¯ï¼Ÿ"></a>ä½ æœ‰æ²’æœ‰æ›¾ç¶“æƒ³éï¼Œåªè¦æ­è‘—é›»è»Šã€å°±å¯ä»¥åœ¨æ·ºè‰æ‹ç…§ï¼Ÿ ä½ æœ‰æ²’æœ‰æƒ³éï¼Œåªè¦æ­ä¸€æœƒå…’æ–°å¹¹ç·šï¼Œå°±å¯ä»¥åœ¨äº¬éƒ½å°‹è¨ªå„åœ°æ—¥æœ¬ç¾æ™¯ï¼Ÿ</h4><p><strong>æˆ‘æœ‰</strong></p><p>é€™é‚Šç®—æ˜¯ä¸€ç¯‡ç”Ÿæ´»çš„ç­†è¨˜ç´€éŒ„ï¼Œä¸»è¦æ˜¯æœ€è¿‘ç™¼ç”Ÿäº†å¤ªå¤šäº‹æƒ…ï¼Œä¸€æ™‚ä¹‹é–“ä¸æ›‰å¾—æ€éº¼è®“è‡ªå·±å»ç¿’æ…£é€™æ¨£çš„è®ŠåŒ–ï¼Œæ‰€ä»¥æˆ‘æ±ºå®šè¨´è«¸æ–‡å­—ï¼Œé€ééå»é™ªä¼´äº†æˆ‘æ•¸å¹´çš„æ–‡å­—ä¾†è¡¨é”å‡ºæˆ‘å…§å¿ƒä¸€éš…çš„æœŸç›¼ã€å¿è®“èˆ‡æƒ‹æƒœã€‚</p><p>æˆ‘å¾å°å°±å¾ˆå–œæ­¡æ—¥æœ¬æ–‡åŒ–ï¼Œåå­—ä¸­ä¹ŸåŒ…å«äº†æ—¥æ–‡(æ—»)ï¼Œé€™è®“æˆ‘è‡ªå°å°±è¦ºå¾—è‡ªå·±æ˜¯å€‹é©åˆæ—¥æœ¬çš„äººï¼Œæˆ‘å°æ™‚å€™çœ‹çš„å‹•ç•«å¾èˆªæµ·ç‹ï¼Œç·šä¸Šæ„›å¥‡è—çš„æ­»ç¥ï¼Œåˆ°æˆ‘æ­£å¼å…¥å®…çœ‹çš„Fate&#x2F;Zeroã€ç•¶ç´…æˆ€æ„›å–œåŠ‡æˆ‘çš„å¦¹å¦¹å“ªæœ‰é‚£éº¼å¯æ„›ã€ä¸æœ½ç¶“å…¸çš„å¹¸é‹æ˜Ÿç­‰ç­‰ï¼Œä»£è¡¨æ€§çš„å‹•ç•«ä¸è¨ˆå…¶æ•¸ã€‚ä¸åŒæ–¼è¨±å¤šåŒå­¸ï¼Œå–œæ­¡å‹•ç•«éƒ½åœ¨åœ‹ä¸­ã€é«˜ä¸­éšæ®µï¼Œæˆ‘çš„ç†±æƒ…å¾æœªé€€å»ã€‚<br>é«˜ä¸­é–‹å§‹è½Galgame OPï¼Œé–‹å§‹ä½¿ç”¨Twitterè¿½è¹¤å–œæ­¡çš„ç•«å¸«ï¼Œæ¥è§¸å¯èƒ½é€£æ—¥æœ¬äººéƒ½ä¸ç†Ÿæ‚‰çš„åŒäººèªŒèˆ‡åŒäººéŸ³æ¨‚ï¼Œé‚„æœ‰å·å·çè‘—å®¶è£¡è²·Galgameè±ªè¯ç‰¹å…¸ç‰ˆï¼Œæ›´åˆ¥èªªå®¶è£¡çš„ç‰†å£æ—©å°±è¢«æˆ‘æ›æ»¿æµ·å ±ã€æ›è»¸ã€é‚„æœ‰ç•«å¸«è¦ªç°½çš„è¤‡è£½åŸç•«ã€‚é€™äº›å¹´ä¾†æˆ‘å¾ä¾†æ²’æœ‰å¾Œæ‚”å…¥å®…éï¼Œä¸€æ¬¡éƒ½æ²’æœ‰ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä¹Ÿä¸æ˜¯ç™½å®…çš„ï¼Œæˆ‘åœ¨é«˜ä¸­ï¼Œé€£ä¸€å¥æ—¥æ–‡éƒ½ä¸æœƒèªªæ™‚ï¼Œå°±é–‹å§‹åˆ©ç”¨Youtubeå»ç¿»è­¯å‹•ç•«ã€éŠæˆ²çš„é å‘Šï¼Œå› ç‚ºæˆ‘å¸Œæœ›æœ‰è‘—è·Ÿæˆ‘åŒæ¨£å°å‹•ç•«å……æ»¿ç†±æƒ…çš„äººï¼Œä¸æœƒå› ç‚ºèªè¨€è€Œåœæ­¢è¿½é€ã€‚<br>åœ¨å¤§å­¸æ™‚ï¼Œæˆ‘æ­£å¼é–‹å§‹å­¸ç¿’æ—¥æ–‡ã€æˆ–è¨±æ˜¯å®…å¾—ç„¡å¯æ•‘è—¥çš„ç·£æ•…ï¼Œæˆ‘åªè€ƒäº†å…©æ¬¡æ—¥æ–‡æª¢å®šï¼Œå°±æ‹¿åˆ°äº†æ—¥æ–‡æª¢å®šæœ€é«˜çš„JLPT N1ã€‚ç•¶ä¸‹æ‹¿åˆ°æ™‚æˆ‘çœŸçš„å¾ˆé–‹å¿ƒã€‚<br>å›é¡§æˆ‘å­¸ç”Ÿæ™‚æœŸçš„è»Œè·¡ï¼Œæˆ‘ä»¥è‡ªå·±çš„ç†±æƒ…ç‚ºå‚²ï¼Œä¸¦å …ä¿¡è‡ªå·±çš„ç†±æƒ…çµ‚æœ‰ä¸€å¤©æœƒå¼•å°æˆ‘å‰å¾€æ›´å¥½çš„ç”Ÿæ´»ï¼Œä¹Ÿå°±æ˜¯ä½åœ¨æ—¥æœ¬ã€‚</p><h4 id="é‚£æ™‚æˆ‘é‚„ä¸çŸ¥é“è‡ªå·±æœ‰å¤šå¤©çœŸ"><a href="#é‚£æ™‚æˆ‘é‚„ä¸çŸ¥é“è‡ªå·±æœ‰å¤šå¤©çœŸ" class="headerlink" title="é‚£æ™‚æˆ‘é‚„ä¸çŸ¥é“è‡ªå·±æœ‰å¤šå¤©çœŸ**"></a>é‚£æ™‚æˆ‘é‚„ä¸çŸ¥é“è‡ªå·±æœ‰å¤šå¤©çœŸ**</h4><p>å¤§å­¸ç•¢æ¥­å¾Œçš„æˆ‘ï¼Œæˆç‚ºä¸€åè»Ÿé«”å·¥ç¨‹å¸«ï¼Œæ¯å¤©ä¸Šç­Codingï¼Œä¸‹ç­å¾Œéè‘—å¿«æ¨‚å®…çš„ç”Ÿæ´»ï¼Œç„¶è€Œä¸€æšGmailå¸å¼•äº†æˆ‘çš„ç›®å…‰ã€‚</p><p><strong>ã€Œæ—¥æœ¬ æ¨‚å¤© æ‹›å‹Ÿå°ç£å·¥ç¨‹å¸«ã€</strong></p><p>é€™å°ä¿¡å°±å¥½åƒä¸€æ»´å¢¨æ¼¬åœ¨ç™½ç´™ä¸Šæšˆé–‹èˆ¬ï¼Œæˆ‘å¿½ç„¶é–“æƒ³èµ·è‡ªå·±æ‡‰è©²è¦é–‹å§‹å˜—è©¦è‡ªå·±ä¸€ç›´ä»¥ä¾†éƒ½æƒ³è¦å˜—è©¦çš„äº‹äº†ã€‚æˆ‘è©¦è‘—æŠ•éäº†è·ç¼ºï¼Œä½†æœ€çµ‚å› ç‚ºèƒ½åŠ›ä¸è¶³è€Œè¢«åˆ·æ‰ã€‚<br>ä½†æˆ‘æ²’æœ‰æ°£é¤’ã€‚ã€Œä¸å°±æ˜¯èƒ½åŠ›å—ï¼Ÿæˆ‘å»åŸ¹é¤Šä¸å°±å¥½äº†ã€‚ã€<br>æ–¼æ˜¯æˆ‘é–‹å§‹å°è»Ÿé«”çŸ¥è­˜èªçœŸå‘å­¸ï¼Œå¾åªæœƒCodingåˆ°å¯ä»¥è¨­è¨ˆå‡ºä¸€å€‹é‚„å¯ä»¥çš„ç³»çµ±ã€‚å¯ä»¥èªªæ˜¯<br>æ—¥æœ¬æ˜¯æˆ‘ä¸€ç›´ä»¥ä¾†å‰é€²çš„å¥‘æ©Ÿï¼Œå› ç‚ºæƒ³è¦ï¼Œæ‰€ä»¥å¿…é ˆå¾—åŠªåŠ›ä¸å¯ã€‚</p><p>ä»Šå¹´ï¼Œéäº†ä¸€å¹´çš„æˆ‘ï¼Œå¸¶è‘—ä¸€å¹´è»Ÿé«”é–‹ç™¼çš„ç¶“é©—å»æŠ•éæ—¥æœ¬è·ç¼ºï¼Œæˆ‘ä½¿ç”¨Linkedinä¸Šæ‰¾å°‹æµ·å¤–èµ´æ—¥çš„é¡§å•ï¼Œè«‹ä»–å¹«æˆ‘æ‰¾é©åˆæˆ‘çš„è·ç¼ºã€‚<br>æ¥è‘—å°±æ˜¯ä¸€é€£ä¸²çš„å¿™ç¢Œæ—¥å­ï¼Œå¾ç¬¬ä¸€æ¬¡è·Ÿæ—¥æœ¬äººèªªè©±ï¼Œåˆ°é¢è©¦ç·´ç¿’ã€è·å‹™ç¶“æ­·ã€å¿—æœ›å‹•æ©Ÿã€è‡ªæˆ‘PRèˆ‡è‡ªæˆ‘ä»‹ç´¹ï¼Œæˆ‘æŠŠæˆ‘æ‰€æœ‰èƒ½åšçš„äº‹æƒ…éƒ½åšäº†ã€‚</p><p>è€Œæœ€å¾Œæˆ‘æ‹¿åˆ°çš„è·ç¼ºæ˜¯ã€Œæ´¾é£IT è»Ÿé«”å·¥ç¨‹å¸«ã€</p><p>å¾ˆæ»‘ç¨½å§ï¼ŒåŠªåŠ›åˆ°ç›¡é ­æˆ‘å¾—åˆ°çš„å±…ç„¶æ˜¯æ´¾é£ITçš„å·¥ä½œï¼Œåœ¨åœ‹å…§çš„æˆ‘é›–ç„¶ä¹Ÿåªæ˜¯åœ¨åä¸ç¶“å‚³çš„å°æ–°å‰µä¼æ¥­ï¼Œä½†å¥½æ­¹ä¹Ÿæ˜¯ä¸€ä»½æ­£è·å·¥ä½œï¼Œä½†æˆ‘è¦å»æ—¥æœ¬çš„è©±ï¼Œå±…ç„¶åªèƒ½é€éæ´¾é£ITçš„å½¢å¼éå»å—ï¼Ÿ</p><p>æˆ‘ç¢ç£¨ä¸€ç›´ä»¥ä¾†å¸¶é ˜è‡ªå·±æˆé•·èˆ‡å‰é€²çš„åŠ›é‡ï¼Œå¿ä¸ä½ç”¢ç”Ÿäº†æ‡·ç–‘ã€‚ã€Œã“ã®ã¾ã¾ã€æœ¬å½“ã«ã„ã„ã®ã‹ï¼Ÿ(é€™æ¨£ä¸‹å»çœŸçš„å¥½å—)ã€æˆ‘æœŸæœ›è‘—æ—¥æœ¬çš„ç”Ÿæ´»ï¼Œä½†å»è¦å› æ­¤çŠ§ç‰²ç›®å‰åœ¨å°ç£çš„ç”Ÿæ´»ã€å¤±å»ç©©å®šçš„å·¥ä½œï¼Œä»¥åŠæˆé•·æ€§ã€‚å°±åªæ˜¯ç‚ºäº†å‰å¾€æ—¥æœ¬ï¼Œé€™æ¨£çœŸçš„æ˜¯æœ€ä½³è§£å—ï¼Ÿ</p><p>æˆ‘å¸¶è‘—é€™ä»½å›°æƒ‘ï¼Œå‘å·¥ä½œçš„è€é—†æå‡ºäº†æˆ‘æƒ³è¦é›¢é–‹é€™ä»½å·¥ä½œå‰å¾€æ—¥æœ¬çš„äº‹ï¼Œè€é—†è¡¨ç¤ºåŒæ„ä¹Ÿé¼“å‹µæˆ‘å»è¶è‘—è‡ªå·±å¹´è¼•æ™‚è¿½é€è‡ªå·±çš„å¤¢æƒ³ã€‚</p><p>ç„¶è€Œï¼Œå¿ƒä¸­çš„é‚£ä»½ç–‘æƒ‘çµ‚æ–¼å·²æŸç¨®å½¢å¼çˆ†ç™¼å‡ºä¾†äº†ï¼Œå¿ƒä¸­ç†æ€§çš„è‡ªå·±å‘Šè¨´è‡ªå·±ä½æ‰‹ï¼Œç‚ºäº†æ—¥æœ¬æ‹‹æ£„ä¸€åˆ‡æ ¹æœ¬æ˜¯æ„šè ¢è‡³æ¥µï¼Œè‹¥æ˜¯å¤±æ•—äº†è‡ªå·±å°‡æ¯«ç„¡é€€è·¯ï¼Œè€Œå¦å¤–ä¸€é“è²éŸ³å‰‡å‘Šè¨´è‡ªå·±ï¼Œé€™æ˜¯è‡ªå·±çš„å¿—é¡˜ï¼Œç‚ºäº†æ—¥æœ¬è¿½é€è‡³ä»Šçš„è‡ªå·±ï¼Œå¦‚ä»Šå»è¦è®“æ©Ÿæœƒå¾æ‰‹ä¸­æ»‘è½å—ï¼Ÿ</p><p><strong>ã€Œç¥ç¦ï¼Œåœ¨æˆ‘å§‹æ–™æœªåŠçš„æƒ…æ³ä¸‹ï¼Œé€†è½‰æˆäº†è©›å’’ã€‚ã€</strong></p><p>é€™ä»½æ™æ‰èˆ‡ç—›è‹¦è®“æˆ‘è‹¦è‹¦æ€æ…®äº†ç›¸ç•¶ä¹…çš„ä¸€æ®µæ™‚é–“ï¼Œæœ‰å¥½å¹¾å¤©æˆ‘æ—©ä¸Šäº”é»åŠèµ·åºŠï¼Œåœ¨å®¶ä¸­é™½å°å‘†æ„£è‘—çœ‹è‘—çª—å¤–ï¼Œæµ®ç¾ä¸€æŠ¹é­šè‚šç™½çš„å¤©éš›ã€‚æœŸæœ›è‘—æœ‰èª°èƒ½çµ¦æˆ‘è§£ç­”ï¼Œä½†å›æ‡‰æˆ‘çš„åªæœ‰æˆ¶å¤–é‡ç‹—çš„å å«ã€‚</p><p>æœ€å¾Œï¼Œæˆ‘å’¬è‘—ç‰™ï¼Œæ‹‹æ£„äº†ä¸€ç›´ä»¥ä¾†æ”¯æŒæˆ‘çš„ç†æƒ³ï¼Œä¹Ÿå°±æ˜¯æ—¥æœ¬çš„ç”Ÿæ´»ã€‚æˆ‘æ˜¯ç†æƒ³çš„å›å¾’ï¼Œåƒæ˜¯å°ä¸‘ä¸€èˆ¬åœ¨Offeré¢è«‡çš„å‰ä¸€å¤©æ‹’çµ•äº†å…¥è·é‚€ç´„ï¼Œå„˜ç®¡åˆç†å»å°æˆ‘ä¾†èªªä¸åˆç†ï¼Œæˆ‘çœ‹è¦‹é¡§å•ç™¼ä¾†ç„¡æ•¸è©¢å•çš„è¨Šæ¯ï¼ŒæŠŠæ‰‹æ©Ÿä¸Ÿå‘ä¸€æ—ï¼Œèº«é«”æ·±æ·±åŸ‹å…¥äº†è¢«çª©ä¹‹ä¸­ã€‚</p><p>åˆæ˜¯ä¸€å¤©çš„äº”é»é˜èµ·åºŠï¼Œæˆ‘æœ›è‘—çª—å¤–çš„å¤©éš›ï¼Œå¿ƒè£¡ä¹Ÿæ…¢æ…¢æµ®ç¾äº†ä¸€ç·šæ›™å…‰ï¼Œç‚ºæˆ‘é•·ä¹…ä»¥ä¾†çš„æ™æ‰èˆ‡è‹¦ç—›ç•«ä¸‹äº†ä¼‘æ­¢ç¬¦ã€‚</p><p>å¤±å»äº†æ—¥æœ¬ã€å¤±å»äº†å·¥ä½œï¼Œå¦‚ä»Šçš„æˆ‘é‚„å‰©ä¸‹ä»€éº¼ï¼Ÿæˆ‘æ²’æœ‰ç­”æ¡ˆã€‚</p><p><strong>é€™æ˜¯ä¸æ˜¯æ­£ç¢ºçš„ï¼Ÿ</strong> é€™å€‹å•é¡Œæˆ‘é€£æƒ³éƒ½ä¸æ•¢æƒ³ï¼Œæˆ‘çš„æ„å¿—ä¸å¤ å …å®šï¼Œæ‰€ä»¥ä¸èƒ½å†è®“å®ƒå‚·å®³æ›´å¤šçš„äººäº†ï¼Œæˆ‘å’¬è‘—æŒ‡ç”²ï¼Œå°‡é€™ä»½è‹¦æ¾€çš„æƒ…ç·’ï¼Œä¼´éš¨æ—©é¤çš„å’–å•¡ä¸€åš¥è€Œä¸‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Insights</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ—¥æœ¬æ±‚è·</tag>
      
      <tag>é¢è©¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•å»ºç«‹è‡ªå·±çš„Githubéƒ¨è½æ ¼ ä½¿ç”¨Hexo+Github Page</title>
    <link href="/2024/04/19/%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84Github%E9%83%A8%E8%90%BD%E6%A0%BC-%E4%BD%BF%E7%94%A8Hexo-Github-Page/"/>
    <url>/2024/04/19/%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84Github%E9%83%A8%E8%90%BD%E6%A0%BC-%E4%BD%BF%E7%94%A8Hexo-Github-Page/</url>
    
    <content type="html"><![CDATA[<p>ç¶²è·¯ä¸Šç›®å‰å·²ç¶“æœ‰å¾ˆå¤šé€™é¡çš„æ•™å­¸äº†ï¼Œæ‰€ä»¥é€™ç¯‡æ¯”è¼ƒåƒæ˜¯è‡ªå·±çš„å­¸ç¿’ç´€éŒ„ã€‚</p><span id="more"></span><h3 id="Hexoæ˜¯ä»€éº¼ï¼Ÿ"><a href="#Hexoæ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Hexoæ˜¯ä»€éº¼ï¼Ÿ"></a>Hexoæ˜¯ä»€éº¼ï¼Ÿ</h3><p>Hexoæ˜¯åŸºæ–¼Node.jsé–‹ç™¼çš„ç¶²èªŒæ¡†æ¶ï¼Œç‰¹è‰²ä¸»è¦å¦‚ä¸‹ï¼š</p><ul><li>ä¸€éµéƒ¨ç½²</li><li>ç°¡å–®æ“ä½œ</li><li>æ”¯æ´MarkDownèªæ³•</li><li>å¤šç¨®æ¨¡æ¿å¯åƒè€ƒï¼Œæ›´å¤šæ¨¡æ¿å¯ä»¥åƒè€ƒ<a href="https://hexo.io/themes/">https://hexo.io/themes/</a></li></ul><h3 id="å‰ç½®ä½œæ¥­"><a href="#å‰ç½®ä½œæ¥­" class="headerlink" title="å‰ç½®ä½œæ¥­"></a>å‰ç½®ä½œæ¥­</h3><ol><li><p>å®‰è£Node.jsï¼ŒHexoéœ€è¦é€énpmå®‰è£ã€‚(<a href="https://nodejs.org/en/">https://nodejs.org/en/</a>)</p></li><li><p>å®‰è£Gitï¼Œç”¨ä¾†å°‡æª”æ¡ˆç™¼ä½ˆåˆ°Github Pageã€‚(<a href="https://git-scm.com/">https://git-scm.com/</a>)</p></li><li><p>å®‰è£Node.jså®Œæˆå¾Œé–‹å•Ÿcmdï¼Œè¼¸å…¥<strong>npm version</strong>ç¢ºä¿node.jså¯ä»¥æˆåŠŸé¡¯ç¤ºå…§å®¹ï¼Œè‹¥Node.jså®‰è£æˆåŠŸï¼Œé€™éƒ¨åˆ†æ‡‰è©²æœƒé¡¯ç¤ºä¸€å †å¥—ä»¶çš„è¨Šæ¯ã€‚</p></li><li><p>å®‰è£Hexoï¼Œåœ¨cmdè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">$ npm install hexo-<span class="hljs-keyword">cli</span> -g<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£å¥½å¾Œè¼¸å…¥ hexo versionï¼ŒæŸ¥çœ‹hexoç‰ˆæœ¬ï¼Œå¦‚æœæœ‰é¡¯ç¤ºç‰ˆæœ¬åç¨±å°±ä»£è¡¨å®‰è£æˆåŠŸäº†ã€‚</p></li><li><p>åˆå§‹åŒ–Hexoï¼Œåœ¨ä½ æƒ³è¦çš„è·¯å¾‘ä¸‹è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift">$ hexo <span class="hljs-keyword">init</span> &lt;è³‡æ–™å¤¾åç¨±&gt;<br></code></pre></td></tr></table></figure></li><li><p>å»ºç«‹å¥½å¾Œå°‡ç›®éŒ„åˆ‡é€²å»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">cd <span class="hljs-tag">&lt;<span class="hljs-name">è³‡æ–™å¤¾åç¨±</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å®‰è£npmå¥—ä»¶ï¼Œ<strong>é€™éƒ¨åˆ†é‡è¦ï¼Œä¸è¦å¿˜è¨˜</strong></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure></li><li><p>ç”¢ç”Ÿéœæ…‹æª”æ¡ˆï¼Œæœ¬åœ°å•Ÿå‹•çœ‹çœ‹</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo <span class="hljs-keyword">generate</span><br>$ hexo server<br></code></pre></td></tr></table></figure></li><li><p>Hexoé è¨­è·¯å¾‘<a href="http://localhost:4000/">http://localhost:4000/</a></p></li><li><p>é–‹å•Ÿä½ çš„Githubå¸³è™Ÿï¼Œæ²’æœ‰å°±è¨»å†Šä¸€å€‹ã€‚</p></li><li><p>Newä¸€å€‹Repositoryï¼Œä¸¦æŠŠå°ˆæ¡ˆå‘½åç‚º&lt;åå­—&gt;.github.ioï¼Œé€™éƒ¨åˆ†æ˜¯å›ºå®šçš„ï¼Œä¸å¯ä»¥è‡ªå®šç¾©ã€‚</p></li><li><p>å»ºç«‹å¥½repositoryå¾Œï¼Œå…ˆæŠŠä½ çš„å°ˆæ¡ˆç¶²å€cloneèµ·ä¾†ã€‚</p></li><li><p>åœ¨cmdè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å®‰è£gitç›¸é—œå¥—ä»¶</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure></li><li><p>èª¿æ•´Deploymentã€‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repo:</span> <span class="hljs-params">&lt;ä½ å‰›å‰›cloneçš„è·¯å¾‘&gt;</span><br><span class="hljs-symbol">  branch:</span> <span class="hljs-params">&lt;ä½ å°ˆæ¡ˆçš„branchåç¨±ï¼Œé€šå¸¸æ˜¯master&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²å®ƒ</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>hexo deploy<br></code></pre></td></tr></table></figure></li><li><p>ä½ æ‡‰è©²æœƒåœ¨Github Actionçœ‹åˆ° pages build and deployment çš„è¨Šæ¯ï¼Œè«‹è€å¿ƒç­‰ä»–è·‘å®Œï¼Œæ‡‰è©²ä¸€åˆ†é˜å…§å°±æœƒåŸ·è¡Œå®Œæˆã€‚ä½ æ‡‰è©²å¯ä»¥åœ¨https:&#x2F;&#x2F;åç¨±.github.ioçš„è·¯å¾‘ä¸‹æ‰¾åˆ°å®ƒ</p></li><li><p>ä¹‹å¾Œä½ çš„æ¯æ¬¡ä¿®æ”¹å¾Œéƒ½æ‡‰è©²è¦</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo clean    <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰å»ºç«‹çš„éœæ…‹æª”æ¡ˆ</span><br>$ hexo <span class="hljs-keyword">generate</span>     <span class="hljs-comment">// å»ºç«‹éœæ…‹é é¢</span><br>$ hexo deploy     <span class="hljs-comment">// éƒ¨ç½²è‡³ GitHub</span><br></code></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸Šå°±æ˜¯å®‰è£æ•™å­¸ã€‚æ¥ä¸‹ä¾†èªªèªªè¦æ€éº¼æ–°å¢æ–‡ç« ã€‚</p><ol><li>åœ¨cmdè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">$ hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;ä½ çš„æ–‡ç« æ¨™é¡Œ&quot;</span><br></code></pre></td></tr></table></figure></li><li>æ–°å¢ä¹‹å¾Œï¼Œä½ æ‡‰è©²å¯ä»¥åœ¨sourceè·¯å¾‘ä¸‹æ‰¾åˆ°ä½ è‡ªå·±å‰›å‰›å»ºç«‹çš„æ–‡ç« </li><li>ä½¿ç”¨Markdownèªæ³•è¼¸å…¥ä½ æƒ³å¯«çš„å…§å®¹</li><li>é‡è¤‡ä¸Šä¸€ç¯‡æ­¥é©Ÿ18çš„å‹•ä½œï¼Œä½ å°±æˆåŠŸéƒ¨ç½²æ–°çš„æ–‡ç« äº†</li></ol><h4 id="ä»¥ä¸Šã€‚"><a href="#ä»¥ä¸Šã€‚" class="headerlink" title="ä»¥ä¸Šã€‚"></a>ä»¥ä¸Šã€‚</h4><h3 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h3><ol><li><a href="https://hexo.io/zh-tw/docs/writing">https://hexo.io/zh-tw/docs/writing</a></li><li><a href="https://hackmd.io/@Heidi-Liu/note-hexo-github">https://hackmd.io/@Heidi-Liu/note-hexo-github</a></li><li><a href="https://hackmd.io/@Heidi-Liu/hexo-theme">https://hackmd.io/@Heidi-Liu/hexo-theme</a></li><li><a href="https://ithelp.ithome.com.tw/articles/10242172">https://ithelp.ithome.com.tw/articles/10242172</a></li><li><a href="https://hexo.io/zh-tw/docs/github-pages">https://hexo.io/zh-tw/docs/github-pages</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å·¥å…·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å°ä½ çš„APIé€²è¡Œæ¸¬è©¦å§ - Java Mockito API</title>
    <link href="/2024/03/02/%E5%B0%8D%E4%BD%A0%E7%9A%84API%E9%80%B2%E8%A1%8C%E6%B8%AC%E8%A9%A6%E5%90%A7-Java-Mockito-API/"/>
    <url>/2024/03/02/%E5%B0%8D%E4%BD%A0%E7%9A%84API%E9%80%B2%E8%A1%8C%E6%B8%AC%E8%A9%A6%E5%90%A7-Java-Mockito-API/</url>
    
    <content type="html"><![CDATA[<p>åœ¨é–‹ç™¼SpringBootæ‡‰ç”¨ç¨‹å¼çš„é€”ä¸­ï¼Œä¸€èˆ¬ä¾†èªªæœƒå»ºè­°ç›¡é‡è¦å¯«æ¸¬è©¦(ä½†ä¹Ÿæœ‰ä¾‹å¤–ï¼Œæ¯”å¦‚èªªæˆ‘ç¾åœ¨å¾…çš„é€™é–“)ï¼Œå…¶ä¸­æ¸¬è©¦åˆæœ‰åˆ†ç‚ºå–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ã€ç«¯å°ç«¯æ¸¬è©¦ç­‰ç­‰ã€‚<br>ä½†æœ¬æ–‡ä¸¦ä¸æ˜¯è¦èªªæ˜é€™ä¸‰è€…æ¸¬è©¦ä¹‹é–“çš„å·®åˆ¥ï¼Œè€Œæ˜¯ä»‹ç´¹æ¸¬è©¦ç”¨çš„Mockæ¡†æ¶ã€‚æ‰€ä»¥æƒ³è¦äº†è§£é‚£ä¸‰è€…ä¹‹é–“çš„å·®åˆ¥çš„äººï¼Œå¯ä»¥åƒè€ƒï¼š</p><p>ä¸€èˆ¬ä¾†èªªï¼Œæƒ³è¦åœ¨SpringBootä¸­æ’°å¯«æ¸¬è©¦æ™‚ï¼Œå°±æœƒåœ¨é è¨­çš„@SpringBootTestä¸­æ’°å¯«æ¸¬è©¦ç¨‹å¼ç¢¼ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹æ¸¬è©¦çš„ç¯„ä¾‹ï¼š</p><p>RoutingHealthæ˜¯ä¸€å€‹å­˜æ”¾æ–¼è³‡æ–™åº«çš„ç‰©ä»¶ï¼Œè©²ç‰©ä»¶å¯ä»¥æ±ºå®šé€šè·¯(è¯é‚¦éŠ€è¡Œ)æ˜¯å¦è¢«é–å®šï¼Œç³»çµ±å‡è¨­è¨­å®šäº†é–å®šçš„æ¢ä»¶ï¼Œè€Œæˆ‘è¦æ¸¬è©¦é–å®šçš„ç‹€æ³ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-meta">@MockBean</span><br>   <span class="hljs-keyword">private</span> RoutingHealthRepository rhRepo;<br>   <span class="hljs-comment">// é€™æ˜¯Mockitoä½¿ç”¨çš„å‡é€ ä¸€å€‹beanï¼Œä½¿ç”¨å‡é€ çš„ä»£è¡¨è£¡é¢å¾ˆä¹¾æ·¨ï¼Œ</span><br>   <span class="hljs-comment">//ä¸æœƒæœ‰ä»€éº¼Springçš„é…ç½®ï¼Œpopertiesç­‰éƒ½æ²’æœ‰</span><br>   <br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelDuringLockTime</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:30:48.183&quot;</span>; <span class="hljs-comment">// äº¤æ˜“æ™‚é–“</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:25:48.183&quot;</span>; <span class="hljs-comment">// ä¸Šæ¬¡UBOTè¢«é–å®šæ™‚é–“</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Y&quot;</span>; <span class="hljs-comment">// å¥åº·åº¦åˆ†æµåŠŸèƒ½</span><br>       MockDBObject(outChannel,lastTimeWasLock,healthFlag); <span class="hljs-comment">// å½é€ DBç‰©ä»¶</span><br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertFalse(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²é–‹å•Ÿï¼Œäº¤æ˜“æ™‚é–“30åˆ†é˜å…§ block success!&quot;</span>);<br>   &#125;<br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelOverLockTime</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:56:48.183&quot;</span>; <span class="hljs-comment">// æ™‚é–“è¨­å®šè¶…éå‰æ¬¡é–å®šæ™‚é–“åŠ 30åˆ†é˜</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:25:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Y&quot;</span>;<br>       MockDBObject(outChannel,lastTimeWasLock,healthFlag);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertTrue(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²é–‹å•Ÿï¼Œäº¤æ˜“æ™‚é–“è¶…é30åˆ†é˜ pass success!&quot;</span>);<br>   &#125;<br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelClosed</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:30:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023-11-24T16:25:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;N&quot;</span>; <span class="hljs-comment">// é—œé–‰å¥åº·åº¦åˆ†æµ</span><br>       MockDBObject(outChannel,lastTimeWasLock,healthFlag);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertTrue(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²é—œé–‰ï¼Œäº¤æ˜“æ™‚é–“30åˆ†é˜å…§ pass success!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelUBTestBefore</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">// UBæœªé–å®šï¼Œ</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-15T14:00:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-18T16:00:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Y&quot;</span>; <span class="hljs-comment">// å•Ÿç”¨å¥åº·åº¦åˆ†æµ</span><br>       MockDBObjectUBTest(outChannel,lastTimeWasLock,healthFlag);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertTrue(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²å•Ÿç”¨ï¼Œäº¤æ˜“æ™‚é–“æ—©æ–¼é–å®šæ™‚é–“ pass success!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelUBTestAfter</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">// UBæœªé–å®šï¼Œ</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-18T17:00:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-18T16:00:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Y&quot;</span>; <span class="hljs-comment">// å•Ÿç”¨å¥åº·åº¦åˆ†æµ</span><br>       MockDBObjectUBTest(outChannel,lastTimeWasLock,healthFlag);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertTrue(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²å•Ÿç”¨ï¼Œäº¤æ˜“æ™‚é–“æ™šæ–¼é–å®šæ™‚é–“30åˆ†é˜å¾Œ pass success!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">HealthTunnelUBTestDuring</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">// UBæœªé–å®šï¼Œ</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">outChannel</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;UBOT&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">reqTime</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-18T16:00:49.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">lastTimeWasLock</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2024-03-18T16:00:48.183&quot;</span>;<br>       <span class="hljs-type">String</span> <span class="hljs-variable">healthFlag</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Y&quot;</span>; <span class="hljs-comment">// å•Ÿç”¨å¥åº·åº¦åˆ†æµ</span><br>       MockDBObjectUBTest(outChannel,lastTimeWasLock,healthFlag);<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">isPass</span> <span class="hljs-operator">=</span> routingHealthService.getRoutingHealthByOutChannel(outChannel,reqTime);<br>       Assert.assertFalse(isPass);<br>       System.out.println(<span class="hljs-string">&quot;é–å®šç‹€æ…‹ä¸‹ï¼Œå¥åº·åº¦åˆ†æµå·²å•Ÿç”¨ï¼Œäº¤æ˜“æ™‚é–“æ–¼é–å®šæ™‚é–“30åˆ†é˜å…§ ban success!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">MockDBObjectUBTest</span><span class="hljs-params">(String outChannel,String lastTimeWasLock,String healthFlag)</span> &#123;<br>       <span class="hljs-type">RoutingHealth</span> <span class="hljs-variable">rh</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RoutingHealth</span>();<br>       rh.setRhType(outChannel);<br>       rh.setRhIsActive(<span class="hljs-string">&quot;N&quot;</span>); <span class="hljs-comment">// å‡è¨­è¯é‚¦Gatewayæ˜¯è¢«é–ä½çš„</span><br>       rh.setRhLockTime(LocalDateTime.parse(lastTimeWasLock)); <span class="hljs-comment">// è¯é‚¦Gatewayä¸Šæ¬¡è¢«é–å®šçš„æ™‚é–“é»</span><br>       Mockito.<span class="hljs-keyword">when</span>(coreFacade.getSystemSetting(SSCode.LOCK_MINUTES)).thenReturn(<span class="hljs-string">&quot;30&quot;</span>);<br>       Mockito.<span class="hljs-keyword">when</span>(coreFacade.getSystemSetting(SSCode.ROUTING_HEALTH_FLAG)).thenReturn(healthFlag); <span class="hljs-comment">// å¥åº·åº¦åˆ†æµæ˜¯å¦é–‹å•Ÿ</span><br>       Mockito.<span class="hljs-keyword">when</span>(rhRepo.getRoutingHealthByRhTypeAndRhLockTimeBetween(outChannel)).thenReturn(rh);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">MockDBObject</span><span class="hljs-params">(String outChannel,String lastTimeWasLock,String healthFlag)</span> &#123;<br>       <span class="hljs-type">RoutingHealth</span> <span class="hljs-variable">rh</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RoutingHealth</span>();<br>       rh.setRhType(outChannel);<br>       rh.setRhIsActive(<span class="hljs-string">&quot;N&quot;</span>); <span class="hljs-comment">// å‡è¨­è¯é‚¦Gatewayæ˜¯è¢«é–ä½çš„</span><br>       rh.setRhLockTime(LocalDateTime.parse(lastTimeWasLock)); <span class="hljs-comment">// è¯é‚¦Gatewayä¸Šæ¬¡è¢«é–å®šçš„æ™‚é–“é»</span><br>       Mockito.<span class="hljs-keyword">when</span>(coreFacade.getSystemSetting(SSCode.LOCK_MINUTES)).thenReturn(<span class="hljs-string">&quot;30&quot;</span>);<br>       Mockito.<span class="hljs-keyword">when</span>(coreFacade.getSystemSetting(SSCode.ROUTING_HEALTH_FLAG)).thenReturn(healthFlag); <span class="hljs-comment">// å¥åº·åº¦åˆ†æµæ˜¯å¦é–‹å•Ÿ</span><br>       Mockito.<span class="hljs-keyword">when</span>(rhRepo.getRoutingHealthByRhTypeAndRhLockTimeBetween(outChannel)).thenReturn(rh);<br>   &#125;<br>   <br>   <span class="hljs-comment">// poperties çš„å‡é€ </span><br> <span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRefundPoint</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">MainService</span> <span class="hljs-variable">mainService</span> <span class="hljs-operator">=</span> MockConfig();<br><br><span class="hljs-type">HashMap</span> <span class="hljs-variable">reqJson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>reqJson.put(<span class="hljs-string">&quot;pmMemberNo&quot;</span>,<span class="hljs-string">&quot;GID76683851296887&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;pmPointAmt&quot;</span>,<span class="hljs-string">&quot;50000&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;pointId&quot;</span>,<span class="hljs-string">&quot;ResIsFatF2-4&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;pmSellerName&quot;</span>,<span class="hljs-string">&quot;testMerchantLaLaLa&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;allowInsufficient&quot;</span>,<span class="hljs-string">&quot;Y&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;merchantNo&quot;</span>,<span class="hljs-string">&quot;0904000001&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;refundId&quot;</span>,<span class="hljs-string">&quot;ResIsChubby01&quot;</span>);<br>reqJson.put(<span class="hljs-string">&quot;mchId&quot;</span>,<span class="hljs-string">&quot;ACpay&quot;</span>);<br><br><span class="hljs-type">Fundmentals</span> <span class="hljs-variable">fundmentals</span> <span class="hljs-operator">=</span> Fundmentals.builder()<br>.tradeType(TradeType.CANCEL)<br>.apiKey(<span class="hljs-string">&quot;xyz123&quot;</span>)<br>.accessUrl(<span class="hljs-string">&quot;https://icash-apim.icashsys.com.tw/Point-UAT/v1/RefundPoint&quot;</span>).build();<br><span class="hljs-type">String</span> <span class="hljs-variable">respJSON</span> <span class="hljs-operator">=</span> mainService.mainprocedure(reqJson,fundmentals);<br>HashMap&lt;String,String&gt; result = objectMapper.readValue(respJSON, HashMap.class);<br>Assert.assertEquals(<span class="hljs-string">&quot;3003&quot;</span>,result.get(<span class="hljs-string">&quot;resultCode&quot;</span>));<br>&#125;<br><br><span class="hljs-keyword">public</span> MainService <span class="hljs-title function_">MockConfig</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">MainService</span> <span class="hljs-variable">mainService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MainService</span>();<br><span class="hljs-type">MainService</span> <span class="hljs-variable">mainService_mock</span> <span class="hljs-operator">=</span> Mockito.spy(mainService);<br>Mockito.doReturn(<span class="hljs-literal">null</span>).<span class="hljs-keyword">when</span>(mainService_mock).SendRequest(Mockito.anyObject(),Mockito.anyString()); <span class="hljs-comment">// å…ˆä¸ç™¼åˆ°OP</span><br>Mockito.doNothing().<span class="hljs-keyword">when</span>(mainService_mock).validate(Mockito.anyObject()); <span class="hljs-comment">// å…ˆä¸åšæ¬„ä½æª¢æŸ¥</span><br>ReflectionTestUtils.setField(mainService_mock, <span class="hljs-string">&quot;queryDomain&quot;</span>, <span class="hljs-string">&quot;https://icash-apim.icashsys.com.tw/Point-UAT/v1/QueryPoint&quot;</span>); <span class="hljs-comment">// ä»¿é€  @Value</span><br>ReflectionTestUtils.setField(mainService_mock, <span class="hljs-string">&quot;apiKey&quot;</span>, <span class="hljs-string">&quot;xyz123&quot;</span>); <span class="hljs-comment">// ä»¿é€  @Value</span><br><span class="hljs-keyword">return</span> mainService_mock;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="MVCResult-æ¸¬è©¦-ç«¯å°ç«¯æ¸¬è©¦"><a href="#MVCResult-æ¸¬è©¦-ç«¯å°ç«¯æ¸¬è©¦" class="headerlink" title="MVCResult æ¸¬è©¦ ç«¯å°ç«¯æ¸¬è©¦"></a>MVCResult æ¸¬è©¦ ç«¯å°ç«¯æ¸¬è©¦</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">httpHeaders</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();<br>httpHeaders.add(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>);<br>httpHeaders.add(<span class="hljs-string">&quot;Version&quot;</span>, <span class="hljs-string">&quot;1.0.1&quot;</span>);<br>httpHeaders.add(<span class="hljs-string">&quot;ClientIp&quot;</span>, <span class="hljs-string">&quot;1.1.1.1&quot;</span>);<br><br><span class="hljs-type">RequestBuilder</span> <span class="hljs-variable">requestBuilder</span> <span class="hljs-operator">=</span><br>        MockMvcRequestBuilders<br>                .get(<span class="hljs-string">&quot;/api/getPointExpectAmt&quot;</span>)<br>                .headers(httpHeaders)<br>                .param(<span class="hljs-string">&quot;pmslType&quot;</span>, <span class="hljs-string">&quot;AM&quot;</span>)<br>                .param(<span class="hljs-string">&quot;purchaseAmt&quot;</span>, <span class="hljs-string">&quot;10000&quot;</span>);<br><br><span class="hljs-type">MvcResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> mockMvc.perform(requestBuilder)<br>        .andDo(print())<br>        .andExpect(jsonPath(<span class="hljs-string">&quot;$.code&quot;</span>).value(<span class="hljs-string">&quot;0&quot;</span>))<br>        .andExpect(jsonPath(<span class="hljs-string">&quot;$.message&quot;</span>).value(<span class="hljs-string">&quot;SUCCESS&quot;</span>))<br>        .andReturn();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>Mockito</tag>
      
      <tag>UnitTest</tag>
      
      <tag>IntegrationTest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JDBC to Hibernate to JPA</title>
    <link href="/2022/10/12/JDBC-to-Hibernate-to-JPA/"/>
    <url>/2022/10/12/JDBC-to-Hibernate-to-JPA/</url>
    
    <content type="html"><![CDATA[<p>é›–ç„¶æˆ‘å€‘å‰é¢å·²ç¶“å¿«é€Ÿåœ°ä»‹ç´¹äº†åŸºæœ¬çš„ä¸‰å±¤å¼æ¶æ§‹ï¼Œ(Controllerã€Serviceèˆ‡Repository)ï¼Œä½†æˆ‘ä»Šå¤©æƒ³è¦å†è©³ç´°ä¸€é»åœ°ä»‹ç´¹ç•¶ä¸­çš„Repositoryã€‚RepositoryæŒç®¡èˆ‡è³‡æ–™åº«ä¹‹é–“äº’å‹•çš„ç´°ç¯€ã€‚</p><p>Springèˆ‡è³‡æ–™åº«æºé€šçš„æ–¹å¼æœ‰å¾ˆå¤šç¨®ï¼Œä½ ä¹Ÿè¨±è½éJDBCã€Spring JPAã€Hibernate ORM ç­‰ç­‰ï¼Œä»Šå¤©å°±æœƒä¸€ä¸€ä»‹ç´¹ä»–å€‘ã€‚</p><h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><p>Spring Framework æœ¬èº«æä¾›äº†jdbcTemplateè®“é–‹ç™¼è€…å¯ä»¥ä»¥åŸ·è¡ŒSQLçš„å½¢å¼å‘è³‡æ–™åº«æºé€šï¼Œè¦ä½¿ç”¨å‰ï¼Œé¦–å…ˆä½ æœƒéœ€è¦å¼•å…¥ç›¸é—œçš„ä¾è³´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å¦‚æœæ˜¯maven</span><br>    &lt;dependency&gt;<br>        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;<br>    &lt;/dependency&gt;<br>    &lt;dependency&gt;<br>        &lt;groupId&gt;mysql&lt;/groupId&gt;<br>        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;<br>        &lt;scope&gt;runtime&lt;/scope&gt;<br>    &lt;/dependency&gt;<br>    <br><span class="hljs-comment">// å¦‚æœæ˜¯gradle</span><br><br>implementation <span class="hljs-string">&#x27;org.springframework:spring-jdbc:6.1.12&#x27;</span><br><br></code></pre></td></tr></table></figure><p>å¼•å…¥ä¹‹å¾Œï¼Œå°±å¯ä»¥é–‹å§‹é–‹ç™¼JDBCçš„æ‡‰ç”¨ç¨‹å¼ã€‚æ³¨æ„ï¼Œç‚ºäº†é¿å…æœ‰äººå¿˜è¨˜ï¼Œæˆ‘è¦æé†’ä¸€ä¸‹ä¸‹ï¼Œé™¤äº†å¼•å…¥ä¾è³´å¤–ï¼ŒSpringBootçš„application.propertiesä¹Ÿå¿…é ˆè¦æ·»åŠ å°æ‡‰çš„è¨­å®šï¼Œæ¯”æ–¹èªªå¦‚ä¸‹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">spring.datasource.url=jdbc:mysql://localhost:3306/school</span><br><span class="hljs-string">spring.datasource.username=root</span><br><span class="hljs-string">spring.datasource.password=password</span><br><span class="hljs-string">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></code></pre></td></tr></table></figure><p>å¾ä¸Šåˆ°ä¸‹åˆ†åˆ¥æ˜¯ï¼Œè³‡æ–™åº«çš„ä½å€ã€è³‡æ–™åº«çš„å¸³è™Ÿèˆ‡å¯†ç¢¼ã€ä»¥åŠè³‡æ–™åº«çš„datasourceé©…å‹•ç¨‹å¼ã€‚å¯¦éš›ä¸Šï¼Œæ ¹æ“šä½ ä½¿ç”¨çš„è³‡æ–™åº«è³‡è¨Šæœƒæœ‰äº›å¾®å·®ç•°</p><p>jdbcTemplateå°è£äº†JDBCï¼Œä¸¦æä¾›äº†ä¸€ç³»åˆ—çš„å¯¦ä½œï¼Œå‡è¨­æˆ‘æƒ³è¦å»ºç«‹ä¸€ç­†å­¸ç”Ÿè³‡æ–™ï¼ŒJDBCæœƒé•·é€™æ¨£å­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;INSERT INTO students (name, age, gender, class) VALUES (?, ?, ?, ?)&quot;</span>;<br>jdbcTemplate.update(sql, student.getName(), student.getAge(), student.getGender(), student.getStudentClass());<br></code></pre></td></tr></table></figure><p>å‡è¨­æˆ‘å€‘æƒ³è¦æŸ¥è©¢å–®ç­†å­¸ç”Ÿçš„è³‡æ–™ã€æˆ–æ˜¯å–®ä¸€å€‹å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SELECT * FROM students WHERE id = ?&quot;</span>;<br>jdbcTemplate.queryForObject(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]&#123;id&#125;, (rs, rowNum) -&gt; &#123;<br><br>    <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>    student.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));<br>    student.setName(rs.getString(<span class="hljs-string">&quot;name&quot;</span>));<br>    student.setAge(rs.getInt(<span class="hljs-string">&quot;age&quot;</span>));<br>    student.setGender(rs.getString(<span class="hljs-string">&quot;gender&quot;</span>));<br>    student.setStudentClass(rs.getString(<span class="hljs-string">&quot;class&quot;</span>));<br>    <span class="hljs-keyword">return</span> student;<br>&#125;);<br>    <br><span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;INSERT INTO students (name, age, gender, class) VALUES (?, ?, ?, ?)&quot;</span>;<br><span class="hljs-keyword">return</span> jdbcTemplate.update(sql, student.getName(), student.getAge(), student.getGender(), student.getStudentClass());<br></code></pre></td></tr></table></figure><p>é€™æ¨£çš„æ–¹æ³•ï¼Œä½ æœƒç™¼ç¾ï¼Œå…¶å¯¦å°±åªæ˜¯Javaä¸Šé¢ä¸‹SQL Statementè€Œå·²ï¼Œè€Œä¸”ç‰©ä»¶å¿…é ˆè¦è¢«é‡æ–°è™•ç†ï¼Œå› æ­¤å¾Œé¢ç‚ºäº†å…‹æœé€™ä¸€é»ï¼Œæ‰æœ‰ORMçš„å‡ºç¾ã€‚</p><p>ORMâ”€â”€å…¨åç‚ºObjectRelatedModelï¼Œå°±æ˜¯ä»¥Javaçš„ç‰©ä»¶(Object)ç›´æ¥å°æ‡‰è‡³è³‡æ–™åº«çš„è¡¨æ ¼(Model)ï¼Œçœå»ç¹è¤‡çš„ç‰©ä»¶æ¯”å°åŠŸèƒ½ã€‚Javaä¾†èªªï¼ŒHibernateæ˜¯æœ€å¸¸è¦‹çš„ORMæ‡‰ç”¨ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å¥½è™•</p><p>â— ç”Ÿç”¢åŠ›æå‡ï¼ˆProductivityï¼‰ï¼šæ¸›å°‘æ’°å¯«è³‡æ–™å­˜å–å…ƒä»¶ç¨‹å¼ç¢¼ï¼Œèšç„¦åœ¨å•†æ¥­é‚è¼¯ã€‚</p><p>â— å®¹æ˜“ç¶­è­·ï¼ˆMaintainabilityï¼‰ï¼šç¨‹å¼ç¢¼è¼ƒå°‘ï¼Œèªæ³•ä¸Šä¾†èªªæ¯”ç´”SQLæ›´å®¹æ˜“ç¶­è­·ã€‚</p><p>â— æ•ˆèƒ½èª¿æ ¡ï¼ˆPerformanceï¼‰ï¼šç¯€çœSQLèªæ³•é™¤éŒ¯æ™‚é–“ï¼Œå¤šèŠ±æ™‚é–“èª¿æ ¡SQLé‚è¼¯æ•ˆèƒ½ã€‚</p><p>â— è³‡æ–™åº«å» å•†çš„ç¨ç«‹æ€§ï¼ˆVendor independenceï¼‰ï¼šå…é™¤å—é™æ–¼ç‰¹å®šå» å•†ï¼Œé–‹ç™¼è€…å¯æ–¼è¼•é‡è³‡æ–™åº«ä¸Šé–‹ç™¼ç¨‹å¼ï¼Œéƒ¨ç½²æ™‚å†å®‰è£è‡³æ­£å¼çš„å¤§å‹è³‡æ–™åº«ã€‚</p><p>åœ¨Hibernateçš„å®šç¾©ä¸­ï¼Œèˆ‡è³‡æ–™åº«çš„ä¸€æ¬¡å°è©±è¢«å®šç¾©ç‚ºä¸€å€‹Sessionï¼Œåœ¨ä¸€å€‹Sessionä¸­å¯ä»¥åŸ·è¡Œå¤šå€‹CRUDç­‰ç­‰æ“ä½œï¼Œèˆ‰ä¾‹ä¾†èªªï¼Œä¸€æ®µHibernateçš„ç¨‹å¼ç¢¼æœƒåƒé€™æ¨£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stduent</span>(); <br>student.setName(<span class="hljs-string">&quot;Johnson&quot;</span>); <br>student.setAge(<span class="hljs-number">18</span>); <br><br><span class="hljs-comment">// é–‹å•ŸSessionï¼Œç›¸ç•¶æ–¼é–‹å•ŸJDBCçš„Connection</span><br><span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory().openSession(); <br><span class="hljs-comment">// Transactionè¡¨ç¤ºä¸€çµ„æœƒè©±æ“ä½œ</span><br>Transaction tx= session.beginTransaction(); <br><span class="hljs-comment">// å°‡ç‰©ä»¶æ˜ å°„è‡³è³‡æ–™åº«è¡¨æ ¼ä¸­å„²å­˜</span><br>session.save(user);<br>tx.commit(); <br>session.close(); <br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼ŒHibernateä¸­ä¸€å€‹èˆ‡è³‡æ–™åº«çš„æºé€šåŸºæœ¬æµç¨‹æ˜¯é€™æ¨£çš„ï¼š</p><ol><li>Hibernateå°SQLå»ºç«‹ä¸€å€‹å°è©±(é€£ç·š) Sessionã€‚</li><li>åœ¨Sessionä¸­å»ºç«‹ä¸€å€‹Transactionã€‚</li><li>åœ¨Transactionä¸­åŸ·è¡Œå°SQLçš„æ“ä½œ ( CRUD )</li><li>å°‡æ”¹å‹•å„²å­˜ .save() æˆ–æ˜¯ .execute()</li><li>äº‹å‹™æäº¤  tx.commit() ( ä¹ŸæœƒåŒæ­¥è§¸ç™¼å°è³‡æ–™èˆ‡è³‡æ–™åº«ä¹‹é–“çš„åŒæ­¥ .flush() )</li><li>çµæŸé€™æ¬¡å°è©±ï¼Œsession.close()</li></ol><p>HibernateæˆåŠŸå¯¦ç¾äº†ä»¥Javaç‰©ä»¶æ“ä½œè³‡æ–™åº«ç‰©ä»¶çš„å¯èƒ½æ€§ï¼Œä½†ORM ç¾åœ¨æ›´å¤šäººä½¿ç”¨çš„æ˜¯SpringJPAã€‚</p><p>Spring Data JPA å°è£äº† JDBC èˆ‡ Hibernate ORMï¼Œä¸¦ä½¿ç”¨æ–¹æ³•åç¨±ä¾†Mappingè³‡æ–™åº«ã€‚æ‰€ä»¥è®“ç¨‹å¼ç¢¼æ›´åŠ çš„ç°¡å–®ã€‚å°±å¥½åƒä¹‹å‰çš„ä¾‹å­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StudentRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CrudRepository</span>&lt;Student, Long&gt; &#123;<br>    Student <span class="hljs-title function_">findByName</span><span class="hljs-params">(String name)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨é€™å€‹æ–¹æ³•ä¸­ï¼Œä½ å®Œå…¨ä¸å¿…è¦æ’°å¯«SQLèªæ³•ï¼Œå°±èƒ½å¤ é€éæ–¹æ³•åç¨±å»å–å¾—è³‡æ–™åº«ä¸­å°æ‡‰çš„è³‡æ–™ï¼Œæ¯”æ–¹èªªç”¨å§“åæ‰¾å‡ºå­¸ç”Ÿè³‡æ–™ç­‰ç­‰ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„ä»‹ç´¹ï¼Œæ„Ÿè¬å„ä½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Development</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Hibernate</tag>
      
      <tag>Spring Data JPA</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
